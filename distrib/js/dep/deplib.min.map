{"version":3,"file":"deplib.min.js","sources":["deplib.js"],"names":["root","this","previousUnderscore","_","breaker","ArrayProto","Array","prototype","ObjProto","Object","FuncProto","Function","push","slice","concat","toString","hasOwnProperty","nativeForEach","forEach","nativeMap","map","nativeReduce","reduce","nativeReduceRight","reduceRight","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","isArray","nativeKeys","keys","nativeBind","bind","obj","_wrapped","exports","module","VERSION","each","iterator","context","length","i","call","collect","results","value","index","list","reduceError","foldl","inject","memo","initial","arguments","TypeError","foldr","find","detect","predicate","result","any","select","reject","all","identity","contains","include","target","invoke","method","args","isFunc","isFunction","apply","pluck","key","property","where","attrs","matches","findWhere","max","Math","Infinity","lastComputed","computed","min","shuffle","rand","shuffled","random","sample","n","guard","values","lookupIterator","sortBy","criteria","sort","left","right","a","b","group","behavior","groupBy","has","indexBy","countBy","sortedIndex","array","low","high","mid","toArray","size","first","head","take","last","rest","tail","drop","compact","flatten","input","shallow","output","isArguments","without","difference","partition","pass","fail","elem","uniq","unique","isSorted","seen","union","intersection","item","other","zip","object","from","hasIndex","range","start","stop","step","ceil","idx","ctor","func","bound","self","partial","boundArgs","position","bindAll","funcs","Error","f","memoize","hasher","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","timestamp","callNow","once","ran","wrap","wrapper","compose","after","times","isObject","pairs","invert","functions","methods","names","extend","source","prop","pick","copy","omit","defaults","clone","tap","interceptor","eq","aStack","bStack","className","String","global","multiline","ignoreCase","aCtor","constructor","bCtor","pop","isEqual","isEmpty","isString","isElement","nodeType","name","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","isUndefined","noConflict","constant","accum","floor","Date","getTime","entityMap","escape","&","<",">","\"","'","unescape","entityRegexes","RegExp","join","string","replace","match","mixin","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","template","text","data","settings","render","matcher","offset","variable","e","chain","_chain","define","amd","Handlebars","__module4__","SafeString","__exports__","__module3__","__dependency1__","escapeChar","chr","escapeExpression","possible","test","badChars","`","__module5__","Exception","message","node","line","firstLine","firstColumn","tmp","errorProps","lineNumber","column","__module2__","__dependency2__","HandlebarsEnvironment","helpers","partials","registerDefaultHelpers","instance","registerHelper","arg","undefined","inverse","fn","ret","createFrame","j","conditional","hash","includeZero","Utils","level","parseInt","log","logger","COMPILER_REVISION","REVISION_CHANGES",1,2,3,4,"objectType","not","registerPartial","str","methodMap","DEBUG","INFO","WARN","ERROR","console","__module6__","__dependency3__","checkRevision","compilerInfo","compilerRevision","currentRevision","runtimeVersions","compilerVersions","templateSpec","env","invokePartialWrapper","VM","invokePartial","compile","container","programs","program","programWrapper","merge","param","common","programWithDepth","noop","namespace","prog","depth","__module1__","__dependency4__","__dependency5__","base","runtime","create","hb","spec","__module7__","LocationInfo","locInfo","first_line","first_column","lastColumn","last_column","lastLine","last_line","AST","ProgramNode","statements","inverseStrip","inverseLocationInfo","firstInverseNode","type","strip","MustacheNode","rawParams","open","charAt","escapeFlag","escaped","sexpr","SexprNode","isRoot","params","eligibleHelper","isHelper","isSimple","PartialNode","partialName","BlockNode","mustache","close","original","path","isInverse","ContentNode","HashNode","IdNode","parts","dig","l","part","separator","isScoped","stringModeValue","PartialNameNode","DataNode","StringNode","IntegerNode","integer","Number","BooleanNode","bool","CommentNode","comment","__module9__","handlebars","stripFlags","Parser","yy","parser","trace","symbols_","error","EOF","simpleInverse","statement","openInverse","closeBlock","openBlock","CONTENT","COMMENT","OPEN_BLOCK","CLOSE","OPEN_INVERSE","OPEN_ENDBLOCK","OPEN","OPEN_UNESCAPED","CLOSE_UNESCAPED","OPEN_PARTIAL","partial_option0","sexpr_repetition0","sexpr_option0","dataName","STRING","INTEGER","BOOLEAN","OPEN_SEXPR","CLOSE_SEXPR","hash_repetition_plus0","hashSegment","ID","EQUALS","DATA","pathSegments","SEP","$accept","$end","terminals_",5,14,15,16,18,19,20,22,23,24,25,32,33,34,35,36,40,41,42,44,"productions_","performAction","yytext","yyleng","yylineno","yystate","$$","$0","_$","$","table",8,9,11,12,13,6,7,17,21,30,43,26,10,28,27,29,31,37,38,39,"defaultActions",50,"parseError","parse","lex","token","lexer","stack","vstack","lstack","recovering","setInput","yylloc","yyloc","ranges","symbol","preErrorSymbol","state","action","r","p","len","newState","expected","yyval","errStr","showPosition","loc","_input","_more","_less","done","matched","conditionStack","ch","lines","unput","split","substr","oldLines","more","less","pastInput","past","upcomingInput","next","pre","c","tempMatch","rules","_currentRules","flex","begin","condition","popState","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","end","mu","inclusive","emu","com","INITIAL","__module8__","__module10__","Compiler","precompile","ast","environment","JavaScriptCompiler","compileInput","compiled","compiler","disassemble","opcode","opcodes","out","equals","otherOpcode","children","guid","depths","knownHelpers","helperMissing","blockHelperMissing","if","unless","with","accept","compileProgram","usePartial","addDepth","block","classifySexpr","helperSexpr","simpleSexpr","ambiguousSexpr","pair","val","stringParams","content","noEscape","isBlock","setupFullMustacheParams","knownHelpersOnly","declare","isEligible","pushParams","__module11__","Literal","nameLookup","parent","isValidJavaScriptVariableName","revision","versions","appendToBuffer","initializeBuffer","quotedString","asObject","isChild","environments","aliases","preamble","stackSlot","stackVars","registers","hashes","compileStack","inlineStack","compileChildren","stripNext","pushSource","createFunctionContext","copies","lastContext","locals","alias","substring","mergeSource","functionSource","buffer","blockValue","setupParams","replaceStack","current","splice","ambiguousBlockValue","topStack","lastHelper","appendContent","pendingContent","append","flushInline","local","popStack","appendEscaped","getContext","lookupOnContext","pushContext","pushStackLiteral","resolvePossibleLambda","functionType","lookup","lookupData","pushStringParam","pushString","emptyHash","pushHash","types","contexts","popHash","expr","pushLiteral","pushProgram","programExpression","invokeHelper","paramSize","useRegister","helper","setupHelper","nonHelper","paramsInit","callParams","helperMissingParams","invokeKnownHelper","invokeAmbiguous","helperCall","helperName","nextStack","assignToHash","child","matchExistingProgram","programParams","register","pushStack","incrStack","callback","createdStack","usedLiteral","inline","isInline","top","topStackName","entry","wrapped","missingParams","foundHelper","setupOptions","reservedWords","compilerWords","RESERVED_WORDS","__module0__","_create","UTCDate","UTC","Datetimepicker","element","that","language","dates","isRTL","rtl","formatType","format","DPGlobal","parseFormat","getDefaultFormat","isVisible","isInput","is","bootcssVer","component","componentReset","hasInput","linkField","linkFormat","minuteStep","pickerPosition","showMeridian","initialDate","_attachEvents","formatViewType","minView","convertViewMode","maxView","modes","wheelViewModeNavigation","wheelViewModeNavigationInverseDirection","wheelViewModeNavigationDelay","startViewMode","startView","viewMode","viewSelect","forceParse","picker","templateV3","appendTo","on","click","proxy","mousedown","mousewheel","addClass","toggleClass","document","closest","hide","autoclose","keyboardNavigation","todayBtn","todayHighlight","weekStart","weekEnd","startDate","endDate","daysOfWeekDisabled","setStartDate","setEndDate","setDaysOfWeekDisabled","fillDow","fillMonths","update","showMode","show","_events","_detachEvents","focus","keyup","keydown","reset","el","ev","off","height","outerHeight","place","window","stopPropagation","preventDefault","trigger","date","setValue","remove","datetimepicker","getDate","d","getUTCDate","getTimezoneOffset","setDate","setUTCDate","viewDate","fill","setFormat","formatted","getFormattedDate","formatDate","parseDate","updateNavArrows","index_highest","index_current","css","containerOffset","zIndex","outerWidth","body","clientWidth","fromArgs","dowCnt","html","daysMin","monthsShort","year","getUTCFullYear","month","getUTCMonth","dayMonth","hours","getUTCHours","minutes","getUTCMinutes","startYear","startMonth","endYear","endMonth","currentDate","valueOf","today","months","hourConverted","hoursDisplay","minutesDisplay","meridianDisplay","meridiem","toUpperCase","toggle","prevMonth","day","getDaysInMonth","getUTCDay","nextMonth","clsName","getFullYear","getMonth","inArray","empty","txt","meridian","meridianOld","actual","currentYear","removeClass","yearCont","hour","visibility","wheelPause","originalEvent","delta","wheelDelta","mode","nodeName","toLowerCase","dir","navStep","moveHour","moveDate","moveMonth","moveYear","convertViewModeText","getHours","getMinutes","getSeconds","_setDate","seconds","getUTCSeconds","setUTCMonth","setUTCFullYear","hasClass","setUTCHours","setUTCMinutes","oldViewMode","which","change","moveMinute","new_date","new_month","mag","abs","dateWithinRange","keyCode","newDate","newViewDate","dateChanged","ctrlKey","shiftKey","newViewMode","option","shift","internal_return","$this","Constructor","en","days","daysShort","suffix","navFnc","isLeapYear","field","validParts","nonpunctuation","separators","dateUTC","setMilliseconds","part_re","exec","filtered","parsed","setters_order","setters_map","hh","v","h","HH","H","ii","ss","setUTCSeconds","s","yyyy","m","cnt","M","MM","D","DD","P","dd","mm","y","Y","F","t","w","N","S","g","G","A","seps","headTemplate","headTemplateV3","contTemplate","footTemplate","old","jQuery","Timepicker","widget","$element","defaultTime","disableFocus","disableMousewheel","isOpen","modalBackdrop","orientation","secondStep","showInputs","showSeconds","appendWidgetTo","showWidgetOnAddonClick","_init","click.timepicker","showWidget","focus.timepicker","highlightUnit","keydown.timepicker","elementKeydown","blur.timepicker","blurElement","mousewheel.timepicker DOMMouseScroll.timepicker","$widget","getTemplate","widgetClick","widgetKeydown","keyup.timepicker","widgetKeyup","setDefaultTime","highlightedUnit","updateFromElementVal","clear","minute","second","decrementHour","toggleMeridian","decrementMinute","newVal","decrementSecond","highlightPrevUnit","incrementHour","highlightHour","incrementMinute","highlightMinute","incrementSecond","highlightSecond","highlightMeridian","highlightNextUnit","getCursorPosition","get","selectionStart","selection","sel","createRange","selLen","moveStart","hourTemplate","minuteTemplate","secondTemplate","meridianTemplate","templateContent","hideWidget","time","modal","detach","setSelectionRange","detail","scrollTo","scrollTop","widgetWidth","widgetHeight","visualPadding","windowWidth","width","windowHeight","parents","x","topOverflow","bottomOverflow","yorient","timepicker","dTime","setTime","ignoreWidget","timeArray","blur","updateElement","updateWidget","updateFromWidgetInputs","$input","BootstrapValidator","form","$form","bootstrapValidator","DEFAULT_OPTIONS","$invalidFields","$submitButton","STATUS_NOT_VALIDATED","STATUS_VALIDATING","STATUS_INVALID","STATUS_VALID","ieVersion","div","createElement","innerHTML","_changeEvent","_submitIfValid","_cacheFields","excluded","attr","submitButtons","threshold","live","onSuccess","onError","fields","feedbackIcons","valid","invalid","validating","elementClass","validate","$field","opts","_parseOptions","_initField","Event","bv","validator","enabled","optionName","optionValue","html5AttrName","html5AttrMap","validators","enableByHtml5","html5Attributes","onerror","onsuccess","selector","onStatus","emptyOptions","isEmptyObject","emptyValidators","getFieldElements","validatorName","total","updateAll","event","tagName","events","$parent","$message","_getMessageContainer","updateStatus","_getMessage","$icon","insertAfter","z-index","_exceedThreshold","validateField","i18n","cssClasses","_submit","isValid","eventType","_onSuccess","_onError","_isExcluded","excludedAttr","trim","cannotType","isDefaultPrevented","$invalidField","tabId","$tabPane","tab","disableSubmitButtons","defaultSubmit","_onFieldValidated","counter","numValidators","add","disabled","removeAttr","validateResult","resolve","$f","removeData","updateMessage","$fields","status","$allErrors","$errors","isValidField","$tab","isValidContainer","tooltip","placement","title","popover","$container","submit","getInvalidFields","getSubmitButton","getMessages","messages","getOptions","updateOption","addField","removeField","resetField","resetValue","resetForm","revalidateField","enableFieldValidators","getDynamicOption","destroy","functionName","ns","parameters","notInFuture","numDays","currentMonth","currentDay","luhn","mul","prodArr","sum","mod11And10","check","mod37And36","alphabet","modulus","base64","default","between","notInclusive","isNumeric","dfd","Deferred","response","choice","numChoices","creditCard","cards","AMERICAN_EXPRESS","DINERS_CLUB","DINERS_CLUB_US","DISCOVER","JCB","LASER","MAESTRO","MASTERCARD","SOLO","UNIONPAY","VISA","cusip","converted","code","charCodeAt","num","cvv","ccfield","creditCardField","creditCardType","formats","dateFormat","timeFormat","amOrPm","sections","different","compareWith","digits","ean","weight","emailAddress","emailRegExp","file","extension","maxsize","ext","extensions","html5","File","FileList","FileReader","files","maxSize","greaterThan","compareTo","grid","hex","hexColor","iban","countryNotSupported","country","countries","AD","AE","AL","AO","AT","AZ","BA","BE","BF","BG","BH","BI","BJ","BR","CH","CI","CM","CR","CV","CY","CZ","DE","DK","DO","DZ","EE","ES","FI","FO","FR","GB","GE","GI","GL","GR","GT","HR","HU","IE","IL","IR","IS","IT","JO","KW","KZ","LB","LI","LT","LU","LV","MC","MD","ME","MG","MK","ML","MR","MT","MU","MZ","NL","NO","PK","PL","PS","PT","QA","RO","RS","SA","SE","SI","SK","SM","SN","TN","TR","VG","REGEX","temp","CL","ZA","COUNTRY_CODES","_validateJMBG","countryCode","rr","k","_ba","_mk","_me","_rs","_si","_bg","_br","d1","d2","_ch","_cl","_cz","_dk","_ee","_lt","_es","_fi","centuries","+","-","individual","_hr","_ie","getCheckDigit","_is","century","gender","_lv","_nl","_ro","_se","_sk","_sm","_za","identical","imei","ip","ipv4","ipv6","isbn","checksum","chars","isin","regex","ismn","issn","lessThan","mac","notEmpty","required","numeric","phone","US","regexp","pattern","remote","url","xhr","ajax","dataType","then","abort","rtn","sedol","siren","siret","baseValue","round","precision","pow","sign","isHalf","floatMod","dotX","dotY","mod","stringCase","upper","case","stringLength","maxLength","uri","allowlocal","allowLocal","urlExp","uuid","version","patterns","vat","EL","RU","_at","_be","egn","pnf","_cy","translation","0","_de","dni","nie","cif","_fr","_gb","firstTwo","lastThree","_gr","_el","_hu","_it","_lu","_mt","_no","_pl","_pt","_ru","sum1","weight1","sum2","weight2","vin","B","C","E","J","K","L","R","T","U","V","W","X","Z","weights","reminder","zipCode","CA","SG","firstChar","secondChar","thirdChar","fourthChar","fifthChar","regexps","loginName","regExp","noChinese","mobile","mobileRegExp","tel","telRegExp","telOrMobile","rst","startTimeField","$startTimeField","startTime","startVal","endVal","factory","Zepto","doAjaxSubmit","ajaxSubmit","captureSubmittingElement","$el","clk","offsetX","clk_x","clk_y","offsetY","pageX","pageY","offsetLeft","offsetTop","debug","msg","opera","postError","feature","fileapi","formdata","FormData","hasProp","attr2","jquery","deepSerialize","extraData","serialized","traditional","decodeURIComponent","fileUploadXhr","serializedData","ajaxSettings","contentType","processData","cache","uploadProgress","upload","addEventListener","percent","loaded","lengthComputable","beforeSend","o","formData","fileUploadIframe","getDoc","frame","doc","contentWindow","err","contentDocument","doSubmit","checkState","io","readyState","cb","SERVER_ABORT","timeoutHandle","mp","et","setAttribute","skipEncodingOverride","encoding","enctype","timedOut","CLIENT_TIMEOUT_ABORT","extraInputs","isPlainObject","iframeTarget","$io","attachEvent","submitFn","aborted","callbackProcessed","deferred","location","href","iframeSrc","detachEvent","removeEventListener","errMsg","isXml","XMLDocument","isXMLDoc","domCheckCount","docRoot","documentElement","responseText","responseXML","getResponseHeader","header","headers","content-type","getAttribute","statusText","dt","scr","textarea","ta","getElementsByTagName","textContent","innerText","toXml","httpData","success","active","complete","sub","elements","getAllResponseHeaders","setRequestHeader","execCommand","ignore","csrf_token","csrf_param","forceSync","parseXML","ActiveXObject","async","loadXML","DOMParser","parseFromString","parseJSON","ct","xml","dataFilter","globalEval","veto","beforeSerialize","qx","formToArray","semantic","beforeSubmit","q","callbacks","clearForm","includeHidden","oldSuccess","replaceTarget","oldError","oldComplete","fileInputs","hasFileInputs","multipart","fileAPI","jqxhr","shouldUseFrame","iframe","closeKeepAlive","ajaxForm","delegation","isReady","ajaxFormUnbind","unbind","els2","formId","els","navigator","userAgent","jmax","fieldValue","formSerialize","fieldSerialize","successful","tag","checked","selectedIndex","ops","one","op","selected","attributes","clearFields","clearInputs","re","replaceWith","enable","$sel","URL","UMEDITOR_HOME_URL","PathStack","documentURL","separatorPattern","currentDir","currentDirPattern","protocol","getProtocol","localSeparator","parsedStack","hasProtocol","tempPath","isParentPath","getPath","currentPath","src","UMEDITOR_CONFIG","imageUrl","imagePath","imageFieldName","toolbar","getListener","force","allListeners","__allListeners","getDomNode","ltr","startFromChild","tmpNode","parentNode","UM","plugins","commands","I18N","dom","browser","agent","ie","webkit","quirks","compatMode","gecko","product","v1","v2","ie11Compat","documentMode","ie9Compat","ie8","ie8Compat","ie7Compat","ie6Compat","ie9above","ie9below","geckoRelease","chrome","safari","isCompatible","air","utils","makeInstance","extend2","inherits","subClass","superClass","oldP","newP","exclusion","timerID","removeItem","listToMap","ci","unhtml","reg","&lt;","&amp;","&quot;","&gt;","&#39;","cssStyleToDomStyle","style","float","cssFloat","styleFloat","cssName","loadFile","getItem","tmpList","ready","funs","write","getElementById","onload","onreadystatechange","fi","appendChild","fixColor","color","transUnitToPx","unit","u","cssRule","indexList","sheetStyle","styleSheets","createStyleSheet","cssText","removeChild","EventBase","addListener","listener","ti","removeListener","fireEvent","listeners","dtd","isindex","fieldset","button","label","hr","ul","menu","blockquote","noscript","center","address","h5","dl","h4","noframes","h6","ol","h1","h3","h2","ins","del","script","acronym","bdo","var","#","abbr","br","cite","kbd","strike","tt","strong","samp","em","dfn","span","img","embed","sup","basefont","applet","font","big","small","I","tr","O","Q","li","link","meta","area","col","command","dialog","keygen","track","wbr","$nonBodyContent","$block","$inline","$inlineWithA","$body","$cdata","$empty","$nonChild","$listItem","$list","$isNotEmpty","$removeEmpty","$removeEmptyBlock","$tableContent","caption","colgroup","tbody","td","tfoot","th","thead","$notTransContent","optgroup","legend","attrFix","tabindex","readonly","for","class","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","styleBlock","domUtils","NODE_ELEMENT","NODE_DOCUMENT","NODE_TEXT","NODE_COMMENT","NODE_DOCUMENT_FRAGMENT","POSITION_IDENTICAL","POSITION_DISCONNECTED","POSITION_FOLLOWING","POSITION_PRECEDING","POSITION_IS_CONTAINED","POSITION_CONTAINS","fillChar",46,"breakParent","leftNodes","rightNodes","parentClone","cloneNode","previousSibling","insertBefore","firstChild","nextSibling","trimWhiteTextNode","isWhitespace","getPosition","nodeA","nodeB","parentsA","parentsB","reverse","getNodeIndex","ignoreTextNode","preNode","inDoc","findParent","filterFn","includeSelf","isBody","findParentByTagName","tagNames","excludeFn","findParents","closerFirst","newNode","keepChildren","hasChildNodes","getNextDomNode","getPreDomNode","isBookmarkNode","getWindow","ownerDocument","defaultView","parentWindow","getCommonAncestor","clearEmptySibling","ignoreNext","ignorePre","isEmptyInlineElement","nodeValue","createTextNode","retval","splitText","getXY","offsetParent","isBlockElm","getComputedStyle","ni","arr","unSelectable","onselectstart","onclick","onkeyup","onkeydown","unselectable","MozUserSelect","webkitUserSelect","msUserSelect","KhtmlUserSelect","removeAttributes","attrNames","removeAttributeNode","getAttributeNode","removeAttribute","setAttributes","styleName","evt","returnValue","removeStyle","removeProperty","getStyle","setStyle","removeDirtyAttr","nodes","getChildCount","count","isEmptyNode","isBr","isFillChar","isInStart","isEmptyBlock","isCustomeNode","fillNode","isBoundaryNode","fillCharReg","updateCollapse","collapsed","startContainer","endContainer","startOffset","endOffset","selectOneNode","rng","setEndPoint","toStart","collapse","removeFillData","excludeNode","fillData","mergeSibling","execContentsAction","tmpStart","tmpEnd","frag","createDocumentFragment","childNodes","substringData","deleteData","currentLevel","startParents","endParents","si","ei","setStartBefore","Range","me","deleteContents","inFillChar","setStart","setEnd","setStartAfter","setEndAfter","setEndBefore","setStartAtFirst","setStartAtLast","setEndAtFirst","setEndAtLast","selectNode","selectNodeContents","cloneRange","shrinkBoundary","ignoreEnd","trimBoundary","txtToElmBoundary","textNode","ignoreCollapsed","adjust","insertNode","nextNode","setCursor","toEnd","noFillData","createBookmark","serialize","same","endNode","startNode","moveToBookmark","bookmark","adjustmentBoundary","getClosedNode","textRange","nativeRange","createControlRange","addElement","createTextRange","moveToElementText","tmpText","nativeRangeEnd","notInsertFillData","checkOffset","txtNode","win","getSelection","removeAllRanges","lastChild","addRange","createAddress","ignoreTxt","getAddress","isStart","addrs","firstIndex","addr","startAddress","endAddress","moveToAddress","getNode","scrollIntoView","$span","winScrollTop","winHeight","spanTop","getOffset","bk","getBoundaryInformation","getIndex","duplicate","parentElement","distance","siblings","testRange","startIndex","endIndex","compareEndPoints","transformIERangeToRange","ieRange","bi","_getIERange","txtRange","getNative","Selection","_bakIERange","getIERange","ieNativRng","rangeInBody","ex","hasNativeRange","nativeSel","rangeCount","getRangeAt","_cachedRange","getRange","_cachedStartElement","getStart","_cachedStartElementPath","getStartElementPath","isFocus","optimze","firstRange","lastRange","_bakRange","tmpRange","getText","editor","tis","hasContents","allHtmlEnabled","getAllHtml","getContent","loadPlugins","pi","excludePlugins","langIsReady","checkCurLang","lang","_selectionChangeTimer","uid","Editor","shortcutkeys","inputRules","outputRules","setOpt","isShow","initialContent","initialStyle","autoClearinitialContent","focusInEnd","autoClearEmptyNode","fullscreen","enterTag","langPath","theme","themePath","autoSyncData","autoHeightEnabled","getOpt","display","offsetWidth","offsetHeight","clearCache","initialCont","holder","newDiv","htmlparser","toHtml","getStyleValue","setEditor","minFrameWidth","initialFrameWidth","defaultWidth","initialFrameHeight","minFrameHeight","defaultHeight","minHeight","setExpression","_setup","cont","contentEditable","spellcheck","_isEnabled","geckoSel","_initEvents","oldExecCommand","_setDefaultContent","setContent","_selectionChange","_bindshortcutKeys","onready","nSel","setHide","setDisabled","sync","setHeight","notSetHeight","min-height","setWidth","addshortcutkey","cmd","$1","metaKey","$2","$3","queryCommandState","notSetCursor","ignoreBlank","formatter","filterOutputRule","headHtml","headHtmlForIE9","outerHTML","charset","getPlainTxt","getContentTxt","isAppendTo","notFireSelectionchange","isCdataDiv","filterInputRule","_bakNativeRange","_proxyDomEvent","altKey","mouseX","mouseY","hackForMouseUp","clientX","clientY","moveToPoint","bakGetIERange","_callCmdFn","fnName","cmdFn","cmdName","bakRange","notNeedUndo","__hasEnterExecCommand","ignoreContentChange","_ignoreContentChange","queryCommandValue","tags","cn","isEnabled","setEnabled","lastBk","bkqueryCommandState","_bkproxyDomEvent","except","keepDomEvent","_except","disable","setShow","getLang","getContentLength","ingoneHtml","addInputRule","rule","ignoreUndo","isUndoLoad","addOutputRule","filterWord","isWordDocument","transUnit","filterPasteWord","marks","insertLine","breakChar","insertIndent","indentChar","nodeToHtml","isText","isComment","notTransTagName","attrhtml","notTransAttrs","getNodeById","getAttr","getNodesByTagName","nodeTraversal","uNode","_src","_href","cdata_data","createText","noTrans","htmlstr","tmpRoot","textStr","getData","replaceChild","cj","attrName","setAttr","attrVal","hasAttr","cssStyle","classNames","classes","cl","traversal","needChild","htmlattr","needParentTag","needParentNode","hasParent","tmpParent","elm","re_attr","re_tag","allowEmptyTags","currentIndex","nextIndex","currentParent","lastIndex","filterNode","tmpVal","tmpAttrs","tmpCssStyle","notNeedFilter","filterRules","hadBreak","opt","border","alt","hspace","vspace","fonts","forecolor","backcolor","fontsize","fontfamily","cmdNameToStyle","cmdNameToAttr","48","commonAncestorContainer","autourldetectinie","overflow","compareAddr","indexA","indexB","compareRangeAddress","rngAddrA","rngAddrB","UndoManager","hasUndo","hasRedo","undo","restore","redo","scene","fillchar","orgState","noNeedFillCharTags","clearKey","getScene","rngAddress","save","notCompareRange","saveSceneTimer","currentScene","lastScene","maxUndoCount","keycont","lastKeyCode","saveScene","undoManger","maxInputCount","exclude","inputType","Undo","Redo","isCollapsed","interalTimer","setInterval","clearInterval","getClipboardData","pastebin","pastebins","querySelectorAll","brs","pN","di","divs","tmpP","metas","dirtyNodes","spans","insertorderedlist","decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","insertunorderedlist","circle","disc","square","sourceEditors","onresize","dispose","createSourceEditor","sourceEditor","sourceMode","sourceEditorFirst","bakAddress","oldGetContent","oldQueryCommandState","hTag","doSave","startTd","endTd","formula","basestyles","Bold","Italic","Underline","strikeThrough","bold","underline","superscript","subscript","italic","strikethrough","creatInsertStr","align","toEmbed","switchImgAndEmbed","img2embed","videoObjs","vi","flag","selectAll","removeFormatTags","removeFormatAttributes","notIncludeA","isRedundantSpan","specified","doRemove","bookmark1","enlarge","aNode","tagReg","currentNode","autoClearTagName","saveData","lastSaveTime","MIN_TIME","saveKey","LocalStorage","_saveFlag","saveLocalData","getUserData","addBehavior","load","LOCAL_FILE","setItem","storage","localStorage","getLocalData","_suffix","host","pathname","saveInterval","getPasteImage","clipboardData","items","getDropImage","dataTransfer","sendAndInsertImage","fd","XMLHttpRequest","json","eval","picLink","er","send","autoUploadHandler","hasImg","getAsFile","getActiveIframe","blurActiveIframe","latex","data-latex","insertLatex","getLatex","_createClass","ClassObj","properties","supperClass","ui","_widget","supper","defaultOpt","parentDefaultOptions","subDefaultOptions","mergeToJQ","_prefix","edui","parseTmpl","tmpl","notCover","IE6","_eventHandler","_$el","eventName","evtname","$els","handler","_guid","_obj","widgetName","init","tpl","icon","caret","texttype","wrapclick","hover","mergeWith","$obj","$root","appendToBtnmenu","$cont","$item","fnname","topOffset","leftOffset","$parentmenu","attachTo","mouseover","mouseout","currentVal","addSubmenu","$node","delegate","colorLabel","stopprop","subtpl","mergeTpl","posObj","caretTop","caretLeft","caretDir","getBodyContainer","$doc","$wrap","initStyle","startPos","prePos","dragId","hand","srcElement","updateContainerStyle","updateTargetElement","$target","$dom","rect","_validScaledProp","$ele","calc","imgPos","getScaleTarget","COLORS","lang_themeColor","lang_standardColor","itemClassName","HOVER_CLASS","ICON_CLASS","labelClassName","recordStack","comboboxName","autoRecord","recordCount","_optionAdaptation","_createItemMapping","iconClass","_transStack","initEvent","initSelectItem","initItemActive","labelClass","$li","mouseenter","mouseleave","itemCount","autowidthitem","_update","selectItemByLabel","itemMapping","itemIndex","itemStyles","stackItem","mapping","newStack","newChilds","unshift","btnWidget","eduibutton","cancellabel","oklabel","backdrop","keyboard","okFn","cancelFn","ok","autoCenter","showTip","fadeIn","hideTip","fadeOut","hideModal","removeBackdrop","$backdrop","currentTarget","slr","$cur","$ul","$tmp","relatedTarget","activate","$active","_editorUI","_editors","_readyFn","_activeWidget","_widgetData","_widgetCallBack","_cacheUI","_maxZIndex","registerUI","uiname","registerWidget","pro","_preventDefault","getWidgetData","setWidgetBody","getWidgetCallback","initContent","setActiveWidget","getEditor","createEditor","setTopEditor","delEditor","renderUI","createUI","eduitooltip","$editorCont","before","createToolbar","$toolbar","eduitoolbar","btns","uiNames","eduiseparator","$btn","Fullscreen","FULLSCREENS","STATUS_CACHE","STATUS_LIST","CONTENT_AREA_STATUS","DOCUMENT_STATUS","DOCUMENT_ELEMENT_STATUS","$button","labelMap","getInstance","_edui_fullscreen_status","isFullState","revert","saveSataus","setDocumentStatus","resize","getEditorHolder","revertContainerStatus","revertContentAreaStatus","revertDocumentStatus","isFull","$win","borderWidth","paddingWidth","editorBody","getBound","margin","padding","overflowX","overflowY","withoutToolbar","styles","saveContentAreaStatus","saveDocumentStatus","$holder","getEditorDocumentBody","getEditorDocumentElement","getEditorStatus","getContentAreaStatus","supportMin","getDocumentStatus","_support","getBoundingClientRect","listen","timer","_hasFullscreenListener","currentRange","$dialog","buttons","cancel","eduimodal","eduipopup","$imagescale","eduiscale","_keyDownHandler","_mouseDownHandler","ele","autoFloatEnabled","optsAutoFloatEnabled","checkHasUI","alert","autofloatMsg","fixIE6FixedPos","docStyle","backgroundImage","backgroundAttachment","setFloating","isFullScreening","toobarBoxPos","toolbarBox","origalFloat","origalLeft","placeHolder","LteIE6","orgTop","unsetFloating","bakCssText","updateFloating","rect3","toolbarTopOffset","bottom","bcr","frameElement","defer_updateFloating","wordCountAdaptive","word","hasSuffix","$tmpNode","transForParagraph","tempItems","transForFontfamily","transForFontsize","$combox","comboboxWidget","eduibuttoncombobox","res","getCurrentColor","$colorLabel","$colorPickerWidget","eduicolorsplitbutton","eduicolorpicker","lang_clearColor","colorPickerWidget","anchor","indent","snapscreen","fontborder","formatmatch","pasteplain","selectall","print","preview","horizontal","removeformat","unlink","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","cleardoc","insertparagraphbeforetable","insertcode","paragraph","image","edittable","edittd","emotion","spechars","searchreplace","gmap","video","help","justifyleft","justifyright","justifycenter","justifyjustify","directionalityltr","directionalityrtl","rowspacingtop","rowspacingbottom","highlightcode","pagebreak","insertframe","imagenone","imageleft","imageright","attachment","imagecenter","wordimage","lineheight","edittip","customstyle","autotypeset","webapp","touppercase","tolowercase","background","scrawl","music","inserttable","drafts","songti","kaiti","heiti","lishu","yahei","andaleMono","arial","arialBlack","comicSansMs","impact","timesNewRoman","closeDialog","tableDrag","anthorMsg","clearColor","standardColor","themeColor","modify","justify","anchorMsg","delete","clickToUpload","unset","t_row","t_col","pasteOpt","pasteSourceFormat","tagFormat","pasteTextFormat","static","lang_tab_local","lang_tab_imgSearch","lang_input_dragTip","lang_btn_add","uploadError","lang_input_choice","lang_input_Tuzki","lang_input_BOBO","lang_input_lvdouwa","lang_input_babyCat","lang_input_bubble","lang_input_youa","lang_input_address","lang_input_search","searchError","lang_input_text","lang_input_url","lang_input_title","lang_input_target","validLink","httpPrompt","lang_city","lang_address","city","lang_search","lang_dynamicmap","cityMsg","errorMsg","lang_tab_insertV","lang_video_url","lang_video_size","lang_videoW","lang_videoH","lang_alignment","videoSearchTxt","videoType","videoSearchBtn","videoSearchReset","numError","floatLeft","floatRight","urlError","loading","clickToSelect","goToSource","noVideo","lang_tab_common","lang_tab_symbol","lang_tab_letter"],"mappings":"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","sourcesContent":["/** \r\n * -------------------------------------------------\r\n * Copyright (c) 2014, All rights reserved. \r\n * Hualala-Merchant-Management\r\n * \r\n * @version : 0.1.0\r\n * @author : HuHao\r\n * @description : Hualala Merchant Management System.  \r\n * -------------------------------------------------\r\n */ \r\n\r\n//     Underscore.js 1.6.0\r\n//     http://underscorejs.org\r\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n//     Underscore may be freely distributed under the MIT license.\r\n\r\n(function() {\r\n\r\n  // Baseline setup\r\n  // --------------\r\n\r\n  // Establish the root object, `window` in the browser, or `exports` on the server.\r\n  var root = this;\r\n\r\n  // Save the previous value of the `_` variable.\r\n  var previousUnderscore = root._;\r\n\r\n  // Establish the object that gets returned to break out of a loop iteration.\r\n  var breaker = {};\r\n\r\n  // Save bytes in the minified (but not gzipped) version:\r\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\r\n\r\n  // Create quick reference variables for speed access to core prototypes.\r\n  var\r\n    push             = ArrayProto.push,\r\n    slice            = ArrayProto.slice,\r\n    concat           = ArrayProto.concat,\r\n    toString         = ObjProto.toString,\r\n    hasOwnProperty   = ObjProto.hasOwnProperty;\r\n\r\n  // All **ECMAScript 5** native function implementations that we hope to use\r\n  // are declared here.\r\n  var\r\n    nativeForEach      = ArrayProto.forEach,\r\n    nativeMap          = ArrayProto.map,\r\n    nativeReduce       = ArrayProto.reduce,\r\n    nativeReduceRight  = ArrayProto.reduceRight,\r\n    nativeFilter       = ArrayProto.filter,\r\n    nativeEvery        = ArrayProto.every,\r\n    nativeSome         = ArrayProto.some,\r\n    nativeIndexOf      = ArrayProto.indexOf,\r\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\r\n    nativeIsArray      = Array.isArray,\r\n    nativeKeys         = Object.keys,\r\n    nativeBind         = FuncProto.bind;\r\n\r\n  // Create a safe reference to the Underscore object for use below.\r\n  var _ = function(obj) {\r\n    if (obj instanceof _) return obj;\r\n    if (!(this instanceof _)) return new _(obj);\r\n    this._wrapped = obj;\r\n  };\r\n\r\n  // Export the Underscore object for **Node.js**, with\r\n  // backwards-compatibility for the old `require()` API. If we're in\r\n  // the browser, add `_` as a global object via a string identifier,\r\n  // for Closure Compiler \"advanced\" mode.\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = _;\r\n    }\r\n    exports._ = _;\r\n  } else {\r\n    root._ = _;\r\n  }\r\n\r\n  // Current version.\r\n  _.VERSION = '1.6.0';\r\n\r\n  // Collection Functions\r\n  // --------------------\r\n\r\n  // The cornerstone, an `each` implementation, aka `forEach`.\r\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\r\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\r\n  var each = _.each = _.forEach = function(obj, iterator, context) {\r\n    if (obj == null) return obj;\r\n    if (nativeForEach && obj.forEach === nativeForEach) {\r\n      obj.forEach(iterator, context);\r\n    } else if (obj.length === +obj.length) {\r\n      for (var i = 0, length = obj.length; i < length; i++) {\r\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\r\n      }\r\n    } else {\r\n      var keys = _.keys(obj);\r\n      for (var i = 0, length = keys.length; i < length; i++) {\r\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\r\n      }\r\n    }\r\n    return obj;\r\n  };\r\n\r\n  // Return the results of applying the iterator to each element.\r\n  // Delegates to **ECMAScript 5**'s native `map` if available.\r\n  _.map = _.collect = function(obj, iterator, context) {\r\n    var results = [];\r\n    if (obj == null) return results;\r\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\r\n    each(obj, function(value, index, list) {\r\n      results.push(iterator.call(context, value, index, list));\r\n    });\r\n    return results;\r\n  };\r\n\r\n  var reduceError = 'Reduce of empty array with no initial value';\r\n\r\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\r\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\r\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\r\n    var initial = arguments.length > 2;\r\n    if (obj == null) obj = [];\r\n    if (nativeReduce && obj.reduce === nativeReduce) {\r\n      if (context) iterator = _.bind(iterator, context);\r\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\r\n    }\r\n    each(obj, function(value, index, list) {\r\n      if (!initial) {\r\n        memo = value;\r\n        initial = true;\r\n      } else {\r\n        memo = iterator.call(context, memo, value, index, list);\r\n      }\r\n    });\r\n    if (!initial) throw new TypeError(reduceError);\r\n    return memo;\r\n  };\r\n\r\n  // The right-associative version of reduce, also known as `foldr`.\r\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\r\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\r\n    var initial = arguments.length > 2;\r\n    if (obj == null) obj = [];\r\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\r\n      if (context) iterator = _.bind(iterator, context);\r\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\r\n    }\r\n    var length = obj.length;\r\n    if (length !== +length) {\r\n      var keys = _.keys(obj);\r\n      length = keys.length;\r\n    }\r\n    each(obj, function(value, index, list) {\r\n      index = keys ? keys[--length] : --length;\r\n      if (!initial) {\r\n        memo = obj[index];\r\n        initial = true;\r\n      } else {\r\n        memo = iterator.call(context, memo, obj[index], index, list);\r\n      }\r\n    });\r\n    if (!initial) throw new TypeError(reduceError);\r\n    return memo;\r\n  };\r\n\r\n  // Return the first value which passes a truth test. Aliased as `detect`.\r\n  _.find = _.detect = function(obj, predicate, context) {\r\n    var result;\r\n    any(obj, function(value, index, list) {\r\n      if (predicate.call(context, value, index, list)) {\r\n        result = value;\r\n        return true;\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n\r\n  // Return all the elements that pass a truth test.\r\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\r\n  // Aliased as `select`.\r\n  _.filter = _.select = function(obj, predicate, context) {\r\n    var results = [];\r\n    if (obj == null) return results;\r\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(predicate, context);\r\n    each(obj, function(value, index, list) {\r\n      if (predicate.call(context, value, index, list)) results.push(value);\r\n    });\r\n    return results;\r\n  };\r\n\r\n  // Return all the elements for which a truth test fails.\r\n  _.reject = function(obj, predicate, context) {\r\n    return _.filter(obj, function(value, index, list) {\r\n      return !predicate.call(context, value, index, list);\r\n    }, context);\r\n  };\r\n\r\n  // Determine whether all of the elements match a truth test.\r\n  // Delegates to **ECMAScript 5**'s native `every` if available.\r\n  // Aliased as `all`.\r\n  _.every = _.all = function(obj, predicate, context) {\r\n    predicate || (predicate = _.identity);\r\n    var result = true;\r\n    if (obj == null) return result;\r\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(predicate, context);\r\n    each(obj, function(value, index, list) {\r\n      if (!(result = result && predicate.call(context, value, index, list))) return breaker;\r\n    });\r\n    return !!result;\r\n  };\r\n\r\n  // Determine if at least one element in the object matches a truth test.\r\n  // Delegates to **ECMAScript 5**'s native `some` if available.\r\n  // Aliased as `any`.\r\n  var any = _.some = _.any = function(obj, predicate, context) {\r\n    predicate || (predicate = _.identity);\r\n    var result = false;\r\n    if (obj == null) return result;\r\n    if (nativeSome && obj.some === nativeSome) return obj.some(predicate, context);\r\n    each(obj, function(value, index, list) {\r\n      if (result || (result = predicate.call(context, value, index, list))) return breaker;\r\n    });\r\n    return !!result;\r\n  };\r\n\r\n  // Determine if the array or object contains a given value (using `===`).\r\n  // Aliased as `include`.\r\n  _.contains = _.include = function(obj, target) {\r\n    if (obj == null) return false;\r\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\r\n    return any(obj, function(value) {\r\n      return value === target;\r\n    });\r\n  };\r\n\r\n  // Invoke a method (with arguments) on every item in a collection.\r\n  _.invoke = function(obj, method) {\r\n    var args = slice.call(arguments, 2);\r\n    var isFunc = _.isFunction(method);\r\n    return _.map(obj, function(value) {\r\n      return (isFunc ? method : value[method]).apply(value, args);\r\n    });\r\n  };\r\n\r\n  // Convenience version of a common use case of `map`: fetching a property.\r\n  _.pluck = function(obj, key) {\r\n    return _.map(obj, _.property(key));\r\n  };\r\n\r\n  // Convenience version of a common use case of `filter`: selecting only objects\r\n  // containing specific `key:value` pairs.\r\n  _.where = function(obj, attrs) {\r\n    return _.filter(obj, _.matches(attrs));\r\n  };\r\n\r\n  // Convenience version of a common use case of `find`: getting the first object\r\n  // containing specific `key:value` pairs.\r\n  _.findWhere = function(obj, attrs) {\r\n    return _.find(obj, _.matches(attrs));\r\n  };\r\n\r\n  // Return the maximum element or (element-based computation).\r\n  // Can't optimize arrays of integers longer than 65,535 elements.\r\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\r\n  _.max = function(obj, iterator, context) {\r\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\r\n      return Math.max.apply(Math, obj);\r\n    }\r\n    var result = -Infinity, lastComputed = -Infinity;\r\n    each(obj, function(value, index, list) {\r\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\r\n      if (computed > lastComputed) {\r\n        result = value;\r\n        lastComputed = computed;\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n\r\n  // Return the minimum element (or element-based computation).\r\n  _.min = function(obj, iterator, context) {\r\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\r\n      return Math.min.apply(Math, obj);\r\n    }\r\n    var result = Infinity, lastComputed = Infinity;\r\n    each(obj, function(value, index, list) {\r\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\r\n      if (computed < lastComputed) {\r\n        result = value;\r\n        lastComputed = computed;\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n\r\n  // Shuffle an array, using the modern version of the\r\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\r\n  _.shuffle = function(obj) {\r\n    var rand;\r\n    var index = 0;\r\n    var shuffled = [];\r\n    each(obj, function(value) {\r\n      rand = _.random(index++);\r\n      shuffled[index - 1] = shuffled[rand];\r\n      shuffled[rand] = value;\r\n    });\r\n    return shuffled;\r\n  };\r\n\r\n  // Sample **n** random values from a collection.\r\n  // If **n** is not specified, returns a single random element.\r\n  // The internal `guard` argument allows it to work with `map`.\r\n  _.sample = function(obj, n, guard) {\r\n    if (n == null || guard) {\r\n      if (obj.length !== +obj.length) obj = _.values(obj);\r\n      return obj[_.random(obj.length - 1)];\r\n    }\r\n    return _.shuffle(obj).slice(0, Math.max(0, n));\r\n  };\r\n\r\n  // An internal function to generate lookup iterators.\r\n  var lookupIterator = function(value) {\r\n    if (value == null) return _.identity;\r\n    if (_.isFunction(value)) return value;\r\n    return _.property(value);\r\n  };\r\n\r\n  // Sort the object's values by a criterion produced by an iterator.\r\n  _.sortBy = function(obj, iterator, context) {\r\n    iterator = lookupIterator(iterator);\r\n    return _.pluck(_.map(obj, function(value, index, list) {\r\n      return {\r\n        value: value,\r\n        index: index,\r\n        criteria: iterator.call(context, value, index, list)\r\n      };\r\n    }).sort(function(left, right) {\r\n      var a = left.criteria;\r\n      var b = right.criteria;\r\n      if (a !== b) {\r\n        if (a > b || a === void 0) return 1;\r\n        if (a < b || b === void 0) return -1;\r\n      }\r\n      return left.index - right.index;\r\n    }), 'value');\r\n  };\r\n\r\n  // An internal function used for aggregate \"group by\" operations.\r\n  var group = function(behavior) {\r\n    return function(obj, iterator, context) {\r\n      var result = {};\r\n      iterator = lookupIterator(iterator);\r\n      each(obj, function(value, index) {\r\n        var key = iterator.call(context, value, index, obj);\r\n        behavior(result, key, value);\r\n      });\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Groups the object's values by a criterion. Pass either a string attribute\r\n  // to group by, or a function that returns the criterion.\r\n  _.groupBy = group(function(result, key, value) {\r\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\r\n  });\r\n\r\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\r\n  // when you know that your index values will be unique.\r\n  _.indexBy = group(function(result, key, value) {\r\n    result[key] = value;\r\n  });\r\n\r\n  // Counts instances of an object that group by a certain criterion. Pass\r\n  // either a string attribute to count by, or a function that returns the\r\n  // criterion.\r\n  _.countBy = group(function(result, key) {\r\n    _.has(result, key) ? result[key]++ : result[key] = 1;\r\n  });\r\n\r\n  // Use a comparator function to figure out the smallest index at which\r\n  // an object should be inserted so as to maintain order. Uses binary search.\r\n  _.sortedIndex = function(array, obj, iterator, context) {\r\n    iterator = lookupIterator(iterator);\r\n    var value = iterator.call(context, obj);\r\n    var low = 0, high = array.length;\r\n    while (low < high) {\r\n      var mid = (low + high) >>> 1;\r\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\r\n    }\r\n    return low;\r\n  };\r\n\r\n  // Safely create a real, live array from anything iterable.\r\n  _.toArray = function(obj) {\r\n    if (!obj) return [];\r\n    if (_.isArray(obj)) return slice.call(obj);\r\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\r\n    return _.values(obj);\r\n  };\r\n\r\n  // Return the number of elements in an object.\r\n  _.size = function(obj) {\r\n    if (obj == null) return 0;\r\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\r\n  };\r\n\r\n  // Array Functions\r\n  // ---------------\r\n\r\n  // Get the first element of an array. Passing **n** will return the first N\r\n  // values in the array. Aliased as `head` and `take`. The **guard** check\r\n  // allows it to work with `_.map`.\r\n  _.first = _.head = _.take = function(array, n, guard) {\r\n    if (array == null) return void 0;\r\n    if ((n == null) || guard) return array[0];\r\n    if (n < 0) return [];\r\n    return slice.call(array, 0, n);\r\n  };\r\n\r\n  // Returns everything but the last entry of the array. Especially useful on\r\n  // the arguments object. Passing **n** will return all the values in\r\n  // the array, excluding the last N. The **guard** check allows it to work with\r\n  // `_.map`.\r\n  _.initial = function(array, n, guard) {\r\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\r\n  };\r\n\r\n  // Get the last element of an array. Passing **n** will return the last N\r\n  // values in the array. The **guard** check allows it to work with `_.map`.\r\n  _.last = function(array, n, guard) {\r\n    if (array == null) return void 0;\r\n    if ((n == null) || guard) return array[array.length - 1];\r\n    return slice.call(array, Math.max(array.length - n, 0));\r\n  };\r\n\r\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\r\n  // Especially useful on the arguments object. Passing an **n** will return\r\n  // the rest N values in the array. The **guard**\r\n  // check allows it to work with `_.map`.\r\n  _.rest = _.tail = _.drop = function(array, n, guard) {\r\n    return slice.call(array, (n == null) || guard ? 1 : n);\r\n  };\r\n\r\n  // Trim out all falsy values from an array.\r\n  _.compact = function(array) {\r\n    return _.filter(array, _.identity);\r\n  };\r\n\r\n  // Internal implementation of a recursive `flatten` function.\r\n  var flatten = function(input, shallow, output) {\r\n    if (shallow && _.every(input, _.isArray)) {\r\n      return concat.apply(output, input);\r\n    }\r\n    each(input, function(value) {\r\n      if (_.isArray(value) || _.isArguments(value)) {\r\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\r\n      } else {\r\n        output.push(value);\r\n      }\r\n    });\r\n    return output;\r\n  };\r\n\r\n  // Flatten out an array, either recursively (by default), or just one level.\r\n  _.flatten = function(array, shallow) {\r\n    return flatten(array, shallow, []);\r\n  };\r\n\r\n  // Return a version of the array that does not contain the specified value(s).\r\n  _.without = function(array) {\r\n    return _.difference(array, slice.call(arguments, 1));\r\n  };\r\n\r\n  // Split an array into two arrays: one whose elements all satisfy the given\r\n  // predicate, and one whose elements all do not satisfy the predicate.\r\n  _.partition = function(array, predicate) {\r\n    var pass = [], fail = [];\r\n    each(array, function(elem) {\r\n      (predicate(elem) ? pass : fail).push(elem);\r\n    });\r\n    return [pass, fail];\r\n  };\r\n\r\n  // Produce a duplicate-free version of the array. If the array has already\r\n  // been sorted, you have the option of using a faster algorithm.\r\n  // Aliased as `unique`.\r\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\r\n    if (_.isFunction(isSorted)) {\r\n      context = iterator;\r\n      iterator = isSorted;\r\n      isSorted = false;\r\n    }\r\n    var initial = iterator ? _.map(array, iterator, context) : array;\r\n    var results = [];\r\n    var seen = [];\r\n    each(initial, function(value, index) {\r\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\r\n        seen.push(value);\r\n        results.push(array[index]);\r\n      }\r\n    });\r\n    return results;\r\n  };\r\n\r\n  // Produce an array that contains the union: each distinct element from all of\r\n  // the passed-in arrays.\r\n  _.union = function() {\r\n    return _.uniq(_.flatten(arguments, true));\r\n  };\r\n\r\n  // Produce an array that contains every item shared between all the\r\n  // passed-in arrays.\r\n  _.intersection = function(array) {\r\n    var rest = slice.call(arguments, 1);\r\n    return _.filter(_.uniq(array), function(item) {\r\n      return _.every(rest, function(other) {\r\n        return _.contains(other, item);\r\n      });\r\n    });\r\n  };\r\n\r\n  // Take the difference between one array and a number of other arrays.\r\n  // Only the elements present in just the first array will remain.\r\n  _.difference = function(array) {\r\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\r\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\r\n  };\r\n\r\n  // Zip together multiple lists into a single array -- elements that share\r\n  // an index go together.\r\n  _.zip = function() {\r\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\r\n    var results = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      results[i] = _.pluck(arguments, '' + i);\r\n    }\r\n    return results;\r\n  };\r\n\r\n  // Converts lists into objects. Pass either a single array of `[key, value]`\r\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\r\n  // the corresponding values.\r\n  _.object = function(list, values) {\r\n    if (list == null) return {};\r\n    var result = {};\r\n    for (var i = 0, length = list.length; i < length; i++) {\r\n      if (values) {\r\n        result[list[i]] = values[i];\r\n      } else {\r\n        result[list[i][0]] = list[i][1];\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\r\n  // we need this function. Return the position of the first occurrence of an\r\n  // item in an array, or -1 if the item is not included in the array.\r\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\r\n  // If the array is large and already in sort order, pass `true`\r\n  // for **isSorted** to use binary search.\r\n  _.indexOf = function(array, item, isSorted) {\r\n    if (array == null) return -1;\r\n    var i = 0, length = array.length;\r\n    if (isSorted) {\r\n      if (typeof isSorted == 'number') {\r\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\r\n      } else {\r\n        i = _.sortedIndex(array, item);\r\n        return array[i] === item ? i : -1;\r\n      }\r\n    }\r\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\r\n    for (; i < length; i++) if (array[i] === item) return i;\r\n    return -1;\r\n  };\r\n\r\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\r\n  _.lastIndexOf = function(array, item, from) {\r\n    if (array == null) return -1;\r\n    var hasIndex = from != null;\r\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\r\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\r\n    }\r\n    var i = (hasIndex ? from : array.length);\r\n    while (i--) if (array[i] === item) return i;\r\n    return -1;\r\n  };\r\n\r\n  // Generate an integer Array containing an arithmetic progression. A port of\r\n  // the native Python `range()` function. See\r\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\r\n  _.range = function(start, stop, step) {\r\n    if (arguments.length <= 1) {\r\n      stop = start || 0;\r\n      start = 0;\r\n    }\r\n    step = arguments[2] || 1;\r\n\r\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\r\n    var idx = 0;\r\n    var range = new Array(length);\r\n\r\n    while(idx < length) {\r\n      range[idx++] = start;\r\n      start += step;\r\n    }\r\n\r\n    return range;\r\n  };\r\n\r\n  // Function (ahem) Functions\r\n  // ------------------\r\n\r\n  // Reusable constructor function for prototype setting.\r\n  var ctor = function(){};\r\n\r\n  // Create a function bound to a given object (assigning `this`, and arguments,\r\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\r\n  // available.\r\n  _.bind = function(func, context) {\r\n    var args, bound;\r\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\r\n    if (!_.isFunction(func)) throw new TypeError;\r\n    args = slice.call(arguments, 2);\r\n    return bound = function() {\r\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\r\n      ctor.prototype = func.prototype;\r\n      var self = new ctor;\r\n      ctor.prototype = null;\r\n      var result = func.apply(self, args.concat(slice.call(arguments)));\r\n      if (Object(result) === result) return result;\r\n      return self;\r\n    };\r\n  };\r\n\r\n  // Partially apply a function by creating a version that has had some of its\r\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\r\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\r\n  _.partial = function(func) {\r\n    var boundArgs = slice.call(arguments, 1);\r\n    return function() {\r\n      var position = 0;\r\n      var args = boundArgs.slice();\r\n      for (var i = 0, length = args.length; i < length; i++) {\r\n        if (args[i] === _) args[i] = arguments[position++];\r\n      }\r\n      while (position < arguments.length) args.push(arguments[position++]);\r\n      return func.apply(this, args);\r\n    };\r\n  };\r\n\r\n  // Bind a number of an object's methods to that object. Remaining arguments\r\n  // are the method names to be bound. Useful for ensuring that all callbacks\r\n  // defined on an object belong to it.\r\n  _.bindAll = function(obj) {\r\n    var funcs = slice.call(arguments, 1);\r\n    if (funcs.length === 0) throw new Error('bindAll must be passed function names');\r\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\r\n    return obj;\r\n  };\r\n\r\n  // Memoize an expensive function by storing its results.\r\n  _.memoize = function(func, hasher) {\r\n    var memo = {};\r\n    hasher || (hasher = _.identity);\r\n    return function() {\r\n      var key = hasher.apply(this, arguments);\r\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\r\n    };\r\n  };\r\n\r\n  // Delays a function for the given number of milliseconds, and then calls\r\n  // it with the arguments supplied.\r\n  _.delay = function(func, wait) {\r\n    var args = slice.call(arguments, 2);\r\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\r\n  };\r\n\r\n  // Defers a function, scheduling it to run after the current call stack has\r\n  // cleared.\r\n  _.defer = function(func) {\r\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\r\n  };\r\n\r\n  // Returns a function, that, when invoked, will only be triggered at most once\r\n  // during a given window of time. Normally, the throttled function will run\r\n  // as much as it can, without ever going more than once per `wait` duration;\r\n  // but if you'd like to disable the execution on the leading edge, pass\r\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n  _.throttle = function(func, wait, options) {\r\n    var context, args, result;\r\n    var timeout = null;\r\n    var previous = 0;\r\n    options || (options = {});\r\n    var later = function() {\r\n      previous = options.leading === false ? 0 : _.now();\r\n      timeout = null;\r\n      result = func.apply(context, args);\r\n      context = args = null;\r\n    };\r\n    return function() {\r\n      var now = _.now();\r\n      if (!previous && options.leading === false) previous = now;\r\n      var remaining = wait - (now - previous);\r\n      context = this;\r\n      args = arguments;\r\n      if (remaining <= 0) {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n        previous = now;\r\n        result = func.apply(context, args);\r\n        context = args = null;\r\n      } else if (!timeout && options.trailing !== false) {\r\n        timeout = setTimeout(later, remaining);\r\n      }\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Returns a function, that, as long as it continues to be invoked, will not\r\n  // be triggered. The function will be called after it stops being called for\r\n  // N milliseconds. If `immediate` is passed, trigger the function on the\r\n  // leading edge, instead of the trailing.\r\n  _.debounce = function(func, wait, immediate) {\r\n    var timeout, args, context, timestamp, result;\r\n\r\n    var later = function() {\r\n      var last = _.now() - timestamp;\r\n      if (last < wait) {\r\n        timeout = setTimeout(later, wait - last);\r\n      } else {\r\n        timeout = null;\r\n        if (!immediate) {\r\n          result = func.apply(context, args);\r\n          context = args = null;\r\n        }\r\n      }\r\n    };\r\n\r\n    return function() {\r\n      context = this;\r\n      args = arguments;\r\n      timestamp = _.now();\r\n      var callNow = immediate && !timeout;\r\n      if (!timeout) {\r\n        timeout = setTimeout(later, wait);\r\n      }\r\n      if (callNow) {\r\n        result = func.apply(context, args);\r\n        context = args = null;\r\n      }\r\n\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Returns a function that will be executed at most one time, no matter how\r\n  // often you call it. Useful for lazy initialization.\r\n  _.once = function(func) {\r\n    var ran = false, memo;\r\n    return function() {\r\n      if (ran) return memo;\r\n      ran = true;\r\n      memo = func.apply(this, arguments);\r\n      func = null;\r\n      return memo;\r\n    };\r\n  };\r\n\r\n  // Returns the first function passed as an argument to the second,\r\n  // allowing you to adjust arguments, run code before and after, and\r\n  // conditionally execute the original function.\r\n  _.wrap = function(func, wrapper) {\r\n    return _.partial(wrapper, func);\r\n  };\r\n\r\n  // Returns a function that is the composition of a list of functions, each\r\n  // consuming the return value of the function that follows.\r\n  _.compose = function() {\r\n    var funcs = arguments;\r\n    return function() {\r\n      var args = arguments;\r\n      for (var i = funcs.length - 1; i >= 0; i--) {\r\n        args = [funcs[i].apply(this, args)];\r\n      }\r\n      return args[0];\r\n    };\r\n  };\r\n\r\n  // Returns a function that will only be executed after being called N times.\r\n  _.after = function(times, func) {\r\n    return function() {\r\n      if (--times < 1) {\r\n        return func.apply(this, arguments);\r\n      }\r\n    };\r\n  };\r\n\r\n  // Object Functions\r\n  // ----------------\r\n\r\n  // Retrieve the names of an object's properties.\r\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\r\n  _.keys = function(obj) {\r\n    if (!_.isObject(obj)) return [];\r\n    if (nativeKeys) return nativeKeys(obj);\r\n    var keys = [];\r\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\r\n    return keys;\r\n  };\r\n\r\n  // Retrieve the values of an object's properties.\r\n  _.values = function(obj) {\r\n    var keys = _.keys(obj);\r\n    var length = keys.length;\r\n    var values = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      values[i] = obj[keys[i]];\r\n    }\r\n    return values;\r\n  };\r\n\r\n  // Convert an object into a list of `[key, value]` pairs.\r\n  _.pairs = function(obj) {\r\n    var keys = _.keys(obj);\r\n    var length = keys.length;\r\n    var pairs = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      pairs[i] = [keys[i], obj[keys[i]]];\r\n    }\r\n    return pairs;\r\n  };\r\n\r\n  // Invert the keys and values of an object. The values must be serializable.\r\n  _.invert = function(obj) {\r\n    var result = {};\r\n    var keys = _.keys(obj);\r\n    for (var i = 0, length = keys.length; i < length; i++) {\r\n      result[obj[keys[i]]] = keys[i];\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Return a sorted list of the function names available on the object.\r\n  // Aliased as `methods`\r\n  _.functions = _.methods = function(obj) {\r\n    var names = [];\r\n    for (var key in obj) {\r\n      if (_.isFunction(obj[key])) names.push(key);\r\n    }\r\n    return names.sort();\r\n  };\r\n\r\n  // Extend a given object with all the properties in passed-in object(s).\r\n  _.extend = function(obj) {\r\n    each(slice.call(arguments, 1), function(source) {\r\n      if (source) {\r\n        for (var prop in source) {\r\n          obj[prop] = source[prop];\r\n        }\r\n      }\r\n    });\r\n    return obj;\r\n  };\r\n\r\n  // Return a copy of the object only containing the whitelisted properties.\r\n  _.pick = function(obj) {\r\n    var copy = {};\r\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\r\n    each(keys, function(key) {\r\n      if (key in obj) copy[key] = obj[key];\r\n    });\r\n    return copy;\r\n  };\r\n\r\n   // Return a copy of the object without the blacklisted properties.\r\n  _.omit = function(obj) {\r\n    var copy = {};\r\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\r\n    for (var key in obj) {\r\n      if (!_.contains(keys, key)) copy[key] = obj[key];\r\n    }\r\n    return copy;\r\n  };\r\n\r\n  // Fill in a given object with default properties.\r\n  _.defaults = function(obj) {\r\n    each(slice.call(arguments, 1), function(source) {\r\n      if (source) {\r\n        for (var prop in source) {\r\n          if (obj[prop] === void 0) obj[prop] = source[prop];\r\n        }\r\n      }\r\n    });\r\n    return obj;\r\n  };\r\n\r\n  // Create a (shallow-cloned) duplicate of an object.\r\n  _.clone = function(obj) {\r\n    if (!_.isObject(obj)) return obj;\r\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\r\n  };\r\n\r\n  // Invokes interceptor with the obj, and then returns obj.\r\n  // The primary purpose of this method is to \"tap into\" a method chain, in\r\n  // order to perform operations on intermediate results within the chain.\r\n  _.tap = function(obj, interceptor) {\r\n    interceptor(obj);\r\n    return obj;\r\n  };\r\n\r\n  // Internal recursive comparison function for `isEqual`.\r\n  var eq = function(a, b, aStack, bStack) {\r\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\r\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\r\n    // A strict comparison is necessary because `null == undefined`.\r\n    if (a == null || b == null) return a === b;\r\n    // Unwrap any wrapped objects.\r\n    if (a instanceof _) a = a._wrapped;\r\n    if (b instanceof _) b = b._wrapped;\r\n    // Compare `[[Class]]` names.\r\n    var className = toString.call(a);\r\n    if (className != toString.call(b)) return false;\r\n    switch (className) {\r\n      // Strings, numbers, dates, and booleans are compared by value.\r\n      case '[object String]':\r\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n        // equivalent to `new String(\"5\")`.\r\n        return a == String(b);\r\n      case '[object Number]':\r\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\r\n        // other numeric values.\r\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\r\n      case '[object Date]':\r\n      case '[object Boolean]':\r\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n        // millisecond representations. Note that invalid dates with millisecond representations\r\n        // of `NaN` are not equivalent.\r\n        return +a == +b;\r\n      // RegExps are compared by their source patterns and flags.\r\n      case '[object RegExp]':\r\n        return a.source == b.source &&\r\n               a.global == b.global &&\r\n               a.multiline == b.multiline &&\r\n               a.ignoreCase == b.ignoreCase;\r\n    }\r\n    if (typeof a != 'object' || typeof b != 'object') return false;\r\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n    var length = aStack.length;\r\n    while (length--) {\r\n      // Linear search. Performance is inversely proportional to the number of\r\n      // unique nested structures.\r\n      if (aStack[length] == a) return bStack[length] == b;\r\n    }\r\n    // Objects with different constructors are not equivalent, but `Object`s\r\n    // from different frames are.\r\n    var aCtor = a.constructor, bCtor = b.constructor;\r\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\r\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))\r\n                        && ('constructor' in a && 'constructor' in b)) {\r\n      return false;\r\n    }\r\n    // Add the first object to the stack of traversed objects.\r\n    aStack.push(a);\r\n    bStack.push(b);\r\n    var size = 0, result = true;\r\n    // Recursively compare objects and arrays.\r\n    if (className == '[object Array]') {\r\n      // Compare array lengths to determine if a deep comparison is necessary.\r\n      size = a.length;\r\n      result = size == b.length;\r\n      if (result) {\r\n        // Deep compare the contents, ignoring non-numeric properties.\r\n        while (size--) {\r\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\r\n        }\r\n      }\r\n    } else {\r\n      // Deep compare objects.\r\n      for (var key in a) {\r\n        if (_.has(a, key)) {\r\n          // Count the expected number of properties.\r\n          size++;\r\n          // Deep compare each member.\r\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\r\n        }\r\n      }\r\n      // Ensure that both objects contain the same number of properties.\r\n      if (result) {\r\n        for (key in b) {\r\n          if (_.has(b, key) && !(size--)) break;\r\n        }\r\n        result = !size;\r\n      }\r\n    }\r\n    // Remove the first object from the stack of traversed objects.\r\n    aStack.pop();\r\n    bStack.pop();\r\n    return result;\r\n  };\r\n\r\n  // Perform a deep comparison to check if two objects are equal.\r\n  _.isEqual = function(a, b) {\r\n    return eq(a, b, [], []);\r\n  };\r\n\r\n  // Is a given array, string, or object empty?\r\n  // An \"empty\" object has no enumerable own-properties.\r\n  _.isEmpty = function(obj) {\r\n    if (obj == null) return true;\r\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\r\n    for (var key in obj) if (_.has(obj, key)) return false;\r\n    return true;\r\n  };\r\n\r\n  // Is a given value a DOM element?\r\n  _.isElement = function(obj) {\r\n    return !!(obj && obj.nodeType === 1);\r\n  };\r\n\r\n  // Is a given value an array?\r\n  // Delegates to ECMA5's native Array.isArray\r\n  _.isArray = nativeIsArray || function(obj) {\r\n    return toString.call(obj) == '[object Array]';\r\n  };\r\n\r\n  // Is a given variable an object?\r\n  _.isObject = function(obj) {\r\n    return obj === Object(obj);\r\n  };\r\n\r\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\r\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\r\n    _['is' + name] = function(obj) {\r\n      return toString.call(obj) == '[object ' + name + ']';\r\n    };\r\n  });\r\n\r\n  // Define a fallback version of the method in browsers (ahem, IE), where\r\n  // there isn't any inspectable \"Arguments\" type.\r\n  if (!_.isArguments(arguments)) {\r\n    _.isArguments = function(obj) {\r\n      return !!(obj && _.has(obj, 'callee'));\r\n    };\r\n  }\r\n\r\n  // Optimize `isFunction` if appropriate.\r\n  if (typeof (/./) !== 'function') {\r\n    _.isFunction = function(obj) {\r\n      return typeof obj === 'function';\r\n    };\r\n  }\r\n\r\n  // Is a given object a finite number?\r\n  _.isFinite = function(obj) {\r\n    return isFinite(obj) && !isNaN(parseFloat(obj));\r\n  };\r\n\r\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\r\n  _.isNaN = function(obj) {\r\n    return _.isNumber(obj) && obj != +obj;\r\n  };\r\n\r\n  // Is a given value a boolean?\r\n  _.isBoolean = function(obj) {\r\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\r\n  };\r\n\r\n  // Is a given value equal to null?\r\n  _.isNull = function(obj) {\r\n    return obj === null;\r\n  };\r\n\r\n  // Is a given variable undefined?\r\n  _.isUndefined = function(obj) {\r\n    return obj === void 0;\r\n  };\r\n\r\n  // Shortcut function for checking if an object has a given property directly\r\n  // on itself (in other words, not on a prototype).\r\n  _.has = function(obj, key) {\r\n    return hasOwnProperty.call(obj, key);\r\n  };\r\n\r\n  // Utility Functions\r\n  // -----------------\r\n\r\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\r\n  // previous owner. Returns a reference to the Underscore object.\r\n  _.noConflict = function() {\r\n    root._ = previousUnderscore;\r\n    return this;\r\n  };\r\n\r\n  // Keep the identity function around for default iterators.\r\n  _.identity = function(value) {\r\n    return value;\r\n  };\r\n\r\n  _.constant = function(value) {\r\n    return function () {\r\n      return value;\r\n    };\r\n  };\r\n\r\n  _.property = function(key) {\r\n    return function(obj) {\r\n      return obj[key];\r\n    };\r\n  };\r\n\r\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\r\n  _.matches = function(attrs) {\r\n    return function(obj) {\r\n      if (obj === attrs) return true; //avoid comparing an object to itself.\r\n      for (var key in attrs) {\r\n        if (attrs[key] !== obj[key])\r\n          return false;\r\n      }\r\n      return true;\r\n    }\r\n  };\r\n\r\n  // Run a function **n** times.\r\n  _.times = function(n, iterator, context) {\r\n    var accum = Array(Math.max(0, n));\r\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\r\n    return accum;\r\n  };\r\n\r\n  // Return a random integer between min and max (inclusive).\r\n  _.random = function(min, max) {\r\n    if (max == null) {\r\n      max = min;\r\n      min = 0;\r\n    }\r\n    return min + Math.floor(Math.random() * (max - min + 1));\r\n  };\r\n\r\n  // A (possibly faster) way to get the current timestamp as an integer.\r\n  _.now = Date.now || function() { return new Date().getTime(); };\r\n\r\n  // List of HTML entities for escaping.\r\n  var entityMap = {\r\n    escape: {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#x27;'\r\n    }\r\n  };\r\n  entityMap.unescape = _.invert(entityMap.escape);\r\n\r\n  // Regexes containing the keys and values listed immediately above.\r\n  var entityRegexes = {\r\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\r\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\r\n  };\r\n\r\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\r\n  _.each(['escape', 'unescape'], function(method) {\r\n    _[method] = function(string) {\r\n      if (string == null) return '';\r\n      return ('' + string).replace(entityRegexes[method], function(match) {\r\n        return entityMap[method][match];\r\n      });\r\n    };\r\n  });\r\n\r\n  // If the value of the named `property` is a function then invoke it with the\r\n  // `object` as context; otherwise, return it.\r\n  _.result = function(object, property) {\r\n    if (object == null) return void 0;\r\n    var value = object[property];\r\n    return _.isFunction(value) ? value.call(object) : value;\r\n  };\r\n\r\n  // Add your own custom functions to the Underscore object.\r\n  _.mixin = function(obj) {\r\n    each(_.functions(obj), function(name) {\r\n      var func = _[name] = obj[name];\r\n      _.prototype[name] = function() {\r\n        var args = [this._wrapped];\r\n        push.apply(args, arguments);\r\n        return result.call(this, func.apply(_, args));\r\n      };\r\n    });\r\n  };\r\n\r\n  // Generate a unique integer id (unique within the entire client session).\r\n  // Useful for temporary DOM ids.\r\n  var idCounter = 0;\r\n  _.uniqueId = function(prefix) {\r\n    var id = ++idCounter + '';\r\n    return prefix ? prefix + id : id;\r\n  };\r\n\r\n  // By default, Underscore uses ERB-style template delimiters, change the\r\n  // following template settings to use alternative delimiters.\r\n  _.templateSettings = {\r\n    evaluate    : /<%([\\s\\S]+?)%>/g,\r\n    interpolate : /<%=([\\s\\S]+?)%>/g,\r\n    escape      : /<%-([\\s\\S]+?)%>/g\r\n  };\r\n\r\n  // When customizing `templateSettings`, if you don't want to define an\r\n  // interpolation, evaluation or escaping regex, we need one that is\r\n  // guaranteed not to match.\r\n  var noMatch = /(.)^/;\r\n\r\n  // Certain characters need to be escaped so that they can be put into a\r\n  // string literal.\r\n  var escapes = {\r\n    \"'\":      \"'\",\r\n    '\\\\':     '\\\\',\r\n    '\\r':     'r',\r\n    '\\n':     'n',\r\n    '\\t':     't',\r\n    '\\u2028': 'u2028',\r\n    '\\u2029': 'u2029'\r\n  };\r\n\r\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\r\n\r\n  // JavaScript micro-templating, similar to John Resig's implementation.\r\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\r\n  // and correctly escapes quotes within interpolated code.\r\n  _.template = function(text, data, settings) {\r\n    var render;\r\n    settings = _.defaults({}, settings, _.templateSettings);\r\n\r\n    // Combine delimiters into one regular expression via alternation.\r\n    var matcher = new RegExp([\r\n      (settings.escape || noMatch).source,\r\n      (settings.interpolate || noMatch).source,\r\n      (settings.evaluate || noMatch).source\r\n    ].join('|') + '|$', 'g');\r\n\r\n    // Compile the template source, escaping string literals appropriately.\r\n    var index = 0;\r\n    var source = \"__p+='\";\r\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\r\n      source += text.slice(index, offset)\r\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\r\n\r\n      if (escape) {\r\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\r\n      }\r\n      if (interpolate) {\r\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\r\n      }\r\n      if (evaluate) {\r\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\r\n      }\r\n      index = offset + match.length;\r\n      return match;\r\n    });\r\n    source += \"';\\n\";\r\n\r\n    // If a variable is not specified, place data values in local scope.\r\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\r\n\r\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\r\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\r\n      source + \"return __p;\\n\";\r\n\r\n    try {\r\n      render = new Function(settings.variable || 'obj', '_', source);\r\n    } catch (e) {\r\n      e.source = source;\r\n      throw e;\r\n    }\r\n\r\n    if (data) return render(data, _);\r\n    var template = function(data) {\r\n      return render.call(this, data, _);\r\n    };\r\n\r\n    // Provide the compiled function source as a convenience for precompilation.\r\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\r\n\r\n    return template;\r\n  };\r\n\r\n  // Add a \"chain\" function, which will delegate to the wrapper.\r\n  _.chain = function(obj) {\r\n    return _(obj).chain();\r\n  };\r\n\r\n  // OOP\r\n  // ---------------\r\n  // If Underscore is called as a function, it returns a wrapped object that\r\n  // can be used OO-style. This wrapper holds altered versions of all the\r\n  // underscore functions. Wrapped objects may be chained.\r\n\r\n  // Helper function to continue chaining intermediate results.\r\n  var result = function(obj) {\r\n    return this._chain ? _(obj).chain() : obj;\r\n  };\r\n\r\n  // Add all of the Underscore functions to the wrapper object.\r\n  _.mixin(_);\r\n\r\n  // Add all mutator Array functions to the wrapper.\r\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\r\n    var method = ArrayProto[name];\r\n    _.prototype[name] = function() {\r\n      var obj = this._wrapped;\r\n      method.apply(obj, arguments);\r\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\r\n      return result.call(this, obj);\r\n    };\r\n  });\r\n\r\n  // Add all accessor Array functions to the wrapper.\r\n  each(['concat', 'join', 'slice'], function(name) {\r\n    var method = ArrayProto[name];\r\n    _.prototype[name] = function() {\r\n      return result.call(this, method.apply(this._wrapped, arguments));\r\n    };\r\n  });\r\n\r\n  _.extend(_.prototype, {\r\n\r\n    // Start chaining a wrapped Underscore object.\r\n    chain: function() {\r\n      this._chain = true;\r\n      return this;\r\n    },\r\n\r\n    // Extracts the result from a wrapped and chained object.\r\n    value: function() {\r\n      return this._wrapped;\r\n    }\r\n\r\n  });\r\n\r\n  // AMD registration happens at the end for compatibility with AMD loaders\r\n  // that may not enforce next-turn semantics on modules. Even though general\r\n  // practice for AMD registration is to be anonymous, underscore registers\r\n  // as a named module because, like jQuery, it is a base library that is\r\n  // popular enough to be bundled in a third party lib, but not be part of\r\n  // an AMD load request. Those cases could generate an error when an\r\n  // anonymous define() is called outside of a loader request.\r\n  if (typeof define === 'function' && define.amd) {\r\n    define('underscore', [], function() {\r\n      return _;\r\n    });\r\n  }\r\n}).call(this);\r\n;/*!\r\n\r\n handlebars v1.3.0\r\n\r\nCopyright (C) 2011 by Yehuda Katz\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n@license\r\n*/\r\n/* exported Handlebars */\r\nvar Handlebars = (function() {\r\n// handlebars/safe-string.js\r\nvar __module4__ = (function() {\r\n  \"use strict\";\r\n  var __exports__;\r\n  // Build out our basic SafeString type\r\n  function SafeString(string) {\r\n    this.string = string;\r\n  }\r\n\r\n  SafeString.prototype.toString = function() {\r\n    return \"\" + this.string;\r\n  };\r\n\r\n  __exports__ = SafeString;\r\n  return __exports__;\r\n})();\r\n\r\n// handlebars/utils.js\r\nvar __module3__ = (function(__dependency1__) {\r\n  \"use strict\";\r\n  var __exports__ = {};\r\n  /*jshint -W004 */\r\n  var SafeString = __dependency1__;\r\n\r\n  var escape = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    '\"': \"&quot;\",\r\n    \"'\": \"&#x27;\",\r\n    \"`\": \"&#x60;\"\r\n  };\r\n\r\n  var badChars = /[&<>\"'`]/g;\r\n  var possible = /[&<>\"'`]/;\r\n\r\n  function escapeChar(chr) {\r\n    return escape[chr] || \"&amp;\";\r\n  }\r\n\r\n  function extend(obj, value) {\r\n    for(var key in value) {\r\n      if(Object.prototype.hasOwnProperty.call(value, key)) {\r\n        obj[key] = value[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  __exports__.extend = extend;var toString = Object.prototype.toString;\r\n  __exports__.toString = toString;\r\n  // Sourced from lodash\r\n  // https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\r\n  var isFunction = function(value) {\r\n    return typeof value === 'function';\r\n  };\r\n  // fallback for older versions of Chrome and Safari\r\n  if (isFunction(/x/)) {\r\n    isFunction = function(value) {\r\n      return typeof value === 'function' && toString.call(value) === '[object Function]';\r\n    };\r\n  }\r\n  var isFunction;\r\n  __exports__.isFunction = isFunction;\r\n  var isArray = Array.isArray || function(value) {\r\n    return (value && typeof value === 'object') ? toString.call(value) === '[object Array]' : false;\r\n  };\r\n  __exports__.isArray = isArray;\r\n\r\n  function escapeExpression(string) {\r\n    // don't escape SafeStrings, since they're already safe\r\n    if (string instanceof SafeString) {\r\n      return string.toString();\r\n    } else if (!string && string !== 0) {\r\n      return \"\";\r\n    }\r\n\r\n    // Force a string conversion as this will be done by the append regardless and\r\n    // the regex test will do this transparently behind the scenes, causing issues if\r\n    // an object's to string has escaped characters in it.\r\n    string = \"\" + string;\r\n\r\n    if(!possible.test(string)) { return string; }\r\n    return string.replace(badChars, escapeChar);\r\n  }\r\n\r\n  __exports__.escapeExpression = escapeExpression;function isEmpty(value) {\r\n    if (!value && value !== 0) {\r\n      return true;\r\n    } else if (isArray(value) && value.length === 0) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  __exports__.isEmpty = isEmpty;\r\n  return __exports__;\r\n})(__module4__);\r\n\r\n// handlebars/exception.js\r\nvar __module5__ = (function() {\r\n  \"use strict\";\r\n  var __exports__;\r\n\r\n  var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\r\n\r\n  function Exception(message, node) {\r\n    var line;\r\n    if (node && node.firstLine) {\r\n      line = node.firstLine;\r\n\r\n      message += ' - ' + line + ':' + node.firstColumn;\r\n    }\r\n\r\n    var tmp = Error.prototype.constructor.call(this, message);\r\n\r\n    // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\r\n    for (var idx = 0; idx < errorProps.length; idx++) {\r\n      this[errorProps[idx]] = tmp[errorProps[idx]];\r\n    }\r\n\r\n    if (line) {\r\n      this.lineNumber = line;\r\n      this.column = node.firstColumn;\r\n    }\r\n  }\r\n\r\n  Exception.prototype = new Error();\r\n\r\n  __exports__ = Exception;\r\n  return __exports__;\r\n})();\r\n\r\n// handlebars/base.js\r\nvar __module2__ = (function(__dependency1__, __dependency2__) {\r\n  \"use strict\";\r\n  var __exports__ = {};\r\n  var Utils = __dependency1__;\r\n  var Exception = __dependency2__;\r\n\r\n  var VERSION = \"1.3.0\";\r\n  __exports__.VERSION = VERSION;var COMPILER_REVISION = 4;\r\n  __exports__.COMPILER_REVISION = COMPILER_REVISION;\r\n  var REVISION_CHANGES = {\r\n    1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\r\n    2: '== 1.0.0-rc.3',\r\n    3: '== 1.0.0-rc.4',\r\n    4: '>= 1.0.0'\r\n  };\r\n  __exports__.REVISION_CHANGES = REVISION_CHANGES;\r\n  var isArray = Utils.isArray,\r\n      isFunction = Utils.isFunction,\r\n      toString = Utils.toString,\r\n      objectType = '[object Object]';\r\n\r\n  function HandlebarsEnvironment(helpers, partials) {\r\n    this.helpers = helpers || {};\r\n    this.partials = partials || {};\r\n\r\n    registerDefaultHelpers(this);\r\n  }\r\n\r\n  __exports__.HandlebarsEnvironment = HandlebarsEnvironment;HandlebarsEnvironment.prototype = {\r\n    constructor: HandlebarsEnvironment,\r\n\r\n    logger: logger,\r\n    log: log,\r\n\r\n    registerHelper: function(name, fn, inverse) {\r\n      if (toString.call(name) === objectType) {\r\n        if (inverse || fn) { throw new Exception('Arg not supported with multiple helpers'); }\r\n        Utils.extend(this.helpers, name);\r\n      } else {\r\n        if (inverse) { fn.not = inverse; }\r\n        this.helpers[name] = fn;\r\n      }\r\n    },\r\n\r\n    registerPartial: function(name, str) {\r\n      if (toString.call(name) === objectType) {\r\n        Utils.extend(this.partials,  name);\r\n      } else {\r\n        this.partials[name] = str;\r\n      }\r\n    }\r\n  };\r\n\r\n  function registerDefaultHelpers(instance) {\r\n    instance.registerHelper('helperMissing', function(arg) {\r\n      if(arguments.length === 2) {\r\n        return undefined;\r\n      } else {\r\n        throw new Exception(\"Missing helper: '\" + arg + \"'\");\r\n      }\r\n    });\r\n\r\n    instance.registerHelper('blockHelperMissing', function(context, options) {\r\n      var inverse = options.inverse || function() {}, fn = options.fn;\r\n\r\n      if (isFunction(context)) { context = context.call(this); }\r\n\r\n      if(context === true) {\r\n        return fn(this);\r\n      } else if(context === false || context == null) {\r\n        return inverse(this);\r\n      } else if (isArray(context)) {\r\n        if(context.length > 0) {\r\n          return instance.helpers.each(context, options);\r\n        } else {\r\n          return inverse(this);\r\n        }\r\n      } else {\r\n        return fn(context);\r\n      }\r\n    });\r\n\r\n    instance.registerHelper('each', function(context, options) {\r\n      var fn = options.fn, inverse = options.inverse;\r\n      var i = 0, ret = \"\", data;\r\n\r\n      if (isFunction(context)) { context = context.call(this); }\r\n\r\n      if (options.data) {\r\n        data = createFrame(options.data);\r\n      }\r\n\r\n      if(context && typeof context === 'object') {\r\n        if (isArray(context)) {\r\n          for(var j = context.length; i<j; i++) {\r\n            if (data) {\r\n              data.index = i;\r\n              data.first = (i === 0);\r\n              data.last  = (i === (context.length-1));\r\n            }\r\n            ret = ret + fn(context[i], { data: data });\r\n          }\r\n        } else {\r\n          for(var key in context) {\r\n            if(context.hasOwnProperty(key)) {\r\n              if(data) { \r\n                data.key = key; \r\n                data.index = i;\r\n                data.first = (i === 0);\r\n              }\r\n              ret = ret + fn(context[key], {data: data});\r\n              i++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if(i === 0){\r\n        ret = inverse(this);\r\n      }\r\n\r\n      return ret;\r\n    });\r\n\r\n    instance.registerHelper('if', function(conditional, options) {\r\n      if (isFunction(conditional)) { conditional = conditional.call(this); }\r\n\r\n      // Default behavior is to render the positive path if the value is truthy and not empty.\r\n      // The `includeZero` option may be set to treat the condtional as purely not empty based on the\r\n      // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\r\n      if ((!options.hash.includeZero && !conditional) || Utils.isEmpty(conditional)) {\r\n        return options.inverse(this);\r\n      } else {\r\n        return options.fn(this);\r\n      }\r\n    });\r\n\r\n    instance.registerHelper('unless', function(conditional, options) {\r\n      return instance.helpers['if'].call(this, conditional, {fn: options.inverse, inverse: options.fn, hash: options.hash});\r\n    });\r\n\r\n    instance.registerHelper('with', function(context, options) {\r\n      if (isFunction(context)) { context = context.call(this); }\r\n\r\n      if (!Utils.isEmpty(context)) return options.fn(context);\r\n    });\r\n\r\n    instance.registerHelper('log', function(context, options) {\r\n      var level = options.data && options.data.level != null ? parseInt(options.data.level, 10) : 1;\r\n      instance.log(level, context);\r\n    });\r\n  }\r\n\r\n  var logger = {\r\n    methodMap: { 0: 'debug', 1: 'info', 2: 'warn', 3: 'error' },\r\n\r\n    // State enum\r\n    DEBUG: 0,\r\n    INFO: 1,\r\n    WARN: 2,\r\n    ERROR: 3,\r\n    level: 3,\r\n\r\n    // can be overridden in the host environment\r\n    log: function(level, obj) {\r\n      if (logger.level <= level) {\r\n        var method = logger.methodMap[level];\r\n        if (typeof console !== 'undefined' && console[method]) {\r\n          console[method].call(console, obj);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  __exports__.logger = logger;\r\n  function log(level, obj) { logger.log(level, obj); }\r\n\r\n  __exports__.log = log;var createFrame = function(object) {\r\n    var obj = {};\r\n    Utils.extend(obj, object);\r\n    return obj;\r\n  };\r\n  __exports__.createFrame = createFrame;\r\n  return __exports__;\r\n})(__module3__, __module5__);\r\n\r\n// handlebars/runtime.js\r\nvar __module6__ = (function(__dependency1__, __dependency2__, __dependency3__) {\r\n  \"use strict\";\r\n  var __exports__ = {};\r\n  var Utils = __dependency1__;\r\n  var Exception = __dependency2__;\r\n  var COMPILER_REVISION = __dependency3__.COMPILER_REVISION;\r\n  var REVISION_CHANGES = __dependency3__.REVISION_CHANGES;\r\n\r\n  function checkRevision(compilerInfo) {\r\n    var compilerRevision = compilerInfo && compilerInfo[0] || 1,\r\n        currentRevision = COMPILER_REVISION;\r\n\r\n    if (compilerRevision !== currentRevision) {\r\n      if (compilerRevision < currentRevision) {\r\n        var runtimeVersions = REVISION_CHANGES[currentRevision],\r\n            compilerVersions = REVISION_CHANGES[compilerRevision];\r\n        throw new Exception(\"Template was precompiled with an older version of Handlebars than the current runtime. \"+\r\n              \"Please update your precompiler to a newer version (\"+runtimeVersions+\") or downgrade your runtime to an older version (\"+compilerVersions+\").\");\r\n      } else {\r\n        // Use the embedded version info since the runtime doesn't know about this revision yet\r\n        throw new Exception(\"Template was precompiled with a newer version of Handlebars than the current runtime. \"+\r\n              \"Please update your runtime to a newer version (\"+compilerInfo[1]+\").\");\r\n      }\r\n    }\r\n  }\r\n\r\n  __exports__.checkRevision = checkRevision;// TODO: Remove this line and break up compilePartial\r\n\r\n  function template(templateSpec, env) {\r\n    if (!env) {\r\n      throw new Exception(\"No environment passed to template\");\r\n    }\r\n\r\n    // Note: Using env.VM references rather than local var references throughout this section to allow\r\n    // for external users to override these as psuedo-supported APIs.\r\n    var invokePartialWrapper = function(partial, name, context, helpers, partials, data) {\r\n      var result = env.VM.invokePartial.apply(this, arguments);\r\n      if (result != null) { return result; }\r\n\r\n      if (env.compile) {\r\n        var options = { helpers: helpers, partials: partials, data: data };\r\n        partials[name] = env.compile(partial, { data: data !== undefined }, env);\r\n        return partials[name](context, options);\r\n      } else {\r\n        throw new Exception(\"The partial \" + name + \" could not be compiled when running in runtime-only mode\");\r\n      }\r\n    };\r\n\r\n    // Just add water\r\n    var container = {\r\n      escapeExpression: Utils.escapeExpression,\r\n      invokePartial: invokePartialWrapper,\r\n      programs: [],\r\n      program: function(i, fn, data) {\r\n        var programWrapper = this.programs[i];\r\n        if(data) {\r\n          programWrapper = program(i, fn, data);\r\n        } else if (!programWrapper) {\r\n          programWrapper = this.programs[i] = program(i, fn);\r\n        }\r\n        return programWrapper;\r\n      },\r\n      merge: function(param, common) {\r\n        var ret = param || common;\r\n\r\n        if (param && common && (param !== common)) {\r\n          ret = {};\r\n          Utils.extend(ret, common);\r\n          Utils.extend(ret, param);\r\n        }\r\n        return ret;\r\n      },\r\n      programWithDepth: env.VM.programWithDepth,\r\n      noop: env.VM.noop,\r\n      compilerInfo: null\r\n    };\r\n\r\n    return function(context, options) {\r\n      options = options || {};\r\n      var namespace = options.partial ? options : env,\r\n          helpers,\r\n          partials;\r\n\r\n      if (!options.partial) {\r\n        helpers = options.helpers;\r\n        partials = options.partials;\r\n      }\r\n      var result = templateSpec.call(\r\n            container,\r\n            namespace, context,\r\n            helpers,\r\n            partials,\r\n            options.data);\r\n\r\n      if (!options.partial) {\r\n        env.VM.checkRevision(container.compilerInfo);\r\n      }\r\n\r\n      return result;\r\n    };\r\n  }\r\n\r\n  __exports__.template = template;function programWithDepth(i, fn, data /*, $depth */) {\r\n    var args = Array.prototype.slice.call(arguments, 3);\r\n\r\n    var prog = function(context, options) {\r\n      options = options || {};\r\n\r\n      return fn.apply(this, [context, options.data || data].concat(args));\r\n    };\r\n    prog.program = i;\r\n    prog.depth = args.length;\r\n    return prog;\r\n  }\r\n\r\n  __exports__.programWithDepth = programWithDepth;function program(i, fn, data) {\r\n    var prog = function(context, options) {\r\n      options = options || {};\r\n\r\n      return fn(context, options.data || data);\r\n    };\r\n    prog.program = i;\r\n    prog.depth = 0;\r\n    return prog;\r\n  }\r\n\r\n  __exports__.program = program;function invokePartial(partial, name, context, helpers, partials, data) {\r\n    var options = { partial: true, helpers: helpers, partials: partials, data: data };\r\n\r\n    if(partial === undefined) {\r\n      throw new Exception(\"The partial \" + name + \" could not be found\");\r\n    } else if(partial instanceof Function) {\r\n      return partial(context, options);\r\n    }\r\n  }\r\n\r\n  __exports__.invokePartial = invokePartial;function noop() { return \"\"; }\r\n\r\n  __exports__.noop = noop;\r\n  return __exports__;\r\n})(__module3__, __module5__, __module2__);\r\n\r\n// handlebars.runtime.js\r\nvar __module1__ = (function(__dependency1__, __dependency2__, __dependency3__, __dependency4__, __dependency5__) {\r\n  \"use strict\";\r\n  var __exports__;\r\n  /*globals Handlebars: true */\r\n  var base = __dependency1__;\r\n\r\n  // Each of these augment the Handlebars object. No need to setup here.\r\n  // (This is done to easily share code between commonjs and browse envs)\r\n  var SafeString = __dependency2__;\r\n  var Exception = __dependency3__;\r\n  var Utils = __dependency4__;\r\n  var runtime = __dependency5__;\r\n\r\n  // For compatibility and usage outside of module systems, make the Handlebars object a namespace\r\n  var create = function() {\r\n    var hb = new base.HandlebarsEnvironment();\r\n\r\n    Utils.extend(hb, base);\r\n    hb.SafeString = SafeString;\r\n    hb.Exception = Exception;\r\n    hb.Utils = Utils;\r\n\r\n    hb.VM = runtime;\r\n    hb.template = function(spec) {\r\n      return runtime.template(spec, hb);\r\n    };\r\n\r\n    return hb;\r\n  };\r\n\r\n  var Handlebars = create();\r\n  Handlebars.create = create;\r\n\r\n  __exports__ = Handlebars;\r\n  return __exports__;\r\n})(__module2__, __module4__, __module5__, __module3__, __module6__);\r\n\r\n// handlebars/compiler/ast.js\r\nvar __module7__ = (function(__dependency1__) {\r\n  \"use strict\";\r\n  var __exports__;\r\n  var Exception = __dependency1__;\r\n\r\n  function LocationInfo(locInfo){\r\n    locInfo = locInfo || {};\r\n    this.firstLine   = locInfo.first_line;\r\n    this.firstColumn = locInfo.first_column;\r\n    this.lastColumn  = locInfo.last_column;\r\n    this.lastLine    = locInfo.last_line;\r\n  }\r\n\r\n  var AST = {\r\n    ProgramNode: function(statements, inverseStrip, inverse, locInfo) {\r\n      var inverseLocationInfo, firstInverseNode;\r\n      if (arguments.length === 3) {\r\n        locInfo = inverse;\r\n        inverse = null;\r\n      } else if (arguments.length === 2) {\r\n        locInfo = inverseStrip;\r\n        inverseStrip = null;\r\n      }\r\n\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"program\";\r\n      this.statements = statements;\r\n      this.strip = {};\r\n\r\n      if(inverse) {\r\n        firstInverseNode = inverse[0];\r\n        if (firstInverseNode) {\r\n          inverseLocationInfo = {\r\n            first_line: firstInverseNode.firstLine,\r\n            last_line: firstInverseNode.lastLine,\r\n            last_column: firstInverseNode.lastColumn,\r\n            first_column: firstInverseNode.firstColumn\r\n          };\r\n          this.inverse = new AST.ProgramNode(inverse, inverseStrip, inverseLocationInfo);\r\n        } else {\r\n          this.inverse = new AST.ProgramNode(inverse, inverseStrip);\r\n        }\r\n        this.strip.right = inverseStrip.left;\r\n      } else if (inverseStrip) {\r\n        this.strip.left = inverseStrip.right;\r\n      }\r\n    },\r\n\r\n    MustacheNode: function(rawParams, hash, open, strip, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"mustache\";\r\n      this.strip = strip;\r\n\r\n      // Open may be a string parsed from the parser or a passed boolean flag\r\n      if (open != null && open.charAt) {\r\n        // Must use charAt to support IE pre-10\r\n        var escapeFlag = open.charAt(3) || open.charAt(2);\r\n        this.escaped = escapeFlag !== '{' && escapeFlag !== '&';\r\n      } else {\r\n        this.escaped = !!open;\r\n      }\r\n\r\n      if (rawParams instanceof AST.SexprNode) {\r\n        this.sexpr = rawParams;\r\n      } else {\r\n        // Support old AST API\r\n        this.sexpr = new AST.SexprNode(rawParams, hash);\r\n      }\r\n\r\n      this.sexpr.isRoot = true;\r\n\r\n      // Support old AST API that stored this info in MustacheNode\r\n      this.id = this.sexpr.id;\r\n      this.params = this.sexpr.params;\r\n      this.hash = this.sexpr.hash;\r\n      this.eligibleHelper = this.sexpr.eligibleHelper;\r\n      this.isHelper = this.sexpr.isHelper;\r\n    },\r\n\r\n    SexprNode: function(rawParams, hash, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n\r\n      this.type = \"sexpr\";\r\n      this.hash = hash;\r\n\r\n      var id = this.id = rawParams[0];\r\n      var params = this.params = rawParams.slice(1);\r\n\r\n      // a mustache is an eligible helper if:\r\n      // * its id is simple (a single part, not `this` or `..`)\r\n      var eligibleHelper = this.eligibleHelper = id.isSimple;\r\n\r\n      // a mustache is definitely a helper if:\r\n      // * it is an eligible helper, and\r\n      // * it has at least one parameter or hash segment\r\n      this.isHelper = eligibleHelper && (params.length || hash);\r\n\r\n      // if a mustache is an eligible helper but not a definite\r\n      // helper, it is ambiguous, and will be resolved in a later\r\n      // pass or at runtime.\r\n    },\r\n\r\n    PartialNode: function(partialName, context, strip, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type         = \"partial\";\r\n      this.partialName  = partialName;\r\n      this.context      = context;\r\n      this.strip = strip;\r\n    },\r\n\r\n    BlockNode: function(mustache, program, inverse, close, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n\r\n      if(mustache.sexpr.id.original !== close.path.original) {\r\n        throw new Exception(mustache.sexpr.id.original + \" doesn't match \" + close.path.original, this);\r\n      }\r\n\r\n      this.type = 'block';\r\n      this.mustache = mustache;\r\n      this.program  = program;\r\n      this.inverse  = inverse;\r\n\r\n      this.strip = {\r\n        left: mustache.strip.left,\r\n        right: close.strip.right\r\n      };\r\n\r\n      (program || inverse).strip.left = mustache.strip.right;\r\n      (inverse || program).strip.right = close.strip.left;\r\n\r\n      if (inverse && !program) {\r\n        this.isInverse = true;\r\n      }\r\n    },\r\n\r\n    ContentNode: function(string, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"content\";\r\n      this.string = string;\r\n    },\r\n\r\n    HashNode: function(pairs, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"hash\";\r\n      this.pairs = pairs;\r\n    },\r\n\r\n    IdNode: function(parts, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"ID\";\r\n\r\n      var original = \"\",\r\n          dig = [],\r\n          depth = 0;\r\n\r\n      for(var i=0,l=parts.length; i<l; i++) {\r\n        var part = parts[i].part;\r\n        original += (parts[i].separator || '') + part;\r\n\r\n        if (part === \"..\" || part === \".\" || part === \"this\") {\r\n          if (dig.length > 0) {\r\n            throw new Exception(\"Invalid path: \" + original, this);\r\n          } else if (part === \"..\") {\r\n            depth++;\r\n          } else {\r\n            this.isScoped = true;\r\n          }\r\n        } else {\r\n          dig.push(part);\r\n        }\r\n      }\r\n\r\n      this.original = original;\r\n      this.parts    = dig;\r\n      this.string   = dig.join('.');\r\n      this.depth    = depth;\r\n\r\n      // an ID is simple if it only has one part, and that part is not\r\n      // `..` or `this`.\r\n      this.isSimple = parts.length === 1 && !this.isScoped && depth === 0;\r\n\r\n      this.stringModeValue = this.string;\r\n    },\r\n\r\n    PartialNameNode: function(name, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"PARTIAL_NAME\";\r\n      this.name = name.original;\r\n    },\r\n\r\n    DataNode: function(id, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"DATA\";\r\n      this.id = id;\r\n    },\r\n\r\n    StringNode: function(string, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"STRING\";\r\n      this.original =\r\n        this.string =\r\n        this.stringModeValue = string;\r\n    },\r\n\r\n    IntegerNode: function(integer, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"INTEGER\";\r\n      this.original =\r\n        this.integer = integer;\r\n      this.stringModeValue = Number(integer);\r\n    },\r\n\r\n    BooleanNode: function(bool, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"BOOLEAN\";\r\n      this.bool = bool;\r\n      this.stringModeValue = bool === \"true\";\r\n    },\r\n\r\n    CommentNode: function(comment, locInfo) {\r\n      LocationInfo.call(this, locInfo);\r\n      this.type = \"comment\";\r\n      this.comment = comment;\r\n    }\r\n  };\r\n\r\n  // Must be exported as an object rather than the root of the module as the jison lexer\r\n  // most modify the object to operate properly.\r\n  __exports__ = AST;\r\n  return __exports__;\r\n})(__module5__);\r\n\r\n// handlebars/compiler/parser.js\r\nvar __module9__ = (function() {\r\n  \"use strict\";\r\n  var __exports__;\r\n  /* jshint ignore:start */\r\n  /* Jison generated parser */\r\n  var handlebars = (function(){\r\n  var parser = {trace: function trace() { },\r\n  yy: {},\r\n  symbols_: {\"error\":2,\"root\":3,\"statements\":4,\"EOF\":5,\"program\":6,\"simpleInverse\":7,\"statement\":8,\"openInverse\":9,\"closeBlock\":10,\"openBlock\":11,\"mustache\":12,\"partial\":13,\"CONTENT\":14,\"COMMENT\":15,\"OPEN_BLOCK\":16,\"sexpr\":17,\"CLOSE\":18,\"OPEN_INVERSE\":19,\"OPEN_ENDBLOCK\":20,\"path\":21,\"OPEN\":22,\"OPEN_UNESCAPED\":23,\"CLOSE_UNESCAPED\":24,\"OPEN_PARTIAL\":25,\"partialName\":26,\"partial_option0\":27,\"sexpr_repetition0\":28,\"sexpr_option0\":29,\"dataName\":30,\"param\":31,\"STRING\":32,\"INTEGER\":33,\"BOOLEAN\":34,\"OPEN_SEXPR\":35,\"CLOSE_SEXPR\":36,\"hash\":37,\"hash_repetition_plus0\":38,\"hashSegment\":39,\"ID\":40,\"EQUALS\":41,\"DATA\":42,\"pathSegments\":43,\"SEP\":44,\"$accept\":0,\"$end\":1},\r\n  terminals_: {2:\"error\",5:\"EOF\",14:\"CONTENT\",15:\"COMMENT\",16:\"OPEN_BLOCK\",18:\"CLOSE\",19:\"OPEN_INVERSE\",20:\"OPEN_ENDBLOCK\",22:\"OPEN\",23:\"OPEN_UNESCAPED\",24:\"CLOSE_UNESCAPED\",25:\"OPEN_PARTIAL\",32:\"STRING\",33:\"INTEGER\",34:\"BOOLEAN\",35:\"OPEN_SEXPR\",36:\"CLOSE_SEXPR\",40:\"ID\",41:\"EQUALS\",42:\"DATA\",44:\"SEP\"},\r\n  productions_: [0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],\r\n  performAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {\r\n\r\n  var $0 = $$.length - 1;\r\n  switch (yystate) {\r\n  case 1: return new yy.ProgramNode($$[$0-1], this._$); \r\n  break;\r\n  case 2: return new yy.ProgramNode([], this._$); \r\n  break;\r\n  case 3:this.$ = new yy.ProgramNode([], $$[$0-1], $$[$0], this._$);\r\n  break;\r\n  case 4:this.$ = new yy.ProgramNode($$[$0-2], $$[$0-1], $$[$0], this._$);\r\n  break;\r\n  case 5:this.$ = new yy.ProgramNode($$[$0-1], $$[$0], [], this._$);\r\n  break;\r\n  case 6:this.$ = new yy.ProgramNode($$[$0], this._$);\r\n  break;\r\n  case 7:this.$ = new yy.ProgramNode([], this._$);\r\n  break;\r\n  case 8:this.$ = new yy.ProgramNode([], this._$);\r\n  break;\r\n  case 9:this.$ = [$$[$0]];\r\n  break;\r\n  case 10: $$[$0-1].push($$[$0]); this.$ = $$[$0-1]; \r\n  break;\r\n  case 11:this.$ = new yy.BlockNode($$[$0-2], $$[$0-1].inverse, $$[$0-1], $$[$0], this._$);\r\n  break;\r\n  case 12:this.$ = new yy.BlockNode($$[$0-2], $$[$0-1], $$[$0-1].inverse, $$[$0], this._$);\r\n  break;\r\n  case 13:this.$ = $$[$0];\r\n  break;\r\n  case 14:this.$ = $$[$0];\r\n  break;\r\n  case 15:this.$ = new yy.ContentNode($$[$0], this._$);\r\n  break;\r\n  case 16:this.$ = new yy.CommentNode($$[$0], this._$);\r\n  break;\r\n  case 17:this.$ = new yy.MustacheNode($$[$0-1], null, $$[$0-2], stripFlags($$[$0-2], $$[$0]), this._$);\r\n  break;\r\n  case 18:this.$ = new yy.MustacheNode($$[$0-1], null, $$[$0-2], stripFlags($$[$0-2], $$[$0]), this._$);\r\n  break;\r\n  case 19:this.$ = {path: $$[$0-1], strip: stripFlags($$[$0-2], $$[$0])};\r\n  break;\r\n  case 20:this.$ = new yy.MustacheNode($$[$0-1], null, $$[$0-2], stripFlags($$[$0-2], $$[$0]), this._$);\r\n  break;\r\n  case 21:this.$ = new yy.MustacheNode($$[$0-1], null, $$[$0-2], stripFlags($$[$0-2], $$[$0]), this._$);\r\n  break;\r\n  case 22:this.$ = new yy.PartialNode($$[$0-2], $$[$0-1], stripFlags($$[$0-3], $$[$0]), this._$);\r\n  break;\r\n  case 23:this.$ = stripFlags($$[$0-1], $$[$0]);\r\n  break;\r\n  case 24:this.$ = new yy.SexprNode([$$[$0-2]].concat($$[$0-1]), $$[$0], this._$);\r\n  break;\r\n  case 25:this.$ = new yy.SexprNode([$$[$0]], null, this._$);\r\n  break;\r\n  case 26:this.$ = $$[$0];\r\n  break;\r\n  case 27:this.$ = new yy.StringNode($$[$0], this._$);\r\n  break;\r\n  case 28:this.$ = new yy.IntegerNode($$[$0], this._$);\r\n  break;\r\n  case 29:this.$ = new yy.BooleanNode($$[$0], this._$);\r\n  break;\r\n  case 30:this.$ = $$[$0];\r\n  break;\r\n  case 31:$$[$0-1].isHelper = true; this.$ = $$[$0-1];\r\n  break;\r\n  case 32:this.$ = new yy.HashNode($$[$0], this._$);\r\n  break;\r\n  case 33:this.$ = [$$[$0-2], $$[$0]];\r\n  break;\r\n  case 34:this.$ = new yy.PartialNameNode($$[$0], this._$);\r\n  break;\r\n  case 35:this.$ = new yy.PartialNameNode(new yy.StringNode($$[$0], this._$), this._$);\r\n  break;\r\n  case 36:this.$ = new yy.PartialNameNode(new yy.IntegerNode($$[$0], this._$));\r\n  break;\r\n  case 37:this.$ = new yy.DataNode($$[$0], this._$);\r\n  break;\r\n  case 38:this.$ = new yy.IdNode($$[$0], this._$);\r\n  break;\r\n  case 39: $$[$0-2].push({part: $$[$0], separator: $$[$0-1]}); this.$ = $$[$0-2]; \r\n  break;\r\n  case 40:this.$ = [{part: $$[$0]}];\r\n  break;\r\n  case 43:this.$ = [];\r\n  break;\r\n  case 44:$$[$0-1].push($$[$0]);\r\n  break;\r\n  case 47:this.$ = [$$[$0]];\r\n  break;\r\n  case 48:$$[$0-1].push($$[$0]);\r\n  break;\r\n  }\r\n  },\r\n  table: [{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],\r\n  defaultActions: {3:[2,2],16:[2,1],50:[2,42]},\r\n  parseError: function parseError(str, hash) {\r\n      throw new Error(str);\r\n  },\r\n  parse: function parse(input) {\r\n      var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = \"\", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\r\n      this.lexer.setInput(input);\r\n      this.lexer.yy = this.yy;\r\n      this.yy.lexer = this.lexer;\r\n      this.yy.parser = this;\r\n      if (typeof this.lexer.yylloc == \"undefined\")\r\n          this.lexer.yylloc = {};\r\n      var yyloc = this.lexer.yylloc;\r\n      lstack.push(yyloc);\r\n      var ranges = this.lexer.options && this.lexer.options.ranges;\r\n      if (typeof this.yy.parseError === \"function\")\r\n          this.parseError = this.yy.parseError;\r\n      function popStack(n) {\r\n          stack.length = stack.length - 2 * n;\r\n          vstack.length = vstack.length - n;\r\n          lstack.length = lstack.length - n;\r\n      }\r\n      function lex() {\r\n          var token;\r\n          token = self.lexer.lex() || 1;\r\n          if (typeof token !== \"number\") {\r\n              token = self.symbols_[token] || token;\r\n          }\r\n          return token;\r\n      }\r\n      var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\r\n      while (true) {\r\n          state = stack[stack.length - 1];\r\n          if (this.defaultActions[state]) {\r\n              action = this.defaultActions[state];\r\n          } else {\r\n              if (symbol === null || typeof symbol == \"undefined\") {\r\n                  symbol = lex();\r\n              }\r\n              action = table[state] && table[state][symbol];\r\n          }\r\n          if (typeof action === \"undefined\" || !action.length || !action[0]) {\r\n              var errStr = \"\";\r\n              if (!recovering) {\r\n                  expected = [];\r\n                  for (p in table[state])\r\n                      if (this.terminals_[p] && p > 2) {\r\n                          expected.push(\"'\" + this.terminals_[p] + \"'\");\r\n                      }\r\n                  if (this.lexer.showPosition) {\r\n                      errStr = \"Parse error on line \" + (yylineno + 1) + \":\\n\" + this.lexer.showPosition() + \"\\nExpecting \" + expected.join(\", \") + \", got '\" + (this.terminals_[symbol] || symbol) + \"'\";\r\n                  } else {\r\n                      errStr = \"Parse error on line \" + (yylineno + 1) + \": Unexpected \" + (symbol == 1?\"end of input\":\"'\" + (this.terminals_[symbol] || symbol) + \"'\");\r\n                  }\r\n                  this.parseError(errStr, {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});\r\n              }\r\n          }\r\n          if (action[0] instanceof Array && action.length > 1) {\r\n              throw new Error(\"Parse Error: multiple actions possible at state: \" + state + \", token: \" + symbol);\r\n          }\r\n          switch (action[0]) {\r\n          case 1:\r\n              stack.push(symbol);\r\n              vstack.push(this.lexer.yytext);\r\n              lstack.push(this.lexer.yylloc);\r\n              stack.push(action[1]);\r\n              symbol = null;\r\n              if (!preErrorSymbol) {\r\n                  yyleng = this.lexer.yyleng;\r\n                  yytext = this.lexer.yytext;\r\n                  yylineno = this.lexer.yylineno;\r\n                  yyloc = this.lexer.yylloc;\r\n                  if (recovering > 0)\r\n                      recovering--;\r\n              } else {\r\n                  symbol = preErrorSymbol;\r\n                  preErrorSymbol = null;\r\n              }\r\n              break;\r\n          case 2:\r\n              len = this.productions_[action[1]][1];\r\n              yyval.$ = vstack[vstack.length - len];\r\n              yyval._$ = {first_line: lstack[lstack.length - (len || 1)].first_line, last_line: lstack[lstack.length - 1].last_line, first_column: lstack[lstack.length - (len || 1)].first_column, last_column: lstack[lstack.length - 1].last_column};\r\n              if (ranges) {\r\n                  yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]];\r\n              }\r\n              r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\r\n              if (typeof r !== \"undefined\") {\r\n                  return r;\r\n              }\r\n              if (len) {\r\n                  stack = stack.slice(0, -1 * len * 2);\r\n                  vstack = vstack.slice(0, -1 * len);\r\n                  lstack = lstack.slice(0, -1 * len);\r\n              }\r\n              stack.push(this.productions_[action[1]][0]);\r\n              vstack.push(yyval.$);\r\n              lstack.push(yyval._$);\r\n              newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\r\n              stack.push(newState);\r\n              break;\r\n          case 3:\r\n              return true;\r\n          }\r\n      }\r\n      return true;\r\n  }\r\n  };\r\n\r\n\r\n  function stripFlags(open, close) {\r\n    return {\r\n      left: open.charAt(2) === '~',\r\n      right: close.charAt(0) === '~' || close.charAt(1) === '~'\r\n    };\r\n  }\r\n\r\n  /* Jison generated lexer */\r\n  var lexer = (function(){\r\n  var lexer = ({EOF:1,\r\n  parseError:function parseError(str, hash) {\r\n          if (this.yy.parser) {\r\n              this.yy.parser.parseError(str, hash);\r\n          } else {\r\n              throw new Error(str);\r\n          }\r\n      },\r\n  setInput:function (input) {\r\n          this._input = input;\r\n          this._more = this._less = this.done = false;\r\n          this.yylineno = this.yyleng = 0;\r\n          this.yytext = this.matched = this.match = '';\r\n          this.conditionStack = ['INITIAL'];\r\n          this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};\r\n          if (this.options.ranges) this.yylloc.range = [0,0];\r\n          this.offset = 0;\r\n          return this;\r\n      },\r\n  input:function () {\r\n          var ch = this._input[0];\r\n          this.yytext += ch;\r\n          this.yyleng++;\r\n          this.offset++;\r\n          this.match += ch;\r\n          this.matched += ch;\r\n          var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\r\n          if (lines) {\r\n              this.yylineno++;\r\n              this.yylloc.last_line++;\r\n          } else {\r\n              this.yylloc.last_column++;\r\n          }\r\n          if (this.options.ranges) this.yylloc.range[1]++;\r\n\r\n          this._input = this._input.slice(1);\r\n          return ch;\r\n      },\r\n  unput:function (ch) {\r\n          var len = ch.length;\r\n          var lines = ch.split(/(?:\\r\\n?|\\n)/g);\r\n\r\n          this._input = ch + this._input;\r\n          this.yytext = this.yytext.substr(0, this.yytext.length-len-1);\r\n          //this.yyleng -= len;\r\n          this.offset -= len;\r\n          var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\r\n          this.match = this.match.substr(0, this.match.length-1);\r\n          this.matched = this.matched.substr(0, this.matched.length-1);\r\n\r\n          if (lines.length-1) this.yylineno -= lines.length-1;\r\n          var r = this.yylloc.range;\r\n\r\n          this.yylloc = {first_line: this.yylloc.first_line,\r\n            last_line: this.yylineno+1,\r\n            first_column: this.yylloc.first_column,\r\n            last_column: lines ?\r\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length:\r\n                this.yylloc.first_column - len\r\n            };\r\n\r\n          if (this.options.ranges) {\r\n              this.yylloc.range = [r[0], r[0] + this.yyleng - len];\r\n          }\r\n          return this;\r\n      },\r\n  more:function () {\r\n          this._more = true;\r\n          return this;\r\n      },\r\n  less:function (n) {\r\n          this.unput(this.match.slice(n));\r\n      },\r\n  pastInput:function () {\r\n          var past = this.matched.substr(0, this.matched.length - this.match.length);\r\n          return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\r\n      },\r\n  upcomingInput:function () {\r\n          var next = this.match;\r\n          if (next.length < 20) {\r\n              next += this._input.substr(0, 20-next.length);\r\n          }\r\n          return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\\n/g, \"\");\r\n      },\r\n  showPosition:function () {\r\n          var pre = this.pastInput();\r\n          var c = new Array(pre.length + 1).join(\"-\");\r\n          return pre + this.upcomingInput() + \"\\n\" + c+\"^\";\r\n      },\r\n  next:function () {\r\n          if (this.done) {\r\n              return this.EOF;\r\n          }\r\n          if (!this._input) this.done = true;\r\n\r\n          var token,\r\n              match,\r\n              tempMatch,\r\n              index,\r\n              col,\r\n              lines;\r\n          if (!this._more) {\r\n              this.yytext = '';\r\n              this.match = '';\r\n          }\r\n          var rules = this._currentRules();\r\n          for (var i=0;i < rules.length; i++) {\r\n              tempMatch = this._input.match(this.rules[rules[i]]);\r\n              if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\r\n                  match = tempMatch;\r\n                  index = i;\r\n                  if (!this.options.flex) break;\r\n              }\r\n          }\r\n          if (match) {\r\n              lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\r\n              if (lines) this.yylineno += lines.length;\r\n              this.yylloc = {first_line: this.yylloc.last_line,\r\n                             last_line: this.yylineno+1,\r\n                             first_column: this.yylloc.last_column,\r\n                             last_column: lines ? lines[lines.length-1].length-lines[lines.length-1].match(/\\r?\\n?/)[0].length : this.yylloc.last_column + match[0].length};\r\n              this.yytext += match[0];\r\n              this.match += match[0];\r\n              this.matches = match;\r\n              this.yyleng = this.yytext.length;\r\n              if (this.options.ranges) {\r\n                  this.yylloc.range = [this.offset, this.offset += this.yyleng];\r\n              }\r\n              this._more = false;\r\n              this._input = this._input.slice(match[0].length);\r\n              this.matched += match[0];\r\n              token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);\r\n              if (this.done && this._input) this.done = false;\r\n              if (token) return token;\r\n              else return;\r\n          }\r\n          if (this._input === \"\") {\r\n              return this.EOF;\r\n          } else {\r\n              return this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\\n'+this.showPosition(),\r\n                      {text: \"\", token: null, line: this.yylineno});\r\n          }\r\n      },\r\n  lex:function lex() {\r\n          var r = this.next();\r\n          if (typeof r !== 'undefined') {\r\n              return r;\r\n          } else {\r\n              return this.lex();\r\n          }\r\n      },\r\n  begin:function begin(condition) {\r\n          this.conditionStack.push(condition);\r\n      },\r\n  popState:function popState() {\r\n          return this.conditionStack.pop();\r\n      },\r\n  _currentRules:function _currentRules() {\r\n          return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;\r\n      },\r\n  topState:function () {\r\n          return this.conditionStack[this.conditionStack.length-2];\r\n      },\r\n  pushState:function begin(condition) {\r\n          this.begin(condition);\r\n      }});\r\n  lexer.options = {};\r\n  lexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\n\r\n\r\n  function strip(start, end) {\r\n    return yy_.yytext = yy_.yytext.substr(start, yy_.yyleng-end);\r\n  }\r\n\r\n\r\n  var YYSTATE=YY_START\r\n  switch($avoiding_name_collisions) {\r\n  case 0:\r\n                                     if(yy_.yytext.slice(-2) === \"\\\\\\\\\") {\r\n                                       strip(0,1);\r\n                                       this.begin(\"mu\");\r\n                                     } else if(yy_.yytext.slice(-1) === \"\\\\\") {\r\n                                       strip(0,1);\r\n                                       this.begin(\"emu\");\r\n                                     } else {\r\n                                       this.begin(\"mu\");\r\n                                     }\r\n                                     if(yy_.yytext) return 14;\r\n                                   \r\n  break;\r\n  case 1:return 14;\r\n  break;\r\n  case 2:\r\n                                     this.popState();\r\n                                     return 14;\r\n                                   \r\n  break;\r\n  case 3:strip(0,4); this.popState(); return 15;\r\n  break;\r\n  case 4:return 35;\r\n  break;\r\n  case 5:return 36;\r\n  break;\r\n  case 6:return 25;\r\n  break;\r\n  case 7:return 16;\r\n  break;\r\n  case 8:return 20;\r\n  break;\r\n  case 9:return 19;\r\n  break;\r\n  case 10:return 19;\r\n  break;\r\n  case 11:return 23;\r\n  break;\r\n  case 12:return 22;\r\n  break;\r\n  case 13:this.popState(); this.begin('com');\r\n  break;\r\n  case 14:strip(3,5); this.popState(); return 15;\r\n  break;\r\n  case 15:return 22;\r\n  break;\r\n  case 16:return 41;\r\n  break;\r\n  case 17:return 40;\r\n  break;\r\n  case 18:return 40;\r\n  break;\r\n  case 19:return 44;\r\n  break;\r\n  case 20:// ignore whitespace\r\n  break;\r\n  case 21:this.popState(); return 24;\r\n  break;\r\n  case 22:this.popState(); return 18;\r\n  break;\r\n  case 23:yy_.yytext = strip(1,2).replace(/\\\\\"/g,'\"'); return 32;\r\n  break;\r\n  case 24:yy_.yytext = strip(1,2).replace(/\\\\'/g,\"'\"); return 32;\r\n  break;\r\n  case 25:return 42;\r\n  break;\r\n  case 26:return 34;\r\n  break;\r\n  case 27:return 34;\r\n  break;\r\n  case 28:return 33;\r\n  break;\r\n  case 29:return 40;\r\n  break;\r\n  case 30:yy_.yytext = strip(1,2); return 40;\r\n  break;\r\n  case 31:return 'INVALID';\r\n  break;\r\n  case 32:return 5;\r\n  break;\r\n  }\r\n  };\r\n  lexer.rules = [/^(?:[^\\x00]*?(?=(\\{\\{)))/,/^(?:[^\\x00]+)/,/^(?:[^\\x00]{2,}?(?=(\\{\\{|\\\\\\{\\{|\\\\\\\\\\{\\{|$)))/,/^(?:[\\s\\S]*?--\\}\\})/,/^(?:\\()/,/^(?:\\))/,/^(?:\\{\\{(~)?>)/,/^(?:\\{\\{(~)?#)/,/^(?:\\{\\{(~)?\\/)/,/^(?:\\{\\{(~)?\\^)/,/^(?:\\{\\{(~)?\\s*else\\b)/,/^(?:\\{\\{(~)?\\{)/,/^(?:\\{\\{(~)?&)/,/^(?:\\{\\{!--)/,/^(?:\\{\\{![\\s\\S]*?\\}\\})/,/^(?:\\{\\{(~)?)/,/^(?:=)/,/^(?:\\.\\.)/,/^(?:\\.(?=([=~}\\s\\/.)])))/,/^(?:[\\/.])/,/^(?:\\s+)/,/^(?:\\}(~)?\\}\\})/,/^(?:(~)?\\}\\})/,/^(?:\"(\\\\[\"]|[^\"])*\")/,/^(?:'(\\\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\\s)])))/,/^(?:false(?=([~}\\s)])))/,/^(?:-?[0-9]+(?=([~}\\s)])))/,/^(?:([^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=([=~}\\s\\/.)]))))/,/^(?:\\[[^\\]]*\\])/,/^(?:.)/,/^(?:$)/];\r\n  lexer.conditions = {\"mu\":{\"rules\":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],\"inclusive\":false},\"emu\":{\"rules\":[2],\"inclusive\":false},\"com\":{\"rules\":[3],\"inclusive\":false},\"INITIAL\":{\"rules\":[0,1,32],\"inclusive\":true}};\r\n  return lexer;})()\r\n  parser.lexer = lexer;\r\n  function Parser () { this.yy = {}; }Parser.prototype = parser;parser.Parser = Parser;\r\n  return new Parser;\r\n  })();__exports__ = handlebars;\r\n  /* jshint ignore:end */\r\n  return __exports__;\r\n})();\r\n\r\n// handlebars/compiler/base.js\r\nvar __module8__ = (function(__dependency1__, __dependency2__) {\r\n  \"use strict\";\r\n  var __exports__ = {};\r\n  var parser = __dependency1__;\r\n  var AST = __dependency2__;\r\n\r\n  __exports__.parser = parser;\r\n\r\n  function parse(input) {\r\n    // Just return if an already-compile AST was passed in.\r\n    if(input.constructor === AST.ProgramNode) { return input; }\r\n\r\n    parser.yy = AST;\r\n    return parser.parse(input);\r\n  }\r\n\r\n  __exports__.parse = parse;\r\n  return __exports__;\r\n})(__module9__, __module7__);\r\n\r\n// handlebars/compiler/compiler.js\r\nvar __module10__ = (function(__dependency1__) {\r\n  \"use strict\";\r\n  var __exports__ = {};\r\n  var Exception = __dependency1__;\r\n\r\n  function Compiler() {}\r\n\r\n  __exports__.Compiler = Compiler;// the foundHelper register will disambiguate helper lookup from finding a\r\n  // function in a context. This is necessary for mustache compatibility, which\r\n  // requires that context functions in blocks are evaluated by blockHelperMissing,\r\n  // and then proceed as if the resulting value was provided to blockHelperMissing.\r\n\r\n  Compiler.prototype = {\r\n    compiler: Compiler,\r\n\r\n    disassemble: function() {\r\n      var opcodes = this.opcodes, opcode, out = [], params, param;\r\n\r\n      for (var i=0, l=opcodes.length; i<l; i++) {\r\n        opcode = opcodes[i];\r\n\r\n        if (opcode.opcode === 'DECLARE') {\r\n          out.push(\"DECLARE \" + opcode.name + \"=\" + opcode.value);\r\n        } else {\r\n          params = [];\r\n          for (var j=0; j<opcode.args.length; j++) {\r\n            param = opcode.args[j];\r\n            if (typeof param === \"string\") {\r\n              param = \"\\\"\" + param.replace(\"\\n\", \"\\\\n\") + \"\\\"\";\r\n            }\r\n            params.push(param);\r\n          }\r\n          out.push(opcode.opcode + \" \" + params.join(\" \"));\r\n        }\r\n      }\r\n\r\n      return out.join(\"\\n\");\r\n    },\r\n\r\n    equals: function(other) {\r\n      var len = this.opcodes.length;\r\n      if (other.opcodes.length !== len) {\r\n        return false;\r\n      }\r\n\r\n      for (var i = 0; i < len; i++) {\r\n        var opcode = this.opcodes[i],\r\n            otherOpcode = other.opcodes[i];\r\n        if (opcode.opcode !== otherOpcode.opcode || opcode.args.length !== otherOpcode.args.length) {\r\n          return false;\r\n        }\r\n        for (var j = 0; j < opcode.args.length; j++) {\r\n          if (opcode.args[j] !== otherOpcode.args[j]) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      len = this.children.length;\r\n      if (other.children.length !== len) {\r\n        return false;\r\n      }\r\n      for (i = 0; i < len; i++) {\r\n        if (!this.children[i].equals(other.children[i])) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    },\r\n\r\n    guid: 0,\r\n\r\n    compile: function(program, options) {\r\n      this.opcodes = [];\r\n      this.children = [];\r\n      this.depths = {list: []};\r\n      this.options = options;\r\n\r\n      // These changes will propagate to the other compiler components\r\n      var knownHelpers = this.options.knownHelpers;\r\n      this.options.knownHelpers = {\r\n        'helperMissing': true,\r\n        'blockHelperMissing': true,\r\n        'each': true,\r\n        'if': true,\r\n        'unless': true,\r\n        'with': true,\r\n        'log': true\r\n      };\r\n      if (knownHelpers) {\r\n        for (var name in knownHelpers) {\r\n          this.options.knownHelpers[name] = knownHelpers[name];\r\n        }\r\n      }\r\n\r\n      return this.accept(program);\r\n    },\r\n\r\n    accept: function(node) {\r\n      var strip = node.strip || {},\r\n          ret;\r\n      if (strip.left) {\r\n        this.opcode('strip');\r\n      }\r\n\r\n      ret = this[node.type](node);\r\n\r\n      if (strip.right) {\r\n        this.opcode('strip');\r\n      }\r\n\r\n      return ret;\r\n    },\r\n\r\n    program: function(program) {\r\n      var statements = program.statements;\r\n\r\n      for(var i=0, l=statements.length; i<l; i++) {\r\n        this.accept(statements[i]);\r\n      }\r\n      this.isSimple = l === 1;\r\n\r\n      this.depths.list = this.depths.list.sort(function(a, b) {\r\n        return a - b;\r\n      });\r\n\r\n      return this;\r\n    },\r\n\r\n    compileProgram: function(program) {\r\n      var result = new this.compiler().compile(program, this.options);\r\n      var guid = this.guid++, depth;\r\n\r\n      this.usePartial = this.usePartial || result.usePartial;\r\n\r\n      this.children[guid] = result;\r\n\r\n      for(var i=0, l=result.depths.list.length; i<l; i++) {\r\n        depth = result.depths.list[i];\r\n\r\n        if(depth < 2) { continue; }\r\n        else { this.addDepth(depth - 1); }\r\n      }\r\n\r\n      return guid;\r\n    },\r\n\r\n    block: function(block) {\r\n      var mustache = block.mustache,\r\n          program = block.program,\r\n          inverse = block.inverse;\r\n\r\n      if (program) {\r\n        program = this.compileProgram(program);\r\n      }\r\n\r\n      if (inverse) {\r\n        inverse = this.compileProgram(inverse);\r\n      }\r\n\r\n      var sexpr = mustache.sexpr;\r\n      var type = this.classifySexpr(sexpr);\r\n\r\n      if (type === \"helper\") {\r\n        this.helperSexpr(sexpr, program, inverse);\r\n      } else if (type === \"simple\") {\r\n        this.simpleSexpr(sexpr);\r\n\r\n        // now that the simple mustache is resolved, we need to\r\n        // evaluate it by executing `blockHelperMissing`\r\n        this.opcode('pushProgram', program);\r\n        this.opcode('pushProgram', inverse);\r\n        this.opcode('emptyHash');\r\n        this.opcode('blockValue');\r\n      } else {\r\n        this.ambiguousSexpr(sexpr, program, inverse);\r\n\r\n        // now that the simple mustache is resolved, we need to\r\n        // evaluate it by executing `blockHelperMissing`\r\n        this.opcode('pushProgram', program);\r\n        this.opcode('pushProgram', inverse);\r\n        this.opcode('emptyHash');\r\n        this.opcode('ambiguousBlockValue');\r\n      }\r\n\r\n      this.opcode('append');\r\n    },\r\n\r\n    hash: function(hash) {\r\n      var pairs = hash.pairs, pair, val;\r\n\r\n      this.opcode('pushHash');\r\n\r\n      for(var i=0, l=pairs.length; i<l; i++) {\r\n        pair = pairs[i];\r\n        val  = pair[1];\r\n\r\n        if (this.options.stringParams) {\r\n          if(val.depth) {\r\n            this.addDepth(val.depth);\r\n          }\r\n          this.opcode('getContext', val.depth || 0);\r\n          this.opcode('pushStringParam', val.stringModeValue, val.type);\r\n\r\n          if (val.type === 'sexpr') {\r\n            // Subexpressions get evaluated and passed in\r\n            // in string params mode.\r\n            this.sexpr(val);\r\n          }\r\n        } else {\r\n          this.accept(val);\r\n        }\r\n\r\n        this.opcode('assignToHash', pair[0]);\r\n      }\r\n      this.opcode('popHash');\r\n    },\r\n\r\n    partial: function(partial) {\r\n      var partialName = partial.partialName;\r\n      this.usePartial = true;\r\n\r\n      if(partial.context) {\r\n        this.ID(partial.context);\r\n      } else {\r\n        this.opcode('push', 'depth0');\r\n      }\r\n\r\n      this.opcode('invokePartial', partialName.name);\r\n      this.opcode('append');\r\n    },\r\n\r\n    content: function(content) {\r\n      this.opcode('appendContent', content.string);\r\n    },\r\n\r\n    mustache: function(mustache) {\r\n      this.sexpr(mustache.sexpr);\r\n\r\n      if(mustache.escaped && !this.options.noEscape) {\r\n        this.opcode('appendEscaped');\r\n      } else {\r\n        this.opcode('append');\r\n      }\r\n    },\r\n\r\n    ambiguousSexpr: function(sexpr, program, inverse) {\r\n      var id = sexpr.id,\r\n          name = id.parts[0],\r\n          isBlock = program != null || inverse != null;\r\n\r\n      this.opcode('getContext', id.depth);\r\n\r\n      this.opcode('pushProgram', program);\r\n      this.opcode('pushProgram', inverse);\r\n\r\n      this.opcode('invokeAmbiguous', name, isBlock);\r\n    },\r\n\r\n    simpleSexpr: function(sexpr) {\r\n      var id = sexpr.id;\r\n\r\n      if (id.type === 'DATA') {\r\n        this.DATA(id);\r\n      } else if (id.parts.length) {\r\n        this.ID(id);\r\n      } else {\r\n        // Simplified ID for `this`\r\n        this.addDepth(id.depth);\r\n        this.opcode('getContext', id.depth);\r\n        this.opcode('pushContext');\r\n      }\r\n\r\n      this.opcode('resolvePossibleLambda');\r\n    },\r\n\r\n    helperSexpr: function(sexpr, program, inverse) {\r\n      var params = this.setupFullMustacheParams(sexpr, program, inverse),\r\n          name = sexpr.id.parts[0];\r\n\r\n      if (this.options.knownHelpers[name]) {\r\n        this.opcode('invokeKnownHelper', params.length, name);\r\n      } else if (this.options.knownHelpersOnly) {\r\n        throw new Exception(\"You specified knownHelpersOnly, but used the unknown helper \" + name, sexpr);\r\n      } else {\r\n        this.opcode('invokeHelper', params.length, name, sexpr.isRoot);\r\n      }\r\n    },\r\n\r\n    sexpr: function(sexpr) {\r\n      var type = this.classifySexpr(sexpr);\r\n\r\n      if (type === \"simple\") {\r\n        this.simpleSexpr(sexpr);\r\n      } else if (type === \"helper\") {\r\n        this.helperSexpr(sexpr);\r\n      } else {\r\n        this.ambiguousSexpr(sexpr);\r\n      }\r\n    },\r\n\r\n    ID: function(id) {\r\n      this.addDepth(id.depth);\r\n      this.opcode('getContext', id.depth);\r\n\r\n      var name = id.parts[0];\r\n      if (!name) {\r\n        this.opcode('pushContext');\r\n      } else {\r\n        this.opcode('lookupOnContext', id.parts[0]);\r\n      }\r\n\r\n      for(var i=1, l=id.parts.length; i<l; i++) {\r\n        this.opcode('lookup', id.parts[i]);\r\n      }\r\n    },\r\n\r\n    DATA: function(data) {\r\n      this.options.data = true;\r\n      if (data.id.isScoped || data.id.depth) {\r\n        throw new Exception('Scoped data references are not supported: ' + data.original, data);\r\n      }\r\n\r\n      this.opcode('lookupData');\r\n      var parts = data.id.parts;\r\n      for(var i=0, l=parts.length; i<l; i++) {\r\n        this.opcode('lookup', parts[i]);\r\n      }\r\n    },\r\n\r\n    STRING: function(string) {\r\n      this.opcode('pushString', string.string);\r\n    },\r\n\r\n    INTEGER: function(integer) {\r\n      this.opcode('pushLiteral', integer.integer);\r\n    },\r\n\r\n    BOOLEAN: function(bool) {\r\n      this.opcode('pushLiteral', bool.bool);\r\n    },\r\n\r\n    comment: function() {},\r\n\r\n    // HELPERS\r\n    opcode: function(name) {\r\n      this.opcodes.push({ opcode: name, args: [].slice.call(arguments, 1) });\r\n    },\r\n\r\n    declare: function(name, value) {\r\n      this.opcodes.push({ opcode: 'DECLARE', name: name, value: value });\r\n    },\r\n\r\n    addDepth: function(depth) {\r\n      if(depth === 0) { return; }\r\n\r\n      if(!this.depths[depth]) {\r\n        this.depths[depth] = true;\r\n        this.depths.list.push(depth);\r\n      }\r\n    },\r\n\r\n    classifySexpr: function(sexpr) {\r\n      var isHelper   = sexpr.isHelper;\r\n      var isEligible = sexpr.eligibleHelper;\r\n      var options    = this.options;\r\n\r\n      // if ambiguous, we can possibly resolve the ambiguity now\r\n      if (isEligible && !isHelper) {\r\n        var name = sexpr.id.parts[0];\r\n\r\n        if (options.knownHelpers[name]) {\r\n          isHelper = true;\r\n        } else if (options.knownHelpersOnly) {\r\n          isEligible = false;\r\n        }\r\n      }\r\n\r\n      if (isHelper) { return \"helper\"; }\r\n      else if (isEligible) { return \"ambiguous\"; }\r\n      else { return \"simple\"; }\r\n    },\r\n\r\n    pushParams: function(params) {\r\n      var i = params.length, param;\r\n\r\n      while(i--) {\r\n        param = params[i];\r\n\r\n        if(this.options.stringParams) {\r\n          if(param.depth) {\r\n            this.addDepth(param.depth);\r\n          }\r\n\r\n          this.opcode('getContext', param.depth || 0);\r\n          this.opcode('pushStringParam', param.stringModeValue, param.type);\r\n\r\n          if (param.type === 'sexpr') {\r\n            // Subexpressions get evaluated and passed in\r\n            // in string params mode.\r\n            this.sexpr(param);\r\n          }\r\n        } else {\r\n          this[param.type](param);\r\n        }\r\n      }\r\n    },\r\n\r\n    setupFullMustacheParams: function(sexpr, program, inverse) {\r\n      var params = sexpr.params;\r\n      this.pushParams(params);\r\n\r\n      this.opcode('pushProgram', program);\r\n      this.opcode('pushProgram', inverse);\r\n\r\n      if (sexpr.hash) {\r\n        this.hash(sexpr.hash);\r\n      } else {\r\n        this.opcode('emptyHash');\r\n      }\r\n\r\n      return params;\r\n    }\r\n  };\r\n\r\n  function precompile(input, options, env) {\r\n    if (input == null || (typeof input !== 'string' && input.constructor !== env.AST.ProgramNode)) {\r\n      throw new Exception(\"You must pass a string or Handlebars AST to Handlebars.precompile. You passed \" + input);\r\n    }\r\n\r\n    options = options || {};\r\n    if (!('data' in options)) {\r\n      options.data = true;\r\n    }\r\n\r\n    var ast = env.parse(input);\r\n    var environment = new env.Compiler().compile(ast, options);\r\n    return new env.JavaScriptCompiler().compile(environment, options);\r\n  }\r\n\r\n  __exports__.precompile = precompile;function compile(input, options, env) {\r\n    if (input == null || (typeof input !== 'string' && input.constructor !== env.AST.ProgramNode)) {\r\n      throw new Exception(\"You must pass a string or Handlebars AST to Handlebars.compile. You passed \" + input);\r\n    }\r\n\r\n    options = options || {};\r\n\r\n    if (!('data' in options)) {\r\n      options.data = true;\r\n    }\r\n\r\n    var compiled;\r\n\r\n    function compileInput() {\r\n      var ast = env.parse(input);\r\n      var environment = new env.Compiler().compile(ast, options);\r\n      var templateSpec = new env.JavaScriptCompiler().compile(environment, options, undefined, true);\r\n      return env.template(templateSpec);\r\n    }\r\n\r\n    // Template is only compiled on first use and cached after that point.\r\n    return function(context, options) {\r\n      if (!compiled) {\r\n        compiled = compileInput();\r\n      }\r\n      return compiled.call(this, context, options);\r\n    };\r\n  }\r\n\r\n  __exports__.compile = compile;\r\n  return __exports__;\r\n})(__module5__);\r\n\r\n// handlebars/compiler/javascript-compiler.js\r\nvar __module11__ = (function(__dependency1__, __dependency2__) {\r\n  \"use strict\";\r\n  var __exports__;\r\n  var COMPILER_REVISION = __dependency1__.COMPILER_REVISION;\r\n  var REVISION_CHANGES = __dependency1__.REVISION_CHANGES;\r\n  var log = __dependency1__.log;\r\n  var Exception = __dependency2__;\r\n\r\n  function Literal(value) {\r\n    this.value = value;\r\n  }\r\n\r\n  function JavaScriptCompiler() {}\r\n\r\n  JavaScriptCompiler.prototype = {\r\n    // PUBLIC API: You can override these methods in a subclass to provide\r\n    // alternative compiled forms for name lookup and buffering semantics\r\n    nameLookup: function(parent, name /* , type*/) {\r\n      var wrap,\r\n          ret;\r\n      if (parent.indexOf('depth') === 0) {\r\n        wrap = true;\r\n      }\r\n\r\n      if (/^[0-9]+$/.test(name)) {\r\n        ret = parent + \"[\" + name + \"]\";\r\n      } else if (JavaScriptCompiler.isValidJavaScriptVariableName(name)) {\r\n        ret = parent + \".\" + name;\r\n      }\r\n      else {\r\n        ret = parent + \"['\" + name + \"']\";\r\n      }\r\n\r\n      if (wrap) {\r\n        return '(' + parent + ' && ' + ret + ')';\r\n      } else {\r\n        return ret;\r\n      }\r\n    },\r\n\r\n    compilerInfo: function() {\r\n      var revision = COMPILER_REVISION,\r\n          versions = REVISION_CHANGES[revision];\r\n      return \"this.compilerInfo = [\"+revision+\",'\"+versions+\"'];\\n\";\r\n    },\r\n\r\n    appendToBuffer: function(string) {\r\n      if (this.environment.isSimple) {\r\n        return \"return \" + string + \";\";\r\n      } else {\r\n        return {\r\n          appendToBuffer: true,\r\n          content: string,\r\n          toString: function() { return \"buffer += \" + string + \";\"; }\r\n        };\r\n      }\r\n    },\r\n\r\n    initializeBuffer: function() {\r\n      return this.quotedString(\"\");\r\n    },\r\n\r\n    namespace: \"Handlebars\",\r\n    // END PUBLIC API\r\n\r\n    compile: function(environment, options, context, asObject) {\r\n      this.environment = environment;\r\n      this.options = options || {};\r\n\r\n      log('debug', this.environment.disassemble() + \"\\n\\n\");\r\n\r\n      this.name = this.environment.name;\r\n      this.isChild = !!context;\r\n      this.context = context || {\r\n        programs: [],\r\n        environments: [],\r\n        aliases: { }\r\n      };\r\n\r\n      this.preamble();\r\n\r\n      this.stackSlot = 0;\r\n      this.stackVars = [];\r\n      this.registers = { list: [] };\r\n      this.hashes = [];\r\n      this.compileStack = [];\r\n      this.inlineStack = [];\r\n\r\n      this.compileChildren(environment, options);\r\n\r\n      var opcodes = environment.opcodes, opcode;\r\n\r\n      this.i = 0;\r\n\r\n      for(var l=opcodes.length; this.i<l; this.i++) {\r\n        opcode = opcodes[this.i];\r\n\r\n        if(opcode.opcode === 'DECLARE') {\r\n          this[opcode.name] = opcode.value;\r\n        } else {\r\n          this[opcode.opcode].apply(this, opcode.args);\r\n        }\r\n\r\n        // Reset the stripNext flag if it was not set by this operation.\r\n        if (opcode.opcode !== this.stripNext) {\r\n          this.stripNext = false;\r\n        }\r\n      }\r\n\r\n      // Flush any trailing content that might be pending.\r\n      this.pushSource('');\r\n\r\n      if (this.stackSlot || this.inlineStack.length || this.compileStack.length) {\r\n        throw new Exception('Compile completed with content left on stack');\r\n      }\r\n\r\n      return this.createFunctionContext(asObject);\r\n    },\r\n\r\n    preamble: function() {\r\n      var out = [];\r\n\r\n      if (!this.isChild) {\r\n        var namespace = this.namespace;\r\n\r\n        var copies = \"helpers = this.merge(helpers, \" + namespace + \".helpers);\";\r\n        if (this.environment.usePartial) { copies = copies + \" partials = this.merge(partials, \" + namespace + \".partials);\"; }\r\n        if (this.options.data) { copies = copies + \" data = data || {};\"; }\r\n        out.push(copies);\r\n      } else {\r\n        out.push('');\r\n      }\r\n\r\n      if (!this.environment.isSimple) {\r\n        out.push(\", buffer = \" + this.initializeBuffer());\r\n      } else {\r\n        out.push(\"\");\r\n      }\r\n\r\n      // track the last context pushed into place to allow skipping the\r\n      // getContext opcode when it would be a noop\r\n      this.lastContext = 0;\r\n      this.source = out;\r\n    },\r\n\r\n    createFunctionContext: function(asObject) {\r\n      var locals = this.stackVars.concat(this.registers.list);\r\n\r\n      if(locals.length > 0) {\r\n        this.source[1] = this.source[1] + \", \" + locals.join(\", \");\r\n      }\r\n\r\n      // Generate minimizer alias mappings\r\n      if (!this.isChild) {\r\n        for (var alias in this.context.aliases) {\r\n          if (this.context.aliases.hasOwnProperty(alias)) {\r\n            this.source[1] = this.source[1] + ', ' + alias + '=' + this.context.aliases[alias];\r\n          }\r\n        }\r\n      }\r\n\r\n      if (this.source[1]) {\r\n        this.source[1] = \"var \" + this.source[1].substring(2) + \";\";\r\n      }\r\n\r\n      // Merge children\r\n      if (!this.isChild) {\r\n        this.source[1] += '\\n' + this.context.programs.join('\\n') + '\\n';\r\n      }\r\n\r\n      if (!this.environment.isSimple) {\r\n        this.pushSource(\"return buffer;\");\r\n      }\r\n\r\n      var params = this.isChild ? [\"depth0\", \"data\"] : [\"Handlebars\", \"depth0\", \"helpers\", \"partials\", \"data\"];\r\n\r\n      for(var i=0, l=this.environment.depths.list.length; i<l; i++) {\r\n        params.push(\"depth\" + this.environment.depths.list[i]);\r\n      }\r\n\r\n      // Perform a second pass over the output to merge content when possible\r\n      var source = this.mergeSource();\r\n\r\n      if (!this.isChild) {\r\n        source = this.compilerInfo()+source;\r\n      }\r\n\r\n      if (asObject) {\r\n        params.push(source);\r\n\r\n        return Function.apply(this, params);\r\n      } else {\r\n        var functionSource = 'function ' + (this.name || '') + '(' + params.join(',') + ') {\\n  ' + source + '}';\r\n        log('debug', functionSource + \"\\n\\n\");\r\n        return functionSource;\r\n      }\r\n    },\r\n    mergeSource: function() {\r\n      // WARN: We are not handling the case where buffer is still populated as the source should\r\n      // not have buffer append operations as their final action.\r\n      var source = '',\r\n          buffer;\r\n      for (var i = 0, len = this.source.length; i < len; i++) {\r\n        var line = this.source[i];\r\n        if (line.appendToBuffer) {\r\n          if (buffer) {\r\n            buffer = buffer + '\\n    + ' + line.content;\r\n          } else {\r\n            buffer = line.content;\r\n          }\r\n        } else {\r\n          if (buffer) {\r\n            source += 'buffer += ' + buffer + ';\\n  ';\r\n            buffer = undefined;\r\n          }\r\n          source += line + '\\n  ';\r\n        }\r\n      }\r\n      return source;\r\n    },\r\n\r\n    // [blockValue]\r\n    //\r\n    // On stack, before: hash, inverse, program, value\r\n    // On stack, after: return value of blockHelperMissing\r\n    //\r\n    // The purpose of this opcode is to take a block of the form\r\n    // `{{#foo}}...{{/foo}}`, resolve the value of `foo`, and\r\n    // replace it on the stack with the result of properly\r\n    // invoking blockHelperMissing.\r\n    blockValue: function() {\r\n      this.context.aliases.blockHelperMissing = 'helpers.blockHelperMissing';\r\n\r\n      var params = [\"depth0\"];\r\n      this.setupParams(0, params);\r\n\r\n      this.replaceStack(function(current) {\r\n        params.splice(1, 0, current);\r\n        return \"blockHelperMissing.call(\" + params.join(\", \") + \")\";\r\n      });\r\n    },\r\n\r\n    // [ambiguousBlockValue]\r\n    //\r\n    // On stack, before: hash, inverse, program, value\r\n    // Compiler value, before: lastHelper=value of last found helper, if any\r\n    // On stack, after, if no lastHelper: same as [blockValue]\r\n    // On stack, after, if lastHelper: value\r\n    ambiguousBlockValue: function() {\r\n      this.context.aliases.blockHelperMissing = 'helpers.blockHelperMissing';\r\n\r\n      var params = [\"depth0\"];\r\n      this.setupParams(0, params);\r\n\r\n      var current = this.topStack();\r\n      params.splice(1, 0, current);\r\n\r\n      this.pushSource(\"if (!\" + this.lastHelper + \") { \" + current + \" = blockHelperMissing.call(\" + params.join(\", \") + \"); }\");\r\n    },\r\n\r\n    // [appendContent]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: ...\r\n    //\r\n    // Appends the string value of `content` to the current buffer\r\n    appendContent: function(content) {\r\n      if (this.pendingContent) {\r\n        content = this.pendingContent + content;\r\n      }\r\n      if (this.stripNext) {\r\n        content = content.replace(/^\\s+/, '');\r\n      }\r\n\r\n      this.pendingContent = content;\r\n    },\r\n\r\n    // [strip]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: ...\r\n    //\r\n    // Removes any trailing whitespace from the prior content node and flags\r\n    // the next operation for stripping if it is a content node.\r\n    strip: function() {\r\n      if (this.pendingContent) {\r\n        this.pendingContent = this.pendingContent.replace(/\\s+$/, '');\r\n      }\r\n      this.stripNext = 'strip';\r\n    },\r\n\r\n    // [append]\r\n    //\r\n    // On stack, before: value, ...\r\n    // On stack, after: ...\r\n    //\r\n    // Coerces `value` to a String and appends it to the current buffer.\r\n    //\r\n    // If `value` is truthy, or 0, it is coerced into a string and appended\r\n    // Otherwise, the empty string is appended\r\n    append: function() {\r\n      // Force anything that is inlined onto the stack so we don't have duplication\r\n      // when we examine local\r\n      this.flushInline();\r\n      var local = this.popStack();\r\n      this.pushSource(\"if(\" + local + \" || \" + local + \" === 0) { \" + this.appendToBuffer(local) + \" }\");\r\n      if (this.environment.isSimple) {\r\n        this.pushSource(\"else { \" + this.appendToBuffer(\"''\") + \" }\");\r\n      }\r\n    },\r\n\r\n    // [appendEscaped]\r\n    //\r\n    // On stack, before: value, ...\r\n    // On stack, after: ...\r\n    //\r\n    // Escape `value` and append it to the buffer\r\n    appendEscaped: function() {\r\n      this.context.aliases.escapeExpression = 'this.escapeExpression';\r\n\r\n      this.pushSource(this.appendToBuffer(\"escapeExpression(\" + this.popStack() + \")\"));\r\n    },\r\n\r\n    // [getContext]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: ...\r\n    // Compiler value, after: lastContext=depth\r\n    //\r\n    // Set the value of the `lastContext` compiler value to the depth\r\n    getContext: function(depth) {\r\n      if(this.lastContext !== depth) {\r\n        this.lastContext = depth;\r\n      }\r\n    },\r\n\r\n    // [lookupOnContext]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: currentContext[name], ...\r\n    //\r\n    // Looks up the value of `name` on the current context and pushes\r\n    // it onto the stack.\r\n    lookupOnContext: function(name) {\r\n      this.push(this.nameLookup('depth' + this.lastContext, name, 'context'));\r\n    },\r\n\r\n    // [pushContext]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: currentContext, ...\r\n    //\r\n    // Pushes the value of the current context onto the stack.\r\n    pushContext: function() {\r\n      this.pushStackLiteral('depth' + this.lastContext);\r\n    },\r\n\r\n    // [resolvePossibleLambda]\r\n    //\r\n    // On stack, before: value, ...\r\n    // On stack, after: resolved value, ...\r\n    //\r\n    // If the `value` is a lambda, replace it on the stack by\r\n    // the return value of the lambda\r\n    resolvePossibleLambda: function() {\r\n      this.context.aliases.functionType = '\"function\"';\r\n\r\n      this.replaceStack(function(current) {\r\n        return \"typeof \" + current + \" === functionType ? \" + current + \".apply(depth0) : \" + current;\r\n      });\r\n    },\r\n\r\n    // [lookup]\r\n    //\r\n    // On stack, before: value, ...\r\n    // On stack, after: value[name], ...\r\n    //\r\n    // Replace the value on the stack with the result of looking\r\n    // up `name` on `value`\r\n    lookup: function(name) {\r\n      this.replaceStack(function(current) {\r\n        return current + \" == null || \" + current + \" === false ? \" + current + \" : \" + this.nameLookup(current, name, 'context');\r\n      });\r\n    },\r\n\r\n    // [lookupData]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: data, ...\r\n    //\r\n    // Push the data lookup operator\r\n    lookupData: function() {\r\n      this.pushStackLiteral('data');\r\n    },\r\n\r\n    // [pushStringParam]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: string, currentContext, ...\r\n    //\r\n    // This opcode is designed for use in string mode, which\r\n    // provides the string value of a parameter along with its\r\n    // depth rather than resolving it immediately.\r\n    pushStringParam: function(string, type) {\r\n      this.pushStackLiteral('depth' + this.lastContext);\r\n\r\n      this.pushString(type);\r\n\r\n      // If it's a subexpression, the string result\r\n      // will be pushed after this opcode.\r\n      if (type !== 'sexpr') {\r\n        if (typeof string === 'string') {\r\n          this.pushString(string);\r\n        } else {\r\n          this.pushStackLiteral(string);\r\n        }\r\n      }\r\n    },\r\n\r\n    emptyHash: function() {\r\n      this.pushStackLiteral('{}');\r\n\r\n      if (this.options.stringParams) {\r\n        this.push('{}'); // hashContexts\r\n        this.push('{}'); // hashTypes\r\n      }\r\n    },\r\n    pushHash: function() {\r\n      if (this.hash) {\r\n        this.hashes.push(this.hash);\r\n      }\r\n      this.hash = {values: [], types: [], contexts: []};\r\n    },\r\n    popHash: function() {\r\n      var hash = this.hash;\r\n      this.hash = this.hashes.pop();\r\n\r\n      if (this.options.stringParams) {\r\n        this.push('{' + hash.contexts.join(',') + '}');\r\n        this.push('{' + hash.types.join(',') + '}');\r\n      }\r\n\r\n      this.push('{\\n    ' + hash.values.join(',\\n    ') + '\\n  }');\r\n    },\r\n\r\n    // [pushString]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: quotedString(string), ...\r\n    //\r\n    // Push a quoted version of `string` onto the stack\r\n    pushString: function(string) {\r\n      this.pushStackLiteral(this.quotedString(string));\r\n    },\r\n\r\n    // [push]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: expr, ...\r\n    //\r\n    // Push an expression onto the stack\r\n    push: function(expr) {\r\n      this.inlineStack.push(expr);\r\n      return expr;\r\n    },\r\n\r\n    // [pushLiteral]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: value, ...\r\n    //\r\n    // Pushes a value onto the stack. This operation prevents\r\n    // the compiler from creating a temporary variable to hold\r\n    // it.\r\n    pushLiteral: function(value) {\r\n      this.pushStackLiteral(value);\r\n    },\r\n\r\n    // [pushProgram]\r\n    //\r\n    // On stack, before: ...\r\n    // On stack, after: program(guid), ...\r\n    //\r\n    // Push a program expression onto the stack. This takes\r\n    // a compile-time guid and converts it into a runtime-accessible\r\n    // expression.\r\n    pushProgram: function(guid) {\r\n      if (guid != null) {\r\n        this.pushStackLiteral(this.programExpression(guid));\r\n      } else {\r\n        this.pushStackLiteral(null);\r\n      }\r\n    },\r\n\r\n    // [invokeHelper]\r\n    //\r\n    // On stack, before: hash, inverse, program, params..., ...\r\n    // On stack, after: result of helper invocation\r\n    //\r\n    // Pops off the helper's parameters, invokes the helper,\r\n    // and pushes the helper's return value onto the stack.\r\n    //\r\n    // If the helper is not found, `helperMissing` is called.\r\n    invokeHelper: function(paramSize, name, isRoot) {\r\n      this.context.aliases.helperMissing = 'helpers.helperMissing';\r\n      this.useRegister('helper');\r\n\r\n      var helper = this.lastHelper = this.setupHelper(paramSize, name, true);\r\n      var nonHelper = this.nameLookup('depth' + this.lastContext, name, 'context');\r\n\r\n      var lookup = 'helper = ' + helper.name + ' || ' + nonHelper;\r\n      if (helper.paramsInit) {\r\n        lookup += ',' + helper.paramsInit;\r\n      }\r\n\r\n      this.push(\r\n        '('\r\n          + lookup\r\n          + ',helper '\r\n            + '? helper.call(' + helper.callParams + ') '\r\n            + ': helperMissing.call(' + helper.helperMissingParams + '))');\r\n\r\n      // Always flush subexpressions. This is both to prevent the compounding size issue that\r\n      // occurs when the code has to be duplicated for inlining and also to prevent errors\r\n      // due to the incorrect options object being passed due to the shared register.\r\n      if (!isRoot) {\r\n        this.flushInline();\r\n      }\r\n    },\r\n\r\n    // [invokeKnownHelper]\r\n    //\r\n    // On stack, before: hash, inverse, program, params..., ...\r\n    // On stack, after: result of helper invocation\r\n    //\r\n    // This operation is used when the helper is known to exist,\r\n    // so a `helperMissing` fallback is not required.\r\n    invokeKnownHelper: function(paramSize, name) {\r\n      var helper = this.setupHelper(paramSize, name);\r\n      this.push(helper.name + \".call(\" + helper.callParams + \")\");\r\n    },\r\n\r\n    // [invokeAmbiguous]\r\n    //\r\n    // On stack, before: hash, inverse, program, params..., ...\r\n    // On stack, after: result of disambiguation\r\n    //\r\n    // This operation is used when an expression like `{{foo}}`\r\n    // is provided, but we don't know at compile-time whether it\r\n    // is a helper or a path.\r\n    //\r\n    // This operation emits more code than the other options,\r\n    // and can be avoided by passing the `knownHelpers` and\r\n    // `knownHelpersOnly` flags at compile-time.\r\n    invokeAmbiguous: function(name, helperCall) {\r\n      this.context.aliases.functionType = '\"function\"';\r\n      this.useRegister('helper');\r\n\r\n      this.emptyHash();\r\n      var helper = this.setupHelper(0, name, helperCall);\r\n\r\n      var helperName = this.lastHelper = this.nameLookup('helpers', name, 'helper');\r\n\r\n      var nonHelper = this.nameLookup('depth' + this.lastContext, name, 'context');\r\n      var nextStack = this.nextStack();\r\n\r\n      if (helper.paramsInit) {\r\n        this.pushSource(helper.paramsInit);\r\n      }\r\n      this.pushSource('if (helper = ' + helperName + ') { ' + nextStack + ' = helper.call(' + helper.callParams + '); }');\r\n      this.pushSource('else { helper = ' + nonHelper + '; ' + nextStack + ' = typeof helper === functionType ? helper.call(' + helper.callParams + ') : helper; }');\r\n    },\r\n\r\n    // [invokePartial]\r\n    //\r\n    // On stack, before: context, ...\r\n    // On stack after: result of partial invocation\r\n    //\r\n    // This operation pops off a context, invokes a partial with that context,\r\n    // and pushes the result of the invocation back.\r\n    invokePartial: function(name) {\r\n      var params = [this.nameLookup('partials', name, 'partial'), \"'\" + name + \"'\", this.popStack(), \"helpers\", \"partials\"];\r\n\r\n      if (this.options.data) {\r\n        params.push(\"data\");\r\n      }\r\n\r\n      this.context.aliases.self = \"this\";\r\n      this.push(\"self.invokePartial(\" + params.join(\", \") + \")\");\r\n    },\r\n\r\n    // [assignToHash]\r\n    //\r\n    // On stack, before: value, hash, ...\r\n    // On stack, after: hash, ...\r\n    //\r\n    // Pops a value and hash off the stack, assigns `hash[key] = value`\r\n    // and pushes the hash back onto the stack.\r\n    assignToHash: function(key) {\r\n      var value = this.popStack(),\r\n          context,\r\n          type;\r\n\r\n      if (this.options.stringParams) {\r\n        type = this.popStack();\r\n        context = this.popStack();\r\n      }\r\n\r\n      var hash = this.hash;\r\n      if (context) {\r\n        hash.contexts.push(\"'\" + key + \"': \" + context);\r\n      }\r\n      if (type) {\r\n        hash.types.push(\"'\" + key + \"': \" + type);\r\n      }\r\n      hash.values.push(\"'\" + key + \"': (\" + value + \")\");\r\n    },\r\n\r\n    // HELPERS\r\n\r\n    compiler: JavaScriptCompiler,\r\n\r\n    compileChildren: function(environment, options) {\r\n      var children = environment.children, child, compiler;\r\n\r\n      for(var i=0, l=children.length; i<l; i++) {\r\n        child = children[i];\r\n        compiler = new this.compiler();\r\n\r\n        var index = this.matchExistingProgram(child);\r\n\r\n        if (index == null) {\r\n          this.context.programs.push('');     // Placeholder to prevent name conflicts for nested children\r\n          index = this.context.programs.length;\r\n          child.index = index;\r\n          child.name = 'program' + index;\r\n          this.context.programs[index] = compiler.compile(child, options, this.context);\r\n          this.context.environments[index] = child;\r\n        } else {\r\n          child.index = index;\r\n          child.name = 'program' + index;\r\n        }\r\n      }\r\n    },\r\n    matchExistingProgram: function(child) {\r\n      for (var i = 0, len = this.context.environments.length; i < len; i++) {\r\n        var environment = this.context.environments[i];\r\n        if (environment && environment.equals(child)) {\r\n          return i;\r\n        }\r\n      }\r\n    },\r\n\r\n    programExpression: function(guid) {\r\n      this.context.aliases.self = \"this\";\r\n\r\n      if(guid == null) {\r\n        return \"self.noop\";\r\n      }\r\n\r\n      var child = this.environment.children[guid],\r\n          depths = child.depths.list, depth;\r\n\r\n      var programParams = [child.index, child.name, \"data\"];\r\n\r\n      for(var i=0, l = depths.length; i<l; i++) {\r\n        depth = depths[i];\r\n\r\n        if(depth === 1) { programParams.push(\"depth0\"); }\r\n        else { programParams.push(\"depth\" + (depth - 1)); }\r\n      }\r\n\r\n      return (depths.length === 0 ? \"self.program(\" : \"self.programWithDepth(\") + programParams.join(\", \") + \")\";\r\n    },\r\n\r\n    register: function(name, val) {\r\n      this.useRegister(name);\r\n      this.pushSource(name + \" = \" + val + \";\");\r\n    },\r\n\r\n    useRegister: function(name) {\r\n      if(!this.registers[name]) {\r\n        this.registers[name] = true;\r\n        this.registers.list.push(name);\r\n      }\r\n    },\r\n\r\n    pushStackLiteral: function(item) {\r\n      return this.push(new Literal(item));\r\n    },\r\n\r\n    pushSource: function(source) {\r\n      if (this.pendingContent) {\r\n        this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));\r\n        this.pendingContent = undefined;\r\n      }\r\n\r\n      if (source) {\r\n        this.source.push(source);\r\n      }\r\n    },\r\n\r\n    pushStack: function(item) {\r\n      this.flushInline();\r\n\r\n      var stack = this.incrStack();\r\n      if (item) {\r\n        this.pushSource(stack + \" = \" + item + \";\");\r\n      }\r\n      this.compileStack.push(stack);\r\n      return stack;\r\n    },\r\n\r\n    replaceStack: function(callback) {\r\n      var prefix = '',\r\n          inline = this.isInline(),\r\n          stack,\r\n          createdStack,\r\n          usedLiteral;\r\n\r\n      // If we are currently inline then we want to merge the inline statement into the\r\n      // replacement statement via ','\r\n      if (inline) {\r\n        var top = this.popStack(true);\r\n\r\n        if (top instanceof Literal) {\r\n          // Literals do not need to be inlined\r\n          stack = top.value;\r\n          usedLiteral = true;\r\n        } else {\r\n          // Get or create the current stack name for use by the inline\r\n          createdStack = !this.stackSlot;\r\n          var name = !createdStack ? this.topStackName() : this.incrStack();\r\n\r\n          prefix = '(' + this.push(name) + ' = ' + top + '),';\r\n          stack = this.topStack();\r\n        }\r\n      } else {\r\n        stack = this.topStack();\r\n      }\r\n\r\n      var item = callback.call(this, stack);\r\n\r\n      if (inline) {\r\n        if (!usedLiteral) {\r\n          this.popStack();\r\n        }\r\n        if (createdStack) {\r\n          this.stackSlot--;\r\n        }\r\n        this.push('(' + prefix + item + ')');\r\n      } else {\r\n        // Prevent modification of the context depth variable. Through replaceStack\r\n        if (!/^stack/.test(stack)) {\r\n          stack = this.nextStack();\r\n        }\r\n\r\n        this.pushSource(stack + \" = (\" + prefix + item + \");\");\r\n      }\r\n      return stack;\r\n    },\r\n\r\n    nextStack: function() {\r\n      return this.pushStack();\r\n    },\r\n\r\n    incrStack: function() {\r\n      this.stackSlot++;\r\n      if(this.stackSlot > this.stackVars.length) { this.stackVars.push(\"stack\" + this.stackSlot); }\r\n      return this.topStackName();\r\n    },\r\n    topStackName: function() {\r\n      return \"stack\" + this.stackSlot;\r\n    },\r\n    flushInline: function() {\r\n      var inlineStack = this.inlineStack;\r\n      if (inlineStack.length) {\r\n        this.inlineStack = [];\r\n        for (var i = 0, len = inlineStack.length; i < len; i++) {\r\n          var entry = inlineStack[i];\r\n          if (entry instanceof Literal) {\r\n            this.compileStack.push(entry);\r\n          } else {\r\n            this.pushStack(entry);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    isInline: function() {\r\n      return this.inlineStack.length;\r\n    },\r\n\r\n    popStack: function(wrapped) {\r\n      var inline = this.isInline(),\r\n          item = (inline ? this.inlineStack : this.compileStack).pop();\r\n\r\n      if (!wrapped && (item instanceof Literal)) {\r\n        return item.value;\r\n      } else {\r\n        if (!inline) {\r\n          if (!this.stackSlot) {\r\n            throw new Exception('Invalid stack pop');\r\n          }\r\n          this.stackSlot--;\r\n        }\r\n        return item;\r\n      }\r\n    },\r\n\r\n    topStack: function(wrapped) {\r\n      var stack = (this.isInline() ? this.inlineStack : this.compileStack),\r\n          item = stack[stack.length - 1];\r\n\r\n      if (!wrapped && (item instanceof Literal)) {\r\n        return item.value;\r\n      } else {\r\n        return item;\r\n      }\r\n    },\r\n\r\n    quotedString: function(str) {\r\n      return '\"' + str\r\n        .replace(/\\\\/g, '\\\\\\\\')\r\n        .replace(/\"/g, '\\\\\"')\r\n        .replace(/\\n/g, '\\\\n')\r\n        .replace(/\\r/g, '\\\\r')\r\n        .replace(/\\u2028/g, '\\\\u2028')   // Per Ecma-262 7.3 + 7.8.4\r\n        .replace(/\\u2029/g, '\\\\u2029') + '\"';\r\n    },\r\n\r\n    setupHelper: function(paramSize, name, missingParams) {\r\n      var params = [],\r\n          paramsInit = this.setupParams(paramSize, params, missingParams);\r\n      var foundHelper = this.nameLookup('helpers', name, 'helper');\r\n\r\n      return {\r\n        params: params,\r\n        paramsInit: paramsInit,\r\n        name: foundHelper,\r\n        callParams: [\"depth0\"].concat(params).join(\", \"),\r\n        helperMissingParams: missingParams && [\"depth0\", this.quotedString(name)].concat(params).join(\", \")\r\n      };\r\n    },\r\n\r\n    setupOptions: function(paramSize, params) {\r\n      var options = [], contexts = [], types = [], param, inverse, program;\r\n\r\n      options.push(\"hash:\" + this.popStack());\r\n\r\n      if (this.options.stringParams) {\r\n        options.push(\"hashTypes:\" + this.popStack());\r\n        options.push(\"hashContexts:\" + this.popStack());\r\n      }\r\n\r\n      inverse = this.popStack();\r\n      program = this.popStack();\r\n\r\n      // Avoid setting fn and inverse if neither are set. This allows\r\n      // helpers to do a check for `if (options.fn)`\r\n      if (program || inverse) {\r\n        if (!program) {\r\n          this.context.aliases.self = \"this\";\r\n          program = \"self.noop\";\r\n        }\r\n\r\n        if (!inverse) {\r\n          this.context.aliases.self = \"this\";\r\n          inverse = \"self.noop\";\r\n        }\r\n\r\n        options.push(\"inverse:\" + inverse);\r\n        options.push(\"fn:\" + program);\r\n      }\r\n\r\n      for(var i=0; i<paramSize; i++) {\r\n        param = this.popStack();\r\n        params.push(param);\r\n\r\n        if(this.options.stringParams) {\r\n          types.push(this.popStack());\r\n          contexts.push(this.popStack());\r\n        }\r\n      }\r\n\r\n      if (this.options.stringParams) {\r\n        options.push(\"contexts:[\" + contexts.join(\",\") + \"]\");\r\n        options.push(\"types:[\" + types.join(\",\") + \"]\");\r\n      }\r\n\r\n      if(this.options.data) {\r\n        options.push(\"data:data\");\r\n      }\r\n\r\n      return options;\r\n    },\r\n\r\n    // the params and contexts arguments are passed in arrays\r\n    // to fill in\r\n    setupParams: function(paramSize, params, useRegister) {\r\n      var options = '{' + this.setupOptions(paramSize, params).join(',') + '}';\r\n\r\n      if (useRegister) {\r\n        this.useRegister('options');\r\n        params.push('options');\r\n        return 'options=' + options;\r\n      } else {\r\n        params.push(options);\r\n        return '';\r\n      }\r\n    }\r\n  };\r\n\r\n  var reservedWords = (\r\n    \"break else new var\" +\r\n    \" case finally return void\" +\r\n    \" catch for switch while\" +\r\n    \" continue function this with\" +\r\n    \" default if throw\" +\r\n    \" delete in try\" +\r\n    \" do instanceof typeof\" +\r\n    \" abstract enum int short\" +\r\n    \" boolean export interface static\" +\r\n    \" byte extends long super\" +\r\n    \" char final native synchronized\" +\r\n    \" class float package throws\" +\r\n    \" const goto private transient\" +\r\n    \" debugger implements protected volatile\" +\r\n    \" double import public let yield\"\r\n  ).split(\" \");\r\n\r\n  var compilerWords = JavaScriptCompiler.RESERVED_WORDS = {};\r\n\r\n  for(var i=0, l=reservedWords.length; i<l; i++) {\r\n    compilerWords[reservedWords[i]] = true;\r\n  }\r\n\r\n  JavaScriptCompiler.isValidJavaScriptVariableName = function(name) {\r\n    if(!JavaScriptCompiler.RESERVED_WORDS[name] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  __exports__ = JavaScriptCompiler;\r\n  return __exports__;\r\n})(__module2__, __module5__);\r\n\r\n// handlebars.js\r\nvar __module0__ = (function(__dependency1__, __dependency2__, __dependency3__, __dependency4__, __dependency5__) {\r\n  \"use strict\";\r\n  var __exports__;\r\n  /*globals Handlebars: true */\r\n  var Handlebars = __dependency1__;\r\n\r\n  // Compiler imports\r\n  var AST = __dependency2__;\r\n  var Parser = __dependency3__.parser;\r\n  var parse = __dependency3__.parse;\r\n  var Compiler = __dependency4__.Compiler;\r\n  var compile = __dependency4__.compile;\r\n  var precompile = __dependency4__.precompile;\r\n  var JavaScriptCompiler = __dependency5__;\r\n\r\n  var _create = Handlebars.create;\r\n  var create = function() {\r\n    var hb = _create();\r\n\r\n    hb.compile = function(input, options) {\r\n      return compile(input, options, hb);\r\n    };\r\n    hb.precompile = function (input, options) {\r\n      return precompile(input, options, hb);\r\n    };\r\n\r\n    hb.AST = AST;\r\n    hb.Compiler = Compiler;\r\n    hb.JavaScriptCompiler = JavaScriptCompiler;\r\n    hb.Parser = Parser;\r\n    hb.parse = parse;\r\n\r\n    return hb;\r\n  };\r\n\r\n  Handlebars = create();\r\n  Handlebars.create = create;\r\n\r\n  __exports__ = Handlebars;\r\n  return __exports__;\r\n})(__module1__, __module7__, __module8__, __module10__, __module11__);\r\n\r\n  return __module0__;\r\n})();\r\n;/* =========================================================\r\n * bootstrap-datetimepicker.js\r\n * =========================================================\r\n * Copyright 2012 Stefan Petre\r\n * Improvements by Andrew Rowls\r\n * Improvements by Sébastien Malot\r\n * Improvements by Yun Lai\r\n * Project URL : http://www.malot.fr/bootstrap-datetimepicker\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n/*\r\n * Improvement by CuGBabyBeaR @ 2013-09-12\r\n * \r\n * Make it work in bootstrap v3\r\n */\r\n\r\n!function ($) {\r\n\r\n\tfunction UTCDate() {\r\n\t\treturn new Date(Date.UTC.apply(Date, arguments));\r\n\t}\r\n\r\n\tfunction UTCToday() {\r\n\t\tvar today = new Date();\r\n\t\treturn UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate(), today.getUTCHours(), today.getUTCMinutes(), today.getUTCSeconds(), 0);\r\n\t}\r\n\r\n\t// Picker object\r\n\r\n\tvar Datetimepicker = function (element, options) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.element = $(element);\r\n\r\n\t\t// add container for single page application\r\n\t\t// when page switch the datetimepicker div will be removed also.\r\n\t\tthis.container = options.container || 'body';\r\n\r\n\t\tthis.language = options.language || this.element.data('date-language') || \"en\";\r\n\t\tthis.language = this.language in dates ? this.language : \"en\";\r\n\t\tthis.isRTL = dates[this.language].rtl || false;\r\n\t\tthis.formatType = options.formatType || this.element.data('format-type') || 'standard';\r\n\t\tthis.format = DPGlobal.parseFormat(options.format || this.element.data('date-format') || dates[this.language].format || DPGlobal.getDefaultFormat(this.formatType, 'input'), this.formatType);\r\n\t\tthis.isInline = false;\r\n\t\tthis.isVisible = false;\r\n\t\tthis.isInput = this.element.is('input');\r\n\r\n\r\n\t\tthis.bootcssVer = this.isInput ? (this.element.is('.form-control') ? 3 : 2) : ( this.bootcssVer = this.element.is('.input-group') ? 3 : 2 );\r\n\r\n\t\tthis.component = this.element.is('.date') ? ( this.bootcssVer == 3 ? this.element.find('.input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar').parent() : this.element.find('.add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar').parent()) : false;\r\n\t\tthis.componentReset = this.element.is('.date') ? ( this.bootcssVer == 3 ? this.element.find('.input-group-addon .glyphicon-remove').parent() : this.element.find('.add-on .icon-remove').parent()) : false;\r\n\t\tthis.hasInput = this.component && this.element.find('input').length;\r\n\t\tif (this.component && this.component.length === 0) {\r\n\t\t\tthis.component = false;\r\n\t\t}\r\n\t\tthis.linkField = options.linkField || this.element.data('link-field') || false;\r\n\t\tthis.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data('link-format') || DPGlobal.getDefaultFormat(this.formatType, 'link'), this.formatType);\r\n\t\tthis.minuteStep = options.minuteStep || this.element.data('minute-step') || 5;\r\n\t\tthis.pickerPosition = options.pickerPosition || this.element.data('picker-position') || 'bottom-right';\r\n\t\tthis.showMeridian = options.showMeridian || this.element.data('show-meridian') || false;\r\n\t\tthis.initialDate = options.initialDate || new Date();\r\n\r\n\t\tthis._attachEvents();\r\n\r\n\t\tthis.formatViewType = \"datetime\";\r\n\t\tif ('formatViewType' in options) {\r\n\t\t\tthis.formatViewType = options.formatViewType;\r\n\t\t} else if ('formatViewType' in this.element.data()) {\r\n\t\t\tthis.formatViewType = this.element.data('formatViewType');\r\n\t\t}\r\n\r\n\t\tthis.minView = 0;\r\n\t\tif ('minView' in options) {\r\n\t\t\tthis.minView = options.minView;\r\n\t\t} else if ('minView' in this.element.data()) {\r\n\t\t\tthis.minView = this.element.data('min-view');\r\n\t\t}\r\n\t\tthis.minView = DPGlobal.convertViewMode(this.minView);\r\n\r\n\t\tthis.maxView = DPGlobal.modes.length - 1;\r\n\t\tif ('maxView' in options) {\r\n\t\t\tthis.maxView = options.maxView;\r\n\t\t} else if ('maxView' in this.element.data()) {\r\n\t\t\tthis.maxView = this.element.data('max-view');\r\n\t\t}\r\n\t\tthis.maxView = DPGlobal.convertViewMode(this.maxView);\r\n\r\n\t\tthis.wheelViewModeNavigation = false;\r\n\t\tif ('wheelViewModeNavigation' in options) {\r\n\t\t\tthis.wheelViewModeNavigation = options.wheelViewModeNavigation;\r\n\t\t} else if ('wheelViewModeNavigation' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigation = this.element.data('view-mode-wheel-navigation');\r\n\t\t}\r\n\r\n\t\tthis.wheelViewModeNavigationInverseDirection = false;\r\n\r\n\t\tif ('wheelViewModeNavigationInverseDirection' in options) {\r\n\t\t\tthis.wheelViewModeNavigationInverseDirection = options.wheelViewModeNavigationInverseDirection;\r\n\t\t} else if ('wheelViewModeNavigationInverseDirection' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigationInverseDirection = this.element.data('view-mode-wheel-navigation-inverse-dir');\r\n\t\t}\r\n\r\n\t\tthis.wheelViewModeNavigationDelay = 100;\r\n\t\tif ('wheelViewModeNavigationDelay' in options) {\r\n\t\t\tthis.wheelViewModeNavigationDelay = options.wheelViewModeNavigationDelay;\r\n\t\t} else if ('wheelViewModeNavigationDelay' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigationDelay = this.element.data('view-mode-wheel-navigation-delay');\r\n\t\t}\r\n\r\n\t\tthis.startViewMode = 2;\r\n\t\tif ('startView' in options) {\r\n\t\t\tthis.startViewMode = options.startView;\r\n\t\t} else if ('startView' in this.element.data()) {\r\n\t\t\tthis.startViewMode = this.element.data('start-view');\r\n\t\t}\r\n\t\tthis.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\r\n\t\tthis.viewMode = this.startViewMode;\r\n\r\n\t\tthis.viewSelect = this.minView;\r\n\t\tif ('viewSelect' in options) {\r\n\t\t\tthis.viewSelect = options.viewSelect;\r\n\t\t} else if ('viewSelect' in this.element.data()) {\r\n\t\t\tthis.viewSelect = this.element.data('view-select');\r\n\t\t}\r\n\t\tthis.viewSelect = DPGlobal.convertViewMode(this.viewSelect);\r\n\r\n\t\tthis.forceParse = true;\r\n\t\tif ('forceParse' in options) {\r\n\t\t\tthis.forceParse = options.forceParse;\r\n\t\t} else if ('dateForceParse' in this.element.data()) {\r\n\t\t\tthis.forceParse = this.element.data('date-force-parse');\r\n\t\t}\r\n\r\n\t\tthis.picker = $((this.bootcssVer == 3) ? DPGlobal.templateV3 : DPGlobal.template)\r\n\t\t\t.appendTo(this.isInline ? this.element : this.container) // 'body')\r\n\t\t\t.on({\r\n\t\t\t\tclick:     $.proxy(this.click, this),\r\n\t\t\t\tmousedown: $.proxy(this.mousedown, this)\r\n\t\t\t});\r\n\r\n\t\tif (this.wheelViewModeNavigation) {\r\n\t\t\tif ($.fn.mousewheel) {\r\n\t\t\t\tthis.picker.on({mousewheel: $.proxy(this.mousewheel, this)});\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isInline) {\r\n\t\t\tthis.picker.addClass('datetimepicker-inline');\r\n\t\t} else {\r\n\t\t\tthis.picker.addClass('datetimepicker-dropdown-' + this.pickerPosition + ' dropdown-menu');\r\n\t\t}\r\n\t\tif (this.isRTL) {\r\n\t\t\tthis.picker.addClass('datetimepicker-rtl');\r\n\t\t\tif (this.bootcssVer == 3) {\r\n\t\t\t\tthis.picker.find('.prev span, .next span')\r\n\t\t\t\t\t.toggleClass('glyphicon-arrow-left glyphicon-arrow-right');\r\n\t\t\t} else {\r\n\t\t\t\tthis.picker.find('.prev i, .next i')\r\n\t\t\t\t\t.toggleClass('icon-arrow-left icon-arrow-right');\r\n\t\t\t}\r\n\t\t\t;\r\n\r\n\t\t}\r\n\t\t$(document).on('mousedown', function (e) {\r\n\t\t\t// Clicked outside the datetimepicker, hide it\r\n\t\t\tif ($(e.target).closest('.datetimepicker').length === 0) {\r\n\t\t\t\tthat.hide();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.autoclose = false;\r\n\t\tif ('autoclose' in options) {\r\n\t\t\tthis.autoclose = options.autoclose;\r\n\t\t} else if ('dateAutoclose' in this.element.data()) {\r\n\t\t\tthis.autoclose = this.element.data('date-autoclose');\r\n\t\t}\r\n\r\n\t\tthis.keyboardNavigation = true;\r\n\t\tif ('keyboardNavigation' in options) {\r\n\t\t\tthis.keyboardNavigation = options.keyboardNavigation;\r\n\t\t} else if ('dateKeyboardNavigation' in this.element.data()) {\r\n\t\t\tthis.keyboardNavigation = this.element.data('date-keyboard-navigation');\r\n\t\t}\r\n\r\n\t\tthis.todayBtn = (options.todayBtn || this.element.data('date-today-btn') || false);\r\n\t\tthis.todayHighlight = (options.todayHighlight || this.element.data('date-today-highlight') || false);\r\n\r\n\t\tthis.weekStart = ((options.weekStart || this.element.data('date-weekstart') || dates[this.language].weekStart || 0) % 7);\r\n\t\tthis.weekEnd = ((this.weekStart + 6) % 7);\r\n\t\tthis.startDate = -Infinity;\r\n\t\tthis.endDate = Infinity;\r\n\t\tthis.daysOfWeekDisabled = [];\r\n\t\tthis.setStartDate(options.startDate || this.element.data('date-startdate'));\r\n\t\tthis.setEndDate(options.endDate || this.element.data('date-enddate'));\r\n\t\tthis.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data('date-days-of-week-disabled'));\r\n\t\tthis.fillDow();\r\n\t\tthis.fillMonths();\r\n\t\tthis.update();\r\n\t\tthis.showMode();\r\n\r\n\t\tif (this.isInline) {\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tDatetimepicker.prototype = {\r\n\t\tconstructor: Datetimepicker,\r\n\r\n\t\t_events:       [],\r\n\t\t_attachEvents: function () {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tif (this.isInput) { // single input\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.component && this.hasInput) { // component: input + button\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t// For components that are not readonly, allow keyboard nav\r\n\t\t\t\t\t[this.element.find('input'), {\r\n\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[this.component, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t\tif (this.componentReset) {\r\n\t\t\t\t\tthis._events.push([\r\n\t\t\t\t\t\tthis.componentReset,\r\n\t\t\t\t\t\t{click: $.proxy(this.reset, this)}\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.element.is('div')) {  // inline datetimepicker\r\n\t\t\t\tthis.isInline = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, el, ev; i < this._events.length; i++) {\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.on(ev);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_detachEvents: function () {\r\n\t\t\tfor (var i = 0, el, ev; i < this._events.length; i++) {\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.off(ev);\r\n\t\t\t}\r\n\t\t\tthis._events = [];\r\n\t\t},\r\n\r\n\t\tshow: function (e) {\r\n\t\t\tthis.picker.show();\r\n\t\t\tthis.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n\t\t\tif (this.forceParse) {\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t\tthis.place();\r\n\t\t\t$(window).on('resize', $.proxy(this.place, this));\r\n\t\t\tif (e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'show',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\thide: function (e) {\r\n\t\t\tif (!this.isVisible) return;\r\n\t\t\tif (this.isInline) return;\r\n\t\t\tthis.picker.hide();\r\n\t\t\t$(window).off('resize', this.place);\r\n\t\t\tthis.viewMode = this.startViewMode;\r\n\t\t\tthis.showMode();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\t$(document).off('mousedown', this.hide);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.forceParse &&\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tthis.isInput && this.element.val() ||\r\n\t\t\t\t\t\t\tthis.hasInput && this.element.find('input').val()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tthis.setValue();\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'hide',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tremove: function () {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tthis.picker.remove();\r\n\t\t\tdelete this.picker;\r\n\t\t\tdelete this.element.data().datetimepicker;\r\n\t\t},\r\n\r\n\t\tgetDate: function () {\r\n\t\t\tvar d = this.getUTCDate();\r\n\t\t\treturn new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\r\n\t\t},\r\n\r\n\t\tgetUTCDate: function () {\r\n\t\t\treturn this.date;\r\n\t\t},\r\n\r\n\t\tsetDate: function (d) {\r\n\t\t\tthis.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\r\n\t\t},\r\n\r\n\t\tsetUTCDate: function (d) {\r\n\t\t\tif (d >= this.startDate && d <= this.endDate) {\r\n\t\t\t\tthis.date = d;\r\n\t\t\t\tthis.setValue();\r\n\t\t\t\tthis.viewDate = this.date;\r\n\t\t\t\tthis.fill();\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype:      'outOfRange',\r\n\t\t\t\t\tdate:      d,\r\n\t\t\t\t\tstartDate: this.startDate,\r\n\t\t\t\t\tendDate:   this.endDate\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetFormat: function (format) {\r\n\t\t\tthis.format = DPGlobal.parseFormat(format, this.formatType);\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\telement = this.element;\r\n\t\t\t} else if (this.component) {\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element && element.val()) {\r\n\t\t\t\tthis.setValue();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetValue: function () {\r\n\t\t\tvar formatted = this.getFormattedDate();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\tif (this.component) {\r\n\t\t\t\t\tthis.element.find('input').val(formatted);\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.data('date', formatted);\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.val(formatted);\r\n\t\t\t}\r\n\t\t\tif (this.linkField) {\r\n\t\t\t\t$('#' + this.linkField).val(this.getFormattedDate(this.linkFormat));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetFormattedDate: function (format) {\r\n\t\t\tif (format == undefined) format = this.format;\r\n\t\t\treturn DPGlobal.formatDate(this.date, format, this.language, this.formatType);\r\n\t\t},\r\n\r\n\t\tsetStartDate: function (startDate) {\r\n\t\t\tthis.startDate = startDate || -Infinity;\r\n\t\t\tif (this.startDate !== -Infinity) {\r\n\t\t\t\tthis.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language, this.formatType);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetEndDate: function (endDate) {\r\n\t\t\tthis.endDate = endDate || Infinity;\r\n\t\t\tif (this.endDate !== Infinity) {\r\n\t\t\t\tthis.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language, this.formatType);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetDaysOfWeekDisabled: function (daysOfWeekDisabled) {\r\n\t\t\tthis.daysOfWeekDisabled = daysOfWeekDisabled || [];\r\n\t\t\tif (!$.isArray(this.daysOfWeekDisabled)) {\r\n\t\t\t\tthis.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\r\n\t\t\t}\r\n\t\t\tthis.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function (d) {\r\n\t\t\t\treturn parseInt(d, 10);\r\n\t\t\t});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tplace: function () {\r\n\t\t\tif (this.isInline) return;\r\n\r\n\t\t\tvar index_highest = 0;\r\n\t\t\t$('div').each(function () {\r\n\t\t\t\tvar index_current = parseInt($(this).css(\"zIndex\"), 10);\r\n\t\t\t\tif (index_current > index_highest) {\r\n\t\t\t\t\tindex_highest = index_current;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar zIndex = index_highest + 10;\r\n\r\n\t\t\tvar offset, top, left, containerOffset;\r\n\t\t\tif (this.container instanceof $) {\r\n\t\t\t\tcontainerOffset = this.container.offset();\r\n\t\t\t} else {\r\n\t\t\t\tcontainerOffset = $(this.container).offset();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.component) {\r\n\t\t\t\toffset = this.component.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t\tif (this.pickerPosition == 'bottom-left' || this.pickerPosition == 'top-left') {\r\n\t\t\t\t\tleft += this.component.outerWidth() - this.picker.outerWidth();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.element.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(left+220 > document.body.clientWidth){\r\n            \t\t\tleft = document.body.clientWidth-220;\r\n          \t\t}\r\n\t\t\t\r\n\t\t\tif (this.pickerPosition == 'top-left' || this.pickerPosition == 'top-right') {\r\n\t\t\t\ttop = offset.top - this.picker.outerHeight();\r\n\t\t\t} else {\r\n\t\t\t\ttop = offset.top + this.height;\r\n\t\t\t}\r\n\r\n\t\t\ttop = top - containerOffset.top;\r\n\t\t\tleft = left - containerOffset.left;\r\n\r\n\t\t\tthis.picker.css({\r\n\t\t\t\ttop:    top,\r\n\t\t\t\tleft:   left,\r\n\t\t\t\tzIndex: zIndex\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tupdate: function () {\r\n\t\t\tvar date, fromArgs = false;\r\n\t\t\tif (arguments && arguments.length && (typeof arguments[0] === 'string' || arguments[0] instanceof Date)) {\r\n\t\t\t\tdate = arguments[0];\r\n\t\t\t\tfromArgs = true;\r\n\t\t\t} else {\r\n\t\t\t\tdate = (this.isInput ? this.element.val() : this.element.find('input').val()) || this.element.data('date') || this.initialDate;\r\n\t\t\t\tif (typeof date == 'string' || date instanceof String) {\r\n\t\t\t\t  date = date.replace(/^\\s+|\\s+$/g,'');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!date) {\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfromArgs = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.date = DPGlobal.parseDate(date, this.format, this.language, this.formatType);\r\n\r\n\t\t\tif (fromArgs) this.setValue();\r\n\r\n\t\t\tif (this.date < this.startDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.startDate);\r\n\t\t\t} else if (this.date > this.endDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.endDate);\r\n\t\t\t} else {\r\n\t\t\t\tthis.viewDate = new Date(this.date);\r\n\t\t\t}\r\n\t\t\tthis.fill();\r\n\t\t},\r\n\r\n\t\tfillDow: function () {\r\n\t\t\tvar dowCnt = this.weekStart,\r\n\t\t\t\thtml = '<tr>';\r\n\t\t\twhile (dowCnt < this.weekStart + 7) {\r\n\t\t\t\thtml += '<th class=\"dow\">' + dates[this.language].daysMin[(dowCnt++) % 7] + '</th>';\r\n\t\t\t}\r\n\t\t\thtml += '</tr>';\r\n\t\t\tthis.picker.find('.datetimepicker-days thead').append(html);\r\n\t\t},\r\n\r\n\t\tfillMonths: function () {\r\n\t\t\tvar html = '',\r\n\t\t\t\ti = 0;\r\n\t\t\twhile (i < 12) {\r\n\t\t\t\thtml += '<span class=\"month\">' + dates[this.language].monthsShort[i++] + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-months td').html(html);\r\n\t\t},\r\n\r\n\t\tfill: function () {\r\n\t\t\tif (this.date == null || this.viewDate == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tdayMonth = d.getUTCDate(),\r\n\t\t\t\thours = d.getUTCHours(),\r\n\t\t\t\tminutes = d.getUTCMinutes(),\r\n\t\t\t\tstartYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\r\n\t\t\t\tstartMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\r\n\t\t\t\tendYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\r\n\t\t\t\tendMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\r\n\t\t\t\tcurrentDate = (new UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate())).valueOf(),\r\n\t\t\t\ttoday = new Date();\r\n\t\t\tthis.picker.find('.datetimepicker-days thead th:eq(1)')\r\n\t\t\t\t.text(dates[this.language].months[month] + ' ' + year);\r\n\t\t\tif (this.formatViewType == \"time\") {\r\n\t\t\t\tvar hourConverted = hours % 12 ? hours % 12 : 12;\r\n\t\t\t\tvar hoursDisplay = (hourConverted < 10 ? '0' : '') + hourConverted;\r\n\t\t\t\tvar minutesDisplay = (minutes < 10 ? '0' : '') + minutes;\r\n\t\t\t\tvar meridianDisplay = dates[this.language].meridiem[hours < 12 ? 0 : 1];\r\n\t\t\t\tthis.picker.find('.datetimepicker-hours thead th:eq(1)')\r\n\t\t\t\t\t.text(hoursDisplay + ':' + minutesDisplay + ' ' + (meridianDisplay ? meridianDisplay.toUpperCase() : ''));\r\n\t\t\t\tthis.picker.find('.datetimepicker-minutes thead th:eq(1)')\r\n\t\t\t\t\t.text(hoursDisplay + ':' + minutesDisplay + ' ' + (meridianDisplay ? meridianDisplay.toUpperCase() : ''));\r\n\t\t\t} else {\r\n\t\t\t\tthis.picker.find('.datetimepicker-hours thead th:eq(1)')\r\n\t\t\t\t\t.text(dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);\r\n\t\t\t\tthis.picker.find('.datetimepicker-minutes thead th:eq(1)')\r\n\t\t\t\t\t.text(dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t.text(dates[this.language].today)\r\n\t\t\t\t.toggle(this.todayBtn !== false);\r\n\t\t\tthis.updateNavArrows();\r\n\t\t\tthis.fillMonths();\r\n\t\t\t/*var prevMonth = UTCDate(year, month, 0,0,0,0,0);\r\n\t\t\t prevMonth.setUTCDate(prevMonth.getDate() - (prevMonth.getUTCDay() - this.weekStart + 7)%7);*/\r\n\t\t\tvar prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\r\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\r\n\t\t\tprevMonth.setUTCDate(day);\r\n\t\t\tprevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\r\n\t\t\tvar nextMonth = new Date(prevMonth);\r\n\t\t\tnextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n\t\t\tnextMonth = nextMonth.valueOf();\r\n\t\t\tvar html = [];\r\n\t\t\tvar clsName;\r\n\t\t\twhile (prevMonth.valueOf() < nextMonth) {\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekStart) {\r\n\t\t\t\t\thtml.push('<tr>');\r\n\t\t\t\t}\r\n\t\t\t\tclsName = '';\r\n\t\t\t\tif (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\r\n\t\t\t\t\tclsName += ' old';\r\n\t\t\t\t} else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\r\n\t\t\t\t\tclsName += ' new';\r\n\t\t\t\t}\r\n\t\t\t\t// Compare internal UTC date with local today, not UTC today\r\n\t\t\t\tif (this.todayHighlight &&\r\n\t\t\t\t\tprevMonth.getUTCFullYear() == today.getFullYear() &&\r\n\t\t\t\t\tprevMonth.getUTCMonth() == today.getMonth() &&\r\n\t\t\t\t\tprevMonth.getUTCDate() == today.getDate()) {\r\n\t\t\t\t\tclsName += ' today';\r\n\t\t\t\t}\r\n\t\t\t\tif (prevMonth.valueOf() == currentDate) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif ((prevMonth.valueOf() + 86400000) <= this.startDate || prevMonth.valueOf() > this.endDate ||\r\n\t\t\t\t\t$.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t}\r\n\t\t\t\thtml.push('<td class=\"day' + clsName + '\">' + prevMonth.getUTCDate() + '</td>');\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekEnd) {\r\n\t\t\t\t\thtml.push('</tr>');\r\n\t\t\t\t}\r\n\t\t\t\tprevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-days tbody').empty().append(html.join(''));\r\n\r\n\t\t\thtml = [];\r\n\t\t\tvar txt = '', meridian = '', meridianOld = '';\r\n\t\t\tfor (var i = 0; i < 24; i++) {\r\n\t\t\t\tvar actual = UTCDate(year, month, dayMonth, i);\r\n\t\t\t\tclsName = '';\r\n\t\t\t\t// We want the previous hour for the startDate\r\n\t\t\t\tif ((actual.valueOf() + 3600000) <= this.startDate || actual.valueOf() > this.endDate) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t} else if (hours == i) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showMeridian && dates[this.language].meridiem.length == 2) {\r\n\t\t\t\t\tmeridian = (i < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);\r\n\t\t\t\t\tif (meridian != meridianOld) {\r\n\t\t\t\t\t\tif (meridianOld != '') {\r\n\t\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml.push('<fieldset class=\"hour\"><legend>' + meridian.toUpperCase() + '</legend>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmeridianOld = meridian;\r\n\t\t\t\t\ttxt = (i % 12 ? i % 12 : 12);\r\n\t\t\t\t\thtml.push('<span class=\"hour' + clsName + ' hour_' + (i < 12 ? 'am' : 'pm') + '\">' + txt + '</span>');\r\n\t\t\t\t\tif (i == 23) {\r\n\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttxt = i + ':00';\r\n\t\t\t\t\thtml.push('<span class=\"hour' + clsName + '\">' + txt + '</span>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-hours td').html(html.join(''));\r\n\r\n\t\t\thtml = [];\r\n\t\t\ttxt = '', meridian = '', meridianOld = '';\r\n\t\t\tfor (var i = 0; i < 60; i += this.minuteStep) {\r\n\t\t\t\tvar actual = UTCDate(year, month, dayMonth, hours, i, 0);\r\n\t\t\t\tclsName = '';\r\n\t\t\t\tif (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t} else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showMeridian && dates[this.language].meridiem.length == 2) {\r\n\t\t\t\t\tmeridian = (hours < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);\r\n\t\t\t\t\tif (meridian != meridianOld) {\r\n\t\t\t\t\t\tif (meridianOld != '') {\r\n\t\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml.push('<fieldset class=\"minute\"><legend>' + meridian.toUpperCase() + '</legend>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmeridianOld = meridian;\r\n\t\t\t\t\ttxt = (hours % 12 ? hours % 12 : 12);\r\n\t\t\t\t\t//html.push('<span class=\"minute'+clsName+' minute_'+(hours<12?'am':'pm')+'\">'+txt+'</span>');\r\n\t\t\t\t\thtml.push('<span class=\"minute' + clsName + '\">' + txt + ':' + (i < 10 ? '0' + i : i) + '</span>');\r\n\t\t\t\t\tif (i == 59) {\r\n\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttxt = i + ':00';\r\n\t\t\t\t\t//html.push('<span class=\"hour'+clsName+'\">'+txt+'</span>');\r\n\t\t\t\t\thtml.push('<span class=\"minute' + clsName + '\">' + hours + ':' + (i < 10 ? '0' + i : i) + '</span>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-minutes td').html(html.join(''));\r\n\r\n\t\t\tvar currentYear = this.date.getUTCFullYear();\r\n\t\t\tvar months = this.picker.find('.datetimepicker-months')\r\n\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t.text(year)\r\n\t\t\t\t.end()\r\n\t\t\t\t.find('span').removeClass('active');\r\n\t\t\tif (currentYear == year) {\r\n\t\t\t\tmonths.eq(this.date.getUTCMonth()).addClass('active');\r\n\t\t\t}\r\n\t\t\tif (year < startYear || year > endYear) {\r\n\t\t\t\tmonths.addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == startYear) {\r\n\t\t\t\tmonths.slice(0, startMonth).addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == endYear) {\r\n\t\t\t\tmonths.slice(endMonth + 1).addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\thtml = '';\r\n\t\t\tyear = parseInt(year / 10, 10) * 10;\r\n\t\t\tvar yearCont = this.picker.find('.datetimepicker-years')\r\n\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t.text(year + '-' + (year + 9))\r\n\t\t\t\t.end()\r\n\t\t\t\t.find('td');\r\n\t\t\tyear -= 1;\r\n\t\t\tfor (var i = -1; i < 11; i++) {\r\n\t\t\t\thtml += '<span class=\"year' + (i == -1 || i == 10 ? ' old' : '') + (currentYear == year ? ' active' : '') + (year < startYear || year > endYear ? ' disabled' : '') + '\">' + year + '</span>';\r\n\t\t\t\tyear += 1;\r\n\t\t\t}\r\n\t\t\tyearCont.html(html);\r\n\t\t\tthis.place();\r\n\t\t},\r\n\r\n\t\tupdateNavArrows: function () {\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tday = d.getUTCDate(),\r\n\t\t\t\thour = d.getUTCHours();\r\n\t\t\tswitch (this.viewMode) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day <= this.startDate.getUTCDate()\r\n\t\t\t\t\t\t&& hour <= this.startDate.getUTCHours()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day >= this.endDate.getUTCDate()\r\n\t\t\t\t\t\t&& hour >= this.endDate.getUTCHours()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day <= this.startDate.getUTCDate()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day >= this.endDate.getUTCDate()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmousewheel: function (e) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif (this.wheelPause) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.wheelPause = true;\r\n\r\n\t\t\tvar originalEvent = e.originalEvent;\r\n\r\n\t\t\tvar delta = originalEvent.wheelDelta;\r\n\r\n\t\t\tvar mode = delta > 0 ? 1 : (delta === 0) ? 0 : -1;\r\n\r\n\t\t\tif (this.wheelViewModeNavigationInverseDirection) {\r\n\t\t\t\tmode = -mode;\r\n\t\t\t}\r\n\r\n\t\t\tthis.showMode(mode);\r\n\r\n\t\t\tsetTimeout($.proxy(function () {\r\n\r\n\t\t\t\tthis.wheelPause = false\r\n\r\n\t\t\t}, this), this.wheelViewModeNavigationDelay);\r\n\r\n\t\t},\r\n\r\n\t\tclick: function (e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar target = $(e.target).closest('span, td, th, legend');\r\n\t\t\tif (target.is('.glyphicon')) {\r\n\t\t\t\ttarget = $(target).parent().closest('span, td, th, legend');\r\n\t\t\t}\r\n\t\t\tif (target.length == 1) {\r\n\t\t\t\tif (target.is('.disabled')) {\r\n\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\ttype:      'outOfRange',\r\n\t\t\t\t\t\tdate:      this.viewDate,\r\n\t\t\t\t\t\tstartDate: this.startDate,\r\n\t\t\t\t\t\tendDate:   this.endDate\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tswitch (target[0].nodeName.toLowerCase()) {\r\n\t\t\t\t\tcase 'th':\r\n\t\t\t\t\t\tswitch (target[0].className) {\r\n\t\t\t\t\t\t\tcase 'switch':\r\n\t\t\t\t\t\t\t\tthis.showMode(1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'prev':\r\n\t\t\t\t\t\t\tcase 'next':\r\n\t\t\t\t\t\t\t\tvar dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1);\r\n\t\t\t\t\t\t\t\tswitch (this.viewMode) {\r\n\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveHour(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveDate(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype:      target[0].className + ':' + this.convertViewModeText(this.viewMode),\r\n\t\t\t\t\t\t\t\t\tdate:      this.viewDate,\r\n\t\t\t\t\t\t\t\t\tstartDate: this.startDate,\r\n\t\t\t\t\t\t\t\t\tendDate:   this.endDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'today':\r\n\t\t\t\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\t\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), 0);\r\n\r\n\t\t\t\t\t\t\t\t// Respect startDate and endDate.\r\n\t\t\t\t\t\t\t\tif (date < this.startDate) date = this.startDate;\r\n\t\t\t\t\t\t\t\telse if (date > this.endDate) date = this.endDate;\r\n\r\n\t\t\t\t\t\t\t\tthis.viewMode = this.startViewMode;\r\n\t\t\t\t\t\t\t\tthis.showMode(0);\r\n\t\t\t\t\t\t\t\tthis._setDate(date);\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'span':\r\n\t\t\t\t\t\tif (!target.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar year = this.viewDate.getUTCFullYear(),\r\n\t\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth(),\r\n\t\t\t\t\t\t\t\tday = this.viewDate.getUTCDate(),\r\n\t\t\t\t\t\t\t\thours = this.viewDate.getUTCHours(),\r\n\t\t\t\t\t\t\t\tminutes = this.viewDate.getUTCMinutes(),\r\n\t\t\t\t\t\t\t\tseconds = this.viewDate.getUTCSeconds();\r\n\r\n\t\t\t\t\t\t\tif (target.is('.month')) {\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\t\tmonth = target.parent().find('span').index(target);\r\n\t\t\t\t\t\t\t\tday = this.viewDate.getUTCDate();\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeMonth',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 3) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.year')) {\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\t\tyear = parseInt(target.text(), 10) || 0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeYear',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 4) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.hour')) {\r\n\t\t\t\t\t\t\t\thours = parseInt(target.text(), 10) || 0;\r\n\t\t\t\t\t\t\t\tif (target.hasClass('hour_am') || target.hasClass('hour_pm')) {\r\n\t\t\t\t\t\t\t\t\tif (hours == 12 && target.hasClass('hour_am')) {\r\n\t\t\t\t\t\t\t\t\t\thours = 0;\r\n\t\t\t\t\t\t\t\t\t} else if (hours != 12 && target.hasClass('hour_pm')) {\r\n\t\t\t\t\t\t\t\t\t\thours += 12;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCHours(hours);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeHour',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 1) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.minute')) {\r\n\t\t\t\t\t\t\t\tminutes = parseInt(target.text().substr(target.text().indexOf(':') + 1), 10) || 0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMinutes(minutes);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeMinute',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 0) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.viewMode != 0) {\r\n\t\t\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'td':\r\n\t\t\t\t\t\tif (target.is('.day') && !target.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar day = parseInt(target.text(), 10) || 1;\r\n\t\t\t\t\t\t\tvar year = this.viewDate.getUTCFullYear(),\r\n\t\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth(),\r\n\t\t\t\t\t\t\t\thours = this.viewDate.getUTCHours(),\r\n\t\t\t\t\t\t\t\tminutes = this.viewDate.getUTCMinutes(),\r\n\t\t\t\t\t\t\t\tseconds = this.viewDate.getUTCSeconds();\r\n\t\t\t\t\t\t\tif (target.is('.old')) {\r\n\t\t\t\t\t\t\t\tif (month === 0) {\r\n\t\t\t\t\t\t\t\t\tmonth = 11;\r\n\t\t\t\t\t\t\t\t\tyear -= 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth -= 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.new')) {\r\n\t\t\t\t\t\t\t\tif (month == 11) {\r\n\t\t\t\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t\t\t\t\tyear += 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month, day);\r\n\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\ttype: 'changeDay',\r\n\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.viewSelect >= 2) {\r\n\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDate: function (date, which) {\r\n\t\t\tif (!which || which == 'date')\r\n\t\t\t\tthis.date = date;\r\n\t\t\tif (!which || which == 'view')\r\n\t\t\t\tthis.viewDate = date;\r\n\t\t\tthis.fill();\r\n\t\t\tthis.setValue();\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\telement = this.element;\r\n\t\t\t} else if (this.component) {\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element) {\r\n\t\t\t\telement.change();\r\n\t\t\t\tif (this.autoclose && (!which || which == 'date')) {\r\n\t\t\t\t\t//this.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'changeDate',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmoveMinute: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCMinutes(new_date.getUTCMinutes() + (dir * this.minuteStep));\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveHour: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCHours(new_date.getUTCHours() + dir);\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveDate: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCDate(new_date.getUTCDate() + dir);\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveMonth: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf()),\r\n\t\t\t\tday = new_date.getUTCDate(),\r\n\t\t\t\tmonth = new_date.getUTCMonth(),\r\n\t\t\t\tmag = Math.abs(dir),\r\n\t\t\t\tnew_month, test;\r\n\t\t\tdir = dir > 0 ? 1 : -1;\r\n\t\t\tif (mag == 1) {\r\n\t\t\t\ttest = dir == -1\r\n\t\t\t\t\t// If going back one month, make sure month is not current month\r\n\t\t\t\t\t// (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t? function () {\r\n\t\t\t\t\treturn new_date.getUTCMonth() == month;\r\n\t\t\t\t}\r\n\t\t\t\t\t// If going forward one month, make sure month is as expected\r\n\t\t\t\t\t// (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t: function () {\r\n\t\t\t\t\treturn new_date.getUTCMonth() != new_month;\r\n\t\t\t\t};\r\n\t\t\t\tnew_month = month + dir;\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t\t// Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n\t\t\t\tif (new_month < 0 || new_month > 11)\r\n\t\t\t\t\tnew_month = (new_month + 12) % 12;\r\n\t\t\t} else {\r\n\t\t\t\t// For magnitudes >1, move one month at a time...\r\n\t\t\t\tfor (var i = 0; i < mag; i++)\r\n\t\t\t\t\t// ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n\t\t\t\t\tnew_date = this.moveMonth(new_date, dir);\r\n\t\t\t\t// ...then reset the day, keeping it in the new month\r\n\t\t\t\tnew_month = new_date.getUTCMonth();\r\n\t\t\t\tnew_date.setUTCDate(day);\r\n\t\t\t\ttest = function () {\r\n\t\t\t\t\treturn new_month != new_date.getUTCMonth();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// Common date-resetting loop -- if date is beyond end of month, make it\r\n\t\t\t// end of month\r\n\t\t\twhile (test()) {\r\n\t\t\t\tnew_date.setUTCDate(--day);\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t}\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveYear: function (date, dir) {\r\n\t\t\treturn this.moveMonth(date, dir * 12);\r\n\t\t},\r\n\r\n\t\tdateWithinRange: function (date) {\r\n\t\t\treturn date >= this.startDate && date <= this.endDate;\r\n\t\t},\r\n\r\n\t\tkeydown: function (e) {\r\n\t\t\tif (this.picker.is(':not(:visible)')) {\r\n\t\t\t\tif (e.keyCode == 27) // allow escape to hide and re-show picker\r\n\t\t\t\t\tthis.show();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar dateChanged = false,\r\n\t\t\t\tdir, day, month,\r\n\t\t\t\tnewDate, newViewDate;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase 27: // escape\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: // left\r\n\t\t\t\tcase 39: // right\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 37 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: // up\r\n\t\t\t\tcase 40: // down\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 38 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir * 7);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir * 7);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tif (this.showMeridian) {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 6);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 6);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 4);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 4);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir * 4);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir * 4);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 13: // enter\r\n\t\t\t\t\tif (this.viewMode != 0) {\r\n\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9: // tab\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dateChanged) {\r\n\t\t\t\tvar element;\r\n\t\t\t\tif (this.isInput) {\r\n\t\t\t\t\telement = this.element;\r\n\t\t\t\t} else if (this.component) {\r\n\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\telement.change();\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype: 'changeDate',\r\n\t\t\t\t\tdate: this.date\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshowMode: function (dir) {\r\n\t\t\tif (dir) {\r\n\t\t\t\tvar newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\r\n\t\t\t\tif (newViewMode >= this.minView && newViewMode <= this.maxView) {\r\n\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\ttype:        'changeMode',\r\n\t\t\t\t\t\tdate:        this.viewDate,\r\n\t\t\t\t\t\toldViewMode: this.viewMode,\r\n\t\t\t\t\t\tnewViewMode: newViewMode\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.viewMode = newViewMode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t vitalets: fixing bug of very special conditions:\r\n\t\t\t jquery 1.7.1 + webkit + show inline datetimepicker in bootstrap popover.\r\n\t\t\t Method show() does not set display css correctly and datetimepicker is not shown.\r\n\t\t\t Changed to .css('display', 'block') solve the problem.\r\n\t\t\t See https://github.com/vitalets/x-editable/issues/37\r\n\r\n\t\t\t In jquery 1.7.2+ everything works fine.\r\n\t\t\t */\r\n\t\t\t//this.picker.find('>div').hide().filter('.datetimepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n\t\t\tthis.picker.find('>div').hide().filter('.datetimepicker-' + DPGlobal.modes[this.viewMode].clsName).css('display', 'block');\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\treset: function (e) {\r\n\t\t\tthis._setDate(null, 'date');\r\n\t\t},\r\n\r\n\t\tconvertViewModeText:  function (viewMode) {\r\n\t\t\tswitch (viewMode) {\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\treturn 'decade';\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn 'year';\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn 'month';\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn 'day';\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\treturn 'hour';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$.fn.datetimepicker = function (option) {\r\n\t\tvar args = Array.apply(null, arguments);\r\n\t\targs.shift();\r\n\t\tvar internal_return;\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $this.data('datetimepicker'),\r\n\t\t\t\toptions = typeof option == 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('datetimepicker', (data = new Datetimepicker(this, $.extend({}, $.fn.datetimepicker.defaults, options))));\r\n\t\t\t}\r\n\t\t\tif (typeof option == 'string' && typeof data[option] == 'function') {\r\n\t\t\t\tinternal_return = data[option].apply(data, args);\r\n\t\t\t\tif (internal_return !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (internal_return !== undefined)\r\n\t\t\treturn internal_return;\r\n\t\telse\r\n\t\t\treturn this;\r\n\t};\r\n\r\n\t$.fn.datetimepicker.defaults = {\r\n\t};\r\n\t$.fn.datetimepicker.Constructor = Datetimepicker;\r\n\tvar dates = $.fn.datetimepicker.dates = {\r\n\t\ten: {\r\n\t\t\tdays:        [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n\t\t\tdaysShort:   [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n\t\t\tdaysMin:     [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n\t\t\tmonths:      [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tmeridiem:    [\"am\", \"pm\"],\r\n\t\t\tsuffix:      [\"st\", \"nd\", \"rd\", \"th\"],\r\n\t\t\ttoday:       \"Today\"\r\n\t\t}\r\n\t};\r\n\r\n\tvar DPGlobal = {\r\n\t\tmodes:            [\r\n\t\t\t{\r\n\t\t\t\tclsName: 'minutes',\r\n\t\t\t\tnavFnc:  'Hours',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'hours',\r\n\t\t\t\tnavFnc:  'Date',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'days',\r\n\t\t\t\tnavFnc:  'Month',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'months',\r\n\t\t\t\tnavFnc:  'FullYear',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'years',\r\n\t\t\t\tnavFnc:  'FullYear',\r\n\t\t\t\tnavStep: 10\r\n\t\t\t}\r\n\t\t],\r\n\t\tisLeapYear:       function (year) {\r\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\r\n\t\t},\r\n\t\tgetDaysInMonth:   function (year, month) {\r\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\r\n\t\t},\r\n\t\tgetDefaultFormat: function (type, field) {\r\n\t\t\tif (type == \"standard\") {\r\n\t\t\t\tif (field == 'input')\r\n\t\t\t\t\treturn 'yyyy-mm-dd hh:ii';\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 'yyyy-mm-dd hh:ii:ss';\r\n\t\t\t} else if (type == \"php\") {\r\n\t\t\t\tif (field == 'input')\r\n\t\t\t\t\treturn 'Y-m-d H:i';\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 'Y-m-d H:i:s';\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalidParts:       function (type) {\r\n\t\t\tif (type == \"standard\") {\r\n\t\t\t\treturn /hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;\r\n\t\t\t} else if (type == \"php\") {\r\n\t\t\t\treturn /[dDjlNwzFmMnStyYaABgGhHis]/g;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tnonpunctuation:   /[^ -\\/:-@\\[-`{-~\\t\\n\\rTZ]+/g,\r\n\t\tparseFormat:      function (format, type) {\r\n\t\t\t// IE treats \\0 as a string end in inputs (truncating the value),\r\n\t\t\t// so it's a bad format delimiter, anyway\r\n\t\t\tvar separators = format.replace(this.validParts(type), '\\0').split('\\0'),\r\n\t\t\t\tparts = format.match(this.validParts(type));\r\n\t\t\tif (!separators || !separators.length || !parts || parts.length == 0) {\r\n\t\t\t\tthrow new Error(\"Invalid date format.\");\r\n\t\t\t}\r\n\t\t\treturn {separators: separators, parts: parts};\r\n\t\t},\r\n\t\tparseDate:        function (date, format, language, type) {\r\n\t\t\tif (date instanceof Date) {\r\n\t\t\t\tvar dateUTC = new Date(date.valueOf() - date.getTimezoneOffset() * 60000);\r\n\t\t\t\tdateUTC.setMilliseconds(0);\r\n\t\t\t\treturn dateUTC;\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd', type);\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd hh:ii', type);\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd hh:ii:ss', type);\r\n\t\t\t}\r\n\t\t\tif (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\r\n\t\t\t\tvar part_re = /([-+]\\d+)([dmwy])/,\r\n\t\t\t\t\tparts = date.match(/([-+]\\d+)([dmwy])/g),\r\n\t\t\t\t\tpart, dir;\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\t\t\tpart = part_re.exec(parts[i]);\r\n\t\t\t\t\tdir = parseInt(part[1]);\r\n\t\t\t\t\tswitch (part[2]) {\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tdate = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'w':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\tdate = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), 0);\r\n\t\t\t}\r\n\t\t\tvar parts = date && date.match(this.nonpunctuation) || [],\r\n\t\t\t\tdate = new Date(0, 0, 0, 0, 0, 0, 0),\r\n\t\t\t\tparsed = {},\r\n\t\t\t\tsetters_order = ['hh', 'h', 'ii', 'i', 'ss', 's', 'yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'D', 'DD', 'd', 'dd', 'H', 'HH', 'p', 'P'],\r\n\t\t\t\tsetters_map = {\r\n\t\t\t\t\thh:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\th:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tHH:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 12 ? 0 : v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tH:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 12 ? 0 : v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tii:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCMinutes(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ti:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCMinutes(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tss:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCSeconds(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ts:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCSeconds(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyyyy: function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCFullYear(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyy:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCFullYear(2000 + v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tm:    function (d, v) {\r\n\t\t\t\t\t\tv -= 1;\r\n\t\t\t\t\t\twhile (v < 0) v += 12;\r\n\t\t\t\t\t\tv %= 12;\r\n\t\t\t\t\t\td.setUTCMonth(v);\r\n\t\t\t\t\t\twhile (d.getUTCMonth() != v)\r\n\t\t\t\t\t\t\tif (isNaN(d.getUTCMonth()))\r\n\t\t\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\td.setUTCDate(d.getUTCDate() - 1);\r\n\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t},\r\n\t\t\t\t\td:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCDate(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tp:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 1 ? d.getUTCHours() + 12 : d.getUTCHours());\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tval, filtered, part;\r\n\t\t\tsetters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n\t\t\tsetters_map['dd'] = setters_map['d'];\r\n\t\t\tsetters_map['P'] = setters_map['p'];\r\n\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\r\n\t\t\tif (parts.length == format.parts.length) {\r\n\t\t\t\tfor (var i = 0, cnt = format.parts.length; i < cnt; i++) {\r\n\t\t\t\t\tval = parseInt(parts[i], 10);\r\n\t\t\t\t\tpart = format.parts[i];\r\n\t\t\t\t\tif (isNaN(val)) {\r\n\t\t\t\t\t\tswitch (part) {\r\n\t\t\t\t\t\t\tcase 'MM':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].months).filter(function () {\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m == p;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].months) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].monthsShort).filter(function () {\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m.toLowerCase() == p.toLowerCase();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\t\tcase 'P':\r\n\t\t\t\t\t\t\t\tval = $.inArray(parts[i].toLowerCase(), dates[language].meridiem);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparsed[part] = val;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0, s; i < setters_order.length; i++) {\r\n\t\t\t\t\ts = setters_order[i];\r\n\t\t\t\t\tif (s in parsed && !isNaN(parsed[s]))\r\n\t\t\t\t\t\tsetters_map[s](date, parsed[s])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tformatDate:       function (date, format, language, type) {\r\n\t\t\tif (date == null) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar val;\r\n\t\t\tif (type == 'standard') {\r\n\t\t\t\tval = {\r\n\t\t\t\t\t// year\r\n\t\t\t\t\tyy:   date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\t\tyyyy: date.getUTCFullYear(),\r\n\t\t\t\t\t// month\r\n\t\t\t\t\tm:    date.getUTCMonth() + 1,\r\n\t\t\t\t\tM:    dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\t\tMM:   dates[language].months[date.getUTCMonth()],\r\n\t\t\t\t\t// day\r\n\t\t\t\t\td:    date.getUTCDate(),\r\n\t\t\t\t\tD:    dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\t\tDD:   dates[language].days[date.getUTCDay()],\r\n\t\t\t\t\tp:    (dates[language].meridiem.length == 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),\r\n\t\t\t\t\t// hour\r\n\t\t\t\t\th:    date.getUTCHours(),\r\n\t\t\t\t\t// minute\r\n\t\t\t\t\ti:    date.getUTCMinutes(),\r\n\t\t\t\t\t// second\r\n\t\t\t\t\ts:    date.getUTCSeconds()\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (dates[language].meridiem.length == 2) {\r\n\t\t\t\t\tval.H = (val.h % 12 == 0 ? 12 : val.h % 12);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tval.H = val.h;\r\n\t\t\t\t}\r\n\t\t\t\tval.HH = (val.H < 10 ? '0' : '') + val.H;\r\n\t\t\t\tval.P = val.p.toUpperCase();\r\n\t\t\t\tval.hh = (val.h < 10 ? '0' : '') + val.h;\r\n\t\t\t\tval.ii = (val.i < 10 ? '0' : '') + val.i;\r\n\t\t\t\tval.ss = (val.s < 10 ? '0' : '') + val.s;\r\n\t\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\r\n\t\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\r\n\t\t\t} else if (type == 'php') {\r\n\t\t\t\t// php format\r\n\t\t\t\tval = {\r\n\t\t\t\t\t// year\r\n\t\t\t\t\ty: date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\t\tY: date.getUTCFullYear(),\r\n\t\t\t\t\t// month\r\n\t\t\t\t\tF: dates[language].months[date.getUTCMonth()],\r\n\t\t\t\t\tM: dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\t\tn: date.getUTCMonth() + 1,\r\n\t\t\t\t\tt: DPGlobal.getDaysInMonth(date.getUTCFullYear(), date.getUTCMonth()),\r\n\t\t\t\t\t// day\r\n\t\t\t\t\tj: date.getUTCDate(),\r\n\t\t\t\t\tl: dates[language].days[date.getUTCDay()],\r\n\t\t\t\t\tD: dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\t\tw: date.getUTCDay(), // 0 -> 6\r\n\t\t\t\t\tN: (date.getUTCDay() == 0 ? 7 : date.getUTCDay()),       // 1 -> 7\r\n\t\t\t\t\tS: (date.getUTCDate() % 10 <= dates[language].suffix.length ? dates[language].suffix[date.getUTCDate() % 10 - 1] : ''),\r\n\t\t\t\t\t// hour\r\n\t\t\t\t\ta: (dates[language].meridiem.length == 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),\r\n\t\t\t\t\tg: (date.getUTCHours() % 12 == 0 ? 12 : date.getUTCHours() % 12),\r\n\t\t\t\t\tG: date.getUTCHours(),\r\n\t\t\t\t\t// minute\r\n\t\t\t\t\ti: date.getUTCMinutes(),\r\n\t\t\t\t\t// second\r\n\t\t\t\t\ts: date.getUTCSeconds()\r\n\t\t\t\t};\r\n\t\t\t\tval.m = (val.n < 10 ? '0' : '') + val.n;\r\n\t\t\t\tval.d = (val.j < 10 ? '0' : '') + val.j;\r\n\t\t\t\tval.A = val.a.toString().toUpperCase();\r\n\t\t\t\tval.h = (val.g < 10 ? '0' : '') + val.g;\r\n\t\t\t\tval.H = (val.G < 10 ? '0' : '') + val.G;\r\n\t\t\t\tval.i = (val.i < 10 ? '0' : '') + val.i;\r\n\t\t\t\tval.s = (val.s < 10 ? '0' : '') + val.s;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t\tvar date = [],\r\n\t\t\t\tseps = $.extend([], format.separators);\r\n\t\t\tfor (var i = 0, cnt = format.parts.length; i < cnt; i++) {\r\n\t\t\t\tif (seps.length) {\r\n\t\t\t\t\tdate.push(seps.shift());\r\n\t\t\t\t}\r\n\t\t\t\tdate.push(val[format.parts[i]]);\r\n\t\t\t}\r\n\t\t\tif (seps.length) {\r\n\t\t\t\tdate.push(seps.shift());\r\n\t\t\t}\r\n\t\t\treturn date.join('');\r\n\t\t},\r\n\t\tconvertViewMode:  function (viewMode) {\r\n\t\t\tswitch (viewMode) {\r\n\t\t\t\tcase 4:\r\n\t\t\t\tcase 'decade':\r\n\t\t\t\t\tviewMode = 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tviewMode = 3;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\tcase 'month':\r\n\t\t\t\t\tviewMode = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 'day':\r\n\t\t\t\t\tviewMode = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 0:\r\n\t\t\t\tcase 'hour':\r\n\t\t\t\t\tviewMode = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn viewMode;\r\n\t\t},\r\n\t\theadTemplate:     '<thead>' +\r\n\t\t\t\t\t\t\t  '<tr>' +\r\n\t\t\t\t\t\t\t  '<th class=\"prev\"><i class=\"icon-arrow-left\"/></th>' +\r\n\t\t\t\t\t\t\t  '<th colspan=\"5\" class=\"switch\"></th>' +\r\n\t\t\t\t\t\t\t  '<th class=\"next\"><i class=\"icon-arrow-right\"/></th>' +\r\n\t\t\t\t\t\t\t  '</tr>' +\r\n\t\t\t'</thead>',\r\n\t\theadTemplateV3:   '<thead>' +\r\n\t\t\t\t\t\t\t  '<tr>' +\r\n\t\t\t\t\t\t\t  '<th class=\"prev\"><span class=\"glyphicon glyphicon-arrow-left\"></span> </th>' +\r\n\t\t\t\t\t\t\t  '<th colspan=\"5\" class=\"switch\"></th>' +\r\n\t\t\t\t\t\t\t  '<th class=\"next\"><span class=\"glyphicon glyphicon-arrow-right\"></span> </th>' +\r\n\t\t\t\t\t\t\t  '</tr>' +\r\n\t\t\t'</thead>',\r\n\t\tcontTemplate:     '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n\t\tfootTemplate:     '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\r\n\t};\r\n\tDPGlobal.template = '<div class=\"datetimepicker\">' +\r\n\t\t'<div class=\"datetimepicker-minutes\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-hours\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-days\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\t'<tbody></tbody>' +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-months\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-years\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'</div>';\r\n\tDPGlobal.templateV3 = '<div class=\"datetimepicker\">' +\r\n\t\t'<div class=\"datetimepicker-minutes\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-hours\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-days\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\t'<tbody></tbody>' +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-months\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-years\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'</div>';\r\n\t$.fn.datetimepicker.DPGlobal = DPGlobal;\r\n\r\n\t/* DATETIMEPICKER NO CONFLICT\r\n\t * =================== */\r\n\r\n\t$.fn.datetimepicker.noConflict = function () {\r\n\t\t$.fn.datetimepicker = old;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/* DATETIMEPICKER DATA-API\r\n\t * ================== */\r\n\r\n\t$(document).on(\r\n\t\t'focus.datetimepicker.data-api click.datetimepicker.data-api',\r\n\t\t'[data-provide=\"datetimepicker\"]',\r\n\t\tfunction (e) {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif ($this.data('datetimepicker')) return;\r\n\t\t\te.preventDefault();\r\n\t\t\t// component click requires us to explicitly show it\r\n\t\t\t$this.datetimepicker('show');\r\n\t\t}\r\n\t);\r\n\t$(function () {\r\n\t\t$('[data-provide=\"datetimepicker-inline\"]').datetimepicker();\r\n\t});\r\n\r\n}(window.jQuery);\r\n;/**\r\n * Simplified Chinese translation for bootstrap-datetimepicker\r\n * Yuan Cheung <advanimal@gmail.com>\r\n */\r\n;(function($){\r\n\t$.fn.datetimepicker.dates['zh-CN'] = {\r\n\t\t\tdays: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\", \"星期日\"],\r\n\t\t\tdaysShort: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\", \"周日\"],\r\n\t\t\tdaysMin:  [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"日\"],\r\n\t\t\tmonths: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\t\tmonthsShort: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\t\ttoday: \"今日\",\r\n\t\t\tsuffix: [],\r\n\t\t\tmeridiem: [\"上午\", \"下午\"]\r\n\t};\r\n}(jQuery));\r\n;/*!\r\n * Timepicker Component for Twitter Bootstrap\r\n *\r\n * Copyright 2013 Joris de Wit\r\n *\r\n * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n(function($, window, document, undefined) {\r\n  'use strict';\r\n\r\n  // TIMEPICKER PUBLIC CLASS DEFINITION\r\n  var Timepicker = function(element, options) {\r\n    this.widget = '';\r\n    this.$element = $(element);\r\n    this.defaultTime = options.defaultTime;\r\n    this.disableFocus = options.disableFocus;\r\n    this.disableMousewheel = options.disableMousewheel;\r\n    this.isOpen = options.isOpen;\r\n    this.minuteStep = options.minuteStep;\r\n    this.modalBackdrop = options.modalBackdrop;\r\n    this.orientation = options.orientation;\r\n    this.secondStep = options.secondStep;\r\n    this.showInputs = options.showInputs;\r\n    this.showMeridian = options.showMeridian;\r\n    this.showSeconds = options.showSeconds;\r\n    this.template = options.template;\r\n    this.appendWidgetTo = options.appendWidgetTo;\r\n    this.showWidgetOnAddonClick = options.showWidgetOnAddonClick;\r\n\r\n    this._init();\r\n  };\r\n\r\n  Timepicker.prototype = {\r\n\r\n    constructor: Timepicker,\r\n    _init: function() {\r\n      var self = this;\r\n\r\n      if (this.showWidgetOnAddonClick && (this.$element.parent().hasClass('input-group') || this.$element.parent().hasClass('input-prepend'))) {\r\n        this.$element.parent('.input-group, .input-prepend').find('.input-group-addon').on({\r\n          'click.timepicker': $.proxy(this.showWidget, this)\r\n        });\r\n        this.$element.on({\r\n          'focus.timepicker': $.proxy(this.highlightUnit, this),\r\n          'click.timepicker': $.proxy(this.highlightUnit, this),\r\n          'keydown.timepicker': $.proxy(this.elementKeydown, this),\r\n          'blur.timepicker': $.proxy(this.blurElement, this),\r\n          'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n        });\r\n      } else {\r\n        if (this.template) {\r\n          this.$element.on({\r\n            'focus.timepicker': $.proxy(this.showWidget, this),\r\n            'click.timepicker': $.proxy(this.showWidget, this),\r\n            'blur.timepicker': $.proxy(this.blurElement, this),\r\n            'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n          });\r\n        } else {\r\n          this.$element.on({\r\n            'focus.timepicker': $.proxy(this.highlightUnit, this),\r\n            'click.timepicker': $.proxy(this.highlightUnit, this),\r\n            'keydown.timepicker': $.proxy(this.elementKeydown, this),\r\n            'blur.timepicker': $.proxy(this.blurElement, this),\r\n            'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n          });\r\n        }\r\n      }\r\n\r\n      if (this.template !== false) {\r\n        this.$widget = $(this.getTemplate()).on('click', $.proxy(this.widgetClick, this));\r\n      } else {\r\n        this.$widget = false;\r\n      }\r\n\r\n      if (this.showInputs && this.$widget !== false) {\r\n        this.$widget.find('input').each(function() {\r\n          $(this).on({\r\n            'click.timepicker': function() { $(this).select(); },\r\n            'keydown.timepicker': $.proxy(self.widgetKeydown, self),\r\n            'keyup.timepicker': $.proxy(self.widgetKeyup, self)\r\n          });\r\n        });\r\n      }\r\n\r\n      this.setDefaultTime(this.defaultTime);\r\n    },\r\n\r\n    blurElement: function() {\r\n      this.highlightedUnit = null;\r\n      this.updateFromElementVal();\r\n    },\r\n\r\n    clear: function() {\r\n      this.hour = '';\r\n      this.minute = '';\r\n      this.second = '';\r\n      this.meridian = '';\r\n\r\n      this.$element.val('');\r\n    },\r\n\r\n    decrementHour: function() {\r\n      if (this.showMeridian) {\r\n        if (this.hour === 1) {\r\n          this.hour = 12;\r\n        } else if (this.hour === 12) {\r\n          this.hour--;\r\n\r\n          return this.toggleMeridian();\r\n        } else if (this.hour === 0) {\r\n          this.hour = 11;\r\n\r\n          return this.toggleMeridian();\r\n        } else {\r\n          this.hour--;\r\n        }\r\n      } else {\r\n        if (this.hour <= 0) {\r\n          this.hour = 23;\r\n        } else {\r\n          this.hour--;\r\n        }\r\n      }\r\n    },\r\n\r\n    decrementMinute: function(step) {\r\n      var newVal;\r\n\r\n      if (step) {\r\n        newVal = this.minute - step;\r\n      } else {\r\n        newVal = this.minute - this.minuteStep;\r\n      }\r\n\r\n      if (newVal < 0) {\r\n        this.decrementHour();\r\n        this.minute = newVal + 60;\r\n      } else {\r\n        this.minute = newVal;\r\n      }\r\n    },\r\n\r\n    decrementSecond: function() {\r\n      var newVal = this.second - this.secondStep;\r\n\r\n      if (newVal < 0) {\r\n        this.decrementMinute(true);\r\n        this.second = newVal + 60;\r\n      } else {\r\n        this.second = newVal;\r\n      }\r\n    },\r\n\r\n    elementKeydown: function(e) {\r\n      switch (e.keyCode) {\r\n      case 9: //tab\r\n      case 27: // escape\r\n        this.updateFromElementVal();\r\n        break;\r\n      case 37: // left arrow\r\n        e.preventDefault();\r\n        this.highlightPrevUnit();\r\n        break;\r\n      case 38: // up arrow\r\n        e.preventDefault();\r\n        switch (this.highlightedUnit) {\r\n        case 'hour':\r\n          this.incrementHour();\r\n          this.highlightHour();\r\n          break;\r\n        case 'minute':\r\n          this.incrementMinute();\r\n          this.highlightMinute();\r\n          break;\r\n        case 'second':\r\n          this.incrementSecond();\r\n          this.highlightSecond();\r\n          break;\r\n        case 'meridian':\r\n          this.toggleMeridian();\r\n          this.highlightMeridian();\r\n          break;\r\n        }\r\n        this.update();\r\n        break;\r\n      case 39: // right arrow\r\n        e.preventDefault();\r\n        this.highlightNextUnit();\r\n        break;\r\n      case 40: // down arrow\r\n        e.preventDefault();\r\n        switch (this.highlightedUnit) {\r\n        case 'hour':\r\n          this.decrementHour();\r\n          this.highlightHour();\r\n          break;\r\n        case 'minute':\r\n          this.decrementMinute();\r\n          this.highlightMinute();\r\n          break;\r\n        case 'second':\r\n          this.decrementSecond();\r\n          this.highlightSecond();\r\n          break;\r\n        case 'meridian':\r\n          this.toggleMeridian();\r\n          this.highlightMeridian();\r\n          break;\r\n        }\r\n\r\n        this.update();\r\n        break;\r\n      }\r\n    },\r\n\r\n    getCursorPosition: function() {\r\n      var input = this.$element.get(0);\r\n\r\n      if ('selectionStart' in input) {// Standard-compliant browsers\r\n\r\n        return input.selectionStart;\r\n      } else if (document.selection) {// IE fix\r\n        input.focus();\r\n        var sel = document.selection.createRange(),\r\n          selLen = document.selection.createRange().text.length;\r\n\r\n        sel.moveStart('character', - input.value.length);\r\n\r\n        return sel.text.length - selLen;\r\n      }\r\n    },\r\n\r\n    getTemplate: function() {\r\n      var template,\r\n        hourTemplate,\r\n        minuteTemplate,\r\n        secondTemplate,\r\n        meridianTemplate,\r\n        templateContent;\r\n\r\n      if (this.showInputs) {\r\n        hourTemplate = '<input type=\"text\" data-name=\"hour\" class=\"bootstrap-timepicker-hour form-control\" maxlength=\"2\"/>';\r\n        minuteTemplate = '<input type=\"text\" data-name=\"minute\" class=\"bootstrap-timepicker-minute form-control\" maxlength=\"2\"/>';\r\n        secondTemplate = '<input type=\"text\" data-name=\"second\" class=\"bootstrap-timepicker-second form-control\" maxlength=\"2\"/>';\r\n        meridianTemplate = '<input type=\"text\" data-name=\"meridian\" class=\"bootstrap-timepicker-meridian form-control\" maxlength=\"2\"/>';\r\n      } else {\r\n        hourTemplate = '<span class=\"bootstrap-timepicker-hour\"></span>';\r\n        minuteTemplate = '<span class=\"bootstrap-timepicker-minute\"></span>';\r\n        secondTemplate = '<span class=\"bootstrap-timepicker-second\"></span>';\r\n        meridianTemplate = '<span class=\"bootstrap-timepicker-meridian\"></span>';\r\n      }\r\n\r\n      templateContent = '<table>'+\r\n         '<tr>'+\r\n           '<td><a href=\"#\" data-action=\"incrementHour\"><i class=\"glyphicon glyphicon-chevron-up\"></i></a></td>'+\r\n           '<td class=\"separator\">&nbsp;</td>'+\r\n           '<td><a href=\"#\" data-action=\"incrementMinute\"><i class=\"glyphicon glyphicon-chevron-up\"></i></a></td>'+\r\n           (this.showSeconds ?\r\n             '<td class=\"separator\">&nbsp;</td>'+\r\n             '<td><a href=\"#\" data-action=\"incrementSecond\"><i class=\"glyphicon glyphicon-chevron-up\"></i></a></td>'\r\n           : '') +\r\n           (this.showMeridian ?\r\n             '<td class=\"separator\">&nbsp;</td>'+\r\n             '<td class=\"meridian-column\"><a href=\"#\" data-action=\"toggleMeridian\"><i class=\"glyphicon glyphicon-chevron-up\"></i></a></td>'\r\n           : '') +\r\n         '</tr>'+\r\n         '<tr>'+\r\n           '<td>'+ hourTemplate +'</td> '+\r\n           '<td class=\"separator\">:</td>'+\r\n           '<td>'+ minuteTemplate +'</td> '+\r\n           (this.showSeconds ?\r\n            '<td class=\"separator\">:</td>'+\r\n            '<td>'+ secondTemplate +'</td>'\r\n           : '') +\r\n           (this.showMeridian ?\r\n            '<td class=\"separator\">&nbsp;</td>'+\r\n            '<td>'+ meridianTemplate +'</td>'\r\n           : '') +\r\n         '</tr>'+\r\n         '<tr>'+\r\n           '<td><a href=\"#\" data-action=\"decrementHour\"><i class=\"glyphicon glyphicon-chevron-down\"></i></a></td>'+\r\n           '<td class=\"separator\"></td>'+\r\n           '<td><a href=\"#\" data-action=\"decrementMinute\"><i class=\"glyphicon glyphicon-chevron-down\"></i></a></td>'+\r\n           (this.showSeconds ?\r\n            '<td class=\"separator\">&nbsp;</td>'+\r\n            '<td><a href=\"#\" data-action=\"decrementSecond\"><i class=\"glyphicon glyphicon-chevron-down\"></i></a></td>'\r\n           : '') +\r\n           (this.showMeridian ?\r\n            '<td class=\"separator\">&nbsp;</td>'+\r\n            '<td><a href=\"#\" data-action=\"toggleMeridian\"><i class=\"glyphicon glyphicon-chevron-down\"></i></a></td>'\r\n           : '') +\r\n         '</tr>'+\r\n       '</table>';\r\n\r\n      switch(this.template) {\r\n      case 'modal':\r\n        template = '<div class=\"bootstrap-timepicker-widget modal hide fade in\" data-backdrop=\"'+ (this.modalBackdrop ? 'true' : 'false') +'\">'+\r\n          '<div class=\"modal-header\">'+\r\n            '<a href=\"#\" class=\"close\" data-dismiss=\"modal\">×</a>'+\r\n            '<h3>Pick a Time</h3>'+\r\n          '</div>'+\r\n          '<div class=\"modal-content\">'+\r\n            templateContent +\r\n          '</div>'+\r\n          '<div class=\"modal-footer\">'+\r\n            '<a href=\"#\" class=\"btn btn-primary\" data-dismiss=\"modal\">OK</a>'+\r\n          '</div>'+\r\n        '</div>';\r\n        break;\r\n      case 'dropdown':\r\n        template = '<div class=\"bootstrap-timepicker-widget dropdown-menu\">'+ templateContent +'</div>';\r\n        break;\r\n      }\r\n\r\n      return template;\r\n    },\r\n\r\n    getTime: function() {\r\n      if (this.hour === '') {\r\n        return '';\r\n      }\r\n\r\n      // return this.hour + ':' + (this.minute.toString().length === 1 ? '0' + this.minute : this.minute) + (this.showSeconds ? ':' + (this.second.toString().length === 1 ? '0' + this.second : this.second) : '') + (this.showMeridian ? ' ' + this.meridian : '');\r\n      return (this.hour.toString().length === 1 ? '0' + this.hour : this.hour) \r\n        +':' + (this.minute.toString().length === 1 ? '0' + this.minute : this.minute) + (this.showSeconds ? ':' + (this.second.toString().length === 1 ? '0' + this.second : this.second) : '') + (this.showMeridian ? ' ' + this.meridian : '');\r\n    },\r\n\r\n    hideWidget: function() {\r\n      if (this.isOpen === false) {\r\n        return;\r\n      }\r\n\r\n      this.$element.trigger({\r\n        'type': 'hide.timepicker',\r\n        'time': {\r\n          'value': this.getTime(),\r\n          'hours': this.hour,\r\n          'minutes': this.minute,\r\n          'seconds': this.second,\r\n          'meridian': this.meridian\r\n        }\r\n      });\r\n\r\n      if (this.template === 'modal' && this.$widget.modal) {\r\n        this.$widget.modal('hide');\r\n      } else {\r\n        this.$widget.removeClass('open');\r\n      }\r\n\r\n      $(document).off('mousedown.timepicker, touchend.timepicker');\r\n\r\n      this.isOpen = false;\r\n      // show/hide approach taken by datepicker\r\n      this.$widget.detach();\r\n    },\r\n\r\n    highlightUnit: function() {\r\n      this.position = this.getCursorPosition();\r\n      if (this.position >= 0 && this.position <= 2) {\r\n        this.highlightHour();\r\n      } else if (this.position >= 3 && this.position <= 5) {\r\n        this.highlightMinute();\r\n      } else if (this.position >= 6 && this.position <= 8) {\r\n        if (this.showSeconds) {\r\n          this.highlightSecond();\r\n        } else {\r\n          this.highlightMeridian();\r\n        }\r\n      } else if (this.position >= 9 && this.position <= 11) {\r\n        this.highlightMeridian();\r\n      }\r\n    },\r\n\r\n    highlightNextUnit: function() {\r\n      switch (this.highlightedUnit) {\r\n      case 'hour':\r\n        this.highlightMinute();\r\n        break;\r\n      case 'minute':\r\n        if (this.showSeconds) {\r\n          this.highlightSecond();\r\n        } else if (this.showMeridian){\r\n          this.highlightMeridian();\r\n        } else {\r\n          this.highlightHour();\r\n        }\r\n        break;\r\n      case 'second':\r\n        if (this.showMeridian) {\r\n          this.highlightMeridian();\r\n        } else {\r\n          this.highlightHour();\r\n        }\r\n        break;\r\n      case 'meridian':\r\n        this.highlightHour();\r\n        break;\r\n      }\r\n    },\r\n\r\n    highlightPrevUnit: function() {\r\n      switch (this.highlightedUnit) {\r\n      case 'hour':\r\n        if(this.showMeridian){\r\n          this.highlightMeridian();\r\n        } else if (this.showSeconds) {\r\n          this.highlightSecond();\r\n        } else {\r\n          this.highlightMinute();\r\n        }\r\n        break;\r\n      case 'minute':\r\n        this.highlightHour();\r\n        break;\r\n      case 'second':\r\n        this.highlightMinute();\r\n        break;\r\n      case 'meridian':\r\n        if (this.showSeconds) {\r\n          this.highlightSecond();\r\n        } else {\r\n          this.highlightMinute();\r\n        }\r\n        break;\r\n      }\r\n    },\r\n\r\n    highlightHour: function() {\r\n      var $element = this.$element.get(0),\r\n          self = this;\r\n\r\n      this.highlightedUnit = 'hour';\r\n\r\n      if ($element.setSelectionRange) {\r\n        setTimeout(function() {\r\n          if (self.hour < 10) {\r\n            $element.setSelectionRange(0,1);\r\n          } else {\r\n            $element.setSelectionRange(0,2);\r\n          }\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    highlightMinute: function() {\r\n      var $element = this.$element.get(0),\r\n          self = this;\r\n\r\n      this.highlightedUnit = 'minute';\r\n\r\n      if ($element.setSelectionRange) {\r\n        setTimeout(function() {\r\n          if (self.hour < 10) {\r\n            $element.setSelectionRange(2,4);\r\n          } else {\r\n            $element.setSelectionRange(3,5);\r\n          }\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    highlightSecond: function() {\r\n      var $element = this.$element.get(0),\r\n          self = this;\r\n\r\n      this.highlightedUnit = 'second';\r\n\r\n      if ($element.setSelectionRange) {\r\n        setTimeout(function() {\r\n          if (self.hour < 10) {\r\n            $element.setSelectionRange(5,7);\r\n          } else {\r\n            $element.setSelectionRange(6,8);\r\n          }\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    highlightMeridian: function() {\r\n      var $element = this.$element.get(0),\r\n          self = this;\r\n\r\n      this.highlightedUnit = 'meridian';\r\n\r\n      if ($element.setSelectionRange) {\r\n        if (this.showSeconds) {\r\n          setTimeout(function() {\r\n            if (self.hour < 10) {\r\n              $element.setSelectionRange(8,10);\r\n            } else {\r\n              $element.setSelectionRange(9,11);\r\n            }\r\n          }, 0);\r\n        } else {\r\n          setTimeout(function() {\r\n            if (self.hour < 10) {\r\n              $element.setSelectionRange(5,7);\r\n            } else {\r\n              $element.setSelectionRange(6,8);\r\n            }\r\n          }, 0);\r\n        }\r\n      }\r\n    },\r\n\r\n    incrementHour: function() {\r\n      if (this.showMeridian) {\r\n        if (this.hour === 11) {\r\n          this.hour++;\r\n          return this.toggleMeridian();\r\n        } else if (this.hour === 12) {\r\n          this.hour = 0;\r\n        }\r\n      }\r\n      if (this.hour === 23) {\r\n        this.hour = 0;\r\n\r\n        return;\r\n      }\r\n      this.hour++;\r\n    },\r\n\r\n    incrementMinute: function(step) {\r\n      var newVal;\r\n\r\n      if (step) {\r\n        newVal = this.minute + step;\r\n      } else {\r\n        newVal = this.minute + this.minuteStep - (this.minute % this.minuteStep);\r\n      }\r\n\r\n      if (newVal > 59) {\r\n        this.incrementHour();\r\n        this.minute = newVal - 60;\r\n      } else {\r\n        this.minute = newVal;\r\n      }\r\n    },\r\n\r\n    incrementSecond: function() {\r\n      var newVal = this.second + this.secondStep - (this.second % this.secondStep);\r\n\r\n      if (newVal > 59) {\r\n        this.incrementMinute(true);\r\n        this.second = newVal - 60;\r\n      } else {\r\n        this.second = newVal;\r\n      }\r\n    },\r\n\r\n    mousewheel: function(e) {\r\n      if (this.disableMousewheel) {\r\n        return;\r\n      }\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail,\r\n          scrollTo = null;\r\n\r\n      if (e.type === 'mousewheel') {\r\n        scrollTo = (e.originalEvent.wheelDelta * -1);\r\n      }\r\n      else if (e.type === 'DOMMouseScroll') {\r\n        scrollTo = 40 * e.originalEvent.detail;\r\n      }\r\n\r\n      if (scrollTo) {\r\n        e.preventDefault();\r\n        $(this).scrollTop(scrollTo + $(this).scrollTop());\r\n      }\r\n\r\n      switch (this.highlightedUnit) {\r\n      case 'minute':\r\n        if (delta > 0) {\r\n          this.incrementMinute();\r\n        } else {\r\n          this.decrementMinute();\r\n        }\r\n        this.highlightMinute();\r\n        break;\r\n      case 'second':\r\n        if (delta > 0) {\r\n          this.incrementSecond();\r\n        } else {\r\n          this.decrementSecond();\r\n        }\r\n        this.highlightSecond();\r\n        break;\r\n      case 'meridian':\r\n        this.toggleMeridian();\r\n        this.highlightMeridian();\r\n        break;\r\n      default:\r\n        if (delta > 0) {\r\n          this.incrementHour();\r\n        } else {\r\n          this.decrementHour();\r\n        }\r\n        this.highlightHour();\r\n        break;\r\n      }\r\n\r\n      return false;\r\n    },\r\n\r\n    // This method was adapted from bootstrap-datepicker.\r\n    place : function() {\r\n      if (this.isInline) {\r\n        return;\r\n      }\r\n      var widgetWidth = this.$widget.outerWidth(), widgetHeight = this.$widget.outerHeight(), visualPadding = 10, windowWidth =\r\n        $(window).width(), windowHeight = $(window).height(), scrollTop = $(window).scrollTop();\r\n\r\n      var zIndex = parseInt(this.$element.parents().filter(function() {}).first().css('z-index'), 10) + 10;\r\n      var offset = this.component ? this.component.parent().offset() : this.$element.offset();\r\n      var height = this.component ? this.component.outerHeight(true) : this.$element.outerHeight(false);\r\n      var width = this.component ? this.component.outerWidth(true) : this.$element.outerWidth(false);\r\n      var left = offset.left, top = offset.top;\r\n\r\n      this.$widget.removeClass('timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left');\r\n\r\n      if (this.orientation.x !== 'auto') {\r\n        this.picker.addClass('datepicker-orient-' + this.orientation.x);\r\n        if (this.orientation.x === 'right') {\r\n          left -= widgetWidth - width;\r\n        }\r\n      } else{\r\n        // auto x orientation is best-placement: if it crosses a window edge, fudge it sideways\r\n        // Default to left\r\n        this.$widget.addClass('timepicker-orient-left');\r\n        if (offset.left < 0) {\r\n          left -= offset.left - visualPadding;\r\n        } else if (offset.left + widgetWidth > windowWidth) {\r\n          left = windowWidth - widgetWidth - visualPadding;\r\n        }\r\n      }\r\n      // auto y orientation is best-situation: top or bottom, no fudging, decision based on which shows more of the widget\r\n      var yorient = this.orientation.y, topOverflow, bottomOverflow;\r\n      if (yorient === 'auto') {\r\n        topOverflow = -scrollTop + offset.top - widgetHeight;\r\n        bottomOverflow = scrollTop + windowHeight - (offset.top + height + widgetHeight);\r\n        if (Math.max(topOverflow, bottomOverflow) === bottomOverflow) {\r\n          yorient = 'top';\r\n        } else {\r\n          yorient = 'bottom';\r\n        }\r\n      }\r\n      this.$widget.addClass('timepicker-orient-' + yorient);\r\n      if (yorient === 'top'){\r\n        top += height;\r\n      } else{\r\n        top -= widgetHeight + parseInt(this.$widget.css('padding-top'), 10);\r\n      }\r\n\r\n      this.$widget.css({\r\n        top : top,\r\n        left : left,\r\n        zIndex : zIndex\r\n      });\r\n    },\r\n\r\n    remove: function() {\r\n      $('document').off('.timepicker');\r\n      if (this.$widget) {\r\n        this.$widget.remove();\r\n      }\r\n      delete this.$element.data().timepicker;\r\n    },\r\n\r\n    setDefaultTime: function(defaultTime) {\r\n      if (!this.$element.val()) {\r\n        if (defaultTime === 'current') {\r\n          var dTime = new Date(),\r\n            hours = dTime.getHours(),\r\n            minutes = dTime.getMinutes(),\r\n            seconds = dTime.getSeconds(),\r\n            meridian = 'AM';\r\n\r\n          if (seconds !== 0) {\r\n            seconds = Math.ceil(dTime.getSeconds() / this.secondStep) * this.secondStep;\r\n            if (seconds === 60) {\r\n              minutes += 1;\r\n              seconds = 0;\r\n            }\r\n          }\r\n\r\n          if (minutes !== 0) {\r\n            minutes = Math.ceil(dTime.getMinutes() / this.minuteStep) * this.minuteStep;\r\n            if (minutes === 60) {\r\n              hours += 1;\r\n              minutes = 0;\r\n            }\r\n          }\r\n\r\n          if (this.showMeridian) {\r\n            if (hours === 0) {\r\n              hours = 12;\r\n            } else if (hours >= 12) {\r\n              if (hours > 12) {\r\n                hours = hours - 12;\r\n              }\r\n              meridian = 'PM';\r\n            } else {\r\n              meridian = 'AM';\r\n            }\r\n          }\r\n\r\n          this.hour = hours;\r\n          this.minute = minutes;\r\n          this.second = seconds;\r\n          this.meridian = meridian;\r\n\r\n          this.update();\r\n\r\n        } else if (defaultTime === false) {\r\n          this.hour = 0;\r\n          this.minute = 0;\r\n          this.second = 0;\r\n          this.meridian = 'AM';\r\n        } else {\r\n          this.setTime(defaultTime);\r\n        }\r\n      } else {\r\n        this.updateFromElementVal();\r\n      }\r\n    },\r\n\r\n    setTime: function(time, ignoreWidget) {\r\n      if (!time) {\r\n        this.clear();\r\n        return;\r\n      }\r\n\r\n      var timeArray,\r\n          hour,\r\n          minute,\r\n          second,\r\n          meridian;\r\n\r\n      if (typeof time === 'object' && time.getMonth){\r\n        // this is a date object\r\n        hour    = time.getHours();\r\n        minute  = time.getMinutes();\r\n        second  = time.getSeconds();\r\n\r\n        if (this.showMeridian){\r\n          meridian = 'AM';\r\n          if (hour > 12){\r\n            meridian = 'PM';\r\n            hour = hour % 12;\r\n          }\r\n\r\n          if (hour === 12){\r\n            meridian = 'PM';\r\n          }\r\n        }\r\n      } else {\r\n        if (time.match(/p/i) !== null) {\r\n          meridian = 'PM';\r\n        } else {\r\n          meridian = 'AM';\r\n        }\r\n\r\n        time = time.replace(/[^0-9\\:]/g, '');\r\n\r\n        timeArray = time.split(':');\r\n\r\n        hour = timeArray[0] ? timeArray[0].toString() : timeArray.toString();\r\n        minute = timeArray[1] ? timeArray[1].toString() : '';\r\n        second = timeArray[2] ? timeArray[2].toString() : '';\r\n\r\n        // idiot proofing\r\n        if (hour.length > 4) {\r\n          second = hour.substr(4, 2);\r\n        }\r\n        if (hour.length > 2) {\r\n          minute = hour.substr(2, 2);\r\n          hour = hour.substr(0, 2);\r\n        }\r\n        if (minute.length > 2) {\r\n          second = minute.substr(2, 2);\r\n          minute = minute.substr(0, 2);\r\n        }\r\n        if (second.length > 2) {\r\n          second = second.substr(2, 2);\r\n        }\r\n\r\n        hour = parseInt(hour, 10);\r\n        minute = parseInt(minute, 10);\r\n        second = parseInt(second, 10);\r\n\r\n        if (isNaN(hour)) {\r\n          hour = 0;\r\n        }\r\n        if (isNaN(minute)) {\r\n          minute = 0;\r\n        }\r\n        if (isNaN(second)) {\r\n          second = 0;\r\n        }\r\n\r\n        if (this.showMeridian) {\r\n          if (hour < 1) {\r\n            hour = 1;\r\n          } else if (hour > 12) {\r\n            hour = 12;\r\n          }\r\n        } else {\r\n          if (hour >= 24) {\r\n            hour = 23;\r\n          } else if (hour < 0) {\r\n            hour = 0;\r\n          }\r\n          if (hour < 13 && meridian === 'PM') {\r\n            hour = hour + 12;\r\n          }\r\n        }\r\n\r\n        if (minute < 0) {\r\n          minute = 0;\r\n        } else if (minute >= 60) {\r\n          minute = 59;\r\n        }\r\n\r\n        if (this.showSeconds) {\r\n          if (isNaN(second)) {\r\n            second = 0;\r\n          } else if (second < 0) {\r\n            second = 0;\r\n          } else if (second >= 60) {\r\n            second = 59;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.hour = hour;\r\n      this.minute = minute;\r\n      this.second = second;\r\n      this.meridian = meridian;\r\n\r\n      this.update(ignoreWidget);\r\n    },\r\n\r\n    showWidget: function() {\r\n      if (this.isOpen) {\r\n        return;\r\n      }\r\n\r\n      if (this.$element.is(':disabled')) {\r\n        return;\r\n      }\r\n\r\n      // show/hide approach taken by datepicker\r\n      this.$widget.appendTo(this.appendWidgetTo);\r\n      var self = this;\r\n      $(document).on('mousedown.timepicker, touchend.timepicker', function (e) {\r\n        // This condition was inspired by bootstrap-datepicker.\r\n        // The element the timepicker is invoked on is the input but it has a sibling for addon/button.\r\n        if (!(self.$element.parent().find(e.target).length ||\r\n            self.$widget.is(e.target) ||\r\n            self.$widget.find(e.target).length)) {\r\n          self.hideWidget();\r\n        }\r\n      });\r\n\r\n      this.$element.trigger({\r\n        'type': 'show.timepicker',\r\n        'time': {\r\n          'value': this.getTime(),\r\n          'hours': this.hour,\r\n          'minutes': this.minute,\r\n          'seconds': this.second,\r\n          'meridian': this.meridian\r\n        }\r\n      });\r\n\r\n      this.place();\r\n      if (this.disableFocus) {\r\n        this.$element.blur();\r\n      }\r\n\r\n      // widget shouldn't be empty on open\r\n      if (this.hour === '') {\r\n        if (this.defaultTime) {\r\n          this.setDefaultTime(this.defaultTime);\r\n        } else {\r\n          this.setTime('0:0:0');\r\n        }\r\n      }\r\n\r\n      if (this.template === 'modal' && this.$widget.modal) {\r\n        this.$widget.modal('show').on('hidden', $.proxy(this.hideWidget, this));\r\n      } else {\r\n        if (this.isOpen === false) {\r\n          this.$widget.addClass('open');\r\n        }\r\n      }\r\n\r\n      this.isOpen = true;\r\n    },\r\n\r\n    toggleMeridian: function() {\r\n      this.meridian = this.meridian === 'AM' ? 'PM' : 'AM';\r\n    },\r\n\r\n    update: function(ignoreWidget) {\r\n      this.updateElement();\r\n      if (!ignoreWidget) {\r\n        this.updateWidget();\r\n      }\r\n\r\n      this.$element.trigger({\r\n        'type': 'changeTime.timepicker',\r\n        'time': {\r\n          'value': this.getTime(),\r\n          'hours': this.hour,\r\n          'minutes': this.minute,\r\n          'seconds': this.second,\r\n          'meridian': this.meridian\r\n        }\r\n      });\r\n    },\r\n\r\n    updateElement: function() {\r\n      this.$element.val(this.getTime()).change();\r\n    },\r\n\r\n    updateFromElementVal: function() {\r\n      this.setTime(this.$element.val());\r\n    },\r\n\r\n    updateWidget: function() {\r\n      if (this.$widget === false) {\r\n        return;\r\n      }\r\n\r\n      var hour = this.hour,\r\n          minute = this.minute.toString().length === 1 ? '0' + this.minute : this.minute,\r\n          second = this.second.toString().length === 1 ? '0' + this.second : this.second;\r\n\r\n      if (this.showInputs) {\r\n        this.$widget.find('input.bootstrap-timepicker-hour').val(hour);\r\n        this.$widget.find('input.bootstrap-timepicker-minute').val(minute);\r\n\r\n        if (this.showSeconds) {\r\n          this.$widget.find('input.bootstrap-timepicker-second').val(second);\r\n        }\r\n        if (this.showMeridian) {\r\n          this.$widget.find('input.bootstrap-timepicker-meridian').val(this.meridian);\r\n        }\r\n      } else {\r\n        this.$widget.find('span.bootstrap-timepicker-hour').text(hour);\r\n        this.$widget.find('span.bootstrap-timepicker-minute').text(minute);\r\n\r\n        if (this.showSeconds) {\r\n          this.$widget.find('span.bootstrap-timepicker-second').text(second);\r\n        }\r\n        if (this.showMeridian) {\r\n          this.$widget.find('span.bootstrap-timepicker-meridian').text(this.meridian);\r\n        }\r\n      }\r\n    },\r\n\r\n    updateFromWidgetInputs: function() {\r\n      if (this.$widget === false) {\r\n        return;\r\n      }\r\n\r\n      var t = this.$widget.find('input.bootstrap-timepicker-hour').val() + ':' +\r\n              this.$widget.find('input.bootstrap-timepicker-minute').val() +\r\n              (this.showSeconds ? ':' + this.$widget.find('input.bootstrap-timepicker-second').val() : '') +\r\n              (this.showMeridian ? this.$widget.find('input.bootstrap-timepicker-meridian').val() : '')\r\n      ;\r\n\r\n      this.setTime(t, true);\r\n    },\r\n\r\n    widgetClick: function(e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      var $input = $(e.target),\r\n          action = $input.closest('a').data('action');\r\n\r\n      if (action) {\r\n        this[action]();\r\n      }\r\n      this.update();\r\n\r\n      if ($input.is('input')) {\r\n        $input.get(0).setSelectionRange(0,2);\r\n      }\r\n    },\r\n\r\n    widgetKeydown: function(e) {\r\n      var $input = $(e.target),\r\n          name = $input.data('name');\r\n\r\n      switch (e.keyCode) {\r\n      case 9: //tab\r\n        if ((this.showMeridian && name === 'meridian') || (this.showSeconds && name === 'second') || (!this.showMeridian && !this.showSeconds && name === 'minute')) {\r\n          return this.hideWidget();\r\n        }\r\n        break;\r\n      case 27: // escape\r\n        this.hideWidget();\r\n        break;\r\n      case 38: // up arrow\r\n        e.preventDefault();\r\n        switch (name) {\r\n        case 'hour':\r\n          this.incrementHour();\r\n          break;\r\n        case 'minute':\r\n          this.incrementMinute();\r\n          break;\r\n        case 'second':\r\n          this.incrementSecond();\r\n          break;\r\n        case 'meridian':\r\n          this.toggleMeridian();\r\n          break;\r\n        }\r\n        this.setTime(this.getTime());\r\n        $input.get(0).setSelectionRange(0,2);\r\n        break;\r\n      case 40: // down arrow\r\n        e.preventDefault();\r\n        switch (name) {\r\n        case 'hour':\r\n          this.decrementHour();\r\n          break;\r\n        case 'minute':\r\n          this.decrementMinute();\r\n          break;\r\n        case 'second':\r\n          this.decrementSecond();\r\n          break;\r\n        case 'meridian':\r\n          this.toggleMeridian();\r\n          break;\r\n        }\r\n        this.setTime(this.getTime());\r\n        $input.get(0).setSelectionRange(0,2);\r\n        break;\r\n      }\r\n    },\r\n\r\n    widgetKeyup: function(e) {\r\n      if ((e.keyCode === 65) || (e.keyCode === 77) || (e.keyCode === 80) || (e.keyCode === 46) || (e.keyCode === 8) || (e.keyCode >= 46 && e.keyCode <= 57)) {\r\n        this.updateFromWidgetInputs();\r\n      }\r\n    }\r\n  };\r\n\r\n  //TIMEPICKER PLUGIN DEFINITION\r\n  $.fn.timepicker = function(option) {\r\n    var args = Array.apply(null, arguments);\r\n    args.shift();\r\n    return this.each(function() {\r\n      var $this = $(this),\r\n        data = $this.data('timepicker'),\r\n        options = typeof option === 'object' && option;\r\n\r\n      if (!data) {\r\n        $this.data('timepicker', (data = new Timepicker(this, $.extend({}, $.fn.timepicker.defaults, options, $(this).data()))));\r\n      }\r\n\r\n      if (typeof option === 'string') {\r\n        data[option].apply(data, args);\r\n      }\r\n    });\r\n  };\r\n\r\n  $.fn.timepicker.defaults = {\r\n    defaultTime: 'current',\r\n    disableFocus: false,\r\n    disableMousewheel: false,\r\n    isOpen: false,\r\n    minuteStep: 15,\r\n    modalBackdrop: false,\r\n    orientation: { x: 'auto', y: 'auto'},\r\n    secondStep: 15,\r\n    showSeconds: false,\r\n    showInputs: true,\r\n    showMeridian: true,\r\n    template: 'dropdown',\r\n    appendWidgetTo: 'body',\r\n    showWidgetOnAddonClick: true\r\n  };\r\n\r\n  $.fn.timepicker.Constructor = Timepicker;\r\n\r\n})(jQuery, window, document);;/*!\r\n * BootstrapValidator (http://bootstrapvalidator.com)\r\n * The best jQuery plugin to validate form fields. Designed to use with Bootstrap 3\r\n *\r\n * @version     v0.5.0, built on 2014-07-14 4:31:02 PM\r\n * @author      https://twitter.com/nghuuphuoc\r\n * @copyright   (c) 2013 - 2014 Nguyen Huu Phuoc\r\n * @license     MIT\r\n */\r\n(function($) {\r\n    var BootstrapValidator = function(form, options) {\r\n        this.$form   = $(form);\r\n        this.options = $.extend({}, $.fn.bootstrapValidator.DEFAULT_OPTIONS, options);\r\n\r\n        this.$invalidFields = $([]);    // Array of invalid fields\r\n        this.$submitButton  = null;     // The submit button which is clicked to submit form\r\n\r\n        // Validating status\r\n        this.STATUS_NOT_VALIDATED = 'NOT_VALIDATED';\r\n        this.STATUS_VALIDATING    = 'VALIDATING';\r\n        this.STATUS_INVALID       = 'INVALID';\r\n        this.STATUS_VALID         = 'VALID';\r\n\r\n        // Determine the event that is fired when user change the field value\r\n        // Most modern browsers supports input event except IE 7, 8.\r\n        // IE 9 supports input event but the event is still not fired if I press the backspace key.\r\n        // Get IE version\r\n        // https://gist.github.com/padolsey/527683/#comment-7595\r\n        var ieVersion = (function() {\r\n            var v = 3, div = document.createElement('div'), a = div.all || [];\r\n            while (div.innerHTML = '<!--[if gt IE '+(++v)+']><br><![endif]-->', a[0]) {}\r\n            return v > 4 ? v : !v;\r\n        }());\r\n\r\n        var el = document.createElement('div');\r\n        this._changeEvent = (ieVersion === 9 || !('oninput' in el)) ? 'keyup' : 'input';\r\n\r\n        // The flag to indicate that the form is ready to submit when a remote/callback validator returns\r\n        this._submitIfValid = null;\r\n\r\n        // Field elements\r\n        this._cacheFields = {};\r\n\r\n        this._init();\r\n    };\r\n\r\n    BootstrapValidator.prototype = {\r\n        constructor: BootstrapValidator,\r\n\r\n        /**\r\n         * Init form\r\n         */\r\n        _init: function() {\r\n            var that    = this,\r\n                options = {\r\n                    excluded:       this.$form.attr('data-bv-excluded'),\r\n                    trigger:        this.$form.attr('data-bv-trigger'),\r\n                    message:        this.$form.attr('data-bv-message'),\r\n                    container:      this.$form.attr('data-bv-container'),\r\n                    group:          this.$form.attr('data-bv-group'),\r\n                    submitButtons:  this.$form.attr('data-bv-submitbuttons'),\r\n                    threshold:      this.$form.attr('data-bv-threshold'),\r\n                    live:           this.$form.attr('data-bv-live'),\r\n                    onSuccess:      this.$form.attr('data-bv-onsuccess'),\r\n                    onError:        this.$form.attr('data-bv-onerror'),\r\n                    fields:         {},\r\n                    feedbackIcons: {\r\n                        valid:      this.$form.attr('data-bv-feedbackicons-valid'),\r\n                        invalid:    this.$form.attr('data-bv-feedbackicons-invalid'),\r\n                        validating: this.$form.attr('data-bv-feedbackicons-validating')\r\n                    }\r\n                };\r\n\r\n            this.$form\r\n                // Disable client side validation in HTML 5\r\n                .attr('novalidate', 'novalidate')\r\n                .addClass(this.options.elementClass)\r\n                // Disable the default submission first\r\n                .on('submit.bv', function(e) {\r\n                    e.preventDefault();\r\n                    that.validate();\r\n                })\r\n                .on('click.bv', this.options.submitButtons, function() {\r\n                    that.$submitButton  = $(this);\r\n\t\t\t\t\t// The user just click the submit button\r\n\t\t\t\t\tthat._submitIfValid = true;\r\n                })\r\n                // Find all fields which have either \"name\" or \"data-bv-field\" attribute\r\n                .find('[name], [data-bv-field]')\r\n                    .each(function() {\r\n                        var $field = $(this),\r\n                            field  = $field.attr('name') || $field.attr('data-bv-field'),\r\n                            opts   = that._parseOptions($field);\r\n                        if (opts) {\r\n                            $field.attr('data-bv-field', field);\r\n                            options.fields[field] = $.extend({}, opts, options.fields[field]);\r\n                        }\r\n                    });\r\n\r\n            this.options = $.extend(true, this.options, options);\r\n            for (var field in this.options.fields) {\r\n                this._initField(field);\r\n            }\r\n\r\n            this.$form.trigger($.Event('init.form.bv'), {\r\n                bv: this,\r\n                options: this.options\r\n            });\r\n\r\n            // Prepare the events\r\n            if (this.options.onSuccess) {\r\n                this.$form.on('success.form.bv', function(e) {\r\n                    $.fn.bootstrapValidator.helpers.call(that.options.onSuccess, [e]);\r\n                });\r\n            }\r\n            if (this.options.onError) {\r\n                this.$form.on('error.form.bv', function(e) {\r\n                    $.fn.bootstrapValidator.helpers.call(that.options.onError, [e]);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Parse the validator options from HTML attributes\r\n         *\r\n         * @param {jQuery} $field The field element\r\n         * @returns {Object}\r\n         */\r\n        _parseOptions: function($field) {\r\n            var field      = $field.attr('name') || $field.attr('data-bv-field'),\r\n                validators = {},\r\n                validator,\r\n                v,          // Validator name\r\n                enabled,\r\n                optionName,\r\n                optionValue,\r\n                html5AttrName,\r\n                html5AttrMap;\r\n\r\n            for (v in $.fn.bootstrapValidator.validators) {\r\n                validator    = $.fn.bootstrapValidator.validators[v];\r\n                enabled      = $field.attr('data-bv-' + v.toLowerCase()) + '';\r\n                html5AttrMap = ('function' === typeof validator.enableByHtml5) ? validator.enableByHtml5($field) : null;\r\n\r\n                if ((html5AttrMap && enabled !== 'false')\r\n                    || (html5AttrMap !== true && ('' === enabled || 'true' === enabled)))\r\n                {\r\n                    // Try to parse the options via attributes\r\n                    validator.html5Attributes = $.extend({}, { message: 'message', onerror: 'onError', onsuccess: 'onSuccess' }, validator.html5Attributes);\r\n                    validators[v] = $.extend({}, html5AttrMap === true ? {} : html5AttrMap, validators[v]);\r\n\r\n                    for (html5AttrName in validator.html5Attributes) {\r\n                        optionName  = validator.html5Attributes[html5AttrName];\r\n                        optionValue = $field.attr('data-bv-' + v.toLowerCase() + '-' + html5AttrName);\r\n                        if (optionValue) {\r\n                            if ('true' === optionValue) {\r\n                                optionValue = true;\r\n                            } else if ('false' === optionValue) {\r\n                                optionValue = false;\r\n                            }\r\n                            validators[v][optionName] = optionValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var opts = {\r\n                    excluded:      $field.attr('data-bv-excluded'),\r\n                    feedbackIcons: $field.attr('data-bv-feedbackicons'),\r\n                    trigger:       $field.attr('data-bv-trigger'),\r\n                    message:       $field.attr('data-bv-message'),\r\n                    container:     $field.attr('data-bv-container'),\r\n                    group:         $field.attr('data-bv-group'),\r\n                    selector:      $field.attr('data-bv-selector'),\r\n                    threshold:     $field.attr('data-bv-threshold'),\r\n                    onStatus:      $field.attr('data-bv-onstatus'),\r\n                    onSuccess:     $field.attr('data-bv-onsuccess'),\r\n                    onError:       $field.attr('data-bv-onerror'),\r\n                    validators:    validators\r\n                },\r\n                emptyOptions    = $.isEmptyObject(opts),        // Check if the field options are set using HTML attributes\r\n                emptyValidators = $.isEmptyObject(validators);  // Check if the field validators are set using HTML attributes\r\n\r\n            if (!emptyValidators || (!emptyOptions && this.options.fields && this.options.fields[field])) {\r\n                opts.validators = validators;\r\n                return opts;\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         */\r\n        _initField: function(field) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    fields = this.getFieldElements(field);\r\n                    fields.attr('data-bv-field', field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (this.options.fields[field] === null || this.options.fields[field].validators === null) {\r\n                return;\r\n            }\r\n\r\n            // We don't need to validate non-existing fields\r\n            if (fields.length === 0) {\r\n                delete this.options.fields[field];\r\n                return;\r\n            }\r\n            var validatorName;\r\n            for (validatorName in this.options.fields[field].validators) {\r\n                if (!$.fn.bootstrapValidator.validators[validatorName]) {\r\n                    delete this.options.fields[field].validators[validatorName];\r\n                }\r\n            }\r\n            if (this.options.fields[field].enabled === null) {\r\n                this.options.fields[field].enabled = true;\r\n            }\r\n\r\n            var that      = this,\r\n                total     = fields.length,\r\n                type      = fields.attr('type'),\r\n                updateAll = (total === 1) || ('radio' === type) || ('checkbox' === type),\r\n                event     = ('radio' === type || 'checkbox' === type || 'file' === type || 'SELECT' === fields.eq(0).get(0).tagName) ? 'change' : this._changeEvent,\r\n                trigger   = (this.options.fields[field].trigger || this.options.trigger || event).split(' '),\r\n                events    = $.map(trigger, function(item) {\r\n                    return item + '.update.bv';\r\n                }).join(' ');\r\n\r\n            for (var i = 0; i < total; i++) {\r\n                var $field    = fields.eq(i),\r\n                    group     = this.options.fields[field].group || this.options.group,\r\n                    $parent   = $field.parents(group),\r\n                    // Allow user to indicate where the error messages are shown\r\n                    container = this.options.fields[field].container || this.options.container,\r\n                    $message  = (container && container !== 'tooltip' && container !== 'popover') ? $(container) : this._getMessageContainer($field, group);\r\n\r\n                if (container && container !== 'tooltip' && container !== 'popover') {\r\n                    $message.addClass('has-error');\r\n                }\r\n\r\n                // Remove all error messages and feedback icons\r\n                $message.find('.help-block[data-bv-validator][data-bv-for=\"' + field + '\"]').remove();\r\n                $parent.find('i[data-bv-icon-for=\"' + field + '\"]').remove();\r\n\r\n                // Whenever the user change the field value, mark it as not validated yet\r\n                $field.off(events).on(events, function() {\r\n                    that.updateStatus($(this), that.STATUS_NOT_VALIDATED);\r\n                });\r\n\r\n                // Create help block elements for showing the error messages\r\n                $field.data('bv.messages', $message);\r\n                for (validatorName in this.options.fields[field].validators) {\r\n                    $field.data('bv.result.' + validatorName, this.STATUS_NOT_VALIDATED);\r\n\r\n                    if (!updateAll || i === total - 1) {\r\n                        $('<small/>')\r\n                            .css('display', 'none')\r\n                            .addClass('help-block')\r\n                            .attr('data-bv-validator', validatorName)\r\n                            .attr('data-bv-for', field)\r\n                            .attr('data-bv-result', this.STATUS_NOT_VALIDATED)\r\n                            .html(this._getMessage(field, validatorName))\r\n                            .appendTo($message);\r\n                    }\r\n\r\n                    // Prepare the validator events\r\n                    if (this.options.fields[field].validators[validatorName].onSuccess) {\r\n                        $field.on('success.validator.bv', function(e, data) {\r\n                             $.fn.bootstrapValidator.helpers.call(that.options.fields[field].validators[validatorName].onSuccess, [e, data]);\r\n                        });\r\n                    }\r\n                    if (this.options.fields[field].validators[validatorName].onError) {\r\n                        $field.on('error.validator.bv', function(e, data) {\r\n                             $.fn.bootstrapValidator.helpers.call(that.options.fields[field].validators[validatorName].onError, [e, data]);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Prepare the feedback icons\r\n                // Available from Bootstrap 3.1 (http://getbootstrap.com/css/#forms-control-validation)\r\n                if (this.options.fields[field].feedbackIcons !== false && this.options.fields[field].feedbackIcons !== 'false'\r\n                    && this.options.feedbackIcons\r\n                    && this.options.feedbackIcons.validating && this.options.feedbackIcons.invalid && this.options.feedbackIcons.valid\r\n                    && (!updateAll || i === total - 1))\r\n                {\r\n                    $parent.removeClass('has-success').removeClass('has-error').addClass('has-feedback');\r\n                    var $icon = $('<i/>')\r\n                                    .css('display', 'none')\r\n                                    .addClass('form-control-feedback')\r\n                                    .attr('data-bv-icon-for', field)\r\n                                    // Place it after the label containing the checkbox/radio\r\n                                    // so when clicking the icon, it doesn't effect to the checkbox/radio element\r\n                                    .insertAfter(('checkbox' === type || 'radio' === type) ? $field.parent() : $field);\r\n\r\n                    // The feedback icon does not render correctly if there is no label\r\n                    // https://github.com/twbs/bootstrap/issues/12873\r\n                    if ($parent.find('label').length === 0) {\r\n                        $icon.css('top', 0);\r\n                    }\r\n                    // Fix feedback icons in input-group\r\n                    if ($parent.find('.input-group').length !== 0) {\r\n                        $icon.css({\r\n                            'top': 0,\r\n                            'z-index': 100\r\n                        }).insertAfter($parent.find('.input-group').eq(0));\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Prepare the events\r\n            if (this.options.fields[field].onSuccess) {\r\n                fields.on('success.field.bv', function(e, data) {\r\n                    $.fn.bootstrapValidator.helpers.call(that.options.fields[field].onSuccess, [e, data]);\r\n                });\r\n            }\r\n            if (this.options.fields[field].onError) {\r\n                fields.on('error.field.bv', function(e, data) {\r\n                    $.fn.bootstrapValidator.helpers.call(that.options.fields[field].onError, [e, data]);\r\n                });\r\n            }\r\n            if (this.options.fields[field].onStatus) {\r\n                fields.on('status.field.bv', function(e, data) {\r\n                    $.fn.bootstrapValidator.helpers.call(that.options.fields[field].onStatus, [e, data]);\r\n                });\r\n            }\r\n\r\n            // Set live mode\r\n            events = $.map(trigger, function(item) {\r\n                return item + '.live.bv';\r\n            }).join(' ');\r\n            switch (this.options.live) {\r\n                case 'submitted':\r\n                    break;\r\n                case 'disabled':\r\n                    fields.off(events);\r\n                    break;\r\n                case 'enabled':\r\n                /* falls through */\r\n                default:\r\n                    fields.off(events).on(events, function() {\r\n                        if (that._exceedThreshold($(this))) {\r\n                            that.validateField($(this));\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n\r\n            fields.trigger($.Event('init.field.bv'), {\r\n                bv: this,\r\n                field: field,\r\n                element: fields\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get the error message for given field and validator\r\n         *\r\n         * @param {String} field The field name\r\n         * @param {String} validatorName The validator name\r\n         * @returns {String}\r\n         */\r\n        _getMessage: function(field, validatorName) {\r\n            if (!this.options.fields[field] || !$.fn.bootstrapValidator.validators[validatorName]\r\n                || !this.options.fields[field].validators || !this.options.fields[field].validators[validatorName])\r\n            {\r\n                return '';\r\n            }\r\n\r\n            var options = this.options.fields[field].validators[validatorName];\r\n            switch (true) {\r\n                case (!!options.message):\r\n                    return options.message;\r\n                case (!!this.options.fields[field].message):\r\n                    return this.options.fields[field].message;\r\n                case (!!$.fn.bootstrapValidator.i18n[validatorName]):\r\n                    return $.fn.bootstrapValidator.i18n[validatorName]['default'];\r\n                default:\r\n                    return this.options.message;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the element to place the error messages\r\n         *\r\n         * @param {jQuery} $field The field element\r\n         * @param {String} group\r\n         * @returns {jQuery}\r\n         */\r\n        _getMessageContainer: function($field, group) {\r\n            var $parent = $field.parent();\r\n            if ($parent.is(group)) {\r\n                return $parent;\r\n            }\r\n\r\n            var cssClasses = $parent.attr('class');\r\n            if (!cssClasses) {\r\n                return this._getMessageContainer($parent, group);\r\n            }\r\n\r\n            cssClasses = cssClasses.split(' ');\r\n            var n = cssClasses.length;\r\n            for (var i = 0; i < n; i++) {\r\n                if (/^col-(xs|sm|md|lg)-\\d+$/.test(cssClasses[i]) || /^col-(xs|sm|md|lg)-offset-\\d+$/.test(cssClasses[i])) {\r\n                    return $parent;\r\n                }\r\n            }\r\n\r\n            return this._getMessageContainer($parent, group);\r\n        },\r\n\r\n        /**\r\n         * Called when all validations are completed\r\n         */\r\n        _submit: function() {\r\n            var isValid   = this.isValid(),\r\n                eventType = isValid ? 'success.form.bv' : 'error.form.bv',\r\n                e         = $.Event(eventType);\r\n\r\n            this.$form.trigger(e);\r\n\r\n            // Call default handler\r\n            // Check if whether the submit button is clicked\r\n            if (this.$submitButton) {\r\n                isValid ? this._onSuccess(e) : this._onError(e);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if the field is excluded.\r\n         * Returning true means that the field will not be validated\r\n         *\r\n         * @param {jQuery} $field The field element\r\n         * @returns {Boolean}\r\n         */\r\n        _isExcluded: function($field) {\r\n            var excludedAttr = $field.attr('data-bv-excluded'),\r\n                // I still need to check the 'name' attribute while initializing the field\r\n                field        = $field.attr('data-bv-field') || $field.attr('name');\r\n\r\n            switch (true) {\r\n                case (!!field && this.options.fields && this.options.fields[field] && (this.options.fields[field].excluded === 'true' || this.options.fields[field].excluded === true)):\r\n                case (excludedAttr === 'true'):\r\n                case (excludedAttr === ''):\r\n                    return true;\r\n\r\n                case (!!field && this.options.fields && this.options.fields[field] && (this.options.fields[field].excluded === 'false' || this.options.fields[field].excluded === false)):\r\n                case (excludedAttr === 'false'):\r\n                    return false;\r\n\r\n                default:\r\n                    if (this.options.excluded) {\r\n                        // Convert to array first\r\n                        if ('string' === typeof this.options.excluded) {\r\n                            this.options.excluded = $.map(this.options.excluded.split(','), function(item) {\r\n                                // Trim the spaces\r\n                                return $.trim(item);\r\n                            });\r\n                        }\r\n\r\n                        var length = this.options.excluded.length;\r\n                        for (var i = 0; i < length; i++) {\r\n                            if (('string' === typeof this.options.excluded[i] && $field.is(this.options.excluded[i]))\r\n                                || ('function' === typeof this.options.excluded[i] && this.options.excluded[i].call(this, $field, this) === true))\r\n                            {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if the number of characters of field value exceed the threshold or not\r\n         *\r\n         * @param {jQuery} $field The field element\r\n         * @returns {Boolean}\r\n         */\r\n        _exceedThreshold: function($field) {\r\n            var field     = $field.attr('data-bv-field'),\r\n                threshold = this.options.fields[field].threshold || this.options.threshold;\r\n            if (!threshold) {\r\n                return true;\r\n            }\r\n            var cannotType = $.inArray($field.attr('type'), ['button', 'checkbox', 'file', 'hidden', 'image', 'radio', 'reset', 'submit']) !== -1;\r\n            return (cannotType || $field.val().length >= threshold);\r\n        },\r\n        \r\n        // ---\r\n        // Events\r\n        // ---\r\n\r\n        /**\r\n         * The default handler of error.form.bv event.\r\n         * It will be called when there is a invalid field\r\n         *\r\n         * @param {jQuery.Event} e The jQuery event object\r\n         */\r\n        _onError: function(e) {\r\n            if (e.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n\r\n            if ('submitted' === this.options.live) {\r\n                // Enable live mode\r\n                this.options.live = 'enabled';\r\n                var that = this;\r\n                for (var field in this.options.fields) {\r\n                    (function(f) {\r\n                        var fields  = that.getFieldElements(f);\r\n                        if (fields.length) {\r\n                            var type    = $(fields[0]).attr('type'),\r\n                                event   = ('radio' === type || 'checkbox' === type || 'file' === type || 'SELECT' === $(fields[0]).get(0).tagName) ? 'change' : that._changeEvent,\r\n                                trigger = that.options.fields[field].trigger || that.options.trigger || event,\r\n                                events  = $.map(trigger.split(' '), function(item) {\r\n                                    return item + '.live.bv';\r\n                                }).join(' ');\r\n\r\n                            fields.off(events).on(events, function() {\r\n                                if (that._exceedThreshold($(this))) {\r\n                                    that.validateField($(this));\r\n                                }\r\n                            });\r\n                        }\r\n                    })(field);\r\n                }\r\n            }\r\n\r\n            var $invalidField = this.$invalidFields.eq(0);\r\n            if ($invalidField) {\r\n                // Activate the tab containing the invalid field if exists\r\n                var $tabPane = $invalidField.parents('.tab-pane'), tabId;\r\n                if ($tabPane && (tabId = $tabPane.attr('id'))) {\r\n                    $('a[href=\"#' + tabId + '\"][data-toggle=\"tab\"]').tab('show');\r\n                }\r\n\r\n                // Focus to the first invalid field\r\n                $invalidField.focus();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * The default handler of success.form.bv event.\r\n         * It will be called when all the fields are valid\r\n         *\r\n         * @param {jQuery.Event} e The jQuery event object\r\n         */\r\n        _onSuccess: function(e) {\r\n            if (e.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n\r\n            // Submit the form\r\n            this.disableSubmitButtons(true).defaultSubmit();\r\n        },\r\n\r\n        /**\r\n         * Called after validating a field element\r\n         *\r\n         * @param {jQuery} $field The field element\r\n         * @param {String} [validatorName] The validator name\r\n         */\r\n        _onFieldValidated: function($field, validatorName) {\r\n            var field         = $field.attr('data-bv-field'),\r\n                validators    = this.options.fields[field].validators,\r\n                counter       = {},\r\n                numValidators = 0,\r\n                data          = {\r\n                    bv: this,\r\n                    field: field,\r\n                    element: $field,\r\n                    validator: validatorName\r\n                };\r\n\r\n            // Trigger an event after given validator completes\r\n            if (validatorName) {\r\n                switch ($field.data('bv.result.' + validatorName)) {\r\n                    case this.STATUS_INVALID:\r\n                        $field.trigger($.Event('error.validator.bv'), data);\r\n                        break;\r\n                    case this.STATUS_VALID:\r\n                        $field.trigger($.Event('success.validator.bv'), data);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n\r\n            counter[this.STATUS_NOT_VALIDATED] = 0;\r\n            counter[this.STATUS_VALIDATING]    = 0;\r\n            counter[this.STATUS_INVALID]       = 0;\r\n            counter[this.STATUS_VALID]         = 0;\r\n\r\n            for (var v in validators) {\r\n                if (validators[v].enabled === false) {\r\n                    continue;\r\n                }\r\n\r\n                numValidators++;\r\n                var result = $field.data('bv.result.' + v);\r\n                if (result) {\r\n                    counter[result]++;\r\n                }\r\n            }\r\n\r\n            if (counter[this.STATUS_VALID] === numValidators) {\r\n                // Remove from the list of invalid fields\r\n                this.$invalidFields = this.$invalidFields.not($field);\r\n\r\n                $field.trigger($.Event('success.field.bv'), data);\r\n            }\r\n            // If all validators are completed and there is at least one validator which doesn't pass\r\n            else if (counter[this.STATUS_NOT_VALIDATED] === 0 && counter[this.STATUS_VALIDATING] === 0 && counter[this.STATUS_INVALID] > 0) {\r\n                // Add to the list of invalid fields\r\n                this.$invalidFields = this.$invalidFields.add($field);\r\n\r\n                $field.trigger($.Event('error.field.bv'), data);\r\n            }\r\n        },\r\n\r\n        // ---\r\n        // Public methods\r\n        // ---\r\n\r\n        /**\r\n         * Retrieve the field elements by given name\r\n         *\r\n         * @param {String} field The field name\r\n         * @returns {null|jQuery[]}\r\n         */\r\n        getFieldElements: function(field) {\r\n            if (!this._cacheFields[field]) {\r\n                this._cacheFields[field] = (this.options.fields[field] && this.options.fields[field].selector)\r\n                                         ? $(this.options.fields[field].selector)\r\n                                         : this.$form.find('[name=\"' + field + '\"]');\r\n            }\r\n\r\n            return this._cacheFields[field];\r\n        },\r\n\r\n        /**\r\n         * Disable/enable submit buttons\r\n         *\r\n         * @param {Boolean} disabled Can be true or false\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        disableSubmitButtons: function(disabled) {\r\n            if (!disabled) {\r\n                this.$form.find(this.options.submitButtons).removeAttr('disabled');\r\n            } else if (this.options.live !== 'disabled') {\r\n                // Don't disable if the live validating mode is disabled\r\n                this.$form.find(this.options.submitButtons).attr('disabled', 'disabled');\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Validate the form\r\n         *\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        validate: function() {\r\n            if (!this.options.fields) {\r\n                return this;\r\n            }\r\n            this.disableSubmitButtons(true);\r\n\r\n            for (var field in this.options.fields) {\r\n                this.validateField(field);\r\n            }\r\n\r\n            this._submit();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Validate given field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        validateField: function(field) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (this.options.fields[field] && this.options.fields[field].enabled === false) {\r\n                return this;\r\n            }\r\n\r\n            var that       = this,\r\n                type       = fields.attr('type'),\r\n                total      = ('radio' === type || 'checkbox' === type) ? 1 : fields.length,\r\n                updateAll  = ('radio' === type || 'checkbox' === type),\r\n                validators = this.options.fields[field].validators,\r\n                validatorName,\r\n                validateResult;\r\n\r\n            for (var i = 0; i < total; i++) {\r\n                var $field = fields.eq(i);\r\n                if (this._isExcluded($field)) {\r\n                    continue;\r\n                }\r\n\r\n                for (validatorName in validators) {\r\n                    if ($field.data('bv.dfs.' + validatorName)) {\r\n                        $field.data('bv.dfs.' + validatorName).reject();\r\n                    }\r\n\r\n                    // Don't validate field if it is already done\r\n                    var result = $field.data('bv.result.' + validatorName);\r\n                    if (result === this.STATUS_VALID || result === this.STATUS_INVALID || validators[validatorName].enabled === false) {\r\n                        this._onFieldValidated($field, validatorName);\r\n                        continue;\r\n                    }\r\n\r\n                    $field.data('bv.result.' + validatorName, this.STATUS_VALIDATING);\r\n                    validateResult = $.fn.bootstrapValidator.validators[validatorName].validate(this, $field, validators[validatorName]);\r\n\r\n                    // validateResult can be a $.Deferred object ...\r\n                    if ('object' === typeof validateResult && validateResult.resolve) {\r\n                        this.updateStatus(updateAll ? field : $field, this.STATUS_VALIDATING, validatorName);\r\n                        $field.data('bv.dfs.' + validatorName, validateResult);\r\n\r\n                        validateResult.done(function($f, v, isValid, message) {\r\n                            // v is validator name\r\n                            $f.removeData('bv.dfs.' + v);\r\n                            if (message) {\r\n                                that.updateMessage($f, v, message);\r\n                            }\r\n\r\n                            that.updateStatus(updateAll ? $f.attr('data-bv-field') : $f, isValid ? that.STATUS_VALID : that.STATUS_INVALID, v);\r\n\r\n                            if (isValid && that._submitIfValid === true) {\r\n                                // If a remote validator returns true and the form is ready to submit, then do it\r\n                                that._submit();\r\n                            }\r\n                        });\r\n                    }\r\n                    // ... or object { valid: true/false, message: 'dynamic message' }\r\n                    else if ('object' === typeof validateResult && validateResult.valid !== undefined && validateResult.message !== undefined) {\r\n                        this.updateMessage(updateAll ? field : $field, validatorName, validateResult.message);\r\n                        this.updateStatus(updateAll ? field : $field, validateResult.valid ? this.STATUS_VALID : this.STATUS_INVALID, validatorName);\r\n                    }\r\n                    // ... or a boolean value\r\n                    else if ('boolean' === typeof validateResult) {\r\n                        this.updateStatus(updateAll ? field : $field, validateResult ? this.STATUS_VALID : this.STATUS_INVALID, validatorName);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update the error message\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @param {String} validator The validator name\r\n         * @param {String} message The message\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        updateMessage: function(field, validator, message) {\r\n            var $fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    $fields = field;\r\n                    field   = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    $fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            $fields.each(function() {\r\n                $(this).data('bv.messages').find('.help-block[data-bv-validator=\"' + validator + '\"][data-bv-for=\"' + field + '\"]').html(message);\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Update all validating results of field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @param {String} status The status. Can be 'NOT_VALIDATED', 'VALIDATING', 'INVALID' or 'VALID'\r\n         * @param {String} [validatorName] The validator name. If null, the method updates validity result for all validators\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        updateStatus: function(field, status, validatorName) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (status === this.STATUS_NOT_VALIDATED) {\r\n                // Reset the flag\r\n                this._submitIfValid = false;\r\n            }\r\n\r\n            var that  = this,\r\n                type  = fields.attr('type'),\r\n                group = this.options.fields[field].group || this.options.group,\r\n                total = ('radio' === type || 'checkbox' === type) ? 1 : fields.length;\r\n\r\n            for (var i = 0; i < total; i++) {\r\n                var $field       = fields.eq(i);\r\n                if (this._isExcluded($field)) {\r\n                    continue;\r\n                }\r\n\r\n                var $parent      = $field.parents(group),\r\n                    $message     = $field.data('bv.messages'),\r\n                    $allErrors   = $message.find('.help-block[data-bv-validator][data-bv-for=\"' + field + '\"]'),\r\n                    $errors      = validatorName ? $allErrors.filter('[data-bv-validator=\"' + validatorName + '\"]') : $allErrors,\r\n                    $icon        = $parent.find('.form-control-feedback[data-bv-icon-for=\"' + field + '\"]'),\r\n                    container    = this.options.fields[field].container || this.options.container,\r\n                    isValidField = null;\r\n\r\n                // Update status\r\n                if (validatorName) {\r\n                    $field.data('bv.result.' + validatorName, status);\r\n                } else {\r\n                    for (var v in this.options.fields[field].validators) {\r\n                        $field.data('bv.result.' + v, status);\r\n                    }\r\n                }\r\n\r\n                // Show/hide error elements and feedback icons\r\n                $errors.attr('data-bv-result', status);\r\n\r\n                // Determine the tab containing the element\r\n                var $tabPane = $field.parents('.tab-pane'),\r\n                    tabId, $tab;\r\n                if ($tabPane && (tabId = $tabPane.attr('id'))) {\r\n                    $tab = $('a[href=\"#' + tabId + '\"][data-toggle=\"tab\"]').parent();\r\n                }\r\n\r\n                switch (status) {\r\n                    case this.STATUS_VALIDATING:\r\n                        isValidField = null;\r\n                        this.disableSubmitButtons(true);\r\n                        $parent.removeClass('has-success').removeClass('has-error');\r\n                        if ($icon) {\r\n                            $icon.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).addClass(this.options.feedbackIcons.validating).show();\r\n                        }\r\n                        if ($tab) {\r\n                            $tab.removeClass('bv-tab-success').removeClass('bv-tab-error');\r\n                        }\r\n                        break;\r\n\r\n                    case this.STATUS_INVALID:\r\n                        isValidField = false;\r\n                        this.disableSubmitButtons(true);\r\n                        $parent.removeClass('has-success').addClass('has-error');\r\n                        if ($icon) {\r\n                            $icon.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.validating).addClass(this.options.feedbackIcons.invalid).show();\r\n                        }\r\n                        if ($tab) {\r\n                            $tab.removeClass('bv-tab-success').addClass('bv-tab-error');\r\n                        }\r\n                        break;\r\n\r\n                    case this.STATUS_VALID:\r\n                        // If the field is valid (passes all validators)\r\n                        isValidField = ($allErrors.filter('[data-bv-result=\"' + this.STATUS_NOT_VALIDATED +'\"]').length === 0)\r\n                                     ? ($allErrors.filter('[data-bv-result=\"' + this.STATUS_VALID +'\"]').length === $allErrors.length)  // All validators are completed\r\n                                     : null;                                                                                            // There are some validators that have not done\r\n                        if (isValidField !== null) {\r\n                            this.disableSubmitButtons(this.$submitButton ? !this.isValid() : !isValidField);\r\n                            if ($icon) {\r\n                                $icon\r\n                                    .removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).removeClass(this.options.feedbackIcons.valid)\r\n                                    .addClass(isValidField ? this.options.feedbackIcons.valid : this.options.feedbackIcons.invalid)\r\n                                    .show();\r\n                            }\r\n                        }\r\n\r\n                        $parent.removeClass('has-error has-success').addClass(this.isValidContainer($parent) ? 'has-success' : 'has-error');\r\n                        if ($tab) {\r\n                            $tab.removeClass('bv-tab-success').removeClass('bv-tab-error').addClass(this.isValidContainer($tabPane) ? 'bv-tab-success' : 'bv-tab-error');\r\n                        }\r\n                        break;\r\n\r\n                    case this.STATUS_NOT_VALIDATED:\r\n                    /* falls through */\r\n                    default:\r\n                        isValidField = null;\r\n                        this.disableSubmitButtons(false);\r\n                        $parent.removeClass('has-success').removeClass('has-error');\r\n                        if ($icon) {\r\n                            $icon.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).hide();\r\n                        }\r\n                        if ($tab) {\r\n                            $tab.removeClass('bv-tab-success').removeClass('bv-tab-error');\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                switch (true) {\r\n                    // Only show the first error message if it is placed inside a tooltip ...\r\n                    case ($icon && 'tooltip' === container):\r\n                        (isValidField === false)\r\n                                ? $icon.css('cursor', 'pointer').tooltip('destroy').tooltip({\r\n                                    html: true,\r\n                                    placement: 'top',\r\n                                    title: $allErrors.filter('[data-bv-result=\"' + that.STATUS_INVALID + '\"]').eq(0).html()\r\n                                })\r\n                                : $icon.css('cursor', '').tooltip('destroy');\r\n                        break;\r\n                    // ... or popover\r\n                    case ($icon && 'popover' === container):\r\n                        (isValidField === false)\r\n                                ? $icon.css('cursor', 'pointer').popover('destroy').popover({\r\n                                    content: $allErrors.filter('[data-bv-result=\"' + that.STATUS_INVALID + '\"]').eq(0).html(),\r\n                                    html: true,\r\n                                    placement: 'top',\r\n                                    trigger: 'hover click'\r\n                                })\r\n                                : $icon.css('cursor', '').popover('destroy');\r\n                        break;\r\n                    default:\r\n                        (status === this.STATUS_INVALID) ? $errors.show() : $errors.hide();\r\n                        break;\r\n                }\r\n\r\n                // Trigger an event\r\n                $field.trigger($.Event('status.field.bv'), {\r\n                    bv: this,\r\n                    field: field,\r\n                    element: $field,\r\n                    status: status\r\n                });\r\n                this._onFieldValidated($field, validatorName);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check the form validity\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isValid: function() {\r\n            for (var field in this.options.fields) {\r\n                if (!this.isValidField(field)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if the field is valid or not\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @returns {Boolean}\r\n         */\r\n        isValidField: function(field) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (fields.length === 0 || this.options.fields[field] === null || this.options.fields[field].enabled === false) {\r\n                return true;\r\n            }\r\n\r\n            var type  = fields.attr('type'),\r\n                total = ('radio' === type || 'checkbox' === type) ? 1 : fields.length,\r\n                $field, validatorName, status;\r\n            for (var i = 0; i < total; i++) {\r\n                $field = fields.eq(i);\r\n                if (this._isExcluded($field)) {\r\n                    continue;\r\n                }\r\n\r\n                for (validatorName in this.options.fields[field].validators) {\r\n                    if (this.options.fields[field].validators[validatorName].enabled === false) {\r\n                        continue;\r\n                    }\r\n\r\n                    status = $field.data('bv.result.' + validatorName);\r\n                    if (status !== this.STATUS_VALID) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if all fields inside a given container are valid.\r\n         * It's useful when working with a wizard-like such as tab, collapse\r\n         *\r\n         * @param {String|jQuery} container The container selector or element\r\n         * @returns {Boolean}\r\n         */\r\n        isValidContainer: function(container) {\r\n            var that       = this,\r\n                map        = {},\r\n                $container = ('string' === typeof container) ? $(container) : container;\r\n            if ($container.length === 0) {\r\n                return true;\r\n            }\r\n\r\n            $container.find('[data-bv-field]').each(function() {\r\n                var $field = $(this),\r\n                    field  = $field.attr('data-bv-field');\r\n                if (!that._isExcluded($field) && !map[field]) {\r\n                    map[field] = $field;\r\n                }\r\n            });\r\n\r\n            for (var field in map) {\r\n                var $f = map[field];\r\n                if ($f.data('bv.messages')\r\n                      .find('.help-block[data-bv-validator][data-bv-for=\"' + field + '\"]')\r\n                      .filter(function() {\r\n                          var v = $(this).attr('data-bv-validator'),\r\n                              f = $(this).attr('data-bv-for');\r\n                          return (that.options.fields[f].validators[v].enabled !== false\r\n                                && $f.data('bv.result.' + v) && $f.data('bv.result.' + v) !== that.STATUS_VALID);\r\n                      })\r\n                      .length !== 0)\r\n                {\r\n                    // The field is not valid\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Submit the form using default submission.\r\n         * It also does not perform any validations when submitting the form\r\n         */\r\n        defaultSubmit: function() {\r\n            if (this.$submitButton) {\r\n                // Create hidden input to send the submit buttons\r\n                $('<input/>')\r\n                    .attr('type', 'hidden')\r\n                    .attr('data-bv-submit-hidden', '')\r\n                    .attr('name', this.$submitButton.attr('name'))\r\n                    .val(this.$submitButton.val())\r\n                    .appendTo(this.$form);\r\n            }\r\n\r\n            // Submit form\r\n            this.$form.off('submit.bv').submit();\r\n        },\r\n\r\n        // ---\r\n        // Useful APIs which aren't used internally\r\n        // ---\r\n\r\n        /**\r\n         * Get the list of invalid fields\r\n         *\r\n         * @returns {jQuery[]}\r\n         */\r\n        getInvalidFields: function() {\r\n            return this.$invalidFields;\r\n        },\r\n\r\n        /**\r\n         * Returns the clicked submit button\r\n         *\r\n         * @returns {jQuery}\r\n         */\r\n        getSubmitButton: function() {\r\n            return this.$submitButton;\r\n        },\r\n\r\n        /**\r\n         * Get the error messages\r\n         *\r\n         * @param {String|jQuery} [field] The field name or field element\r\n         * If the field is not defined, the method returns all error messages of all fields\r\n         * @param {String} [validator] The name of validator\r\n         * If the validator is not defined, the method returns error messages of all validators\r\n         * @returns {String[]}\r\n         */\r\n        getMessages: function(field, validator) {\r\n            var that     = this,\r\n                messages = [],\r\n                $fields  = $([]);\r\n\r\n            switch (true) {\r\n                case (field && 'object' === typeof field):\r\n                    $fields = field;\r\n                    break;\r\n                case (field && 'string' === typeof field):\r\n                    var f = this.getFieldElements(field);\r\n                    if (f.length > 0) {\r\n                        var type = f.attr('type');\r\n                        $fields = ('radio' === type || 'checkbox' === type) ? f.eq(0) : f;\r\n                    }\r\n                    break;\r\n                default:\r\n                    $fields = this.$invalidFields;\r\n                    break;\r\n            }\r\n\r\n            var filter = validator ? '[data-bv-validator=\"' + validator + '\"]' : '';\r\n            $fields.each(function() {\r\n                messages = messages.concat(\r\n                    $(this)\r\n                        .data('bv.messages')\r\n                        .find('.help-block[data-bv-for=\"' + $(this).attr('data-bv-field') + '\"][data-bv-result=\"' + that.STATUS_INVALID + '\"]' + filter)\r\n                        .map(function() {\r\n                            var v = $(this).attr('data-bv-validator'),\r\n                                f = $(this).attr('data-bv-for');\r\n                            return (that.options.fields[f].validators[v].enabled === false) ? '' : $(this).html();\r\n                        })\r\n                        .get()\r\n                );\r\n            });\r\n\r\n            return messages;\r\n        },\r\n\r\n        /**\r\n         * Get the field options\r\n         *\r\n         * @param {String|jQuery} [field] The field name or field element. If it is not set, the method returns the form options\r\n         * @param {String} [validator] The name of validator. It null, the method returns form options\r\n         * @param {String} [option] The option name\r\n         * @return {String|Object}\r\n         */\r\n        getOptions: function(field, validator, option) {\r\n            if (!field) {\r\n                return this.options;\r\n            }\r\n            if ('object' === typeof field) {\r\n                field = field.attr('data-bv-field');\r\n            }\r\n            if (!this.options.fields[field]) {\r\n                return null;\r\n            }\r\n\r\n            var options = this.options.fields[field];\r\n            if (!validator) {\r\n                return options;\r\n            }\r\n            if (!options.validators || !options.validators[validator]) {\r\n                return null;\r\n            }\r\n\r\n            return option ? options.validators[validator][option] : options.validators[validator];\r\n        },\r\n\r\n        /**\r\n         * Update the option of a specific validator\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @param {String} validator The validator name\r\n         * @param {String} option The option name\r\n         * @param {String} value The value to set\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        updateOption: function(field, validator, option, value) {\r\n            if ('object' === typeof field) {\r\n                field = field.attr('data-bv-field');\r\n            }\r\n            if (this.options.fields[field] && this.options.fields[field].validators[validator]) {\r\n                this.options.fields[field].validators[validator][option] = value;\r\n                this.updateStatus(field, this.STATUS_NOT_VALIDATED, validator);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add a new field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @param {Object} [options] The validator rules\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        addField: function(field, options) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field') || field.attr('name');\r\n                    break;\r\n                case 'string':\r\n                    delete this._cacheFields[field];\r\n                    fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            fields.attr('data-bv-field', field);\r\n\r\n            var type  = fields.attr('type'),\r\n                total = ('radio' === type || 'checkbox' === type) ? 1 : fields.length;\r\n\r\n            for (var i = 0; i < total; i++) {\r\n                var $field = fields.eq(i);\r\n\r\n                // Try to parse the options from HTML attributes\r\n                var opts = this._parseOptions($field);\r\n                opts = (opts === null) ? options : $.extend(true, options, opts);\r\n\r\n                this.options.fields[field] = $.extend(true, this.options.fields[field], opts);\r\n\r\n                // Update the cache\r\n                this._cacheFields[field] = this._cacheFields[field] ? this._cacheFields[field].add($field) : $field;\r\n\r\n                // Init the element\r\n                this._initField(('checkbox' === type || 'radio' === type) ? field : $field);\r\n            }\r\n\r\n            this.disableSubmitButtons(false);\r\n            // Trigger an event\r\n            this.$form.trigger($.Event('added.field.bv'), {\r\n                field: field,\r\n                element: fields,\r\n                options: this.options.fields[field]\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Remove a given field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        removeField: function(field) {\r\n            var fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    fields = field;\r\n                    field  = field.attr('data-bv-field') || field.attr('name');\r\n                    fields.attr('data-bv-field', field);\r\n                    break;\r\n                case 'string':\r\n                    fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (fields.length === 0) {\r\n                return this;\r\n            }\r\n\r\n            var type  = fields.attr('type'),\r\n                total = ('radio' === type || 'checkbox' === type) ? 1 : fields.length;\r\n\r\n            for (var i = 0; i < total; i++) {\r\n                var $field = fields.eq(i);\r\n\r\n                // Remove from the list of invalid fields\r\n                this.$invalidFields = this.$invalidFields.not($field);\r\n\r\n                // Update the cache\r\n                this._cacheFields[field] = this._cacheFields[field].not($field);\r\n            }\r\n\r\n            if (!this._cacheFields[field] || this._cacheFields[field].length === 0) {\r\n                delete this.options.fields[field];\r\n            }\r\n            if ('checkbox' === type || 'radio' === type) {\r\n                this._initField(field);\r\n            }\r\n\r\n            this.disableSubmitButtons(false);\r\n            // Trigger an event\r\n            this.$form.trigger($.Event('removed.field.bv'), {\r\n                field: field,\r\n                element: fields\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Reset given field\r\n         *\r\n         * @param {String|jQuery} field The field name or field element\r\n         * @param {Boolean} [resetValue] If true, the method resets field value to empty or remove checked/selected attribute (for radio/checkbox)\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        resetField: function(field, resetValue) {\r\n            var $fields = $([]);\r\n            switch (typeof field) {\r\n                case 'object':\r\n                    $fields = field;\r\n                    field   = field.attr('data-bv-field');\r\n                    break;\r\n                case 'string':\r\n                    $fields = this.getFieldElements(field);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            var total = $fields.length;\r\n            if (this.options.fields[field]) {\r\n                for (var i = 0; i < total; i++) {\r\n                    for (var validator in this.options.fields[field].validators) {\r\n                        $fields.eq(i).removeData('bv.dfs.' + validator);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Mark field as not validated yet\r\n            this.updateStatus(field, this.STATUS_NOT_VALIDATED);\r\n\r\n            if (resetValue) {\r\n                var type = $fields.attr('type');\r\n                ('radio' === type || 'checkbox' === type) ? $fields.removeAttr('checked').removeAttr('selected') : $fields.val('');\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Reset the form\r\n         *\r\n         * @param {Boolean} [resetValue] If true, the method resets field value to empty or remove checked/selected attribute (for radio/checkbox)\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        resetForm: function(resetValue) {\r\n            for (var field in this.options.fields) {\r\n                this.resetField(field, resetValue);\r\n            }\r\n\r\n            this.$invalidFields = $([]);\r\n            this.$submitButton  = null;\r\n\r\n            // Enable submit buttons\r\n            this.disableSubmitButtons(false);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Revalidate given field\r\n         * It's used when you need to revalidate the field which its value is updated by other plugin\r\n         *\r\n         * @param {String|jQuery} field The field name of field element\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        revalidateField: function(field) {\r\n            this.updateStatus(field, this.STATUS_NOT_VALIDATED)\r\n                .validateField(field);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Enable/Disable all validators to given field\r\n         *\r\n         * @param {String} field The field name\r\n         * @param {Boolean} enabled Enable/Disable field validators\r\n         * @param {String} [validatorName] The validator name. If null, all validators will be enabled/disabled\r\n         * @returns {BootstrapValidator}\r\n         */\r\n        enableFieldValidators: function(field, enabled, validatorName) {\r\n            var validators = this.options.fields[field].validators;\r\n\r\n            // Enable/disable particular validator\r\n            if (validatorName\r\n                && validators\r\n                && validators[validatorName] && validators[validatorName].enabled !== enabled)\r\n            {\r\n                this.options.fields[field].validators[validatorName].enabled = enabled;\r\n                this.updateStatus(field, this.STATUS_NOT_VALIDATED, validatorName);\r\n            }\r\n            // Enable/disable all validators\r\n            else if (!validatorName && this.options.fields[field].enabled !== enabled) {\r\n                this.options.fields[field].enabled = enabled;\r\n                for (var v in validators) {\r\n                    this.enableFieldValidators(field, enabled, v);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Some validators have option which its value is dynamic.\r\n         * For example, the zipCode validator has the country option which might be changed dynamically by a select element.\r\n         *\r\n         * @param {jQuery|String} field The field name or element\r\n         * @param {String|Function} option The option which can be determined by:\r\n         * - a string\r\n         * - name of field which defines the value\r\n         * - name of function which returns the value\r\n         * - a function returns the value\r\n         *\r\n         * The callback function has the format of\r\n         *      callback: function(value, validator, $field) {\r\n         *          // value is the value of field\r\n         *          // validator is the BootstrapValidator instance\r\n         *          // $field is the field element\r\n         *      }\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getDynamicOption: function(field, option) {\r\n            var $field = ('string' === typeof field) ? this.getFieldElements(field) : field,\r\n                value  = $field.val();\r\n\r\n            // Option can be determined by\r\n            // ... a function\r\n            if ('function' === typeof option) {\r\n                return $.fn.bootstrapValidator.helpers.call(option, [value, this, $field]);\r\n            }\r\n            // ... value of other field\r\n            else if ('string' === typeof option) {\r\n                var $f = this.getFieldElements(option);\r\n                if ($f.length) {\r\n                    return $f.val();\r\n                }\r\n                // ... return value of callback\r\n                else {\r\n                    return $.fn.bootstrapValidator.helpers.call(option, [value, this, $field]);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Destroy the plugin\r\n         * It will remove all error messages, feedback icons and turn off the events\r\n         */\r\n        destroy: function() {\r\n            var field, fields, $field, validator, $icon, container, group;\r\n            for (field in this.options.fields) {\r\n                fields    = this.getFieldElements(field);\r\n                container = this.options.fields[field].container || this.options.container,\r\n                group     = this.options.fields[field].group || this.options.group;\r\n                for (var i = 0; i < fields.length; i++) {\r\n                    $field = fields.eq(i);\r\n                    $field\r\n                        // Remove all error messages\r\n                        .data('bv.messages')\r\n                            .find('.help-block[data-bv-validator][data-bv-for=\"' + field + '\"]').remove().end()\r\n                            .end()\r\n                        .removeData('bv.messages')\r\n                        // Remove feedback classes\r\n                        .parents(group)\r\n                            .removeClass('has-feedback has-error has-success')\r\n                            .end()\r\n                        // Turn off events\r\n                        .off('.bv')\r\n                        .removeAttr('data-bv-field');\r\n\r\n                    // Remove feedback icons, tooltip/popover container\r\n                    $icon = $field.parents(group).find('i[data-bv-icon-for=\"' + field + '\"]');\r\n                    if ($icon) {\r\n                        switch (container) {\r\n                            case 'tooltip':\r\n                                $icon.tooltip('destroy').remove();\r\n                                break;\r\n                            case 'popover':\r\n                                $icon.popover('destroy').remove();\r\n                                break;\r\n                            default:\r\n                                $icon.remove();\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    for (validator in this.options.fields[field].validators) {\r\n                        if ($field.data('bv.dfs.' + validator)) {\r\n                            $field.data('bv.dfs.' + validator).reject();\r\n                        }\r\n                        $field.removeData('bv.result.' + validator).removeData('bv.dfs.' + validator);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Enable submit buttons\r\n            this.disableSubmitButtons(false);\r\n\r\n            this.$form\r\n                .removeClass(this.options.elementClass)\r\n                .off('.bv')\r\n                .removeData('bootstrapValidator')\r\n                // Remove generated hidden elements\r\n                .find('[data-bv-submit-hidden]').remove();\r\n        }\r\n    };\r\n\r\n    // Plugin definition\r\n    $.fn.bootstrapValidator = function(option) {\r\n        var params = arguments;\r\n        return this.each(function() {\r\n            var $this   = $(this),\r\n                data    = $this.data('bootstrapValidator'),\r\n                options = 'object' === typeof option && option;\r\n            if (!data) {\r\n                data = new BootstrapValidator(this, options);\r\n                $this.data('bootstrapValidator', data);\r\n            }\r\n\r\n            // Allow to call plugin method\r\n            if ('string' === typeof option) {\r\n                data[option].apply(data, Array.prototype.slice.call(params, 1));\r\n            }\r\n        });\r\n    };\r\n\r\n    // The default options\r\n    $.fn.bootstrapValidator.DEFAULT_OPTIONS = {\r\n        // The form CSS class\r\n        elementClass: 'bv-form',\r\n\r\n        // Default invalid message\r\n        message: 'This value is not valid',\r\n\r\n        // The CSS selector for indicating the element consists the field\r\n        // By default, each field is placed inside the <div class=\"form-group\"></div>\r\n        // You should adjust this option if your form group consists of many fields which not all of them need to be validated\r\n        group: '.form-group',\r\n\r\n        //The error messages container. It can be:\r\n        // - 'tooltip' if you want to use Bootstrap tooltip to show error messages\r\n        // - 'popover' if you want to use Bootstrap popover to show error messages\r\n        // - a CSS selector indicating the container\r\n        // In the first two cases, since the tooltip/popover should be small enough, the plugin only shows only one error message\r\n        // You also can define the message container for particular field\r\n        container: null,\r\n\r\n        // The field will not be live validated if its length is less than this number of characters\r\n        threshold: null,\r\n\r\n        // Indicate fields which won't be validated\r\n        // By default, the plugin will not validate the following kind of fields:\r\n        // - disabled\r\n        // - hidden\r\n        // - invisible\r\n        //\r\n        // The setting consists of jQuery filters. Accept 3 formats:\r\n        // - A string. Use a comma to separate filter\r\n        // - An array. Each element is a filter\r\n        // - An array. Each element can be a callback function\r\n        //      function($field, validator) {\r\n        //          $field is jQuery object representing the field element\r\n        //          validator is the BootstrapValidator instance\r\n        //          return true or false;\r\n        //      }\r\n        //\r\n        // The 3 following settings are equivalent:\r\n        //\r\n        // 1) ':disabled, :hidden, :not(:visible)'\r\n        // 2) [':disabled', ':hidden', ':not(:visible)']\r\n        // 3) [':disabled', ':hidden', function($field) {\r\n        //        return !$field.is(':visible');\r\n        //    }]\r\n        excluded: [':disabled', ':hidden', ':not(:visible)'],\r\n\r\n        // Shows ok/error/loading icons based on the field validity.\r\n        // This feature requires Bootstrap v3.1.0 or later (http://getbootstrap.com/css/#forms-control-validation).\r\n        // Since Bootstrap doesn't provide any methods to know its version, this option cannot be on/off automatically.\r\n        // In other word, to use this feature you have to upgrade your Bootstrap to v3.1.0 or later.\r\n        //\r\n        // Examples:\r\n        // - Use Glyphicons icons:\r\n        //  feedbackIcons: {\r\n        //      valid: 'glyphicon glyphicon-ok',\r\n        //      invalid: 'glyphicon glyphicon-remove',\r\n        //      validating: 'glyphicon glyphicon-refresh'\r\n        //  }\r\n        // - Use FontAwesome icons:\r\n        //  feedbackIcons: {\r\n        //      valid: 'fa fa-check',\r\n        //      invalid: 'fa fa-times',\r\n        //      validating: 'fa fa-refresh'\r\n        //  }\r\n        feedbackIcons: {\r\n            valid:      null,\r\n            invalid:    null,\r\n            validating: null\r\n        },\r\n\r\n        // The submit buttons selector\r\n        // These buttons will be disabled to prevent the valid form from multiple submissions\r\n        submitButtons: '[type=\"submit\"]',\r\n\r\n        // Live validating option\r\n        // Can be one of 3 values:\r\n        // - enabled: The plugin validates fields as soon as they are changed\r\n        // - disabled: Disable the live validating. The error messages are only shown after the form is submitted\r\n        // - submitted: The live validating is enabled after the form is submitted\r\n        live: 'enabled',\r\n\r\n        // Map the field name with validator rules\r\n        fields: null\r\n    };\r\n\r\n    // Available validators\r\n    $.fn.bootstrapValidator.validators  = {};\r\n\r\n    // i18n\r\n    $.fn.bootstrapValidator.i18n        = {};\r\n\r\n    $.fn.bootstrapValidator.Constructor = BootstrapValidator;\r\n\r\n    // Helper methods, which can be used in validator class\r\n    $.fn.bootstrapValidator.helpers = {\r\n        /**\r\n         * Execute a callback function\r\n         *\r\n         * @param {String|Function} functionName Can be\r\n         * - name of global function\r\n         * - name of namespace function (such as A.B.C)\r\n         * - a function\r\n         * @param {Array} args The callback arguments\r\n         */\r\n        call: function(functionName, args) {\r\n            if ('function' === typeof functionName) {\r\n                return functionName.apply(this, args);\r\n            } else if ('string' === typeof functionName) {\r\n                if ('()' === functionName.substring(functionName.length - 2)) {\r\n                    functionName = functionName.substring(0, functionName.length - 2);\r\n                }\r\n                var ns      = functionName.split('.'),\r\n                    func    = ns.pop(),\r\n                    context = window;\r\n                for (var i = 0; i < ns.length; i++) {\r\n                    context = context[ns[i]];\r\n                }\r\n                return context[func].apply(this, args);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Format a string\r\n         * It's used to format the error message\r\n         * format('The field must between %s and %s', [10, 20]) = 'The field must between 10 and 20'\r\n         *\r\n         * @param {String} message\r\n         * @param {Array} parameters\r\n         * @returns {String}\r\n         */\r\n        format: function(message, parameters) {\r\n            if (!$.isArray(parameters)) {\r\n                parameters = [parameters];\r\n            }\r\n\r\n            for (var i in parameters) {\r\n                message = message.replace('%s', parameters[i]);\r\n            }\r\n\r\n            return message;\r\n        },\r\n\r\n        /**\r\n         * Validate a date\r\n         *\r\n         * @param {Number} year The full year in 4 digits\r\n         * @param {Number} month The month number\r\n         * @param {Number} day The day number\r\n         * @param {Boolean} [notInFuture] If true, the date must not be in the future\r\n         * @returns {Boolean}\r\n         */\r\n        date: function(year, month, day, notInFuture) {\r\n            if (isNaN(year) || isNaN(month) || isNaN(day)) {\r\n                return false;\r\n            }\r\n\r\n            day   = parseInt(day, 10);\r\n            month = parseInt(month, 10);\r\n            year  = parseInt(year, 10);\r\n\r\n            if (year < 1000 || year > 9999 || month <= 0 || month > 12) {\r\n                return false;\r\n            }\r\n            var numDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n            // Update the number of days in Feb of leap year\r\n            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n                numDays[1] = 29;\r\n            }\r\n\r\n            // Check the day\r\n            if (day <= 0 || day > numDays[month - 1]) {\r\n                return false;\r\n            }\r\n\r\n            if (notInFuture === true) {\r\n                var currentDate  = new Date(),\r\n                    currentYear  = currentDate.getFullYear(),\r\n                    currentMonth = currentDate.getMonth(),\r\n                    currentDay   = currentDate.getDate();\r\n                return (year < currentYear\r\n                        || (year === currentYear && month - 1 < currentMonth)\r\n                        || (year === currentYear && month - 1 === currentMonth && day < currentDay));\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Implement Luhn validation algorithm\r\n         * Credit to https://gist.github.com/ShirtlessKirk/2134376\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Luhn\r\n         * @param {String} value\r\n         * @returns {Boolean}\r\n         */\r\n        luhn: function(value) {\r\n            var length  = value.length,\r\n                mul     = 0,\r\n                prodArr = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]],\r\n                sum     = 0;\r\n\r\n            while (length--) {\r\n                sum += prodArr[mul][parseInt(value.charAt(length), 10)];\r\n                mul ^= 1;\r\n            }\r\n\r\n            return (sum % 10 === 0 && sum > 0);\r\n        },\r\n\r\n        /**\r\n         * Implement modulus 11, 10 (ISO 7064) algorithm\r\n         *\r\n         * @param {String} value\r\n         * @returns {Boolean}\r\n         */\r\n        mod11And10: function(value) {\r\n            var check  = 5,\r\n                length = value.length;\r\n            for (var i = 0; i < length; i++) {\r\n                check = (((check || 10) * 2) % 11 + parseInt(value.charAt(i), 10)) % 10;\r\n            }\r\n            return (check === 1);\r\n        },\r\n\r\n        /**\r\n         * Implements Mod 37, 36 (ISO 7064) algorithm\r\n         * Usages:\r\n         * mod37And36('A12425GABC1234002M')\r\n         * mod37And36('002006673085', '0123456789')\r\n         *\r\n         * @param {String} value\r\n         * @param {String} [alphabet]\r\n         * @returns {Boolean}\r\n         */\r\n        mod37And36: function(value, alphabet) {\r\n            alphabet = alphabet || '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n            var modulus = alphabet.length,\r\n                length  = value.length,\r\n                check   = Math.floor(modulus / 2);\r\n            for (var i = 0; i < length; i++) {\r\n                check = (((check || modulus) * 2) % (modulus + 1) + alphabet.indexOf(value.charAt(i))) % modulus;\r\n            }\r\n            return (check === 1);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.base64 = $.extend($.fn.bootstrapValidator.i18n.base64 || {}, {\r\n        'default': 'Please enter a valid base 64 encoded'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.base64 = {\r\n        /**\r\n         * Return true if the input value is a base 64 encoded string.\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.between = $.extend($.fn.bootstrapValidator.i18n.between || {}, {\r\n        'default': 'Please enter a value between %s and %s',\r\n        notInclusive: 'Please enter a value between %s and %s strictly'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.between = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            min: 'min',\r\n            max: 'max',\r\n            inclusive: 'inclusive'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            if ('range' === $field.attr('type')) {\r\n                return {\r\n                    min: $field.attr('min'),\r\n                    max: $field.attr('max')\r\n                };\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is between (strictly or not) two given numbers\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - min\r\n         * - max\r\n         *\r\n         * The min, max keys define the number which the field value compares to. min, max can be\r\n         *      - A number\r\n         *      - Name of field which its value defines the number\r\n         *      - Name of callback function that returns the number\r\n         *      - A callback function that returns the number\r\n         *\r\n         * - inclusive [optional]: Can be true or false. Default is true\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var min = $.isNumeric(options.min) ? options.min : validator.getDynamicOption($field, options.min),\r\n                max = $.isNumeric(options.max) ? options.max : validator.getDynamicOption($field, options.max);\r\n\r\n            value = parseFloat(value);\r\n\t\t\treturn (options.inclusive === true || options.inclusive === undefined)\r\n                    ? {\r\n                        valid: value >= min && value <= max,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.between['default'], [min, max])\r\n                    }\r\n                    : {\r\n                        valid: value > min  && value <  max,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.between.notInclusive, [min, max])\r\n                    };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.callback = $.extend($.fn.bootstrapValidator.i18n.callback || {}, {\r\n        'default': 'Please enter a valid value'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.callback = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            callback: 'callback'\r\n        },\r\n\r\n        /**\r\n         * Return result from the callback method\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - callback: The callback method that passes 2 parameters:\r\n         *      callback: function(fieldValue, validator, $field) {\r\n         *          // fieldValue is the value of field\r\n         *          // validator is instance of BootstrapValidator\r\n         *          // $field is the field element\r\n         *      }\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Deferred}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n\r\n            if (options.callback) {\r\n                var dfd      = new $.Deferred(),\r\n                    response = $.fn.bootstrapValidator.helpers.call(options.callback, [value, validator, $field]);\r\n                dfd.resolve($field, 'callback', 'boolean' === typeof response ? response : response.valid, 'object' === typeof response && response.message ? response.message : null);\r\n                return dfd;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.choice = $.extend($.fn.bootstrapValidator.i18n.choice || {}, {\r\n        'default': 'Please enter a valid value',\r\n        less: 'Please choose %s options at minimum',\r\n        more: 'Please choose %s options at maximum',\r\n        between: 'Please choose %s - %s options'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.choice = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            min: 'min',\r\n            max: 'max'\r\n        },\r\n\r\n        /**\r\n         * Check if the number of checked boxes are less or more than a given number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consists of following keys:\r\n         * - min\r\n         * - max\r\n         *\r\n         * At least one of two keys is required\r\n         * The min, max keys define the number which the field value compares to. min, max can be\r\n         *      - A number\r\n         *      - Name of field which its value defines the number\r\n         *      - Name of callback function that returns the number\r\n         *      - A callback function that returns the number\r\n         *\r\n         * - message: The invalid message\r\n         * @returns {Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var numChoices = $field.is('select')\r\n                            ? validator.getFieldElements($field.attr('data-bv-field')).find('option').filter(':selected').length\r\n                            : validator.getFieldElements($field.attr('data-bv-field')).filter(':checked').length,\r\n                min        = options.min ? ($.isNumeric(options.min) ? options.min : validator.getDynamicOption($field, options.min)) : null,\r\n                max        = options.max ? ($.isNumeric(options.max) ? options.max : validator.getDynamicOption($field, options.max)) : null,\r\n                isValid    = true,\r\n                message    = options.message || $.fn.bootstrapValidator.i18n.choice['default'];\r\n\r\n            if ((min && numChoices < parseInt(min, 10)) || (max && numChoices > parseInt(max, 10))) {\r\n                isValid = false;\r\n            }\r\n\r\n            switch (true) {\r\n                case (!!min && !!max):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.choice.between, [parseInt(min, 10), parseInt(max, 10)]);\r\n                    break;\r\n\r\n                case (!!min):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.choice.less, parseInt(min, 10));\r\n                    break;\r\n\r\n                case (!!max):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.choice.more, parseInt(max, 10));\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            return { valid: isValid, message: message };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.creditCard = $.extend($.fn.bootstrapValidator.i18n.creditCard || {}, {\r\n        'default': 'Please enter a valid credit card number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.creditCard = {\r\n        /**\r\n         * Return true if the input value is valid credit card number\r\n         * Based on https://gist.github.com/DiegoSalazar/4075533\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} [options] Can consist of the following key:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Accept only digits, dashes or spaces\r\n            if (/[^0-9-\\s]+/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\D/g, '');\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.luhn(value)) {\r\n                return false;\r\n            }\r\n\r\n            // Validate the card number based on prefix (IIN ranges) and length\r\n            var cards = {\r\n                AMERICAN_EXPRESS: {\r\n                    length: [15],\r\n                    prefix: ['34', '37']\r\n                },\r\n                DINERS_CLUB: {\r\n                    length: [14],\r\n                    prefix: ['300', '301', '302', '303', '304', '305', '36']\r\n                },\r\n                DINERS_CLUB_US: {\r\n                    length: [16],\r\n                    prefix: ['54', '55']\r\n                },\r\n                DISCOVER: {\r\n                    length: [16],\r\n                    prefix: ['6011', '622126', '622127', '622128', '622129', '62213',\r\n                             '62214', '62215', '62216', '62217', '62218', '62219',\r\n                             '6222', '6223', '6224', '6225', '6226', '6227', '6228',\r\n                             '62290', '62291', '622920', '622921', '622922', '622923',\r\n                             '622924', '622925', '644', '645', '646', '647', '648',\r\n                             '649', '65']\r\n                },\r\n                JCB: {\r\n                    length: [16],\r\n                    prefix: ['3528', '3529', '353', '354', '355', '356', '357', '358']\r\n                },\r\n                LASER: {\r\n                    length: [16, 17, 18, 19],\r\n                    prefix: ['6304', '6706', '6771', '6709']\r\n                },\r\n                MAESTRO: {\r\n                    length: [12, 13, 14, 15, 16, 17, 18, 19],\r\n                    prefix: ['5018', '5020', '5038', '6304', '6759', '6761', '6762', '6763', '6764', '6765', '6766']\r\n                },\r\n                MASTERCARD: {\r\n                    length: [16],\r\n                    prefix: ['51', '52', '53', '54', '55']\r\n                },\r\n                SOLO: {\r\n                    length: [16, 18, 19],\r\n                    prefix: ['6334', '6767']\r\n                },\r\n                UNIONPAY: {\r\n                    length: [16, 17, 18, 19],\r\n                    prefix: ['622126', '622127', '622128', '622129', '62213', '62214',\r\n                             '62215', '62216', '62217', '62218', '62219', '6222', '6223',\r\n                             '6224', '6225', '6226', '6227', '6228', '62290', '62291',\r\n                             '622920', '622921', '622922', '622923', '622924', '622925']\r\n                },\r\n                VISA: {\r\n                    length: [16],\r\n                    prefix: ['4']\r\n                }\r\n            };\r\n\r\n            var type, i;\r\n            for (type in cards) {\r\n                for (i in cards[type].prefix) {\r\n                    if (value.substr(0, cards[type].prefix[i].length) === cards[type].prefix[i]     // Check the prefix\r\n                        && $.inArray(value.length, cards[type].length) !== -1)                      // and length\r\n                    {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.cusip = $.extend($.fn.bootstrapValidator.i18n.cusip || {}, {\r\n        'default': 'Please enter a valid CUSIP number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.cusip = {\r\n        /**\r\n         * Validate a CUSIP\r\n         * Examples:\r\n         * - Valid: 037833100, 931142103, 14149YAR8, 126650BG6\r\n         * - Invalid: 31430F200, 022615AC2\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/CUSIP\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} [options] Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            value = value.toUpperCase();\r\n            if (!/^[0-9A-Z]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var converted = $.map(value.split(''), function(item) {\r\n                                var code = item.charCodeAt(0);\r\n                                return (code >= 'A'.charCodeAt(0) && code <= 'Z'.charCodeAt(0))\r\n                                            // Replace A, B, C, ..., Z with 10, 11, ..., 35\r\n                                            ? (code - 'A'.charCodeAt(0) + 10)\r\n                                            : item;\r\n                            }),\r\n                length    = converted.length,\r\n                sum       = 0;\r\n            for (var i = 0; i < length - 1; i++) {\r\n                var num = parseInt(converted[i], 10);\r\n                if (i % 2 !== 0) {\r\n                    num *= 2;\r\n                }\r\n                if (num > 9) {\r\n                    num -= 9;\r\n                }\r\n                sum += num;\r\n            }\r\n\r\n            sum = (10 - (sum % 10)) % 10;\r\n            return sum === converted[length - 1];\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.cvv = $.extend($.fn.bootstrapValidator.i18n.cvv || {}, {\r\n        'default': 'Please enter a valid CVV number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.cvv = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            ccfield: 'creditCardField'\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is a valid CVV number.\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - creditCardField: The credit card number field. It can be null\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            if (!/^[0-9]{3,4}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            if (!options.creditCardField) {\r\n                return true;\r\n            }\r\n\r\n            // Get the credit card number\r\n            var creditCard = validator.getFieldElements(options.creditCardField).val();\r\n            if (creditCard === '') {\r\n                return true;\r\n            }\r\n            \r\n            creditCard = creditCard.replace(/\\D/g, '');\r\n\r\n            // Supported credit card types\r\n            var cards = {\r\n                AMERICAN_EXPRESS: {\r\n                    length: [15],\r\n                    prefix: ['34', '37']\r\n                },\r\n                DINERS_CLUB: {\r\n                    length: [14],\r\n                    prefix: ['300', '301', '302', '303', '304', '305', '36']\r\n                },\r\n                DINERS_CLUB_US: {\r\n                    length: [16],\r\n                    prefix: ['54', '55']\r\n                },\r\n                DISCOVER: {\r\n                    length: [16],\r\n                    prefix: ['6011', '622126', '622127', '622128', '622129', '62213',\r\n                             '62214', '62215', '62216', '62217', '62218', '62219',\r\n                             '6222', '6223', '6224', '6225', '6226', '6227', '6228',\r\n                             '62290', '62291', '622920', '622921', '622922', '622923',\r\n                             '622924', '622925', '644', '645', '646', '647', '648',\r\n                             '649', '65']\r\n                },\r\n                JCB: {\r\n                    length: [16],\r\n                    prefix: ['3528', '3529', '353', '354', '355', '356', '357', '358']\r\n                },\r\n                LASER: {\r\n                    length: [16, 17, 18, 19],\r\n                    prefix: ['6304', '6706', '6771', '6709']\r\n                },\r\n                MAESTRO: {\r\n                    length: [12, 13, 14, 15, 16, 17, 18, 19],\r\n                    prefix: ['5018', '5020', '5038', '6304', '6759', '6761', '6762', '6763', '6764', '6765', '6766']\r\n                },\r\n                MASTERCARD: {\r\n                    length: [16],\r\n                    prefix: ['51', '52', '53', '54', '55']\r\n                },\r\n                SOLO: {\r\n                    length: [16, 18, 19],\r\n                    prefix: ['6334', '6767']\r\n                },\r\n                UNIONPAY: {\r\n                    length: [16, 17, 18, 19],\r\n                    prefix: ['622126', '622127', '622128', '622129', '62213', '62214',\r\n                             '62215', '62216', '62217', '62218', '62219', '6222', '6223',\r\n                             '6224', '6225', '6226', '6227', '6228', '62290', '62291',\r\n                             '622920', '622921', '622922', '622923', '622924', '622925']\r\n                },\r\n                VISA: {\r\n                    length: [16],\r\n                    prefix: ['4']\r\n                }\r\n            };\r\n            var type, i, creditCardType = null;\r\n            for (type in cards) {\r\n                for (i in cards[type].prefix) {\r\n                    if (creditCard.substr(0, cards[type].prefix[i].length) === cards[type].prefix[i]    // Check the prefix\r\n                        && $.inArray(creditCard.length, cards[type].length) !== -1)                     // and length\r\n                    {\r\n                        creditCardType = type;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return (creditCardType === null)\r\n                        ? false\r\n                        : (('AMERICAN_EXPRESS' === creditCardType) ? (value.length === 4) : (value.length === 3));\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.date = $.extend($.fn.bootstrapValidator.i18n.date || {}, {\r\n        'default': 'Please enter a valid date'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.date = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            format: 'format',\r\n            separator: 'separator'\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is valid date\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * - separator: Use to separate the date, month, and year.\r\n         * By default, it is /\r\n         * - format: The date format. Default is MM/DD/YYYY\r\n         * The format can be:\r\n         *\r\n         * i) date: Consist of DD, MM, YYYY parts which are separated by the separator option\r\n         * ii) date and time:\r\n         * The time can consist of h, m, s parts which are separated by :\r\n         * ii) date, time and A (indicating AM or PM)\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            options.format = options.format || 'MM/DD/YYYY';\r\n\r\n            var formats    = options.format.split(' '),\r\n                dateFormat = formats[0],\r\n                timeFormat = (formats.length > 1) ? formats[1] : null,\r\n                amOrPm     = (formats.length > 2) ? formats[2] : null,\r\n                sections   = value.split(' '),\r\n                date       = sections[0],\r\n                time       = (sections.length > 1) ? sections[1] : null;\r\n\r\n            if (formats.length !== sections.length) {\r\n                return false;\r\n            }\r\n\r\n            // Determine the separator\r\n            var separator = options.separator;\r\n            if (!separator) {\r\n                separator = (date.indexOf('/') !== -1) ? '/' : ((date.indexOf('-') !== -1) ? '-' : null);\r\n            }\r\n            if (separator === null || date.indexOf(separator) === -1) {\r\n                return false;\r\n            }\r\n\r\n            // Determine the date\r\n            date       = date.split(separator);\r\n            dateFormat = dateFormat.split(separator);\r\n            if (date.length !== dateFormat.length) {\r\n                return false;\r\n            }\r\n\r\n            var year  = date[$.inArray('YYYY', dateFormat)],\r\n                month = date[$.inArray('MM', dateFormat)],\r\n                day   = date[$.inArray('DD', dateFormat)];\r\n\r\n            if (!year || !month || !day) {\r\n                return false;\r\n            }\r\n\r\n            // Determine the time\r\n            var minutes = null, hours = null, seconds = null;\r\n            if (timeFormat) {\r\n                timeFormat = timeFormat.split(':');\r\n                time       = time.split(':');\r\n\r\n                if (timeFormat.length !== time.length) {\r\n                    return false;\r\n                }\r\n\r\n                hours   = time.length > 0 ? time[0] : null;\r\n                minutes = time.length > 1 ? time[1] : null;\r\n                seconds = time.length > 2 ? time[2] : null;\r\n\r\n                // Validate seconds\r\n                if (seconds) {\r\n                    seconds = parseInt(seconds, 10);\r\n                    if (isNaN(seconds) || seconds < 0 || seconds > 60) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                // Validate hours\r\n                if (hours) {\r\n                    hours = parseInt(hours, 10);\r\n                    if (isNaN(hours) || hours < 0 || hours >= 24 || (amOrPm && hours > 12)) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                // Validate minutes\r\n                if (minutes) {\r\n                    minutes = parseInt(minutes, 10);\r\n                    if (isNaN(minutes) || minutes < 0 || minutes > 59) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Validate day, month, and year\r\n            return $.fn.bootstrapValidator.helpers.date(year, month, day);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.different = $.extend($.fn.bootstrapValidator.i18n.different || {}, {\r\n        'default': 'Please enter a different value'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.different = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            field: 'field'\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is different with given field's value\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consists of the following key:\r\n         * - field: The name of field that will be used to compare with current one\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var compareWith = validator.getFieldElements(options.field);\r\n            if (compareWith === null) {\r\n                return true;\r\n            }\r\n\r\n            if (value !== compareWith.val()) {\r\n                validator.updateStatus(options.field, validator.STATUS_VALID, 'different');\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.digits = $.extend($.fn.bootstrapValidator.i18n.digits || {}, {\r\n        'default': 'Please enter only digits'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.digits = {\r\n        /**\r\n         * Return true if the input value contains digits only\r\n         *\r\n         * @param {BootstrapValidator} validator Validate plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} [options]\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return /^\\d+$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.ean = $.extend($.fn.bootstrapValidator.i18n.ean || {}, {\r\n        'default': 'Please enter a valid EAN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.ean = {\r\n        /**\r\n         * Validate EAN (International Article Number)\r\n         * Examples:\r\n         * - Valid: 73513537, 9780471117094, 4006381333931\r\n         * - Invalid: 73513536\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/European_Article_Number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            if (!/^(\\d{8}|\\d{12}|\\d{13})$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var length = value.length,\r\n                sum    = 0,\r\n                weight = (length === 8) ? [3, 1] : [1, 3];\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i % 2];\r\n            }\r\n            sum = (10 - sum % 10) % 10;\r\n            return (sum + '' === value.charAt(length - 1));\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.emailAddress = $.extend($.fn.bootstrapValidator.i18n.emailAddress || {}, {\r\n        'default': 'Please enter a valid email address'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.emailAddress = {\r\n        enableByHtml5: function($field) {\r\n            return ('email' === $field.attr('type'));\r\n        },\r\n\r\n        /**\r\n         * Return true if and only if the input value is a valid email address\r\n         *\r\n         * @param {BootstrapValidator} validator Validate plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} [options]\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Email address regular expression\r\n            // http://stackoverflow.com/questions/46155/validate-email-address-in-javascript\r\n            var emailRegExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n            return emailRegExp.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.file = $.extend($.fn.bootstrapValidator.i18n.file || {}, {\r\n        'default': 'Please choose a valid file'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.file = {\r\n        html5Attributes: {\r\n            extension: 'extension',\r\n            maxsize: 'maxSize',\r\n            message: 'message',\r\n            type: 'type'\r\n        },\r\n\r\n        /**\r\n         * Validate upload file. Use HTML 5 API if the browser supports\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - extension: The allowed extensions, separated by a comma\r\n         * - maxSize: The maximum size in bytes\r\n         * - message: The invalid message\r\n         * - type: The allowed MIME type, separated by a comma\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var ext,\r\n                extensions = options.extension ? options.extension.toLowerCase().split(',') : null,\r\n                types      = options.type      ? options.type.toLowerCase().split(',')      : null,\r\n                html5      = (window.File && window.FileList && window.FileReader);\r\n\r\n            if (html5) {\r\n                // Get FileList instance\r\n                var files = $field.get(0).files,\r\n                    total = files.length;\r\n                for (var i = 0; i < total; i++) {\r\n                    // Check file size\r\n                    if (options.maxSize && files[i].size > parseInt(options.maxSize, 10)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Check file extension\r\n                    ext = files[i].name.substr(files[i].name.lastIndexOf('.') + 1);\r\n                    if (extensions && $.inArray(ext.toLowerCase(), extensions) === -1) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Check file type\r\n                    if (types && $.inArray(files[i].type.toLowerCase(), types) === -1) {\r\n                        return false;\r\n                    }\r\n                }\r\n            } else {\r\n                // Check file extension\r\n                ext = value.substr(value.lastIndexOf('.') + 1);\r\n                if (extensions && $.inArray(ext.toLowerCase(), extensions) === -1) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.greaterThan = $.extend($.fn.bootstrapValidator.i18n.greaterThan || {}, {\r\n        'default': 'Please enter a value greater than or equal to %s',\r\n        notInclusive: 'Please enter a value greater than %s'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.greaterThan = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            value: 'value',\r\n            inclusive: 'inclusive'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            var min = $field.attr('min');\r\n            if (min) {\r\n                return {\r\n                    value: min\r\n                };\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is greater than or equals to given number\r\n         *\r\n         * @param {BootstrapValidator} validator Validate plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - value: Define the number to compare with. It can be\r\n         *      - A number\r\n         *      - Name of field which its value defines the number\r\n         *      - Name of callback function that returns the number\r\n         *      - A callback function that returns the number\r\n         *\r\n         * - inclusive [optional]: Can be true or false. Default is true\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var compareTo = $.isNumeric(options.value) ? options.value : validator.getDynamicOption($field, options.value);\r\n\r\n            value = parseFloat(value);\r\n\t\t\treturn (options.inclusive === true || options.inclusive === undefined)\r\n                    ? {\r\n                        valid: value >= compareTo,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.greaterThan['default'], compareTo)\r\n                    }\r\n                    : {\r\n                        valid: value > compareTo,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.greaterThan.notInclusive, compareTo)\r\n                    };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.grid = $.extend($.fn.bootstrapValidator.i18n.grid || {}, {\r\n        'default': 'Please enter a valid GRId number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.grid = {\r\n        /**\r\n         * Validate GRId (Global Release Identifier)\r\n         * Examples:\r\n         * - Valid: A12425GABC1234002M, A1-2425G-ABC1234002-M, A1 2425G ABC1234002 M, Grid:A1-2425G-ABC1234002-M\r\n         * - Invalid: A1-2425G-ABC1234002-Q\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Global_Release_Identifier\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            value = value.toUpperCase();\r\n            if (!/^[GRID:]*([0-9A-Z]{2})[-\\s]*([0-9A-Z]{5})[-\\s]*([0-9A-Z]{10})[-\\s]*([0-9A-Z]{1})$/g.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\s/g, '').replace(/-/g, '');\r\n            if ('GRID:' === value.substr(0, 5)) {\r\n                value = value.substr(5);\r\n            }\r\n            return $.fn.bootstrapValidator.helpers.mod37And36(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.hex = $.extend($.fn.bootstrapValidator.i18n.hex || {}, {\r\n        'default': 'Please enter a valid hexadecimal number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.hex = {\r\n        /**\r\n         * Return true if and only if the input value is a valid hexadecimal number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return /^[0-9a-fA-F]+$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.hexColor = $.extend($.fn.bootstrapValidator.i18n.hexColor || {}, {\r\n        'default': 'Please enter a valid hex color'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.hexColor = {\r\n        enableByHtml5: function($field) {\r\n            return ('color' === $field.attr('type'));\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is a valid hex color\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.iban = $.extend($.fn.bootstrapValidator.i18n.iban || {}, {\r\n        'default': 'Please enter a valid IBAN number',\r\n        countryNotSupported: 'The country code %s is not supported',\r\n        country: 'Please enter a valid IBAN number in %s',\r\n        countries: {\r\n            AD: 'Andorra',\r\n            AE: 'United Arab Emirates',\r\n            AL: 'Albania',\r\n            AO: 'Angola',\r\n            AT: 'Austria',\r\n            AZ: 'Azerbaijan',\r\n            BA: 'Bosnia and Herzegovina',\r\n            BE: 'Belgium',\r\n            BF: 'Burkina Faso',\r\n            BG: 'Bulgaria',\r\n            BH: 'Bahrain',\r\n            BI: 'Burundi',\r\n            BJ: 'Benin',\r\n            BR: 'Brazil',\r\n            CH: 'Switzerland',\r\n            CI: 'Ivory Coast',\r\n            CM: 'Cameroon',\r\n            CR: 'Costa Rica',\r\n            CV: 'Cape Verde',\r\n            CY: 'Cyprus',\r\n            CZ: 'Czech Republic',\r\n            DE: 'Germany',\r\n            DK: 'Denmark',\r\n            DO: 'Dominican Republic',\r\n            DZ: 'Algeria',\r\n            EE: 'Estonia',\r\n            ES: 'Spain',\r\n            FI: 'Finland',\r\n            FO: 'Faroe Islands',\r\n            FR: 'France',\r\n            GB: 'United Kingdom',\r\n            GE: 'Georgia',\r\n            GI: 'Gibraltar',\r\n            GL: 'Greenland',\r\n            GR: 'Greece',\r\n            GT: 'Guatemala',\r\n            HR: 'Croatia',\r\n            HU: 'Hungary',\r\n            IE: 'Ireland',\r\n            IL: 'Israel',\r\n            IR: 'Iran',\r\n            IS: 'Iceland',\r\n            IT: 'Italy',\r\n            JO: 'Jordan',\r\n            KW: 'Kuwait',\r\n            KZ: 'Kazakhstan',\r\n            LB: 'Lebanon',\r\n            LI: 'Liechtenstein',\r\n            LT: 'Lithuania',\r\n            LU: 'Luxembourg',\r\n            LV: 'Latvia',\r\n            MC: 'Monaco',\r\n            MD: 'Moldova',\r\n            ME: 'Montenegro',\r\n            MG: 'Madagascar',\r\n            MK: 'Macedonia',\r\n            ML: 'Mali',\r\n            MR: 'Mauritania',\r\n            MT: 'Malta',\r\n            MU: 'Mauritius',\r\n            MZ: 'Mozambique',\r\n            NL: 'Netherlands',\r\n            NO: 'Norway',\r\n            PK: 'Pakistan',\r\n            PL: 'Poland',\r\n            PS: 'Palestinian',\r\n            PT: 'Portugal',\r\n            QA: 'Qatar',\r\n            RO: 'Romania',\r\n            RS: 'Serbia',\r\n            SA: 'Saudi Arabia',\r\n            SE: 'Sweden',\r\n            SI: 'Slovenia',\r\n            SK: 'Slovakia',\r\n            SM: 'San Marino',\r\n            SN: 'Senegal',\r\n            TN: 'Tunisia',\r\n            TR: 'Turkey',\r\n            VG: 'Virgin Islands, British'\r\n        }\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.iban = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            country: 'country'\r\n        },\r\n\r\n        // http://www.swift.com/dsp/resources/documents/IBAN_Registry.pdf\r\n        // http://en.wikipedia.org/wiki/International_Bank_Account_Number#IBAN_formats_by_country\r\n        REGEX: {\r\n            'AD': 'AD[0-9]{2}[0-9]{4}[0-9]{4}[A-Z0-9]{12}',                     // Andorra\r\n            'AE': 'AE[0-9]{2}[0-9]{3}[0-9]{16}',                                // United Arab Emirates\r\n            'AL': 'AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}',                             // Albania\r\n            'AO': 'AO[0-9]{2}[0-9]{21}',                                        // Angola\r\n            'AT': 'AT[0-9]{2}[0-9]{5}[0-9]{11}',                                // Austria\r\n            'AZ': 'AZ[0-9]{2}[A-Z]{4}[A-Z0-9]{20}',                             // Azerbaijan\r\n            'BA': 'BA[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{8}[0-9]{2}',                 // Bosnia and Herzegovina\r\n            'BE': 'BE[0-9]{2}[0-9]{3}[0-9]{7}[0-9]{2}',                         // Belgium\r\n            'BF': 'BF[0-9]{2}[0-9]{23}',                                        // Burkina Faso\r\n            'BG': 'BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}',              // Bulgaria\r\n            'BH': 'BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}',                             // Bahrain\r\n            'BI': 'BI[0-9]{2}[0-9]{12}',                                        // Burundi\r\n            'BJ': 'BJ[0-9]{2}[A-Z]{1}[0-9]{23}',                                // Benin\r\n            'BR': 'BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z][A-Z0-9]',           // Brazil\r\n            'CH': 'CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}',                             // Switzerland\r\n            'CI': 'CI[0-9]{2}[A-Z]{1}[0-9]{23}',                                // Ivory Coast\r\n            'CM': 'CM[0-9]{2}[0-9]{23}',                                        // Cameroon\r\n            'CR': 'CR[0-9]{2}[0-9]{3}[0-9]{14}',                                // Costa Rica\r\n            'CV': 'CV[0-9]{2}[0-9]{21}',                                        // Cape Verde\r\n            'CY': 'CY[0-9]{2}[0-9]{3}[0-9]{5}[A-Z0-9]{16}',                     // Cyprus\r\n            'CZ': 'CZ[0-9]{2}[0-9]{20}',                                        // Czech Republic\r\n            'DE': 'DE[0-9]{2}[0-9]{8}[0-9]{10}',                                // Germany\r\n            'DK': 'DK[0-9]{2}[0-9]{14}',                                        // Denmark\r\n            'DO': 'DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}',                             // Dominican Republic\r\n            'DZ': 'DZ[0-9]{2}[0-9]{20}',                                        // Algeria\r\n            'EE': 'EE[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{11}[0-9]{1}',                // Estonia\r\n            'ES': 'ES[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{1}[0-9]{1}[0-9]{10}',        // Spain\r\n            'FI': 'FI[0-9]{2}[0-9]{6}[0-9]{7}[0-9]{1}',                         // Finland\r\n            'FO': 'FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}',                         // Faroe Islands\r\n            'FR': 'FR[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}',             // France\r\n            'GB': 'GB[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}',                         // United Kingdom\r\n            'GE': 'GE[0-9]{2}[A-Z]{2}[0-9]{16}',                                // Georgia\r\n            'GI': 'GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}',                             // Gibraltar\r\n            'GL': 'GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}',                         // Greenland\r\n            'GR': 'GR[0-9]{2}[0-9]{3}[0-9]{4}[A-Z0-9]{16}',                     // Greece\r\n            'GT': 'GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}',                          // Guatemala\r\n            'HR': 'HR[0-9]{2}[0-9]{7}[0-9]{10}',                                // Croatia\r\n            'HU': 'HU[0-9]{2}[0-9]{3}[0-9]{4}[0-9]{1}[0-9]{15}[0-9]{1}',        // Hungary\r\n            'IE': 'IE[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}',                         // Ireland\r\n            'IL': 'IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}',                        // Israel\r\n            'IR': 'IR[0-9]{2}[0-9]{22}',                                        // Iran\r\n            'IS': 'IS[0-9]{2}[0-9]{4}[0-9]{2}[0-9]{6}[0-9]{10}',                // Iceland\r\n            'IT': 'IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}',             // Italy\r\n            'JO': 'JO[0-9]{2}[A-Z]{4}[0-9]{4}[0]{8}[A-Z0-9]{10}',               // Jordan\r\n            'KW': 'KW[0-9]{2}[A-Z]{4}[0-9]{22}',                                // Kuwait\r\n            'KZ': 'KZ[0-9]{2}[0-9]{3}[A-Z0-9]{13}',                             // Kazakhstan\r\n            'LB': 'LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}',                             // Lebanon\r\n            'LI': 'LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}',                             // Liechtenstein\r\n            'LT': 'LT[0-9]{2}[0-9]{5}[0-9]{11}',                                // Lithuania\r\n            'LU': 'LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}',                             // Luxembourg\r\n            'LV': 'LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}',                             // Latvia\r\n            'MC': 'MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}',             // Monaco\r\n            'MD': 'MD[0-9]{2}[A-Z0-9]{20}',                                     // Moldova\r\n            'ME': 'ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}',                        // Montenegro\r\n            'MG': 'MG[0-9]{2}[0-9]{23}',                                        // Madagascar\r\n            'MK': 'MK[0-9]{2}[0-9]{3}[A-Z0-9]{10}[0-9]{2}',                     // Macedonia\r\n            'ML': 'ML[0-9]{2}[A-Z]{1}[0-9]{23}',                                // Mali\r\n            'MR': 'MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}',                      // Mauritania\r\n            'MT': 'MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}',                     // Malta\r\n            'MU': 'MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{3}',// Mauritius\r\n            'MZ': 'MZ[0-9]{2}[0-9]{21}',                                        // Mozambique\r\n            'NL': 'NL[0-9]{2}[A-Z]{4}[0-9]{10}',                                // Netherlands\r\n            'NO': 'NO[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{1}',                         // Norway\r\n            'PK': 'PK[0-9]{2}[A-Z]{4}[A-Z0-9]{16}',                             // Pakistan\r\n            'PL': 'PL[0-9]{2}[0-9]{8}[0-9]{16}',                                // Poland\r\n            'PS': 'PS[0-9]{2}[A-Z]{4}[A-Z0-9]{21}',                             // Palestinian\r\n            'PT': 'PT[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{11}[0-9]{2}',                // Portugal\r\n            'QA': 'QA[0-9]{2}[A-Z]{4}[A-Z0-9]{21}',                             // Qatar\r\n            'RO': 'RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}',                             // Romania\r\n            'RS': 'RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}',                        // Serbia\r\n            'SA': 'SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}',                             // Saudi Arabia\r\n            'SE': 'SE[0-9]{2}[0-9]{3}[0-9]{16}[0-9]{1}',                        // Sweden\r\n            'SI': 'SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}',                         // Slovenia\r\n            'SK': 'SK[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{10}',                        // Slovakia\r\n            'SM': 'SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}',             // San Marino\r\n            'SN': 'SN[0-9]{2}[A-Z]{1}[0-9]{23}',                                // Senegal\r\n            'TN': 'TN59[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}',                      // Tunisia\r\n            'TR': 'TR[0-9]{2}[0-9]{5}[A-Z0-9]{1}[A-Z0-9]{16}',                  // Turkey\r\n            'VG': 'VG[0-9]{2}[A-Z]{4}[0-9]{16}'                                 // Virgin Islands, British\r\n        },\r\n\r\n        /**\r\n         * Validate an International Bank Account Number (IBAN)\r\n         * To test it, take the sample IBAN from\r\n         * http://www.nordea.com/Our+services/International+products+and+services/Cash+Management/IBAN+countries/908462.html\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * - country: The ISO 3166-1 country code. It can be\r\n         *      - A country code\r\n         *      - Name of field which its value defines the country code\r\n         *      - Name of callback function that returns the country code\r\n         *      - A callback function that returns the country code\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            value = value.replace(/[^a-zA-Z0-9]/g, '').toUpperCase();\r\n            var country = options.country;\r\n            if (!country) {\r\n                country = value.substr(0, 2);\r\n            } else if (typeof country !== 'string' || !this.REGEX[country]) {\r\n                // Determine the country code\r\n                country = validator.getDynamicOption($field, country);\r\n            }\r\n\r\n            if (!this.REGEX[country]) {\r\n                return {\r\n                    valid: false,\r\n                    message: $.fn.bootstrapValidator.helpers.format($.fn.bootstrapValidator.i18n.iban.countryNotSupported, country)\r\n                };\r\n            }\r\n\r\n            if (!(new RegExp('^' + this.REGEX[country] + '$')).test(value)) {\r\n                return {\r\n                    valid: false,\r\n                    message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.iban.country, $.fn.bootstrapValidator.i18n.iban.countries[country])\r\n                };\r\n            }\r\n\r\n            value = value.substr(4) + value.substr(0, 4);\r\n            value = $.map(value.split(''), function(n) {\r\n                var code = n.charCodeAt(0);\r\n                return (code >= 'A'.charCodeAt(0) && code <= 'Z'.charCodeAt(0))\r\n                        // Replace A, B, C, ..., Z with 10, 11, ..., 35\r\n                        ? (code - 'A'.charCodeAt(0) + 10)\r\n                        : n;\r\n            });\r\n            value = value.join('');\r\n\r\n            var temp   = parseInt(value.substr(0, 1), 10),\r\n                length = value.length;\r\n            for (var i = 1; i < length; ++i) {\r\n                temp = (temp * 10 + parseInt(value.substr(i, 1), 10)) % 97;\r\n            }\r\n\r\n            return {\r\n                valid: (temp === 1),\r\n                message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.iban.country, $.fn.bootstrapValidator.i18n.iban.countries[country])\r\n            };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.id = $.extend($.fn.bootstrapValidator.i18n.id || {}, {\r\n        'default': 'Please enter a valid identification number',\r\n        countryNotSupported: 'The country code %s is not supported',\r\n        country: 'Please enter a valid %s identification number',\r\n        countries: {\r\n            BA: 'Bosnia and Herzegovina',\r\n            BG: 'Bulgarian',\r\n            BR: 'Brazilian',\r\n            CH: 'Swiss',\r\n            CL: 'Chilean',\r\n            CZ: 'Czech',\r\n            DK: 'Danish',\r\n            EE: 'Estonian',\r\n            ES: 'Spanish',\r\n            FI: 'Finnish',\r\n            HR: 'Croatian',\r\n            IE: 'Irish',\r\n            IS: 'Iceland',\r\n            LT: 'Lithuanian',\r\n            LV: 'Latvian',\r\n            ME: 'Montenegro',\r\n            MK: 'Macedonian',\r\n            NL: 'Dutch',\r\n            RO: 'Romanian',\r\n            RS: 'Serbian',\r\n            SE: 'Swedish',\r\n            SI: 'Slovenian',\r\n            SK: 'Slovak',\r\n            SM: 'San Marino',\r\n            ZA: 'South African'\r\n        }\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.id = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            country: 'country'\r\n        },\r\n\r\n        // Supported country codes\r\n        COUNTRY_CODES: [\r\n            'BA', 'BG', 'BR', 'CH', 'CL', 'CZ', 'DK', 'EE', 'ES', 'FI', 'HR', 'IE', 'IS', 'LT', 'LV', 'ME', 'MK', 'NL',\r\n            'RO', 'RS', 'SE', 'SI', 'SK', 'SM', 'ZA'\r\n        ],\r\n\r\n        /**\r\n         * Validate identification number in different countries\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - country: The ISO 3166-1 country code. It can be\r\n         *      - One of country code defined in COUNTRY_CODES\r\n         *      - Name of field which its value defines the country code\r\n         *      - Name of callback function that returns the country code\r\n         *      - A callback function that returns the country code\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var country = options.country;\r\n            if (!country) {\r\n                country = value.substr(0, 2);\r\n            } else if (typeof country !== 'string' || $.inArray(country.toUpperCase(), this.COUNTRY_CODES) === -1) {\r\n                // Determine the country code\r\n                country = validator.getDynamicOption($field, country);\r\n            }\r\n\r\n            if ($.inArray(country, this.COUNTRY_CODES) === -1) {\r\n                return { valid: false, message: $.fn.bootstrapValidator.helpers.format($.fn.bootstrapValidator.i18n.id.countryNotSupported, country) };\r\n            }\r\n\r\n            var method  = ['_', country.toLowerCase()].join('');\r\n            return this[method](value)\r\n                    ? true\r\n                    : {\r\n                        valid: false,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.id.country, $.fn.bootstrapValidator.i18n.id.countries[country.toUpperCase()])\r\n                    };\r\n        },\r\n\r\n        /**\r\n         * Validate Unique Master Citizen Number which uses in\r\n         * - Bosnia and Herzegovina (country code: BA)\r\n         * - Macedonia (MK)\r\n         * - Montenegro (ME)\r\n         * - Serbia (RS)\r\n         * - Slovenia (SI)\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Unique_Master_Citizen_Number\r\n         * @param {String} value The ID\r\n         * @param {String} countryCode The ISO country code, can be BA, MK, ME, RS, SI\r\n         * @returns {Boolean}\r\n         */\r\n        _validateJMBG: function(value, countryCode) {\r\n            if (!/^\\d{13}$/.test(value)) {\r\n                return false;\r\n            }\r\n            var day   = parseInt(value.substr(0, 2), 10),\r\n                month = parseInt(value.substr(2, 2), 10),\r\n                year  = parseInt(value.substr(4, 3), 10),\r\n                rr    = parseInt(value.substr(7, 2), 10),\r\n                k     = parseInt(value.substr(12, 1), 10);\r\n\r\n            // Validate date of birth\r\n            // FIXME: Validate the year of birth\r\n            if (day > 31 || month > 12) {\r\n                return false;\r\n            }\r\n\r\n            // Validate checksum\r\n            var sum = 0;\r\n            for (var i = 0; i < 6; i++) {\r\n                sum += (7 - i) * (parseInt(value.charAt(i), 10) + parseInt(value.charAt(i + 6), 10));\r\n            }\r\n            sum = 11 - sum % 11;\r\n            if (sum === 10 || sum === 11) {\r\n                sum = 0;\r\n            }\r\n            if (sum !== k) {\r\n                return false;\r\n            }\r\n\r\n            // Validate political region\r\n            // rr is the political region of birth, which can be in ranges:\r\n            // 10-19: Bosnia and Herzegovina\r\n            // 20-29: Montenegro\r\n            // 30-39: Croatia (not used anymore)\r\n            // 41-49: Macedonia\r\n            // 50-59: Slovenia (only 50 is used)\r\n            // 70-79: Central Serbia\r\n            // 80-89: Serbian province of Vojvodina\r\n            // 90-99: Kosovo\r\n            switch (countryCode.toUpperCase()) {\r\n                case 'BA':\r\n                    return (10 <= rr && rr <= 19);\r\n                case 'MK':\r\n                    return (41 <= rr && rr <= 49);\r\n                case 'ME':\r\n                    return (20 <= rr && rr <= 29);\r\n                case 'RS':\r\n                    return (70 <= rr && rr <= 99);\r\n                case 'SI':\r\n                    return (50 <= rr && rr <= 59);\r\n                default:\r\n                    return true;\r\n            }\r\n        },\r\n\r\n        _ba: function(value) {\r\n            return this._validateJMBG(value, 'BA');\r\n        },\r\n        _mk: function(value) {\r\n            return this._validateJMBG(value, 'MK');\r\n        },\r\n        _me: function(value) {\r\n            return this._validateJMBG(value, 'ME');\r\n        },\r\n        _rs: function(value) {\r\n            return this._validateJMBG(value, 'RS');\r\n        },\r\n\r\n        /**\r\n         * Examples: 0101006500006\r\n         */\r\n        _si: function(value) {\r\n            return this._validateJMBG(value, 'SI');\r\n        },\r\n\r\n        /**\r\n         * Validate Bulgarian national identification number (EGN)\r\n         * Examples:\r\n         * - Valid: 7523169263, 8032056031, 803205 603 1, 8001010008, 7501020018, 7552010005, 7542011030\r\n         * - Invalid: 8019010008\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Uniform_civil_number\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _bg: function(value) {\r\n            if (!/^\\d{10}$/.test(value) && !/^\\d{6}\\s\\d{3}\\s\\d{1}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\s/g, '');\r\n            // Check the birth date\r\n            var year  = parseInt(value.substr(0, 2), 10) + 1900,\r\n                month = parseInt(value.substr(2, 2), 10),\r\n                day   = parseInt(value.substr(4, 2), 10);\r\n            if (month > 40) {\r\n                year += 100;\r\n                month -= 40;\r\n            } else if (month > 20) {\r\n                year -= 100;\r\n                month -= 20;\r\n            }\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                return false;\r\n            }\r\n\r\n            var sum    = 0,\r\n                weight = [2, 4, 8, 5, 10, 9, 7, 3, 6];\r\n            for (var i = 0; i < 9; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = (sum % 11) % 10;\r\n            return (sum + '' === value.substr(9, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Brazilian national identification number (CPF)\r\n         * Examples:\r\n         * - Valid: 39053344705, 390.533.447-05, 111.444.777-35\r\n         * - Invalid: 231.002.999-00\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Cadastro_de_Pessoas_F%C3%ADsicas\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _br: function(value) {\r\n            if (/^1{11}|2{11}|3{11}|4{11}|5{11}|6{11}|7{11}|8{11}|9{11}|0{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n            if (!/^\\d{11}$/.test(value) && !/^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\./g, '').replace(/-/g, '');\r\n\r\n            var d1 = 0;\r\n            for (var i = 0; i < 9; i++) {\r\n                d1 += (10 - i) * parseInt(value.charAt(i), 10);\r\n            }\r\n            d1 = 11 - d1 % 11;\r\n            if (d1 === 10 || d1 === 11) {\r\n                d1 = 0;\r\n            }\r\n            if (d1 + '' !== value.charAt(9)) {\r\n                return false;\r\n            }\r\n\r\n            var d2 = 0;\r\n            for (i = 0; i < 10; i++) {\r\n                d2 += (11 - i) * parseInt(value.charAt(i), 10);\r\n            }\r\n            d2 = 11 - d2 % 11;\r\n            if (d2 === 10 || d2 === 11) {\r\n                d2 = 0;\r\n            }\r\n\r\n            return (d2 + '' === value.charAt(10));\r\n        },\r\n\r\n        /**\r\n         * Validate Swiss Social Security Number (AHV-Nr/No AVS)\r\n         * Examples:\r\n         * - Valid: 756.1234.5678.95, 7561234567895\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#Switzerland\r\n         * @see http://www.bsv.admin.ch/themen/ahv/00011/02185/index.html?lang=de\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _ch: function(value) {\r\n            if (!/^756[\\.]{0,1}[0-9]{4}[\\.]{0,1}[0-9]{4}[\\.]{0,1}[0-9]{2}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\D/g, '').substr(3);\r\n            var length = value.length,\r\n                sum    = 0,\r\n                weight = (length === 8) ? [3, 1] : [1, 3];\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i % 2];\r\n            }\r\n            sum = 10 - sum % 10;\r\n            return (sum + '' === value.charAt(length - 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Chilean national identification number (RUN/RUT)\r\n         * Examples:\r\n         * - Valid: 76086428-5, 22060449-7, 12531909-2\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#Chile\r\n         * @see https://palena.sii.cl/cvc/dte/ee_empresas_emisoras.html for samples\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _cl: function(value) {\r\n            if (!/^\\d{7,8}[-]{0,1}[0-9K]$/i.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\-/g, '');\r\n            while (value.length < 9) {\r\n                value = '0' + value;\r\n            }\r\n            var sum    = 0,\r\n                weight = [3, 2, 7, 6, 5, 4, 3, 2];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = 11 - sum % 11;\r\n            if (sum === 11) {\r\n                sum = 0;\r\n            } else if (sum === 10) {\r\n                sum = 'K';\r\n            }\r\n            return sum + '' === value.charAt(8).toUpperCase();\r\n        },\r\n\r\n        /**\r\n         * Validate Czech national identification number (RC)\r\n         * Examples:\r\n         * - Valid: 7103192745, 991231123\r\n         * - Invalid: 1103492745, 590312123\r\n         *\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _cz: function(value) {\r\n            if (!/^\\d{9,10}$/.test(value)) {\r\n                return false;\r\n            }\r\n            var year  = 1900 + parseInt(value.substr(0, 2), 10),\r\n                month = parseInt(value.substr(2, 2), 10) % 50 % 20,\r\n                day   = parseInt(value.substr(4, 2), 10);\r\n            if (value.length === 9) {\r\n                if (year >= 1980) {\r\n                    year -= 100;\r\n                }\r\n                if (year > 1953) {\r\n                    return false;\r\n                }\r\n            } else if (year < 1954) {\r\n                year += 100;\r\n            }\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                return false;\r\n            }\r\n\r\n            // Check that the birth date is not in the future\r\n            if (value.length === 10) {\r\n                var check = parseInt(value.substr(0, 9), 10) % 11;\r\n                if (year < 1985) {\r\n                    check = check % 10;\r\n                }\r\n                return (check + '' === value.substr(9, 1));\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Validate Danish Personal Identification number (CPR)\r\n         * Examples:\r\n         * - Valid: 2110625629, 211062-5629\r\n         * - Invalid: 511062-5629\r\n         *\r\n         * @see https://en.wikipedia.org/wiki/Personal_identification_number_(Denmark)\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _dk: function(value) {\r\n            if (!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/-/g, '');\r\n            var day   = parseInt(value.substr(0, 2), 10),\r\n                month = parseInt(value.substr(2, 2), 10),\r\n                year  = parseInt(value.substr(4, 2), 10);\r\n\r\n            switch (true) {\r\n                case ('5678'.indexOf(value.charAt(6)) !== -1 && year >= 58):\r\n                    year += 1800;\r\n                    break;\r\n                case ('0123'.indexOf(value.charAt(6)) !== -1):\r\n                case ('49'.indexOf(value.charAt(6)) !== -1 && year >= 37):\r\n                    year += 1900;\r\n                    break;\r\n                default:\r\n                    year += 2000;\r\n                    break;\r\n            }\r\n\r\n            return $.fn.bootstrapValidator.helpers.date(year, month, day);\r\n        },\r\n\r\n        /**\r\n         * Validate Estonian Personal Identification Code (isikukood)\r\n         * Examples:\r\n         * - Valid: 37605030299\r\n         *\r\n         * @see http://et.wikipedia.org/wiki/Isikukood\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _ee: function(value) {\r\n            // Use the same format as Lithuanian Personal Code\r\n            return this._lt(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Spanish personal identity code (DNI)\r\n         * Support i) DNI (for Spanish citizens) and ii) NIE (for foreign people)\r\n         *\r\n         * Examples:\r\n         * - Valid: i) 54362315K, 54362315-K; ii) X2482300W, X-2482300W, X-2482300-W\r\n         * - Invalid: i) 54362315Z; ii) X-2482300A\r\n         *\r\n         * @see https://en.wikipedia.org/wiki/National_identification_number#Spain\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _es: function(value) {\r\n            if (!/^[0-9A-Z]{8}[-]{0,1}[0-9A-Z]$/.test(value)                    // DNI\r\n                && !/^[XYZ][-]{0,1}[0-9]{7}[-]{0,1}[0-9A-Z]$/.test(value)) {    // NIE\r\n                return false;\r\n            }\r\n\r\n            value = value.replace(/-/g, '');\r\n            var index = 'XYZ'.indexOf(value.charAt(0));\r\n            if (index !== -1) {\r\n                // It is NIE number\r\n                value = index + value.substr(1) + '';\r\n            }\r\n\r\n            var check = parseInt(value.substr(0, 8), 10);\r\n            check = 'TRWAGMYFPDXBNJZSQVHLCKE'[check % 23];\r\n            return (check === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Finnish Personal Identity Code (HETU)\r\n         * Examples:\r\n         * - Valid: 311280-888Y, 131052-308T\r\n         * - Invalid: 131052-308U, 310252-308Y\r\n         *\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _fi: function(value) {\r\n            if (!/^[0-9]{6}[-+A][0-9]{3}[0-9ABCDEFHJKLMNPRSTUVWXY]$/.test(value)) {\r\n                return false;\r\n            }\r\n            var day       = parseInt(value.substr(0, 2), 10),\r\n                month     = parseInt(value.substr(2, 2), 10),\r\n                year      = parseInt(value.substr(4, 2), 10),\r\n                centuries = {\r\n                    '+': 1800,\r\n                    '-': 1900,\r\n                    'A': 2000\r\n                };\r\n            year = centuries[value.charAt(6)] + year;\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                return false;\r\n            }\r\n\r\n            var individual = parseInt(value.substr(7, 3), 10);\r\n            if (individual < 2) {\r\n                return false;\r\n            }\r\n            var n = value.substr(0, 6) + value.substr(7, 3) + '';\r\n            n = parseInt(n, 10);\r\n            return '0123456789ABCDEFHJKLMNPRSTUVWXY'.charAt(n % 31) === value.charAt(10);\r\n        },\r\n\r\n        /**\r\n         * Validate Croatian personal identification number (OIB)\r\n         * Examples:\r\n         * - Valid: 33392005961\r\n         * - Invalid: 33392005962\r\n         *\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _hr: function(value) {\r\n            if (!/^[0-9]{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n            return $.fn.bootstrapValidator.helpers.mod11And10(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Irish Personal Public Service Number (PPS)\r\n         * Examples:\r\n         * - Valid: 6433435F, 6433435FT, 6433435FW, 6433435OA, 6433435IH, 1234567TW, 1234567FA\r\n         * - Invalid: 6433435E, 6433435VH\r\n         *\r\n         * @see https://en.wikipedia.org/wiki/Personal_Public_Service_Number\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _ie: function(value) {\r\n            if (!/^\\d{7}[A-W][AHWTX]?$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var getCheckDigit = function(value) {\r\n                while (value.length < 7) {\r\n                    value = '0' + value;\r\n                }\r\n                var alphabet = 'WABCDEFGHIJKLMNOPQRSTUV',\r\n                    sum      = 0;\r\n                for (var i = 0; i < 7; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * (8 - i);\r\n                }\r\n                sum += 9 * alphabet.indexOf(value.substr(7));\r\n                return alphabet[sum % 23];\r\n            };\r\n\r\n            // 2013 format\r\n            if (value.length === 9 && ('A' === value.charAt(8) || 'H' === value.charAt(8))) {\r\n                return value.charAt(7) === getCheckDigit(value.substr(0, 7) + value.substr(8) + '');\r\n            }\r\n            // The old format\r\n            else {\r\n                return value.charAt(7) === getCheckDigit(value.substr(0, 7));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Validate Iceland national identification number (Kennitala)\r\n         * Examples:\r\n         * - Valid: 120174-3399, 1201743399, 0902862349\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Kennitala\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _is: function(value) {\r\n            if (!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/-/g, '');\r\n            var day     = parseInt(value.substr(0, 2), 10),\r\n                month   = parseInt(value.substr(2, 2), 10),\r\n                year    = parseInt(value.substr(4, 2), 10),\r\n                century = parseInt(value.charAt(9), 10);\r\n\r\n            year = (century === 9) ? (1900 + year) : ((20 + century) * 100 + year);\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day, true)) {\r\n                return false;\r\n            }\r\n            // Validate the check digit\r\n            var sum    = 0,\r\n                weight = [3, 2, 7, 6, 5, 4, 3, 2];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = 11 - sum % 11;\r\n            return (sum + '' === value.charAt(8));\r\n        },\r\n\r\n        /**\r\n         * Validate Lithuanian Personal Code (Asmens kodas)\r\n         * Examples:\r\n         * - Valid: 38703181745\r\n         * - Invalid: 38703181746, 78703181745, 38703421745\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#Lithuania\r\n         * @see http://www.adomas.org/midi2007/pcode.html\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _lt: function(value) {\r\n            if (!/^[0-9]{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n            var gender  = parseInt(value.charAt(0), 10),\r\n                year    = parseInt(value.substr(1, 2), 10),\r\n                month   = parseInt(value.substr(3, 2), 10),\r\n                day     = parseInt(value.substr(5, 2), 10),\r\n                century = (gender % 2 === 0) ? (17 + gender / 2) : (17 + (gender + 1) / 2);\r\n            year = century * 100 + year;\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day, true)) {\r\n                return false;\r\n            }\r\n\r\n            // Validate the check digit\r\n            var sum    = 0,\r\n                weight = [1, 2, 3, 4, 5, 6, 7, 8, 9, 1];\r\n            for (var i = 0; i < 10; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = sum % 11;\r\n            if (sum !== 10) {\r\n                return sum + '' === value.charAt(10);\r\n            }\r\n\r\n            // Re-calculate the check digit\r\n            sum    = 0;\r\n            weight = [3, 4, 5, 6, 7, 8, 9, 1, 2, 3];\r\n            for (i = 0; i < 10; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = sum % 11;\r\n            if (sum === 10) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.charAt(10));\r\n        },\r\n\r\n        /**\r\n         * Validate Latvian Personal Code (Personas kods)\r\n         * Examples:\r\n         * - Valid: 161175-19997, 16117519997\r\n         * - Invalid: 161375-19997\r\n         *\r\n         * @see http://laacz.lv/2006/11/25/pk-parbaudes-algoritms/\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _lv: function(value) {\r\n            if (!/^[0-9]{6}[-]{0,1}[0-9]{5}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\D/g, '');\r\n            // Check birth date\r\n            var day   = parseInt(value.substr(0, 2), 10),\r\n                month = parseInt(value.substr(2, 2), 10),\r\n                year  = parseInt(value.substr(4, 2), 10);\r\n            year = year + 1800 + parseInt(value.charAt(6), 10) * 100;\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day, true)) {\r\n                return false;\r\n            }\r\n\r\n            // Check personal code\r\n            var sum    = 0,\r\n                weight = [10, 5, 8, 4, 2, 1, 6, 3, 7, 9];\r\n            for (var i = 0; i < 10; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = (sum + 1) % 11 % 10;\r\n            return (sum + '' === value.charAt(10));\r\n        },\r\n\r\n        /**\r\n         * Validate Dutch national identification number (BSN)\r\n         * Examples:\r\n         * - Valid: 111222333, 941331490, 9413.31.490\r\n         * - Invalid: 111252333\r\n         *\r\n         * @see https://nl.wikipedia.org/wiki/Burgerservicenummer\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _nl: function(value) {\r\n            while (value.length < 9) {\r\n                value = '0' + value;\r\n            }\r\n            if (!/^[0-9]{4}[.]{0,1}[0-9]{2}[.]{0,1}[0-9]{3}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/\\./g, '');\r\n            if (parseInt(value, 10) === 0) {\r\n                return false;\r\n            }\r\n            var sum    = 0,\r\n                length = value.length;\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += (9 - i) * parseInt(value.charAt(i), 10);\r\n            }\r\n            sum = sum % 11;\r\n            if (sum === 10) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.charAt(length - 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Romanian numerical personal code (CNP)\r\n         * Examples:\r\n         * - Valid: 1630615123457, 1800101221144\r\n         * - Invalid: 8800101221144, 1632215123457, 1630615123458\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#Romania\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _ro: function(value) {\r\n            if (!/^[0-9]{13}$/.test(value)) {\r\n                return false;\r\n            }\r\n            var gender = parseInt(value.charAt(0), 10);\r\n            if (gender === 0 || gender === 7 || gender === 8) {\r\n                return false;\r\n            }\r\n\r\n            // Determine the date of birth\r\n            var year      = parseInt(value.substr(1, 2), 10),\r\n                month     = parseInt(value.substr(3, 2), 10),\r\n                day       = parseInt(value.substr(5, 2), 10),\r\n                // The year of date is determined base on the gender\r\n                centuries = {\r\n                    '1': 1900,  // Male born between 1900 and 1999\r\n                    '2': 1900,  // Female born between 1900 and 1999\r\n                    '3': 1800,  // Male born between 1800 and 1899\r\n                    '4': 1800,  // Female born between 1800 and 1899\r\n                    '5': 2000,  // Male born after 2000\r\n                    '6': 2000   // Female born after 2000\r\n                };\r\n            if (day > 31 && month > 12) {\r\n                return false;\r\n            }\r\n            if (gender !== 9) {\r\n                year = centuries[gender + ''] + year;\r\n                if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Validate the check digit\r\n            var sum    = 0,\r\n                weight = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9],\r\n                length = value.length;\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = sum % 11;\r\n            if (sum === 10) {\r\n                sum = 1;\r\n            }\r\n            return (sum + '' === value.charAt(length - 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Swedish personal identity number (personnummer)\r\n         * Examples:\r\n         * - Valid: 8112289874, 811228-9874, 811228+9874\r\n         * - Invalid: 811228-9873\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Personal_identity_number_(Sweden)\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _se: function(value) {\r\n            if (!/^[0-9]{10}$/.test(value) && !/^[0-9]{6}[-|+][0-9]{4}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.replace(/[^0-9]/g, '');\r\n\r\n            var year  = parseInt(value.substr(0, 2), 10) + 1900,\r\n                month = parseInt(value.substr(2, 2), 10),\r\n                day   = parseInt(value.substr(4, 2), 10);\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                return false;\r\n            }\r\n\r\n            // Validate the last check digit\r\n            return $.fn.bootstrapValidator.helpers.luhn(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Slovak national identifier number (RC)\r\n         * Examples:\r\n         * - Valid: 7103192745, 991231123\r\n         * - Invalid: 7103192746, 1103492745\r\n         *\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _sk: function(value) {\r\n            // Slovakia uses the same format as Czech Republic\r\n            return this._cz(value);\r\n        },\r\n\r\n        /**\r\n         * Validate San Marino citizen number\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#San_Marino\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _sm: function(value) {\r\n            return /^\\d{5}$/.test(value);\r\n        },\r\n\r\n        /**\r\n         * Validate South African ID\r\n         * Example:\r\n         * - Valid: 8001015009087\r\n         * - Invalid: 8001015009287, 8001015009086\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/National_identification_number#South_Africa\r\n         * @param {String} value The ID\r\n         * @returns {Boolean}\r\n         */\r\n        _za: function(value) {\r\n            if (!/^[0-9]{10}[0|1][8|9][0-9]$/.test(value)) {\r\n                return false;\r\n            }\r\n            var year        = parseInt(value.substr(0, 2), 10),\r\n                currentYear = new Date().getFullYear() % 100,\r\n                month       = parseInt(value.substr(2, 2), 10),\r\n                day         = parseInt(value.substr(4, 2), 10);\r\n            year = (year >= currentYear) ? (year + 1900) : (year + 2000);\r\n\r\n            if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                return false;\r\n            }\r\n\r\n            // Validate the last check digit\r\n            return $.fn.bootstrapValidator.helpers.luhn(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.identical = $.extend($.fn.bootstrapValidator.i18n.identical || {}, {\r\n        'default': 'Please enter the same value'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.identical = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            field: 'field'\r\n        },\r\n\r\n        /**\r\n         * Check if input value equals to value of particular one\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consists of the following key:\r\n         * - field: The name of field that will be used to compare with current one\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var compareWith = validator.getFieldElements(options.field);\r\n            if (compareWith === null) {\r\n                return true;\r\n            }\r\n\r\n            if (value === compareWith.val()) {\r\n                validator.updateStatus(options.field, validator.STATUS_VALID, 'identical');\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.imei = $.extend($.fn.bootstrapValidator.i18n.imei || {}, {\r\n        'default': 'Please enter a valid IMEI number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.imei = {\r\n        /**\r\n         * Validate IMEI (International Mobile Station Equipment Identity)\r\n         * Examples:\r\n         * - Valid: 35-209900-176148-1, 35-209900-176148-23, 3568680000414120, 490154203237518\r\n         * - Invalid: 490154203237517\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/International_Mobile_Station_Equipment_Identity\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            switch (true) {\r\n                case /^\\d{15}$/.test(value):\r\n                case /^\\d{2}-\\d{6}-\\d{6}-\\d{1}$/.test(value):\r\n                case /^\\d{2}\\s\\d{6}\\s\\d{6}\\s\\d{1}$/.test(value):\r\n                    value = value.replace(/[^0-9]/g, '');\r\n                    return $.fn.bootstrapValidator.helpers.luhn(value);\r\n\r\n                case /^\\d{14}$/.test(value):\r\n                case /^\\d{16}$/.test(value):\r\n                case /^\\d{2}-\\d{6}-\\d{6}(|-\\d{2})$/.test(value):\r\n                case /^\\d{2}\\s\\d{6}\\s\\d{6}(|\\s\\d{2})$/.test(value):\r\n                    return true;\r\n\r\n                default:\r\n                    return false;\r\n            }\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.integer = $.extend($.fn.bootstrapValidator.i18n.integer || {}, {\r\n        'default': 'Please enter a valid number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.integer = {\r\n        enableByHtml5: function($field) {\r\n            return ('number' === $field.attr('type')) && ($field.attr('step') === undefined || $field.attr('step') % 1 === 0);\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is an integer\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following key:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            return /^(?:-?(?:0|[1-9][0-9]*))$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.ip = $.extend($.fn.bootstrapValidator.i18n.ip || {}, {\r\n        'default': 'Please enter a valid IP address',\r\n        ipv4: 'Please enter a valid IPv4 address',\r\n        ipv6: 'Please enter a valid IPv6 address'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.ip = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            ipv4: 'ipv4',\r\n            ipv6: 'ipv6'\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is a IP address.\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - ipv4: Enable IPv4 validator, default to true\r\n         * - ipv6: Enable IPv6 validator, default to true\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            options = $.extend({}, { ipv4: true, ipv6: true }, options);\r\n\r\n            if (options.ipv4) {\r\n                return {\r\n                    valid: /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(value),\r\n                    message: options.message || $.fn.bootstrapValidator.i18n.ip.ipv4\r\n                };\r\n            } else if (options.ipv6) {\r\n                return {\r\n                    valid: /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/.test(value),\r\n                    message: options.message || $.fn.bootstrapValidator.i18n.ip.ipv6\r\n                };\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.isbn = $.extend($.fn.bootstrapValidator.i18n.isbn || {}, {\r\n        'default': 'Please enter a valid ISBN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.isbn = {\r\n        /**\r\n         * Return true if the input value is a valid ISBN 10 or ISBN 13 number\r\n         * Examples:\r\n         * - Valid:\r\n         * ISBN 10: 99921-58-10-7, 9971-5-0210-0, 960-425-059-0, 80-902734-1-6, 85-359-0277-5, 1-84356-028-3, 0-684-84328-5, 0-8044-2957-X, 0-85131-041-9, 0-943396-04-2, 0-9752298-0-X\r\n         * ISBN 13: 978-0-306-40615-7\r\n         * - Invalid:\r\n         * ISBN 10: 99921-58-10-6\r\n         * ISBN 13: 978-0-306-40615-6\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/International_Standard_Book_Number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} [options] Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // http://en.wikipedia.org/wiki/International_Standard_Book_Number#Overview\r\n            // Groups are separated by a hyphen or a space\r\n            var type;\r\n            switch (true) {\r\n                case /^\\d{9}[\\dX]$/.test(value):\r\n                case (value.length === 13 && /^(\\d+)-(\\d+)-(\\d+)-([\\dX])$/.test(value)):\r\n                case (value.length === 13 && /^(\\d+)\\s(\\d+)\\s(\\d+)\\s([\\dX])$/.test(value)):\r\n                    type = 'ISBN10';\r\n                    break;\r\n                case /^(978|979)\\d{9}[\\dX]$/.test(value):\r\n                case (value.length === 17 && /^(978|979)-(\\d+)-(\\d+)-(\\d+)-([\\dX])$/.test(value)):\r\n                case (value.length === 17 && /^(978|979)\\s(\\d+)\\s(\\d+)\\s(\\d+)\\s([\\dX])$/.test(value)):\r\n                    type = 'ISBN13';\r\n                    break;\r\n                default:\r\n                    return false;\r\n            }\r\n\r\n            // Replace all special characters except digits and X\r\n            value = value.replace(/[^0-9X]/gi, '');\r\n            var chars  = value.split(''),\r\n                length = chars.length,\r\n                sum    = 0,\r\n                i,\r\n                checksum;\r\n\r\n            switch (type) {\r\n                case 'ISBN10':\r\n                    sum = 0;\r\n                    for (i = 0; i < length - 1; i++) {\r\n                        sum += parseInt(chars[i], 10) * (10 - i);\r\n                    }\r\n                    checksum = 11 - (sum % 11);\r\n                    if (checksum === 11) {\r\n                        checksum = 0;\r\n                    } else if (checksum === 10) {\r\n                        checksum = 'X';\r\n                    }\r\n                    return (checksum + '' === chars[length - 1]);\r\n\r\n                case 'ISBN13':\r\n                    sum = 0;\r\n                    for (i = 0; i < length - 1; i++) {\r\n                        sum += ((i % 2 === 0) ? parseInt(chars[i], 10) : (parseInt(chars[i], 10) * 3));\r\n                    }\r\n                    checksum = 10 - (sum % 10);\r\n                    if (checksum === 10) {\r\n                        checksum = '0';\r\n                    }\r\n                    return (checksum + '' === chars[length - 1]);\r\n\r\n                default:\r\n                    return false;\r\n            }\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.isin = $.extend($.fn.bootstrapValidator.i18n.isin || {}, {\r\n        'default': 'Please enter a valid ISIN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.isin = {\r\n        // Available country codes\r\n        // See http://isin.net/country-codes/\r\n        COUNTRY_CODES: 'AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW',\r\n\r\n        /**\r\n         * Validate an ISIN (International Securities Identification Number)\r\n         * Examples:\r\n         * - Valid: US0378331005, AU0000XVGZA3, GB0002634946\r\n         * - Invalid: US0378331004, AA0000XVGZA3\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/International_Securities_Identifying_Number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            value = value.toUpperCase();\r\n            var regex = new RegExp('^(' + this.COUNTRY_CODES + ')[0-9A-Z]{10}$');\r\n            if (!regex.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var converted = '',\r\n                length    = value.length;\r\n            // Convert letters to number\r\n            for (var i = 0; i < length - 1; i++) {\r\n                var c = value.charCodeAt(i);\r\n                converted += ((c > 57) ? (c - 55).toString() : value.charAt(i));\r\n            }\r\n\r\n            var digits = '',\r\n                n      = converted.length,\r\n                group  = (n % 2 !== 0) ? 0 : 1;\r\n            for (i = 0; i < n; i++) {\r\n                digits += (parseInt(converted[i], 10) * ((i % 2) === group ? 2 : 1) + '');\r\n            }\r\n\r\n            var sum = 0;\r\n            for (i = 0; i < digits.length; i++) {\r\n                sum += parseInt(digits.charAt(i), 10);\r\n            }\r\n            sum = (10 - (sum % 10)) % 10;\r\n            return sum + '' === value.charAt(length - 1);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.ismn = $.extend($.fn.bootstrapValidator.i18n.ismn || {}, {\r\n        'default': 'Please enter a valid ISMN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.ismn = {\r\n        /**\r\n         * Validate ISMN (International Standard Music Number)\r\n         * Examples:\r\n         * - Valid: M230671187, 979-0-0601-1561-5, 979 0 3452 4680 5, 9790060115615\r\n         * - Invalid: 9790060115614\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/International_Standard_Music_Number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Groups are separated by a hyphen or a space\r\n            var type;\r\n            switch (true) {\r\n                case /^M\\d{9}$/.test(value):\r\n                case /^M-\\d{4}-\\d{4}-\\d{1}$/.test(value):\r\n                case /^M\\s\\d{4}\\s\\d{4}\\s\\d{1}$/.test(value):\r\n                    type = 'ISMN10';\r\n                    break;\r\n                case /^9790\\d{9}$/.test(value):\r\n                case /^979-0-\\d{4}-\\d{4}-\\d{1}$/.test(value):\r\n                case /^979\\s0\\s\\d{4}\\s\\d{4}\\s\\d{1}$/.test(value):\r\n                    type = 'ISMN13';\r\n                    break;\r\n                default:\r\n                    return false;\r\n            }\r\n\r\n            if ('ISMN10' === type) {\r\n                value = '9790' + value.substr(1);\r\n            }\r\n\r\n            // Replace all special characters except digits\r\n            value = value.replace(/[^0-9]/gi, '');\r\n            var length = value.length,\r\n                sum    = 0,\r\n                weight = [1, 3];\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i % 2];\r\n            }\r\n            sum = 10 - sum % 10;\r\n            return (sum + '' === value.charAt(length - 1));\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.issn = $.extend($.fn.bootstrapValidator.i18n.issn || {}, {\r\n        'default': 'Please enter a valid ISSN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.issn = {\r\n        /**\r\n         * Validate ISSN (International Standard Serial Number)\r\n         * Examples:\r\n         * - Valid: 0378-5955, 0024-9319, 0032-1478\r\n         * - Invalid: 0032-147X\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/International_Standard_Serial_Number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Groups are separated by a hyphen or a space\r\n            if (!/^\\d{4}\\-\\d{3}[\\dX]$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            // Replace all special characters except digits and X\r\n            value = value.replace(/[^0-9X]/gi, '');\r\n            var chars  = value.split(''),\r\n                length = chars.length,\r\n                sum    = 0;\r\n\r\n            if (chars[7] === 'X') {\r\n                chars[7] = 10;\r\n            }\r\n            for (var i = 0; i < length; i++) {\r\n                sum += parseInt(chars[i], 10) * (8 - i);\r\n            }\r\n            return (sum % 11 === 0);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.lessThan = $.extend($.fn.bootstrapValidator.i18n.lessThan || {}, {\r\n        'default': 'Please enter a value less than or equal to %s',\r\n        notInclusive: 'Please enter a value less than %s'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.lessThan = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            value: 'value',\r\n            inclusive: 'inclusive'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            var max = $field.attr('max');\r\n            if (max) {\r\n                return {\r\n                    value: max\r\n                };\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is less than or equal to given number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - value: The number used to compare to. It can be\r\n         *      - A number\r\n         *      - Name of field which its value defines the number\r\n         *      - Name of callback function that returns the number\r\n         *      - A callback function that returns the number\r\n         *\r\n         * - inclusive [optional]: Can be true or false. Default is true\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var compareTo = $.isNumeric(options.value) ? options.value : validator.getDynamicOption($field, options.value);\r\n\r\n            value = parseFloat(value);\r\n            return (options.inclusive === true || options.inclusive === undefined)\r\n                    ? {\r\n                        valid: value <= compareTo,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.lessThan['default'], compareTo)\r\n                    }\r\n                    : {\r\n                        valid: value < compareTo,\r\n                        message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.lessThan.notInclusive, compareTo)\r\n                    };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.mac = $.extend($.fn.bootstrapValidator.i18n.mac || {}, {\r\n        'default': 'Please enter a valid MAC address'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.mac = {\r\n        /**\r\n         * Return true if the input value is a MAC address.\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return /^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.notEmpty = $.extend($.fn.bootstrapValidator.i18n.notEmpty || {}, {\r\n        'default': 'Please enter a value'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.notEmpty = {\r\n        enableByHtml5: function($field) {\r\n            var required = $field.attr('required') + '';\r\n            return ('required' === required || 'true' === required);\r\n        },\r\n\r\n        /**\r\n         * Check if input value is empty or not\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var type = $field.attr('type');\r\n            if ('radio' === type || 'checkbox' === type) {\r\n                return validator\r\n                            .getFieldElements($field.attr('data-bv-field'))\r\n                            .filter(':checked')\r\n                            .length > 0;\r\n            }\r\n\r\n            return $.trim($field.val()) !== '';\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.numeric = $.extend($.fn.bootstrapValidator.i18n.numeric || {}, {\r\n        'default': 'Please enter a valid float number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.numeric = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            separator: 'separator'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            return ('number' === $field.attr('type')) && ($field.attr('step') !== undefined) && ($field.attr('step') % 1 !== 0);\r\n        },\r\n\r\n        /**\r\n         * Validate decimal number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - separator: The decimal separator. Can be \".\" (default), \",\"\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            var separator = options.separator || '.';\r\n            if (separator !== '.') {\r\n                value = value.replace(separator, '.');\r\n            }\r\n\r\n            return !isNaN(parseFloat(value)) && isFinite(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.phone = $.extend($.fn.bootstrapValidator.i18n.phone || {}, {\r\n        'default': 'Please enter a valid phone number',\r\n        countryNotSupported: 'The country code %s is not supported',\r\n        country: 'Please enter a valid phone number in %s',\r\n        countries: {\r\n            GB: 'United Kingdom',\r\n            US: 'USA'\r\n        }\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.phone = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            country: 'country'\r\n        },\r\n\r\n        // The supported countries\r\n        COUNTRY_CODES: ['GB', 'US'],\r\n\r\n        /**\r\n         * Return true if the input value contains a valid phone number for the country\r\n         * selected in the options\r\n         *\r\n         * @param {BootstrapValidator} validator Validate plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - country: The ISO-3166 country code. It can be\r\n         *      - A country code\r\n         *      - Name of field which its value defines the country code\r\n         *      - Name of callback function that returns the country code\r\n         *      - A callback function that returns the country code\r\n         *\r\n         * Currently it only supports United State (US) or United Kingdom (GB) countries\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var country = options.country;\r\n            if (typeof country !== 'string' || $.inArray(country, this.COUNTRY_CODES) === -1) {\r\n                // Try to determine the country\r\n                country = validator.getDynamicOption($field, country);\r\n            }\r\n\r\n            if (!country || $.inArray(country.toUpperCase(), this.COUNTRY_CODES) === -1) {\r\n                return {\r\n                    valid: false,\r\n                    message: $.fn.bootstrapValidator.helpers.format($.fn.bootstrapValidator.i18n.phone.countryNotSupported, country)\r\n                };\r\n            }\r\n\r\n            var isValid = true;\r\n            switch (country.toUpperCase()) {\r\n            \tcase 'GB':\r\n            \t\t// http://aa-asterisk.org.uk/index.php/Regular_Expressions_for_Validating_and_Formatting_GB_Telephone_Numbers#Match_GB_telephone_number_in_any_format\r\n            \t\t// Test: http://regexr.com/38uhv\r\n            \t\tvalue   = $.trim(value);\r\n            \t\tisValid = (/^\\(?(?:(?:0(?:0|11)\\)?[\\s-]?\\(?|\\+)44\\)?[\\s-]?\\(?(?:0\\)?[\\s-]?\\(?)?|0)(?:\\d{2}\\)?[\\s-]?\\d{4}[\\s-]?\\d{4}|\\d{3}\\)?[\\s-]?\\d{3}[\\s-]?\\d{3,4}|\\d{4}\\)?[\\s-]?(?:\\d{5}|\\d{3}[\\s-]?\\d{3})|\\d{5}\\)?[\\s-]?\\d{4,5}|8(?:00[\\s-]?11[\\s-]?11|45[\\s-]?46[\\s-]?4\\d))(?:(?:[\\s-]?(?:x|ext\\.?\\s?|\\#)\\d+)?)$/).test(value);\r\n                    break;\r\n\r\n                case 'US':\r\n                /* falls through */\r\n                default:\r\n                    // Make sure US phone numbers have 10 digits\r\n                    // May start with 1, +1, or 1-; should discard\r\n                    // Area code may be delimited with (), & sections may be delimited with . or -\r\n                    // Test: http://regexr.com/38mqi\r\n                    value   = value.replace(/\\D/g, '');\r\n                    isValid = (/^(?:(1\\-?)|(\\+1 ?))?\\(?(\\d{3})[\\)\\-\\.]?(\\d{3})[\\-\\.]?(\\d{4})$/).test(value) && (value.length === 10);\r\n                    break;\r\n            }\r\n\r\n            return {\r\n                valid: isValid,\r\n                message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.phone.country, $.fn.bootstrapValidator.i18n.phone.countries[country])\r\n            };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.regexp = $.extend($.fn.bootstrapValidator.i18n.regexp || {}, {\r\n        'default': 'Please enter a value matching the pattern'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.regexp = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            regexp: 'regexp'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            var pattern = $field.attr('pattern');\r\n            if (pattern) {\r\n                return {\r\n                    regexp: pattern\r\n                };\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Check if the element value matches given regular expression\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consists of the following key:\r\n         * - regexp: The regular expression you need to check\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var regexp = ('string' === typeof options.regexp) ? new RegExp(options.regexp) : options.regexp;\r\n            return regexp.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.remote = $.extend($.fn.bootstrapValidator.i18n.remote || {}, {\r\n        'default': 'Please enter a valid value'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.remote = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            url: 'url',\r\n            name: 'name'\r\n        },\r\n\r\n        /**\r\n         * Request a remote server to check the input value\r\n         *\r\n         * @param {BootstrapValidator} validator Plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - url {String|Function}\r\n         * - type {String} [optional] Can be GET or POST (default)\r\n         * - data {Object|Function} [optional]: By default, it will take the value\r\n         *  {\r\n         *      <fieldName>: <fieldValue>\r\n         *  }\r\n         * - name {String} [optional]: Override the field name for the request.\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Deferred}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var name = $field.attr('data-bv-field'),\r\n                data = options.data || {},\r\n                url  = options.url,\r\n                type = options.type || 'POST';\r\n\r\n            // Support dynamic data\r\n            if ('function' === typeof data) {\r\n                data = data.call(this, validator);\r\n            }\r\n\r\n            // Support dynamic url\r\n            if ('function' === typeof url) {\r\n                url = url.call(this, validator);\r\n            }\r\n\r\n            data[options.name || name] = value;\r\n\r\n            var dfd = new $.Deferred();\r\n            var xhr = $.ajax({\r\n                type: type,\r\n                url: url,\r\n                dataType: 'json',\r\n                data: data\r\n            });\r\n            xhr.then(function(response) {\r\n                dfd.resolve($field, 'remote', response.valid === true || response.valid === 'true', response.message ? response.message : null);\r\n            });\r\n\r\n            dfd.fail(function() {\r\n                xhr.abort();\r\n            });\r\n\r\n            return dfd;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.rtn = $.extend($.fn.bootstrapValidator.i18n.rtn || {}, {\r\n        'default': 'Please enter a valid RTN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.rtn = {\r\n        /**\r\n         * Validate a RTN (Routing transit number)\r\n         * Examples:\r\n         * - Valid: 021200025, 789456124\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Routing_transit_number\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            if (!/^\\d{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var sum = 0;\r\n            for (var i = 0; i < value.length; i += 3) {\r\n                sum += parseInt(value.charAt(i),     10) * 3\r\n                    +  parseInt(value.charAt(i + 1), 10) * 7\r\n                    +  parseInt(value.charAt(i + 2), 10);\r\n            }\r\n            return (sum !== 0 && sum % 10 === 0);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.sedol = $.extend($.fn.bootstrapValidator.i18n.sedol || {}, {\r\n        'default': 'Please enter a valid SEDOL number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.sedol = {\r\n        /**\r\n         * Validate a SEDOL (Stock Exchange Daily Official List)\r\n         * Examples:\r\n         * - Valid: 0263494, B0WNLY7\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/SEDOL\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            value = value.toUpperCase();\r\n            if (!/^[0-9A-Z]{7}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            var sum    = 0,\r\n                weight = [1, 3, 1, 7, 3, 9, 1],\r\n                length = value.length;\r\n            for (var i = 0; i < length - 1; i++) {\r\n\t            sum += weight[i] * parseInt(value.charAt(i), 36);\r\n\t        }\r\n\t        sum = (10 - sum % 10) % 10;\r\n            return sum + '' === value.charAt(length - 1);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.siren = $.extend($.fn.bootstrapValidator.i18n.siren || {}, {\r\n        'default': 'Please enter a valid SIREN number'\r\n    });\r\n\r\n\t$.fn.bootstrapValidator.validators.siren = {\r\n\t\t/**\r\n\t\t * Check if a string is a siren number\r\n\t\t *\r\n\t\t * @param {BootstrapValidator} validator The validator plugin instance\r\n\t\t * @param {jQuery} $field Field element\r\n\t\t * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n\t\t * @returns {Boolean}\r\n\t\t */\r\n\t\tvalidate: function(validator, $field, options) {\r\n\t\t\tvar value = $field.val();\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n            if (!/^\\d{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n            return $.fn.bootstrapValidator.helpers.luhn(value);\r\n\t\t}\r\n\t};\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.siret = $.extend($.fn.bootstrapValidator.i18n.siret || {}, {\r\n        'default': 'Please enter a valid SIRET number'\r\n    });\r\n\r\n\t$.fn.bootstrapValidator.validators.siret = {\r\n        /**\r\n         * Check if a string is a siret number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n\t\tvalidate: function(validator, $field, options) {\r\n\t\t\tvar value = $field.val();\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tvar sum    = 0,\r\n                length = value.length,\r\n                tmp;\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n                tmp = parseInt(value.charAt(i), 10);\r\n\t\t\t\tif ((i % 2) === 0) {\r\n\t\t\t\t\ttmp = tmp * 2;\r\n\t\t\t\t\tif (tmp > 9) {\r\n\t\t\t\t\t\ttmp -= 9;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsum += tmp;\r\n\t\t\t}\r\n\t\t\treturn (sum % 10 === 0);\r\n\t\t}\r\n\t};\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.step = $.extend($.fn.bootstrapValidator.i18n.step || {}, {\r\n        'default': 'Please enter a valid step of %s'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.step = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            base: 'baseValue',\r\n            step: 'step'\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is valid step one\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Can consist of the following keys:\r\n         * - baseValue: The base value\r\n         * - step: The step\r\n         * - message: The invalid message\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            options = $.extend({}, { baseValue: 0, step: 1 }, options);\r\n            value   = parseFloat(value);\r\n            if (!$.isNumeric(value)) {\r\n                return false;\r\n            }\r\n\r\n            var round = function(x, precision) {\r\n                    var m = Math.pow(10, precision);\r\n                    x = x * m;\r\n                    var sign   = (x > 0) | -(x < 0),\r\n                        isHalf = (x % 1 === 0.5 * sign);\r\n                    if (isHalf) {\r\n                        return (Math.floor(x) + (sign > 0)) / m;\r\n                    } else {\r\n                        return Math.round(x) / m;\r\n                    }\r\n                },\r\n                floatMod = function(x, y) {\r\n                    if (y === 0.0) {\r\n                        return 1.0;\r\n                    }\r\n                    var dotX      = (x + '').split('.'),\r\n                        dotY      = (y + '').split('.'),\r\n                        precision = ((dotX.length === 1) ? 0 : dotX[1].length) + ((dotY.length === 1) ? 0 : dotY[1].length);\r\n                    return round(x - y * Math.floor(x / y), precision);\r\n                };\r\n\r\n            var mod = floatMod(value - options.baseValue, options.step);\r\n            return {\r\n                valid: mod === 0.0 || mod === options.step,\r\n                message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.step['default'], [options.step])\r\n            };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.stringCase = $.extend($.fn.bootstrapValidator.i18n.stringCase || {}, {\r\n        'default': 'Please enter only lowercase characters',\r\n        upper: 'Please enter only uppercase characters'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.stringCase = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            'case': 'case'\r\n        },\r\n\r\n        /**\r\n         * Check if a string is a lower or upper case one\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - case: Can be 'lower' (default) or 'upper'\r\n         * @returns {Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var stringCase = (options['case'] || 'lower').toLowerCase();\r\n            return {\r\n                valid: ('upper' === stringCase) ? value === value.toUpperCase() : value === value.toLowerCase(),\r\n                message: options.message || (('upper' === stringCase) ? $.fn.bootstrapValidator.i18n.stringCase.upper : $.fn.bootstrapValidator.i18n.stringCase['default'])\r\n            };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.stringLength = $.extend($.fn.bootstrapValidator.i18n.stringLength || {}, {\r\n        'default': 'Please enter a value with valid length',\r\n        less: 'Please enter less than %s characters',\r\n        more: 'Please enter more than %s characters',\r\n        between: 'Please enter value between %s and %s characters long'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.stringLength = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            min: 'min',\r\n            max: 'max'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            var maxLength = $field.attr('maxlength');\r\n            if (maxLength) {\r\n                return {\r\n                    max: parseInt(maxLength, 10)\r\n                };\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Check if the length of element value is less or more than given number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consists of following keys:\r\n         * - min\r\n         * - max\r\n         * At least one of two keys is required\r\n         * The min, max keys define the number which the field value compares to. min, max can be\r\n         *      - A number\r\n         *      - Name of field which its value defines the number\r\n         *      - Name of callback function that returns the number\r\n         *      - A callback function that returns the number\r\n         *\r\n         * - message: The invalid message\r\n         * @returns {Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var min     = $.isNumeric(options.min) ? options.min : validator.getDynamicOption($field, options.min),\r\n                max     = $.isNumeric(options.max) ? options.max : validator.getDynamicOption($field, options.max),\r\n                length  = value.length,\r\n                isValid = true,\r\n                message = options.message || $.fn.bootstrapValidator.i18n.stringLength['default'];\r\n\r\n            if ((min && length < parseInt(min, 10)) || (max && length > parseInt(max, 10))) {\r\n                isValid = false;\r\n            }\r\n\r\n            switch (true) {\r\n                case (!!min && !!max):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.stringLength.between, [parseInt(min, 10), parseInt(max, 10)]);\r\n                    break;\r\n\r\n                case (!!min):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.stringLength.more, parseInt(min, 10));\r\n                    break;\r\n\r\n                case (!!max):\r\n                    message = $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.stringLength.less, parseInt(max, 10));\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            return { valid: isValid, message: message };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.uri = $.extend($.fn.bootstrapValidator.i18n.uri || {}, {\r\n        'default': 'Please enter a valid URI'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.uri = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            allowlocal: 'allowLocal'\r\n        },\r\n\r\n        enableByHtml5: function($field) {\r\n            return ('url' === $field.attr('type'));\r\n        },\r\n\r\n        /**\r\n         * Return true if the input value is a valid URL\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options\r\n         * - message: The error message\r\n         * - allowLocal: Allow the private and local network IP. Default to false\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Credit to https://gist.github.com/dperini/729294\r\n            //\r\n            // Regular Expression for URL validation\r\n            //\r\n            // Author: Diego Perini\r\n            // Updated: 2010/12/05\r\n            //\r\n            // the regular expression composed & commented\r\n            // could be easily tweaked for RFC compliance,\r\n            // it was expressly modified to fit & satisfy\r\n            // these test for an URL shortener:\r\n            //\r\n            //   http://mathiasbynens.be/demo/url-regex\r\n            //\r\n            // Notes on possible differences from a standard/generic validation:\r\n            //\r\n            // - utf-8 char class take in consideration the full Unicode range\r\n            // - TLDs have been made mandatory so single names like \"localhost\" fails\r\n            // - protocols have been restricted to ftp, http and https only as requested\r\n            //\r\n            // Changes:\r\n            //\r\n            // - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\r\n            //   first and last IP address of each class is considered invalid\r\n            //   (since they are broadcast/network addresses)\r\n            //\r\n            // - Added exclusion of private, reserved and/or local networks ranges\r\n            //\r\n            var allowLocal = options.allowLocal === true || options.allowLocal === 'true',\r\n                urlExp     = new RegExp(\r\n                    \"^\" +\r\n                    // protocol identifier\r\n                    \"(?:(?:https?|ftp)://)\" +\r\n                    // user:pass authentication\r\n                    \"(?:\\\\S+(?::\\\\S*)?@)?\" +\r\n                    \"(?:\" +\r\n                    // IP address exclusion\r\n                    // private & local networks\r\n                    (allowLocal\r\n                        ? ''\r\n                        : (\"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\r\n                           \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\r\n                           \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\")) +\r\n                    // IP address dotted notation octets\r\n                    // excludes loopback network 0.0.0.0\r\n                    // excludes reserved space >= 224.0.0.0\r\n                    // excludes network & broadcast addresses\r\n                    // (first & last IP address of each class)\r\n                    \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\r\n                    \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\r\n                    \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\r\n                    \"|\" +\r\n                    // host name\r\n                    \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\r\n                    // domain name\r\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\r\n                    // TLD identifier\r\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\r\n                    \")\" +\r\n                    // port number\r\n                    \"(?::\\\\d{2,5})?\" +\r\n                    // resource path\r\n                    \"(?:/[^\\\\s]*)?\" +\r\n                    \"$\", \"i\"\r\n                );\r\n\r\n            return urlExp.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.uuid = $.extend($.fn.bootstrapValidator.i18n.uuid || {}, {\r\n        'default': 'Please enter a valid UUID number',\r\n        version: 'Please enter a valid UUID version %s number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.uuid = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            version: 'version'\r\n        },\r\n\r\n        /**\r\n         * Return true if and only if the input value is a valid UUID string\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - version: Can be 3, 4, 5, null\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // See the format at http://en.wikipedia.org/wiki/Universally_unique_identifier#Variants_and_versions\r\n            var patterns = {\r\n                    '3': /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\r\n                    '4': /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\r\n                    '5': /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\r\n                    all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i\r\n                },\r\n                version = options.version ? (options.version + '') : 'all';\r\n            return {\r\n                valid: (null === patterns[version]) ? true : patterns[version].test(value),\r\n                message: options.version\r\n                            ? $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.uuid.version, options.version)\r\n                            : (options.message || $.fn.bootstrapValidator.i18n.uuid['default'])\r\n            };\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.vat = $.extend($.fn.bootstrapValidator.i18n.vat || {}, {\r\n        'default': 'Please enter a valid VAT number',\r\n        countryNotSupported: 'The country code %s is not supported',\r\n        country: 'Please enter a valid %s VAT number',\r\n        countries: {\r\n            AT: 'Austrian',\r\n            BE: 'Belgian',\r\n            BG: 'Bulgarian',\r\n            CH: 'Swiss',\r\n            CY: 'Cypriot',\r\n            CZ: 'Czech',\r\n            DE: 'German',\r\n            DK: 'Danish',\r\n            EE: 'Estonian',\r\n            ES: 'Spanish',\r\n            FI: 'Finnish',\r\n            FR: 'French',\r\n            GB: 'United Kingdom',\r\n            GR: 'Greek',\r\n            EL: 'Greek',\r\n            HU: 'Hungarian',\r\n            HR: 'Croatian',\r\n            IE: 'Irish',\r\n            IT: 'Italian',\r\n            LT: 'Lithuanian',\r\n            LU: 'Luxembourg',\r\n            LV: 'Latvian',\r\n            MT: 'Maltese',\r\n            NL: 'Dutch',\r\n            NO: 'Norwegian',\r\n            PL: 'Polish',\r\n            PT: 'Portuguese',\r\n            RO: 'Romanian',\r\n            RU: 'Russian',\r\n            RS: 'Serbian',\r\n            SE: 'Swedish',\r\n            SI: 'Slovenian',\r\n            SK: 'Slovak'\r\n        }\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.vat = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            country: 'country'\r\n        },\r\n\r\n        // Supported country codes\r\n        COUNTRY_CODES: [\r\n            'AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'EL', 'HU', 'IE', 'IT',\r\n            'LV', 'LT', 'LU', 'MT', 'NL', 'NO', 'PL', 'PT', 'RO', 'RU', 'RS', 'SK', 'SI', 'ES', 'SE', 'CH', 'GB'\r\n        ],\r\n\r\n        /**\r\n         * Validate an European VAT number\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - country: The ISO 3166-1 country code. It can be\r\n         *      - One of country code defined in COUNTRY_CODES\r\n         *      - Name of field which its value defines the country code\r\n         *      - Name of callback function that returns the country code\r\n         *      - A callback function that returns the country code\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var country = options.country;\r\n            if (!country) {\r\n                country = value.substr(0, 2);\r\n            } else if (typeof country !== 'string' || $.inArray(country.toUpperCase(), this.COUNTRY_CODES) === -1) {\r\n                // Determine the country code\r\n                country = validator.getDynamicOption($field, country);\r\n            }\r\n\r\n            if ($.inArray(country, this.COUNTRY_CODES) === -1) {\r\n                return {\r\n                    valid: false,\r\n                    message: $.fn.bootstrapValidator.helpers.format($.fn.bootstrapValidator.i18n.vat.countryNotSupported, country)\r\n                };\r\n            }\r\n\r\n            var method  = ['_', country.toLowerCase()].join('');\r\n            return this[method](value)\r\n                ? true\r\n                : {\r\n                    valid: false,\r\n                    message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.vat.country, $.fn.bootstrapValidator.i18n.vat.countries[country.toUpperCase()])\r\n                };\r\n        },\r\n\r\n        // VAT validators\r\n\r\n        /**\r\n         * Validate Austrian VAT number\r\n         * Example:\r\n         * - Valid: ATU13585627\r\n         * - Invalid: ATU13585626\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _at: function(value) {\r\n            if (!/^ATU[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(3);\r\n            var sum    = 0,\r\n                weight = [1, 2, 1, 2, 1, 2, 1],\r\n                temp   = 0;\r\n\r\n            for (var i = 0; i < 7; i++) {\r\n                temp = parseInt(value.charAt(i), 10) * weight[i];\r\n                if (temp > 9) {\r\n                    temp = Math.floor(temp / 10) + temp % 10;\r\n                }\r\n                sum += temp;\r\n            }\r\n\r\n            sum = 10 - (sum + 4) % 10;\r\n            if (sum === 10) {\r\n                sum = 0;\r\n            }\r\n\r\n            return (sum + '' === value.substr(7, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Belgian VAT number\r\n         * Example:\r\n         * - Valid: BE0428759497\r\n         * - Invalid: BE431150351\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _be: function(value) {\r\n            if (!/^BE[0]{0,1}[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            if (value.length === 9) {\r\n                value = '0' + value;\r\n            }\r\n\r\n            if (value.substr(1, 1) === '0') {\r\n                return false;\r\n            }\r\n\r\n            var sum = parseInt(value.substr(0, 8), 10) + parseInt(value.substr(8, 2), 10);\r\n            return (sum % 97 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Bulgarian VAT number\r\n         * Example:\r\n         * - Valid: BG175074752,\r\n         * BG7523169263, BG8032056031,\r\n         * BG7542011030,\r\n         * BG7111042925\r\n         * - Invalid: BG175074753, BG7552A10004, BG7111042922\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _bg: function(value) {\r\n            if (!/^BG[0-9]{9,10}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum = 0, i = 0;\r\n\r\n            // Legal entities\r\n            if (value.length === 9) {\r\n                for (i = 0; i < 8; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * (i + 1);\r\n                }\r\n                sum = sum % 11;\r\n                if (sum === 10) {\r\n                    sum = 0;\r\n                    for (i = 0; i < 8; i++) {\r\n                        sum += parseInt(value.charAt(i), 10) * (i + 3);\r\n                    }\r\n                }\r\n                sum = sum % 10;\r\n                return (sum + '' === value.substr(8));\r\n            }\r\n            // Physical persons, foreigners and others\r\n            else if (value.length === 10) {\r\n                // Validate Bulgarian national identification numbers\r\n                var egn = function(value) {\r\n                        // Check the birth date\r\n                        var year  = parseInt(value.substr(0, 2), 10) + 1900,\r\n                            month = parseInt(value.substr(2, 2), 10),\r\n                            day   = parseInt(value.substr(4, 2), 10);\r\n                        if (month > 40) {\r\n                            year += 100;\r\n                            month -= 40;\r\n                        } else if (month > 20) {\r\n                            year -= 100;\r\n                            month -= 20;\r\n                        }\r\n\r\n                        if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                            return false;\r\n                        }\r\n\r\n                        var sum    = 0,\r\n                            weight = [2, 4, 8, 5, 10, 9, 7, 3, 6];\r\n                        for (var i = 0; i < 9; i++) {\r\n                            sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                        }\r\n                        sum = (sum % 11) % 10;\r\n                        return (sum + '' === value.substr(9, 1));\r\n                    },\r\n                    // Validate Bulgarian personal number of a foreigner\r\n                    pnf = function(value) {\r\n                        var sum    = 0,\r\n                            weight = [21, 19, 17, 13, 11, 9, 7, 3, 1];\r\n                        for (var i = 0; i < 9; i++) {\r\n                            sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                        }\r\n                        sum = sum % 10;\r\n                        return (sum + '' === value.substr(9, 1));\r\n                    },\r\n                    // Finally, consider it as a VAT number\r\n                    vat = function(value) {\r\n                        var sum    = 0,\r\n                            weight = [4, 3, 2, 7, 6, 5, 4, 3, 2];\r\n                        for (var i = 0; i < 9; i++) {\r\n                            sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                        }\r\n                        sum = 11 - sum % 11;\r\n                        if (sum === 10) {\r\n                            return false;\r\n                        }\r\n                        if (sum === 11) {\r\n                            sum = 0;\r\n                        }\r\n                        return (sum + '' === value.substr(9, 1));\r\n                    };\r\n                return (egn(value) || pnf(value) || vat(value));\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Validate Swiss VAT number\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _ch: function(value) {\r\n            if (!/^CHE[0-9]{9}(MWST)?$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(3);\r\n            var sum    = 0,\r\n                weight = [5, 4, 3, 2, 7, 6, 5, 4];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            sum = 11 - sum % 11;\r\n            if (sum === 10) {\r\n                return false;\r\n            }\r\n            if (sum === 11) {\r\n                sum = 0;\r\n            }\r\n\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Cypriot VAT number\r\n         * Examples:\r\n         * - Valid: CY10259033P\r\n         * - Invalid: CY10259033Z\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _cy: function(value) {\r\n            if (!/^CY[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n\r\n            // Do not allow to start with \"12\"\r\n            if (value.substr(0, 2) === '12') {\r\n                return false;\r\n            }\r\n\r\n            // Extract the next digit and multiply by the counter.\r\n            var sum         = 0,\r\n                translation = {\r\n                    '0': 1,  '1': 0,  '2': 5,  '3': 7,  '4': 9,\r\n                    '5': 13, '6': 15, '7': 17, '8': 19, '9': 21\r\n                };\r\n            for (var i = 0; i < 8; i++) {\r\n                var temp = parseInt(value.charAt(i), 10);\r\n                if (i % 2 === 0) {\r\n                    temp = translation[temp + ''];\r\n                }\r\n                sum += temp;\r\n            }\r\n\r\n            sum = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[sum % 26];\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Czech Republic VAT number\r\n         * Can be:\r\n         * i) Legal entities (8 digit numbers)\r\n         * ii) Individuals with a RC (the 9 or 10 digit Czech birth number)\r\n         * iii) Individuals without a RC (9 digit numbers beginning with 6)\r\n         *\r\n         * Examples:\r\n         * - Valid: i) CZ25123891; ii) CZ7103192745, CZ991231123; iii) CZ640903926\r\n         * - Invalid: i) CZ25123890; ii) CZ1103492745, CZ590312123\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _cz: function(value) {\r\n            if (!/^CZ[0-9]{8,10}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n\r\n            var sum = 0,\r\n                i   = 0;\r\n            if (value.length === 8) {\r\n                // Do not allow to start with '9'\r\n                if (value.charAt(0) + '' === '9') {\r\n                    return false;\r\n                }\r\n\r\n                sum = 0;\r\n                for (i = 0; i < 7; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * (8 - i);\r\n                }\r\n                sum = 11 - sum % 11;\r\n                if (sum === 10) {\r\n                    sum = 0;\r\n                }\r\n                if (sum === 11) {\r\n                    sum = 1;\r\n                }\r\n\r\n                return (sum + '' === value.substr(7, 1));\r\n            } else if (value.length === 9 && (value.charAt(0) + '' === '6')) {\r\n                sum = 0;\r\n                // Skip the first (which is 6)\r\n                for (i = 0; i < 7; i++) {\r\n                    sum += parseInt(value.charAt(i + 1), 10) * (8 - i);\r\n                }\r\n                sum = 11 - sum % 11;\r\n                if (sum === 10) {\r\n                    sum = 0;\r\n                }\r\n                if (sum === 11) {\r\n                    sum = 1;\r\n                }\r\n                sum = [8, 7, 6, 5, 4, 3, 2, 1, 0, 9, 10][sum - 1];\r\n                return (sum + '' === value.substr(8, 1));\r\n            } else if (value.length === 9 || value.length === 10) {\r\n                // Validate Czech birth number (Rodn茅 膷铆slo), which is also national identifier\r\n                var year  = 1900 + parseInt(value.substr(0, 2), 10),\r\n                    month = parseInt(value.substr(2, 2), 10) % 50 % 20,\r\n                    day   = parseInt(value.substr(4, 2), 10);\r\n                if (value.length === 9) {\r\n                    if (year >= 1980) {\r\n                        year -= 100;\r\n                    }\r\n                    if (year > 1953) {\r\n                        return false;\r\n                    }\r\n                } else if (year < 1954) {\r\n                    year += 100;\r\n                }\r\n\r\n                if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                    return false;\r\n                }\r\n\r\n                // Check that the birth date is not in the future\r\n                if (value.length === 10) {\r\n                    var check = parseInt(value.substr(0, 9), 10) % 11;\r\n                    if (year < 1985) {\r\n                        check = check % 10;\r\n                    }\r\n                    return (check + '' === value.substr(9, 1));\r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Validate German VAT number\r\n         * Examples:\r\n         * - Valid: DE136695976\r\n         * - Invalid: DE136695978\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _de: function(value) {\r\n            if (!/^DE[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            return $.fn.bootstrapValidator.helpers.mod11And10(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Danish VAT number\r\n         * Example:\r\n         * - Valid: DK13585628\r\n         * - Invalid: DK13585627\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _dk: function(value) {\r\n            if (!/^DK[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [2, 7, 6, 5, 4, 3, 2, 1];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 11 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Estonian VAT number\r\n         * Examples:\r\n         * - Valid: EE100931558, EE100594102\r\n         * - Invalid: EE100594103\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _ee: function(value) {\r\n            if (!/^EE[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [3, 7, 1, 3, 7, 1, 3, 7, 1];\r\n\r\n            for (var i = 0; i < 9; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 10 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Spanish VAT number (NIF - N煤mero de Identificaci贸n Fiscal)\r\n         * Can be:\r\n         * i) DNI (Documento nacional de identidad), for Spaniards\r\n         * ii) NIE (N煤mero de Identificaci贸n de Extranjeros), for foreigners\r\n         * iii) CIF (Certificado de Identificaci贸n Fiscal), for legal entities and others\r\n         *\r\n         * Examples:\r\n         * - Valid: i) ES54362315K; ii) ESX2482300W, ESX5253868R; iii) ESM1234567L, ESJ99216582, ESB58378431, ESB64717838\r\n         * - Invalid: i) ES54362315Z; ii) ESX2482300A; iii) ESJ99216583\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _es: function(value) {\r\n            if (!/^ES[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var dni = function(value) {\r\n                    var check = parseInt(value.substr(0, 8), 10);\r\n                    check = 'TRWAGMYFPDXBNJZSQVHLCKE'[check % 23];\r\n                    return (check + '' === value.substr(8, 1));\r\n                },\r\n                nie = function(value) {\r\n                    var check = ['XYZ'.indexOf(value.charAt(0)), value.substr(1)].join('');\r\n                    check = parseInt(check, 10);\r\n                    check = 'TRWAGMYFPDXBNJZSQVHLCKE'[check % 23];\r\n                    return (check + '' === value.substr(8, 1));\r\n                },\r\n                cif = function(value) {\r\n                    var first = value.charAt(0), check;\r\n                    if ('KLM'.indexOf(first) !== -1) {\r\n                        // K: Spanish younger than 14 year old\r\n                        // L: Spanish living outside Spain without DNI\r\n                        // M: Granted the tax to foreigners who have no NIE\r\n                        check = parseInt(value.substr(1, 8), 10);\r\n                        check = 'TRWAGMYFPDXBNJZSQVHLCKE'[check % 23];\r\n                        return (check + '' === value.substr(8, 1));\r\n                    } else if ('ABCDEFGHJNPQRSUVW'.indexOf(first) !== -1) {\r\n                        var sum    = 0,\r\n                            weight = [2, 1, 2, 1, 2, 1, 2],\r\n                            temp   = 0;\r\n\r\n                        for (var i = 0; i < 7; i++) {\r\n                            temp = parseInt(value.charAt(i + 1), 10) * weight[i];\r\n                            if (temp > 9) {\r\n                                temp = Math.floor(temp / 10) + temp % 10;\r\n                            }\r\n                            sum += temp;\r\n                        }\r\n                        sum = 10 - sum % 10;\r\n                        return (sum + '' === value.substr(8, 1) || 'JABCDEFGHI'[sum] === value.substr(8, 1));\r\n                    }\r\n\r\n                    return false;\r\n                };\r\n\r\n            var first = value.charAt(0);\r\n            if (/^[0-9]$/.test(first)) {\r\n                return dni(value);\r\n            } else if (/^[XYZ]$/.test(first)) {\r\n                return nie(value);\r\n            } else {\r\n                return cif(value);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Validate Finnish VAT number\r\n         * Examples:\r\n         * - Valid: FI20774740\r\n         * - Invalid: FI20774741\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _fi: function(value) {\r\n            if (!/^FI[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [7, 9, 10, 5, 8, 4, 2, 1];\r\n\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 11 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate French VAT number (TVA - taxe sur la valeur ajout茅e)\r\n         * It's constructed by a SIREN number, prefixed by two characters.\r\n         *\r\n         * Examples:\r\n         * - Valid: FR40303265045, FR23334175221, FRK7399859412, FR4Z123456782\r\n         * - Invalid: FR84323140391\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _fr: function(value) {\r\n            if (!/^FR[0-9A-Z]{2}[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n\r\n\t\t\tif (!$.fn.bootstrapValidator.helpers.luhn(value.substr(2))) {\r\n                return false;\r\n            }\r\n\r\n            if (/^[0-9]{2}$/.test(value.substr(0, 2))) {\r\n                // First two characters are digits\r\n                return value.substr(0, 2) === (parseInt(value.substr(2) + '12', 10) % 97 + '');\r\n            } else {\r\n                // The first characters cann't be O and I\r\n                var alphabet = '0123456789ABCDEFGHJKLMNPQRSTUVWXYZ',\r\n                    check;\r\n                // First one is digit\r\n                if (/^[0-9]{1}$/.test(value.charAt(0))) {\r\n                    check = alphabet.indexOf(value.charAt(0)) * 24 + alphabet.indexOf(value.charAt(1)) - 10;\r\n                } else {\r\n                    check = alphabet.indexOf(value.charAt(0)) * 34 + alphabet.indexOf(value.charAt(1)) - 100;\r\n                }\r\n                return ((parseInt(value.substr(2), 10) + 1 + Math.floor(check / 11)) % 11) === (check % 11);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Validate United Kingdom VAT number\r\n         * Example:\r\n         * - Valid: GB980780684\r\n         * - Invalid: GB802311781\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _gb: function(value) {\r\n            if (!/^GB[0-9]{9}$/.test(value)             /* Standard */\r\n                && !/^GB[0-9]{12}$/.test(value)         /* Branches */\r\n                && !/^GBGD[0-9]{3}$/.test(value)        /* Government department */\r\n                && !/^GBHA[0-9]{3}$/.test(value)        /* Health authority */\r\n                && !/^GB(GD|HA)8888[0-9]{5}$/.test(value))\r\n            {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var length = value.length;\r\n            if (length === 5) {\r\n                var firstTwo  = value.substr(0, 2),\r\n                    lastThree = parseInt(value.substr(2), 10);\r\n                return ('GD' === firstTwo && lastThree < 500) || ('HA' === firstTwo && lastThree >= 500);\r\n            } else if (length === 11 && ('GD8888' === value.substr(0, 6) || 'HA8888' === value.substr(0, 6))) {\r\n                if (('GD' === value.substr(0, 2) && parseInt(value.substr(6, 3), 10) >= 500)\r\n                    || ('HA' === value.substr(0, 2) && parseInt(value.substr(6, 3), 10) < 500))\r\n                {\r\n                    return false;\r\n                }\r\n                return (parseInt(value.substr(6, 3), 10) % 97 === parseInt(value.substr(9, 2), 10));\r\n            } else if (length === 9 || length === 12) {\r\n                var sum    = 0,\r\n                    weight = [8, 7, 6, 5, 4, 3, 2, 10, 1];\r\n                for (var i = 0; i < 9; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                }\r\n                sum = sum % 97;\r\n\r\n                if (parseInt(value.substr(0, 3), 10) >= 100) {\r\n                    return (sum === 0 || sum === 42 || sum === 55);\r\n                } else {\r\n                    return (sum === 0);\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Validate Greek VAT number\r\n         * Examples:\r\n         * - Valid: GR023456780, EL094259216\r\n         * - Invalid: EL123456781\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _gr: function(value) {\r\n            if (!/^GR[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            if (value.length === 8) {\r\n                value = '0' + value;\r\n            }\r\n\r\n            var sum    = 0,\r\n                weight = [256, 128, 64, 32, 16, 8, 4, 2];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = (sum % 11) % 10;\r\n\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        // EL is traditionally prefix of Greek VAT numbers\r\n        _el: function(value) {\r\n            if (!/^EL[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = 'GR' + value.substr(2);\r\n            return this._gr(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Hungarian VAT number\r\n         * Examples:\r\n         * - Valid: HU12892312\r\n         * - Invalid: HU12892313\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _hu: function(value) {\r\n            if (!/^HU[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [9, 7, 3, 1, 9, 7, 3, 1];\r\n\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 10 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Croatian VAT number\r\n         * Examples:\r\n         * - Valid: HR33392005961\r\n         * - Invalid: HR33392005962\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _hr: function(value) {\r\n            if (!/^HR[0-9]{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            return $.fn.bootstrapValidator.helpers.mod11And10(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Irish VAT number\r\n         * Examples:\r\n         * - Valid: IE6433435F, IE6433435OA, IE8D79739I\r\n         * - Invalid: IE8D79738J\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _ie: function(value) {\r\n            if (!/^IE[0-9]{1}[0-9A-Z\\*\\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var getCheckDigit = function(value) {\r\n                while (value.length < 7) {\r\n                    value = '0' + value;\r\n                }\r\n                var alphabet = 'WABCDEFGHIJKLMNOPQRSTUV',\r\n                    sum      = 0;\r\n                for (var i = 0; i < 7; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * (8 - i);\r\n                }\r\n                sum += 9 * alphabet.indexOf(value.substr(7));\r\n                return alphabet[sum % 23];\r\n            };\r\n\r\n            // The first 7 characters are digits\r\n            if (/^[0-9]+$/.test(value.substr(0, 7))) {\r\n                // New system\r\n                return value.charAt(7) === getCheckDigit(value.substr(0, 7) + value.substr(8) + '');\r\n            } else if ('ABCDEFGHIJKLMNOPQRSTUVWXYZ+*'.indexOf(value.charAt(1)) !== -1) {\r\n                // Old system\r\n                return value.charAt(7) === getCheckDigit(value.substr(2, 5) + value.substr(0, 1) + '');\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Validate Italian VAT number, which consists of 11 digits.\r\n         * - First 7 digits are a company identifier\r\n         * - Next 3 are the province of residence\r\n         * - The last one is a check digit\r\n         *\r\n         * Examples:\r\n         * - Valid: IT00743110157\r\n         * - Invalid: IT00743110158\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _it: function(value) {\r\n            if (!/^IT[0-9]{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            if (parseInt(value.substr(0, 7), 10) === 0) {\r\n                return false;\r\n            }\r\n\r\n            var lastThree = parseInt(value.substr(7, 3), 10);\r\n            if ((lastThree < 1) || (lastThree > 201) && lastThree !== 999 && lastThree !== 888) {\r\n                return false;\r\n            }\r\n\r\n            return $.fn.bootstrapValidator.helpers.luhn(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Lithuanian VAT number\r\n         * It can be:\r\n         * - 9 digits, for legal entities\r\n         * - 12 digits, for temporarily registered taxpayers\r\n         *\r\n         * Examples:\r\n         * - Valid: LT119511515, LT100001919017, LT100004801610\r\n         * - Invalid: LT100001919018\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _lt: function(value) {\r\n            if (!/^LT([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var length = value.length,\r\n                sum    = 0,\r\n                i;\r\n            for (i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * (1 + i % 9);\r\n            }\r\n            var check = sum % 11;\r\n            if (check === 10) {\r\n                sum = 0;\r\n                for (i = 0; i < length - 1; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * (1 + (i + 2) % 9);\r\n                }\r\n            }\r\n            check = check % 11 % 10;\r\n            return (check + '' === value.charAt(length - 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Luxembourg VAT number\r\n         * Examples:\r\n         * - Valid: LU15027442\r\n         * - Invalid: LU15027443\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _lu: function(value) {\r\n            if (!/^LU[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            return ((parseInt(value.substr(0, 6), 10) % 89) + '' === value.substr(6, 2));\r\n        },\r\n\r\n        /**\r\n         * Validate Latvian VAT number\r\n         * Examples:\r\n         * - Valid: LV40003521600, LV16117519997\r\n         * - Invalid: LV40003521601, LV16137519997\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _lv: function(value) {\r\n            if (!/^LV[0-9]{11}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var first  = parseInt(value.charAt(0), 10),\r\n                sum    = 0,\r\n                weight = [],\r\n                i,\r\n                length = value.length;\r\n            if (first > 3) {\r\n                // Legal entity\r\n                sum    = 0;\r\n                weight = [9, 1, 4, 8, 3, 10, 2, 5, 7, 6, 1];\r\n                for (i = 0; i < length; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                }\r\n                sum = sum % 11;\r\n                return (sum === 3);\r\n            } else {\r\n                // Check birth date\r\n                var day   = parseInt(value.substr(0, 2), 10),\r\n                    month = parseInt(value.substr(2, 2), 10),\r\n                    year  = parseInt(value.substr(4, 2), 10);\r\n                year = year + 1800 + parseInt(value.charAt(6), 10) * 100;\r\n\r\n                if (!$.fn.bootstrapValidator.helpers.date(year, month, day)) {\r\n                    return false;\r\n                }\r\n\r\n                // Check personal code\r\n                sum    = 0;\r\n                weight = [10, 5, 8, 4, 2, 1, 6, 3, 7, 9];\r\n                for (i = 0; i < length - 1; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                }\r\n                sum = (sum + 1) % 11 % 10;\r\n                return (sum + '' === value.charAt(length - 1));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Validate Maltese VAT number\r\n         * Examples:\r\n         * - Valid: MT11679112\r\n         * - Invalid: MT11679113\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _mt: function(value) {\r\n            if (!/^MT[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [3, 4, 6, 7, 8, 9, 10, 1];\r\n\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 37 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Dutch VAT number\r\n         * Examples:\r\n         * - Valid: NL004495445B01\r\n         * - Invalid: NL123456789B90\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _nl: function(value) {\r\n            if (!/^NL[0-9]{9}B[0-9]{2}$/.test(value)) {\r\n               return false;\r\n            }\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [9, 8, 7, 6, 5, 4, 3, 2];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            sum = sum % 11;\r\n            if (sum > 9) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Norwegian VAT number\r\n         *\r\n         * @see http://www.brreg.no/english/coordination/number.html\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _no: function(value) {\r\n            if (!/^NO[0-9]{9}$/.test(value)) {\r\n               return false;\r\n            }\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [3, 2, 7, 6, 5, 4, 3, 2];\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            sum = 11 - sum % 11;\r\n            if (sum === 11) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Polish VAT number\r\n         * Examples:\r\n         * - Valid: PL8567346215\r\n         * - Invalid: PL8567346216\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _pl: function(value) {\r\n            if (!/^PL[0-9]{10}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [6, 5, 7, 2, 3, 4, 5, 6, 7, -1];\r\n\r\n            for (var i = 0; i < 10; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            return (sum % 11 === 0);\r\n        },\r\n\r\n        /**\r\n         * Validate Portuguese VAT number\r\n         * Examples:\r\n         * - Valid: PT501964843\r\n         * - Invalid: PT501964842\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _pt: function(value) {\r\n            if (!/^PT[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [9, 8, 7, 6, 5, 4, 3, 2];\r\n\r\n            for (var i = 0; i < 8; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = 11 - sum % 11;\r\n            if (sum > 9) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.substr(8, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Romanian VAT number\r\n         * Examples:\r\n         * - Valid: RO18547290\r\n         * - Invalid: RO18547291\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _ro: function(value) {\r\n            if (!/^RO[1-9][0-9]{1,9}$/.test(value)) {\r\n                return false;\r\n            }\r\n            value = value.substr(2);\r\n\r\n            var length = value.length,\r\n                weight = [7, 5, 3, 2, 1, 7, 5, 3, 2].slice(10 - length),\r\n                sum    = 0;\r\n            for (var i = 0; i < length - 1; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n\r\n            sum = (10 * sum) % 11 % 10;\r\n            return (sum + '' === value.substr(length - 1, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Russian VAT number (Taxpayer Identification Number - INN)\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _ru: function(value) {\r\n            if (!/^RU([0-9]{9}|[0-9]{12})$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var i = 0;\r\n            if (value.length === 10) {\r\n                var sum    = 0,\r\n                    weight = [2, 4, 10, 3, 5, 9, 4, 6, 8, 0];\r\n                for (i = 0; i < 10; i++) {\r\n                    sum += parseInt(value.charAt(i), 10) * weight[i];\r\n                }\r\n                sum = sum % 11;\r\n                if (sum > 9) {\r\n                    sum = sum % 10;\r\n                }\r\n\r\n                return (sum + '' === value.substr(9, 1));\r\n            } else if (value.length === 12) {\r\n                var sum1    = 0,\r\n                    weight1 = [7, 2, 4, 10, 3, 5, 9, 4, 6, 8, 0],\r\n                    sum2    = 0,\r\n                    weight2 = [3, 7, 2, 4, 10, 3, 5, 9, 4, 6, 8, 0];\r\n\r\n                for (i = 0; i < 11; i++) {\r\n                    sum1 += parseInt(value.charAt(i), 10) * weight1[i];\r\n                    sum2 += parseInt(value.charAt(i), 10) * weight2[i];\r\n                }\r\n                sum1 = sum1 % 11;\r\n                if (sum1 > 9) {\r\n                    sum1 = sum1 % 10;\r\n                }\r\n                sum2 = sum2 % 11;\r\n                if (sum2 > 9) {\r\n                    sum2 = sum2 % 10;\r\n                }\r\n\r\n                return (sum1 + '' === value.substr(10, 1) && sum2 + '' === value.substr(11, 1));\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Validate Serbian VAT number\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _rs: function(value) {\r\n            if (!/^RS[0-9]{9}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum  = 10,\r\n                temp = 0;\r\n            for (var i = 0; i < 8; i++) {\r\n                temp = (parseInt(value.charAt(i), 10) + sum) % 10;\r\n                if (temp === 0) {\r\n                    temp = 10;\r\n                }\r\n                sum = (2 * temp) % 11;\r\n            }\r\n\r\n            return ((sum + parseInt(value.substr(8, 1), 10)) % 10 === 1);\r\n        },\r\n\r\n        /**\r\n         * Validate Swedish VAT number\r\n         * Examples:\r\n         * - Valid: SE123456789701\r\n         * - Invalid: SE123456789101\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _se: function(value) {\r\n            if (!/^SE[0-9]{10}01$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2, 10);\r\n            return $.fn.bootstrapValidator.helpers.luhn(value);\r\n        },\r\n\r\n        /**\r\n         * Validate Slovenian VAT number\r\n         * Examples:\r\n         * - Valid: SI50223054\r\n         * - Invalid: SI50223055\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _si: function(value) {\r\n            if (!/^SI[0-9]{8}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.substr(2);\r\n            var sum    = 0,\r\n                weight = [8, 7, 6, 5, 4, 3, 2];\r\n\r\n            for (var i = 0; i < 7; i++) {\r\n                sum += parseInt(value.charAt(i), 10) * weight[i];\r\n            }\r\n            sum = 11 - sum % 11;\r\n            if (sum === 10) {\r\n                sum = 0;\r\n            }\r\n            return (sum + '' === value.substr(7, 1));\r\n        },\r\n\r\n        /**\r\n         * Validate Slovak VAT number\r\n         * Examples:\r\n         * - Valid: SK2022749619\r\n         * - Invalid: SK2022749618\r\n         *\r\n         * @param {String} value VAT number\r\n         * @returns {Boolean}\r\n         */\r\n        _sk: function(value) {\r\n            if (!/^SK[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            return (parseInt(value.substr(2), 10) % 11 === 0);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.vin = $.extend($.fn.bootstrapValidator.i18n.vin || {}, {\r\n        'default': 'Please enter a valid VIN number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.vin = {\r\n        /**\r\n         * Validate an US VIN (Vehicle Identification Number)\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            // Don't accept I, O, Q characters\r\n            if (!/^[a-hj-npr-z0-9]{8}[0-9xX][a-hj-npr-z0-9]{8}$/i.test(value)) {\r\n                return false;\r\n            }\r\n\r\n            value = value.toUpperCase();\r\n            var chars   = {\r\n                    A: 1,   B: 2,   C: 3,   D: 4,   E: 5,   F: 6,   G: 7,   H: 8,\r\n                    J: 1,   K: 2,   L: 3,   M: 4,   N: 5,           P: 7,           R: 9,\r\n                            S: 2,   T: 3,   U: 4,   V: 5,   W: 6,   X: 7,   Y: 8,   Z: 9,\r\n                    '1': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '0': 0\r\n                },\r\n                weights = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2],\r\n                sum     = 0,\r\n                length  = value.length;\r\n            for (var i = 0; i < length; i++) {\r\n                sum += chars[value.charAt(i) + ''] * weights[i];\r\n            }\r\n\r\n            var reminder = sum % 11;\r\n            if (reminder === 10) {\r\n                reminder = 'X';\r\n            }\r\n\r\n            return (reminder + '') === value.charAt(8);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n;(function($) {\r\n    $.fn.bootstrapValidator.i18n.zipCode = $.extend($.fn.bootstrapValidator.i18n.zipCode || {}, {\r\n        'default': 'Please enter a valid zip code',\r\n        countryNotSupported: 'The country code %s is not supported',\r\n        country: 'Please enter a valid %s',\r\n        countries: {\r\n            'CA': 'Canadian postal code',\r\n            'DK': 'Danish postal code',\r\n            'GB': 'United Kingdom postal code',\r\n            'IT': 'Italian postal code',\r\n            'NL': 'Dutch postal code',\r\n            'SE': 'Swiss postal code',\r\n            'SG': 'Singapore postal code',\r\n            'US': 'US zip code'\r\n        }\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.zipCode = {\r\n        html5Attributes: {\r\n            message: 'message',\r\n            country: 'country'\r\n        },\r\n\r\n        COUNTRY_CODES: ['CA', 'DK', 'GB', 'IT', 'NL', 'SE', 'SG', 'US'],\r\n\r\n        /**\r\n         * Return true if and only if the input value is a valid country zip code\r\n         *\r\n         * @param {BootstrapValidator} validator The validator plugin instance\r\n         * @param {jQuery} $field Field element\r\n         * @param {Object} options Consist of key:\r\n         * - message: The invalid message\r\n         * - country: The country\r\n         *\r\n         * The country can be defined by:\r\n         * - An ISO 3166 country code\r\n         * Currently it supports the following countries:\r\n         *      - US (United States)\r\n         *      - CA (Canada)\r\n         *      - DK (Denmark)\r\n         *      - GB (United Kingdom)\r\n         *      - IT (Italy)\r\n         *      - NL (Netherlands)\r\n         *      - SE (Sweden)\r\n         *      - SG (Singapore)\r\n         *\r\n         * - Name of field which its value defines the country code\r\n         * - Name of callback function that returns the country code\r\n         * - A callback function that returns the country code\r\n         *\r\n         * callback: function(value, validator, $field) {\r\n         *      // value is the value of field\r\n         *      // validator is the BootstrapValidator instance\r\n         *      // $field is jQuery element representing the field\r\n         * }\r\n         *\r\n         * @returns {Boolean|Object}\r\n         */\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '' || !options.country) {\r\n                return true;\r\n            }\r\n\r\n            var country = options.country;\r\n            if (typeof country !== 'string' || $.inArray(country, this.COUNTRY_CODES) === -1) {\r\n                // Try to determine the country\r\n                country = validator.getDynamicOption($field, country);\r\n            }\r\n\r\n            if (!country || $.inArray(country.toUpperCase(), this.COUNTRY_CODES) === -1) {\r\n                return { valid: false, message: $.fn.bootstrapValidator.helpers.format($.fn.bootstrapValidator.i18n.zipCode.countryNotSupported, country) };\r\n            }\r\n\r\n            var isValid = false;\r\n            country = country.toUpperCase();\r\n            switch (country) {\r\n                case 'CA':\r\n                    isValid = /^(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}\\s?[0-9]{1}(?:A|B|C|E|G|H|J|K|L|M|N|P|R|S|T|V|W|X|Y|Z){1}[0-9]{1}$/i.test(value);\r\n                    break;\r\n\r\n                case 'DK':\r\n                    isValid = /^(DK(-|\\s)?)?\\d{4}$/i.test(value);\r\n                    break;\r\n\r\n                case 'GB':\r\n                    isValid = this._gb(value);\r\n                    break;\r\n\r\n                // http://en.wikipedia.org/wiki/List_of_postal_codes_in_Italy\r\n                case 'IT':\r\n                    isValid = /^(I-|IT-)?\\d{5}$/i.test(value);\r\n                    break;\r\n\r\n                // http://en.wikipedia.org/wiki/Postal_codes_in_the_Netherlands\r\n                case 'NL':\r\n                    isValid = /^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(value);\r\n                    break;\r\n\r\n                case 'SE':\r\n                    isValid = /^(S-)?\\d{3}\\s?\\d{2}$/i.test(value);\r\n                    break;\r\n\r\n                case 'SG':\r\n                    isValid = /^([0][1-9]|[1-6][0-9]|[7]([0-3]|[5-9])|[8][0-2])(\\d{4})$/i.test(value);\r\n                    break;\r\n\r\n                case 'US':\r\n                /* falls through */\r\n                default:\r\n                    isValid = /^\\d{4,5}([\\-]?\\d{4})?$/.test(value);\r\n                    break;\r\n            }\r\n\r\n            return {\r\n                valid: isValid,\r\n                message: $.fn.bootstrapValidator.helpers.format(options.message || $.fn.bootstrapValidator.i18n.zipCode.country, $.fn.bootstrapValidator.i18n.zipCode.countries[country])\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Validate United Kingdom postcode\r\n         * Examples:\r\n         * - Standard: EC1A 1BB, W1A 1HQ, M1 1AA, B33 8TH, CR2 6XH, DN55 1PT\r\n         * - Special cases:\r\n         * AI-2640, ASCN 1ZZ, GIR 0AA\r\n         *\r\n         * @see http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom\r\n         * @param {String} value The postcode\r\n         * @returns {Boolean}\r\n         */\r\n        _gb: function(value) {\r\n            var firstChar  = '[ABCDEFGHIJKLMNOPRSTUWYZ]',     // Does not accept QVX\r\n                secondChar = '[ABCDEFGHKLMNOPQRSTUVWXY]',     // Does not accept IJZ\r\n                thirdChar  = '[ABCDEFGHJKPMNRSTUVWXY]',\r\n                fourthChar = '[ABEHMNPRVWXY]',\r\n                fifthChar  = '[ABDEFGHJLNPQRSTUWXYZ]',\r\n                regexps    = [\r\n                    // AN NAA, ANN NAA, AAN NAA, AANN NAA format\r\n                    new RegExp('^(' + firstChar + '{1}' + secondChar + '?[0-9]{1,2})(\\\\s*)([0-9]{1}' + fifthChar + '{2})$', 'i'),\r\n                    // ANA NAA\r\n                    new RegExp('^(' + firstChar + '{1}[0-9]{1}' + thirdChar + '{1})(\\\\s*)([0-9]{1}' + fifthChar + '{2})$', 'i'),\r\n                    // AANA NAA\r\n                    new RegExp('^(' + firstChar + '{1}' + secondChar + '{1}?[0-9]{1}' + fourthChar + '{1})(\\\\s*)([0-9]{1}' + fifthChar + '{2})$', 'i'),\r\n\r\n                    new RegExp('^(BF1)(\\\\s*)([0-6]{1}[ABDEFGHJLNPQRST]{1}[ABDEFGHJLNPQRSTUWZYZ]{1})$', 'i'),        // BFPO postcodes\r\n                    /^(GIR)(\\s*)(0AA)$/i,                       // Special postcode GIR 0AA\r\n                    /^(BFPO)(\\s*)([0-9]{1,4})$/i,               // Standard BFPO numbers\r\n                    /^(BFPO)(\\s*)(c\\/o\\s*[0-9]{1,3})$/i,        // c/o BFPO numbers\r\n                    /^([A-Z]{4})(\\s*)(1ZZ)$/i,                  // Overseas Territories\r\n                    /^(AI-2640)$/i                              // Anguilla\r\n                ];\r\n            for (var i = 0; i < regexps.length; i++) {\r\n                if (regexps[i].test(value)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n}(window.jQuery));\r\n\r\n//=============自定义验证器====================\r\n//登录名验证\r\n(function ($) {\r\n    $.fn.bootstrapValidator.i18n.loginName = $.extend($.fn.bootstrapValidator.i18n.loginName || {}, {\r\n        'default' : 'Please enter a valid user name'\r\n    });\r\n    $.fn.bootstrapValidator.validators.loginName = {\r\n        validate : function (validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            var regExp = /^[a-zA-Z0-9_]{1,}$/;\r\n            return regExp.test(value);\r\n        }\r\n    };\r\n})(window.jQuery);\r\n// 不含汉字\r\n(function ($) {\r\n    $.fn.bootstrapValidator.i18n.noChinese = $.extend($.fn.bootstrapValidator.i18n.noChinese || {}, {\r\n        'default' : 'Please enter string which has nothing chinese'\r\n    });\r\n    $.fn.bootstrapValidator.validators.noChinese = {\r\n        validate : function (validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            var regExp = /[\\u4e00-\\u9fa5]/g;\r\n            return !regExp.test(value);\r\n        }\r\n    };\r\n})(window.jQuery);\r\n//手机号\r\n(function($) {\r\n    $.fn.bootstrapValidator.i18n.mobile = $.extend($.fn.bootstrapValidator.i18n.mobile || {}, {\r\n        //需要在 validator.zh-CN.js 加入对应的默认错误信息\r\n        'default': 'Please enter a valid mobile number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.mobile = {\r\n        \r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            var mobileRegExp = /^1[34578]\\d{9}$/;\r\n            return mobileRegExp.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n//固定电话\r\n(function($) {\r\n    $.fn.bootstrapValidator.i18n.tel = $.extend($.fn.bootstrapValidator.i18n.tel || {}, {\r\n        //需要在 validator.zh-CN.js 加入对应的默认错误信息\r\n        'default': 'Please enter a valid telephone number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.tel = {\r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            var telRegExp = /(^400\\-{0,1}\\d+\\-{0,1}\\d+$)|^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$/;\r\n            return telRegExp.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n//固定电话或者手机号\r\n(function($) {\r\n    $.fn.bootstrapValidator.i18n.telOrMobile = $.extend($.fn.bootstrapValidator.i18n.telOrMobile || {}, {\r\n        //需要在 validator.zh-CN.js 加入对应的默认错误信息\r\n        'default': 'Please enter a valid telephone or mobile number'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.telOrMobile = {\r\n       \r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            \r\n            if (/^1[34578]\\d{9}$/.test(value)) {\r\n                return true;\r\n            }\r\n            \r\n            return /(^400\\-{0,1}\\d+\\-{0,1}\\d+$)|^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$/.test(value);\r\n        }\r\n    };\r\n}(window.jQuery));\r\n//只包括小时和分钟的输入验证器\r\n(function($) {\r\n    $.fn.bootstrapValidator.i18n.time = $.extend($.fn.bootstrapValidator.i18n.time || {}, {\r\n        //需要在 validator.zh-CN.js 加入对应的默认错误信息\r\n        'default': 'Please enter a valid time'\r\n    });\r\n\r\n    $.fn.bootstrapValidator.validators.time = {\r\n        \r\n        validate: function(validator, $field, options) {\r\n            var value = $field.val();\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n            //\\uff1a 为中文冒号的unicode码\r\n            var rst = /^((0?\\d)|1\\d|2[0-3])\\s*[\\uff1a\\:]\\s*([0-5]\\d)$/.test(value);\r\n            \r\n            if(!rst) return false;\r\n            \r\n            var times = value.replace('\\uff1a', ':').split(':'),\r\n                h = parseInt($.trim(times[0]), 10),  // hours\r\n                m = $.trim(times[1]);  // minutes\r\n            h = h < 10 ? 0 + '' + h : h;\r\n            $field.val(h + ':' + m);\r\n            \r\n            if(!options.startTimeField) return true;\r\n            \r\n            var $startTimeField = validator.$form\r\n                .find('[name=' + options.startTimeField + ']');\r\n            if(!$startTimeField[0])\r\n                throw 'startTimeField can not be found!';\r\n            if(!validator.isValidField($startTimeField))\r\n                return { valid: false, message: '请先输入有效的开始时间' };\r\n            var startTime = $startTimeField.val().split(':'),\r\n                startVal = parseInt(startTime[0], 10) * 60 + parseInt(startTime[1], 10),\r\n                endVal = parseInt(times[0], 10) * 60 + parseInt(times[1], 10);\r\n            if(endVal <= startVal)\r\n                return { valid: false, message: '结束时间不能小于或等于开始时间' };\r\n            return true;\r\n            \r\n        }\r\n    };\r\n}(window.jQuery));\r\n\r\n;(function($) {\r\n    /**\r\n     * Traditional Chinese language package\r\n     * Translated by @tureki\r\n     */\r\n    $.fn.bootstrapValidator.i18n = $.extend(true, $.fn.bootstrapValidator.i18n, {\r\n        base64: {\r\n            'default': '请输入有效的Base64编码'\r\n        },\r\n        between: {\r\n            'default': '请输入不小于%s 且不大于%s 的值',\r\n            notInclusive: '请输入不小于等于%s 且不大于等于%s 的值'\r\n        },\r\n        callback: {\r\n            'default': '请输入有效的值'\r\n        },\r\n        choice: {\r\n            'default': '请输入有效的值',\r\n            less: '最少选择 %s 个选项',\r\n            more: '最多选择 %s 个选项',\r\n            between: '请选择 %s 至 %s 个选项'\r\n        },\r\n        creditCard: {\r\n            'default': '请输入有效的信用卡号码'\r\n        },\r\n        cusip: {\r\n            'default': '请输入有效的CUSIP'\r\n        },\r\n        cvv: {\r\n            'default': '请输入有效的CVV'\r\n        },\r\n        date: {\r\n            'default': '请输入有效的日期'\r\n        },\r\n        different: {\r\n            'default': '请输入不一样的值'\r\n        },\r\n        digits: {\r\n             'default': '只能输入数字'\r\n        },\r\n        ean: {\r\n            'default': '请输入有效的EAN'\r\n        },\r\n        emailAddress: {\r\n            'default': '请输入有效的EMAIL'\r\n        },\r\n        file: {\r\n            'default': '请选择有效的档案'\r\n        },\r\n        greaterThan: {\r\n            'default': '请输入大于或等于 %s 的值',\r\n            notInclusive: '请输入大于 %s 的值'\r\n        },\r\n        grid: {\r\n            'default': '请输入有效的GRId'\r\n        },\r\n        hex: {\r\n            'default': '请输入有效的16位元码'\r\n        },\r\n        hexColor: {\r\n            'default': '请输入有效的16位色码'\r\n        },\r\n        iban: {\r\n            'default': '请输入有效的IBAN ',\r\n            countryNotSupported: '不支援该国家代码%s',\r\n            country: '请输入有效的 %s IBAN编号 ',\r\n            countries: {\r\n                AD: '安道​​尔',\r\n                AE: '阿联酋',\r\n                AL: '阿尔巴尼亚',\r\n                AO: '安哥拉',\r\n                AT: '奥地利',\r\n                AZ: '阿塞拜疆',\r\n                BA: '波斯尼亚和黑塞哥维那',\r\n                BE: '比利时',\r\n                BF: '布基纳法索',\r\n                BG: '保加利亚',\r\n                BH: '巴林',\r\n                BI: '布隆迪',\r\n                BJ: '贝宁',\r\n                BR: '巴西',\r\n                CH: '瑞士',\r\n                CI: '象牙海岸',\r\n                CM: '喀麦隆',\r\n                CR: '哥斯达黎加',\r\n                CV: '佛得角',\r\n                CY: '塞浦路斯',\r\n                CZ: '捷克共和国',\r\n                DE: '德国',\r\n                DK: '丹麦',\r\n                DO: '多明尼加共和国',\r\n                DZ: '阿尔及利亚',\r\n                EE: '爱沙尼亚',\r\n                ES: '西班牙',\r\n                FI: '芬兰',\r\n                FO: '法罗群岛',\r\n                FR: '法国',\r\n                GB: '英国',\r\n                GE: '格鲁吉亚',\r\n                GI: '直布罗陀',\r\n                GL: '格陵兰岛',\r\n                GR: '希腊',\r\n                GT: '危地马拉',\r\n                HR: '克罗地亚',\r\n                HU: '匈牙利',\r\n                IE: '爱尔兰',\r\n                IL: '以色列',\r\n                IR: '伊朗',\r\n                IS: '冰岛',\r\n                IT: '意大利',\r\n                JO: '乔丹',\r\n                KW: '科威特',\r\n                KZ: '哈萨克斯坦',\r\n                LB: '黎巴嫩',\r\n                LI: '列支敦士登',\r\n                LT: '立陶宛',\r\n                LU: '卢森堡',\r\n                LV: '拉脱维亚',\r\n                MC: '摩纳哥',\r\n                MD: '摩尔多瓦',\r\n                ME: '黑山共和国',\r\n                MG: '马达加斯加',\r\n                MK: '马其顿',\r\n                ML: '马里',\r\n                MR: '毛里塔尼亚',\r\n                MT: '马耳他',\r\n                MU: '毛里求斯',\r\n                MZ: '莫桑比克',\r\n                NL: '荷兰',\r\n                NO: '挪威',\r\n                PK: '巴基斯坦',\r\n                PL: '波兰',\r\n                PS: '巴勒斯坦',\r\n                PT: '葡萄牙',\r\n                QA: '卡塔尔',\r\n                RO: '罗马尼亚',\r\n                RS: '塞尔维亚',\r\n                SA: '沙特阿拉伯',\r\n                SE: '瑞典',\r\n                SI: '斯洛文尼亚',\r\n                SK: '斯洛伐克',\r\n                SM: '圣马力诺',\r\n                SN: '塞内加尔',\r\n                TN: '突尼斯',\r\n                TR: '土耳其',\r\n                VG: '英属维尔京群岛'\r\n            }\r\n        },\r\n        id: {\r\n            'default': '请输入有效的身份证字号码',\r\n            countryNotSupported: '不支援该国家代码%s',\r\n            country: '请输入有效的%s 身份证字号码',\r\n            countries: {\r\n                BA: '波斯尼亚和黑塞哥维那',\r\n                BG: '保加利亚',\r\n                BR: '巴西',\r\n                CH: '瑞士',\r\n                CL: '智利',\r\n                CZ: '捷克',\r\n                DK: '丹麦',\r\n                EE: '爱沙尼亚',\r\n                ES: '西班牙语',\r\n                FI: '芬兰',\r\n                HR: '克罗地亚',\r\n                IE: '爱尔兰',\r\n                IS: '冰岛',\r\n                LT: '立陶宛',\r\n                LV: '拉脱维亚语',\r\n                ME: '黑山共和国',\r\n                MK: '马其顿',\r\n                NL: '荷兰',\r\n                RO: '罗马尼亚',\r\n                RS: '塞尔维亚',\r\n                SE: '瑞典',\r\n                SI: '斯洛文尼亚',\r\n                SK: '斯洛伐克',\r\n                SM: '圣马力诺',\r\n                ZA: '南非'\r\n            }\r\n        },\r\n        identical: {\r\n            'default': '请输入一样的值'\r\n        },\r\n        imei: {\r\n            'default': '请输入有效的IMEI'\r\n        },\r\n        integer: {\r\n            'default': '请输入有效的整数'\r\n        },\r\n        ip: {\r\n            'default': '请输入有效的IP位址',\r\n            ipv4: '请输入有效的IPv4位址',\r\n            ipv6: '请输入有效的IPv6位址'\r\n        },\r\n        isbn: {\r\n            'default': '请输入有效的ISBN'\r\n        },\r\n        isin: {\r\n            'default': '请输入有效的ISIN'\r\n        },\r\n        ismn: {\r\n            'default': '请输入有效的ISMN'\r\n        },\r\n        issn: {\r\n            'default': '请输入有效的ISSN'\r\n        },\r\n        lessThan: {\r\n            'default': '请输入小于或等于 %s 的值',\r\n            notInclusive: '请输入小于 %s 的值'\r\n        },\r\n        mac: {\r\n            'default': '请输入有效的MAC位址'\r\n        },\r\n        \r\n        mobile: {\r\n            'default': '请输入有效的手机号码'\r\n        },\r\n        notEmpty: {\r\n            'default': '栏位不能为空'\r\n        },\r\n        numeric: {\r\n            'default': '请输入有效的浮点数'\r\n        },\r\n        phone: {\r\n            'default': '请输入有效的电话号码',\r\n            countryNotSupported: '不支援该国家代码%s',\r\n            country: '请输入有效的 %s 电话号码',\r\n            countries: {\r\n                GB: '英国',\r\n                US: '美国'\r\n            }\r\n        },\r\n        regexp: {\r\n            'default': '请输入有效的值'\r\n        },\r\n        remote: {\r\n            'default': '请输入有效的值'\r\n        },\r\n        rtn: {\r\n            'default': '请输入有效的RTN'\r\n        },\r\n        sedol: {\r\n            'default': '请输入有效的SEDOL'\r\n        },\r\n        siren: {\r\n            'default': '请输入有效的SIREN'\r\n        },\r\n        siret: {\r\n            'default': '请输入有效的SIRET'\r\n        },\r\n        step: {\r\n            'default': '请输入 %s 个有效步骤'\r\n        },\r\n        stringCase: {\r\n            'default': '只能输入小写的值',\r\n            upper: '只能输入大写的值'\r\n        },\r\n        stringLength: {\r\n            'default': '请输入符合长度限制的值',\r\n            less: '请输入小于 %s 个字',\r\n            more: '请输入大于 %s 个字',\r\n            between: '请输入介于 %s 至 %s 个字'\r\n        },\r\n        tel: {\r\n            'default': '请输入有效的固定电话号码'\r\n        },\r\n        telOrMobile: {\r\n            'default': '请输入有效的固定电话号码或者手机号码'\r\n        },\r\n        time: {\r\n            'default': '请输入有效的时间'\r\n        },\r\n        uri: {\r\n            'default': '请输入一个有效的链接'\r\n        },\r\n        uuid: {\r\n            'default': '请输入有效的UUID',\r\n            version: '请输入符合版本 %s 的UUID'\r\n        },\r\n        vat: {\r\n            'default': '请输入有效的VAT',\r\n            countryNotSupported: '不支援该国家代码%s',\r\n            country: '请输入有效的 %s VAT',\r\n            countries: {\r\n                AT: '奥地利',\r\n                BE: '比利时',\r\n                BG: '保加利亚',\r\n                CH: '瑞士',\r\n                CY: '塞浦路斯',\r\n                CZ: '捷克',\r\n                DE: '德语',\r\n                DK: '丹麦',\r\n                EE: '爱沙尼亚',\r\n                ES: '西班牙',\r\n                FI: '芬兰',\r\n                FR: '法语',\r\n                GB: '英国',\r\n                GR: '希腊',\r\n                EL: '希腊',\r\n                HU: '匈牙利',\r\n                HR: '克罗地亚',\r\n                IE: '爱尔兰',\r\n                IT: '意大利',\r\n                LT: '立陶宛',\r\n                LU: '卢森堡',\r\n                LV: '拉脱维亚语',\r\n                MT: '马耳他',\r\n                NL: '荷兰',\r\n                NO: '挪威',\r\n                PL: '波兰',\r\n                PT: '葡萄牙',\r\n                RO: '罗马尼亚',\r\n                RU: '俄罗斯',\r\n                RS: '塞尔维亚',\r\n                SE: '瑞典',\r\n                SI: '斯洛文尼亚',\r\n                SK: '斯洛伐克'\r\n            }\r\n        },\r\n        vin: {\r\n            'default': '请输入有效的VIN'\r\n        },\r\n        zipCode: {\r\n            'default': '请输入有效的邮政编码',\r\n            countryNotSupported: '不支援该国家代码%s',\r\n            country: '请输入有效的 %s',\r\n            countries: {\r\n                'CA': '加拿大 邮政编码',\r\n                'DK': '丹麦 邮政编码',\r\n                'GB': '英国 邮政编码',\r\n                'IT': '意大利 邮政编码',\r\n                'NL': '荷兰 邮政编码',\r\n                'SE': '瑞士 邮政编码',\r\n                'SG': '新加坡 邮政编码',\r\n                'US': '美国 邮政编码'\r\n            }\r\n        },\r\n\t\tloginName : {\r\n\t\t\t'default' : '请输入有效的登录名'\r\n\t\t},\r\n\t\tnoChinese : {\r\n\t\t\t'default' : '请输入不含中文的字符串'\r\n\t\t}\r\n    });\r\n}(window.jQuery));\r\n;/*!\n * jQuery Form Plugin\n * version: 3.51.0-2014.06.20\n * Requires jQuery v1.5 or later\n * Copyright (c) 2014 M. Alsup\n * Examples and documentation at: http://malsup.com/jquery/form/\n * Project repository: https://github.com/malsup/form\n * Dual licensed under the MIT and GPL licenses.\n * https://github.com/malsup/form#copyright-and-license \n */\n/*global ActiveXObject */\n\n// AMD support\n(function (factory) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        // using AMD; register as anon module\n        define(['jquery'], factory);\n    } else {\n        // no AMD; invoke directly\n        factory( (typeof(jQuery) != 'undefined') ? jQuery : window.Zepto );\n    }\n}\n\n(function($) {\n\"use strict\";\n\n/*\n    Usage Note:\n    -----------\n    Do not use both ajaxSubmit and ajaxForm on the same form.  These\n    functions are mutually exclusive.  Use ajaxSubmit if you want\n    to bind your own submit handler to the form.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').on('submit', function(e) {\n            e.preventDefault(); // <-- important\n            $(this).ajaxSubmit({\n                target: '#output'\n            });\n        });\n    });\n\n    Use ajaxForm when you want the plugin to manage all the event binding\n    for you.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').ajaxForm({\n            target: '#output'\n        });\n    });\n\n    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the\n    form does not have to exist when you invoke ajaxForm:\n\n    $('#myForm').ajaxForm({\n        delegation: true,\n        target: '#output'\n    });\n\n    When using ajaxForm, the ajaxSubmit function will be invoked for you\n    at the appropriate time.\n*/\n\n/**\n * Feature detection\n */\nvar feature = {};\nfeature.fileapi = $(\"<input type='file'/>\").get(0).files !== undefined;\nfeature.formdata = window.FormData !== undefined;\n\nvar hasProp = !!$.fn.prop;\n\n// attr2 uses prop when it can but checks the return type for\n// an expected string.  this accounts for the case where a form \n// contains inputs with names like \"action\" or \"method\"; in those\n// cases \"prop\" returns the element\n$.fn.attr2 = function() {\n    if ( ! hasProp ) {\n        return this.attr.apply(this, arguments);\n    }\n    var val = this.prop.apply(this, arguments);\n    if ( ( val && val.jquery ) || typeof val === 'string' ) {\n        return val;\n    }\n    return this.attr.apply(this, arguments);\n};\n\n/**\n * ajaxSubmit() provides a mechanism for immediately submitting\n * an HTML form using AJAX.\n */\n$.fn.ajaxSubmit = function(options) {\n    /*jshint scripturl:true */\n\n    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\n    if (!this.length) {\n        log('ajaxSubmit: skipping submit process - no element selected');\n        return this;\n    }\n\n    var method, action, url, $form = this;\n\n    if (typeof options == 'function') {\n        options = { success: options };\n    }\n    else if ( options === undefined ) {\n        options = {};\n    }\n\n    method = options.type || this.attr2('method');\n    action = options.url  || this.attr2('action');\n\n    url = (typeof action === 'string') ? $.trim(action) : '';\n    url = url || window.location.href || '';\n    if (url) {\n        // clean url (don't include hash vaue)\n        url = (url.match(/^([^#]+)/)||[])[1];\n    }\n\n    options = $.extend(true, {\n        url:  url,\n        success: $.ajaxSettings.success,\n        type: method || $.ajaxSettings.type,\n        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'\n    }, options);\n\n    // hook for manipulating the form data before it is extracted;\n    // convenient for use with rich editors like tinyMCE or FCKEditor\n    var veto = {};\n    this.trigger('form-pre-serialize', [this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\n        return this;\n    }\n\n    // provide opportunity to alter form data before it is serialized\n    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSerialize callback');\n        return this;\n    }\n\n    var traditional = options.traditional;\n    if ( traditional === undefined ) {\n        traditional = $.ajaxSettings.traditional;\n    }\n\n    var elements = [];\n    var qx, a = this.formToArray(options.semantic, elements);\n    if (options.data) {\n        options.extraData = options.data;\n        qx = $.param(options.data, traditional);\n    }\n\n    // give pre-submit callback an opportunity to abort the submit\n    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSubmit callback');\n        return this;\n    }\n\n    // fire vetoable 'validate' event\n    this.trigger('form-submit-validate', [a, this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');\n        return this;\n    }\n\n    var q = $.param(a, traditional);\n    if (qx) {\n        q = ( q ? (q + '&' + qx) : qx );\n    }\n    if (options.type.toUpperCase() == 'GET') {\n        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\n        options.data = null;  // data is null for 'get'\n    }\n    else {\n        options.data = q; // data is the query string for 'post'\n    }\n\n    var callbacks = [];\n    if (options.resetForm) {\n        callbacks.push(function() { $form.resetForm(); });\n    }\n    if (options.clearForm) {\n        callbacks.push(function() { $form.clearForm(options.includeHidden); });\n    }\n\n    // perform a load on the target only if dataType is not provided\n    if (!options.dataType && options.target) {\n        var oldSuccess = options.success || function(){};\n        callbacks.push(function(data) {\n            var fn = options.replaceTarget ? 'replaceWith' : 'html';\n            $(options.target)[fn](data).each(oldSuccess, arguments);\n        });\n    }\n    else if (options.success) {\n        callbacks.push(options.success);\n    }\n\n    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\n        var context = options.context || this ;    // jQuery 1.4+ supports scope context\n        for (var i=0, max=callbacks.length; i < max; i++) {\n            callbacks[i].apply(context, [data, status, xhr || $form, $form]);\n        }\n    };\n\n    if (options.error) {\n        var oldError = options.error;\n        options.error = function(xhr, status, error) {\n            var context = options.context || this;\n            oldError.apply(context, [xhr, status, error, $form]);\n        };\n    }\n\n     if (options.complete) {\n        var oldComplete = options.complete;\n        options.complete = function(xhr, status) {\n            var context = options.context || this;\n            oldComplete.apply(context, [xhr, status, $form]);\n        };\n    }\n\n    // are there files to upload?\n\n    // [value] (issue #113), also see comment:\n    // https://github.com/malsup/form/commit/588306aedba1de01388032d5f42a60159eea9228#commitcomment-2180219\n    var fileInputs = $('input[type=file]:enabled', this).filter(function() { return $(this).val() !== ''; });\n\n    var hasFileInputs = fileInputs.length > 0;\n    var mp = 'multipart/form-data';\n    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);\n\n    var fileAPI = feature.fileapi && feature.formdata;\n    log(\"fileAPI :\" + fileAPI);\n    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;\n\n    var jqxhr;\n\n    // options.iframe allows user to force iframe mode\n    // 06-NOV-09: now defaulting to iframe mode if file input is detected\n    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {\n        // hack to fix Safari hang (thanks to Tim Molendijk for this)\n        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\n        if (options.closeKeepAlive) {\n            $.get(options.closeKeepAlive, function() {\n                jqxhr = fileUploadIframe(a);\n            });\n        }\n        else {\n            jqxhr = fileUploadIframe(a);\n        }\n    }\n    else if ((hasFileInputs || multipart) && fileAPI) {\n        jqxhr = fileUploadXhr(a);\n    }\n    else {\n        jqxhr = $.ajax(options);\n    }\n\n    $form.removeData('jqxhr').data('jqxhr', jqxhr);\n\n    // clear element array\n    for (var k=0; k < elements.length; k++) {\n        elements[k] = null;\n    }\n\n    // fire 'notify' event\n    this.trigger('form-submit-notify', [this, options]);\n    return this;\n\n    // utility fn for deep serialization\n    function deepSerialize(extraData){\n        var serialized = $.param(extraData, options.traditional).split('&');\n        var len = serialized.length;\n        var result = [];\n        var i, part;\n        for (i=0; i < len; i++) {\n            // #252; undo param space replacement\n            serialized[i] = serialized[i].replace(/\\+/g,' ');\n            part = serialized[i].split('=');\n            // #278; use array instead of object storage, favoring array serializations\n            result.push([decodeURIComponent(part[0]), decodeURIComponent(part[1])]);\n        }\n        return result;\n    }\n\n     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)\n    function fileUploadXhr(a) {\n        var formdata = new FormData();\n\n        for (var i=0; i < a.length; i++) {\n            formdata.append(a[i].name, a[i].value);\n        }\n\n        if (options.extraData) {\n            var serializedData = deepSerialize(options.extraData);\n            for (i=0; i < serializedData.length; i++) {\n                if (serializedData[i]) {\n                    formdata.append(serializedData[i][0], serializedData[i][1]);\n                }\n            }\n        }\n\n        options.data = null;\n\n        var s = $.extend(true, {}, $.ajaxSettings, options, {\n            contentType: false,\n            processData: false,\n            cache: false,\n            type: method || 'POST'\n        });\n\n        if (options.uploadProgress) {\n            // workaround because jqXHR does not expose upload property\n            s.xhr = function() {\n                var xhr = $.ajaxSettings.xhr();\n                if (xhr.upload) {\n                    xhr.upload.addEventListener('progress', function(event) {\n                        var percent = 0;\n                        var position = event.loaded || event.position; /*event.position is deprecated*/\n                        var total = event.total;\n                        if (event.lengthComputable) {\n                            percent = Math.ceil(position / total * 100);\n                        }\n                        options.uploadProgress(event, position, total, percent);\n                    }, false);\n                }\n                return xhr;\n            };\n        }\n\n        s.data = null;\n        var beforeSend = s.beforeSend;\n        s.beforeSend = function(xhr, o) {\n            //Send FormData() provided by user\n            if (options.formData) {\n                o.data = options.formData;\n            }\n            else {\n                o.data = formdata;\n            }\n            if(beforeSend) {\n                beforeSend.call(this, xhr, o);\n            }\n        };\n        return $.ajax(s);\n    }\n\n    // private function for handling file uploads (hat tip to YAHOO!)\n    function fileUploadIframe(a) {\n        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\n        var deferred = $.Deferred();\n\n        // #341\n        deferred.abort = function(status) {\n            xhr.abort(status);\n        };\n\n        if (a) {\n            // ensure that every serialized input is still enabled\n            for (i=0; i < elements.length; i++) {\n                el = $(elements[i]);\n                if ( hasProp ) {\n                    el.prop('disabled', false);\n                }\n                else {\n                    el.removeAttr('disabled');\n                }\n            }\n        }\n\n        s = $.extend(true, {}, $.ajaxSettings, options);\n        s.context = s.context || s;\n        id = 'jqFormIO' + (new Date().getTime());\n        if (s.iframeTarget) {\n            $io = $(s.iframeTarget);\n            n = $io.attr2('name');\n            if (!n) {\n                $io.attr2('name', id);\n            }\n            else {\n                id = n;\n            }\n        }\n        else {\n            $io = $('<iframe name=\"' + id + '\" src=\"'+ s.iframeSrc +'\" />');\n            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });\n        }\n        io = $io[0];\n\n\n        xhr = { // mock object\n            aborted: 0,\n            responseText: null,\n            responseXML: null,\n            status: 0,\n            statusText: 'n/a',\n            getAllResponseHeaders: function() {},\n            getResponseHeader: function() {},\n            setRequestHeader: function() {},\n            abort: function(status) {\n                var e = (status === 'timeout' ? 'timeout' : 'aborted');\n                log('aborting upload... ' + e);\n                this.aborted = 1;\n\n                try { // #214, #257\n                    if (io.contentWindow.document.execCommand) {\n                        io.contentWindow.document.execCommand('Stop');\n                    }\n                }\n                catch(ignore) {}\n\n                $io.attr('src', s.iframeSrc); // abort op in progress\n                xhr.error = e;\n                if (s.error) {\n                    s.error.call(s.context, xhr, e, status);\n                }\n                if (g) {\n                    $.event.trigger(\"ajaxError\", [xhr, s, e]);\n                }\n                if (s.complete) {\n                    s.complete.call(s.context, xhr, e);\n                }\n            }\n        };\n\n        g = s.global;\n        // trigger ajax global events so that activity/block indicators work like normal\n        if (g && 0 === $.active++) {\n            $.event.trigger(\"ajaxStart\");\n        }\n        if (g) {\n            $.event.trigger(\"ajaxSend\", [xhr, s]);\n        }\n\n        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\n            if (s.global) {\n                $.active--;\n            }\n            deferred.reject();\n            return deferred;\n        }\n        if (xhr.aborted) {\n            deferred.reject();\n            return deferred;\n        }\n\n        // add submitting element to data if we know it\n        sub = form.clk;\n        if (sub) {\n            n = sub.name;\n            if (n && !sub.disabled) {\n                s.extraData = s.extraData || {};\n                s.extraData[n] = sub.value;\n                if (sub.type == \"image\") {\n                    s.extraData[n+'.x'] = form.clk_x;\n                    s.extraData[n+'.y'] = form.clk_y;\n                }\n            }\n        }\n\n        var CLIENT_TIMEOUT_ABORT = 1;\n        var SERVER_ABORT = 2;\n                \n        function getDoc(frame) {\n            /* it looks like contentWindow or contentDocument do not\n             * carry the protocol property in ie8, when running under ssl\n             * frame.document is the only valid response document, since\n             * the protocol is know but not on the other two objects. strange?\n             * \"Same origin policy\" http://en.wikipedia.org/wiki/Same_origin_policy\n             */\n            \n            var doc = null;\n            \n            // IE8 cascading access check\n            try {\n                if (frame.contentWindow) {\n                    doc = frame.contentWindow.document;\n                }\n            } catch(err) {\n                // IE8 access denied under ssl & missing protocol\n                log('cannot get iframe.contentWindow document: ' + err);\n            }\n\n            if (doc) { // successful getting content\n                return doc;\n            }\n\n            try { // simply checking may throw in ie8 under ssl or mismatched protocol\n                doc = frame.contentDocument ? frame.contentDocument : frame.document;\n            } catch(err) {\n                // last attempt\n                log('cannot get iframe.contentDocument: ' + err);\n                doc = frame.document;\n            }\n            return doc;\n        }\n\n        // Rails CSRF hack (thanks to Yvan Barthelemy)\n        var csrf_token = $('meta[name=csrf-token]').attr('content');\n        var csrf_param = $('meta[name=csrf-param]').attr('content');\n        if (csrf_param && csrf_token) {\n            s.extraData = s.extraData || {};\n            s.extraData[csrf_param] = csrf_token;\n        }\n\n        // take a breath so that pending repaints get some cpu time before the upload starts\n        function doSubmit() {\n            // make sure form attrs are set\n            var t = $form.attr2('target'), \n                a = $form.attr2('action'), \n                mp = 'multipart/form-data',\n                et = $form.attr('enctype') || $form.attr('encoding') || mp;\n\n            // update form attrs in IE friendly way\n            form.setAttribute('target',id);\n            if (!method || /post/i.test(method) ) {\n                form.setAttribute('method', 'POST');\n            }\n            if (a != s.url) {\n                form.setAttribute('action', s.url);\n            }\n\n            // ie borks in some cases when setting encoding\n            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {\n                $form.attr({\n                    encoding: 'multipart/form-data',\n                    enctype:  'multipart/form-data'\n                });\n            }\n\n            // support timout\n            if (s.timeout) {\n                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);\n            }\n\n            // look for server aborts\n            function checkState() {\n                try {\n                    var state = getDoc(io).readyState;\n                    log('state = ' + state);\n                    if (state && state.toLowerCase() == 'uninitialized') {\n                        setTimeout(checkState,50);\n                    }\n                }\n                catch(e) {\n                    log('Server abort: ' , e, ' (', e.name, ')');\n                    cb(SERVER_ABORT);\n                    if (timeoutHandle) {\n                        clearTimeout(timeoutHandle);\n                    }\n                    timeoutHandle = undefined;\n                }\n            }\n\n            // add \"extra\" data to form if provided in options\n            var extraInputs = [];\n            try {\n                if (s.extraData) {\n                    for (var n in s.extraData) {\n                        if (s.extraData.hasOwnProperty(n)) {\n                           // if using the $.param format that allows for multiple values with the same name\n                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+s.extraData[n].name+'\">').val(s.extraData[n].value)\n                                   .appendTo(form)[0]);\n                           } else {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+n+'\">').val(s.extraData[n])\n                                   .appendTo(form)[0]);\n                           }\n                        }\n                    }\n                }\n\n                if (!s.iframeTarget) {\n                    // add iframe to doc and submit the form\n                    $io.appendTo('body');\n                }\n                if (io.attachEvent) {\n                    io.attachEvent('onload', cb);\n                }\n                else {\n                    io.addEventListener('load', cb, false);\n                }\n                setTimeout(checkState,15);\n\n                try {\n                    form.submit();\n                } catch(err) {\n                    // just in case form has element with name/id of 'submit'\n                    var submitFn = document.createElement('form').submit;\n                    submitFn.apply(form);\n                }\n            }\n            finally {\n                // reset attrs and remove \"extra\" input elements\n                form.setAttribute('action',a);\n                form.setAttribute('enctype', et); // #380\n                if(t) {\n                    form.setAttribute('target', t);\n                } else {\n                    $form.removeAttr('target');\n                }\n                $(extraInputs).remove();\n            }\n        }\n\n        if (s.forceSync) {\n            doSubmit();\n        }\n        else {\n            setTimeout(doSubmit, 10); // this lets dom updates render\n        }\n\n        var data, doc, domCheckCount = 50, callbackProcessed;\n\n        function cb(e) {\n            if (xhr.aborted || callbackProcessed) {\n                return;\n            }\n            \n            doc = getDoc(io);\n            if(!doc) {\n                log('cannot access response document');\n                e = SERVER_ABORT;\n            }\n            if (e === CLIENT_TIMEOUT_ABORT && xhr) {\n                xhr.abort('timeout');\n                deferred.reject(xhr, 'timeout');\n                return;\n            }\n            else if (e == SERVER_ABORT && xhr) {\n                xhr.abort('server abort');\n                deferred.reject(xhr, 'error', 'server abort');\n                return;\n            }\n\n            if (!doc || doc.location.href == s.iframeSrc) {\n                // response not received yet\n                if (!timedOut) {\n                    return;\n                }\n            }\n            if (io.detachEvent) {\n                io.detachEvent('onload', cb);\n            }\n            else {\n                io.removeEventListener('load', cb, false);\n            }\n\n            var status = 'success', errMsg;\n            try {\n                if (timedOut) {\n                    throw 'timeout';\n                }\n\n                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\n                log('isXml='+isXml);\n                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {\n                    if (--domCheckCount) {\n                        // in some browsers (Opera) the iframe DOM is not always traversable when\n                        // the onload callback fires, so we loop a bit to accommodate\n                        log('requeing onLoad callback, DOM not available');\n                        setTimeout(cb, 250);\n                        return;\n                    }\n                    // let this fall through because server response could be an empty document\n                    //log('Could not access iframe DOM after mutiple tries.');\n                    //throw 'DOMException: not available';\n                }\n\n                //log('response detected');\n                var docRoot = doc.body ? doc.body : doc.documentElement;\n                xhr.responseText = docRoot ? docRoot.innerHTML : null;\n                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\n                if (isXml) {\n                    s.dataType = 'xml';\n                }\n                xhr.getResponseHeader = function(header){\n                    var headers = {'content-type': s.dataType};\n                    return headers[header.toLowerCase()];\n                };\n                // support for XHR 'status' & 'statusText' emulation :\n                if (docRoot) {\n                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;\n                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\n                }\n\n                var dt = (s.dataType || '').toLowerCase();\n                var scr = /(json|script|text)/.test(dt);\n                if (scr || s.textarea) {\n                    // see if user embedded response in textarea\n                    var ta = doc.getElementsByTagName('textarea')[0];\n                    if (ta) {\n                        xhr.responseText = ta.value;\n                        // support for XHR 'status' & 'statusText' emulation :\n                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;\n                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\n                    }\n                    else if (scr) {\n                        // account for browsers injecting pre around json response\n                        var pre = doc.getElementsByTagName('pre')[0];\n                        var b = doc.getElementsByTagName('body')[0];\n                        if (pre) {\n                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;\n                        }\n                        else if (b) {\n                            xhr.responseText = b.textContent ? b.textContent : b.innerText;\n                        }\n                    }\n                }\n                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {\n                    xhr.responseXML = toXml(xhr.responseText);\n                }\n\n                try {\n                    data = httpData(xhr, dt, s);\n                }\n                catch (err) {\n                    status = 'parsererror';\n                    xhr.error = errMsg = (err || status);\n                }\n            }\n            catch (err) {\n                log('error caught: ',err);\n                status = 'error';\n                xhr.error = errMsg = (err || status);\n            }\n\n            if (xhr.aborted) {\n                log('upload aborted');\n                status = null;\n            }\n\n            if (xhr.status) { // we've set xhr.status\n                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';\n            }\n\n            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it\n            if (status === 'success') {\n                if (s.success) {\n                    s.success.call(s.context, data, 'success', xhr);\n                }\n                deferred.resolve(xhr.responseText, 'success', xhr);\n                if (g) {\n                    $.event.trigger(\"ajaxSuccess\", [xhr, s]);\n                }\n            }\n            else if (status) {\n                if (errMsg === undefined) {\n                    errMsg = xhr.statusText;\n                }\n                if (s.error) {\n                    s.error.call(s.context, xhr, status, errMsg);\n                }\n                deferred.reject(xhr, 'error', errMsg);\n                if (g) {\n                    $.event.trigger(\"ajaxError\", [xhr, s, errMsg]);\n                }\n            }\n\n            if (g) {\n                $.event.trigger(\"ajaxComplete\", [xhr, s]);\n            }\n\n            if (g && ! --$.active) {\n                $.event.trigger(\"ajaxStop\");\n            }\n\n            if (s.complete) {\n                s.complete.call(s.context, xhr, status);\n            }\n\n            callbackProcessed = true;\n            if (s.timeout) {\n                clearTimeout(timeoutHandle);\n            }\n\n            // clean up\n            setTimeout(function() {\n                if (!s.iframeTarget) {\n                    $io.remove();\n                }\n                else { //adding else to clean up existing iframe response.\n                    $io.attr('src', s.iframeSrc);\n                }\n                xhr.responseXML = null;\n            }, 100);\n        }\n\n        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\n            if (window.ActiveXObject) {\n                doc = new ActiveXObject('Microsoft.XMLDOM');\n                doc.async = 'false';\n                doc.loadXML(s);\n            }\n            else {\n                doc = (new DOMParser()).parseFromString(s, 'text/xml');\n            }\n            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;\n        };\n        var parseJSON = $.parseJSON || function(s) {\n            /*jslint evil:true */\n            return window['eval']('(' + s + ')');\n        };\n\n        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4\n\n            var ct = xhr.getResponseHeader('content-type') || '',\n                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,\n                data = xml ? xhr.responseXML : xhr.responseText;\n\n            if (xml && data.documentElement.nodeName === 'parsererror') {\n                if ($.error) {\n                    $.error('parsererror');\n                }\n            }\n            if (s && s.dataFilter) {\n                data = s.dataFilter(data, type);\n            }\n            if (typeof data === 'string') {\n                if (type === 'json' || !type && ct.indexOf('json') >= 0) {\n                    data = parseJSON(data);\n                } else if (type === \"script\" || !type && ct.indexOf(\"javascript\") >= 0) {\n                    $.globalEval(data);\n                }\n            }\n            return data;\n        };\n\n        return deferred;\n    }\n};\n\n/**\n * ajaxForm() provides a mechanism for fully automating form submission.\n *\n * The advantages of using this method instead of ajaxSubmit() are:\n *\n * 1: This method will include coordinates for <input type=\"image\" /> elements (if the element\n *    is used to submit the form).\n * 2. This method will include the submit element's name/value data (for the element that was\n *    used to submit the form).\n * 3. This method binds the submit() method to the form for you.\n *\n * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely\n * passes the options argument along after properly binding events for submit elements and\n * the form itself.\n */\n$.fn.ajaxForm = function(options) {\n    options = options || {};\n    options.delegation = options.delegation && $.isFunction($.fn.on);\n\n    // in jQuery 1.3+ we can fix mistakes with the ready state\n    if (!options.delegation && this.length === 0) {\n        var o = { s: this.selector, c: this.context };\n        if (!$.isReady && o.s) {\n            log('DOM not ready, queuing ajaxForm');\n            $(function() {\n                $(o.s,o.c).ajaxForm(options);\n            });\n            return this;\n        }\n        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\n        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\n        return this;\n    }\n\n    if ( options.delegation ) {\n        $(document)\n            .off('submit.form-plugin', this.selector, doAjaxSubmit)\n            .off('click.form-plugin', this.selector, captureSubmittingElement)\n            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)\n            .on('click.form-plugin', this.selector, options, captureSubmittingElement);\n        return this;\n    }\n\n    return this.ajaxFormUnbind()\n        .bind('submit.form-plugin', options, doAjaxSubmit)\n        .bind('click.form-plugin', options, captureSubmittingElement);\n};\n\n// private event handlers\nfunction doAjaxSubmit(e) {\n    /*jshint validthis:true */\n    var options = e.data;\n    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\n        e.preventDefault();\n        $(e.target).ajaxSubmit(options); // #365\n    }\n}\n\nfunction captureSubmittingElement(e) {\n    /*jshint validthis:true */\n    var target = e.target;\n    var $el = $(target);\n    if (!($el.is(\"[type=submit],[type=image]\"))) {\n        // is this a child element of the submit el?  (ex: a span within a button)\n        var t = $el.closest('[type=submit]');\n        if (t.length === 0) {\n            return;\n        }\n        target = t[0];\n    }\n    var form = this;\n    form.clk = target;\n    if (target.type == 'image') {\n        if (e.offsetX !== undefined) {\n            form.clk_x = e.offsetX;\n            form.clk_y = e.offsetY;\n        } else if (typeof $.fn.offset == 'function') {\n            var offset = $el.offset();\n            form.clk_x = e.pageX - offset.left;\n            form.clk_y = e.pageY - offset.top;\n        } else {\n            form.clk_x = e.pageX - target.offsetLeft;\n            form.clk_y = e.pageY - target.offsetTop;\n        }\n    }\n    // clear form vars\n    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);\n}\n\n\n// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\n$.fn.ajaxFormUnbind = function() {\n    return this.unbind('submit.form-plugin click.form-plugin');\n};\n\n/**\n * formToArray() gathers form element data into an array of objects that can\n * be passed to any of the following ajax functions: $.get, $.post, or load.\n * Each object in the array has both a 'name' and 'value' property.  An example of\n * an array for a simple login form might be:\n *\n * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\n *\n * It is this array that is passed to pre-submit callback functions provided to the\n * ajaxSubmit() and ajaxForm() methods.\n */\n$.fn.formToArray = function(semantic, elements) {\n    var a = [];\n    if (this.length === 0) {\n        return a;\n    }\n\n    var form = this[0];\n    var formId = this.attr('id');\n    var els = semantic ? form.getElementsByTagName('*') : form.elements;\n    var els2;\n\n    if (els && !/MSIE [678]/.test(navigator.userAgent)) { // #390\n        els = $(els).get();  // convert to standard array\n    }\n\n    // #386; account for inputs outside the form which use the 'form' attribute\n    if ( formId ) {\n        els2 = $(':input[form=\"' + formId + '\"]').get(); // hat tip @thet\n        if ( els2.length ) {\n            els = (els || []).concat(els2);\n        }\n    }\n\n    if (!els || !els.length) {\n        return a;\n    }\n\n    var i,j,n,v,el,max,jmax;\n    for(i=0, max=els.length; i < max; i++) {\n        el = els[i];\n        n = el.name;\n        if (!n || el.disabled) {\n            continue;\n        }\n\n        if (semantic && form.clk && el.type == \"image\") {\n            // handle image inputs on the fly when semantic == true\n            if(form.clk == el) {\n                a.push({name: n, value: $(el).val(), type: el.type });\n                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n            }\n            continue;\n        }\n\n        v = $.fieldValue(el, true);\n        if (v && v.constructor == Array) {\n            if (elements) {\n                elements.push(el);\n            }\n            for(j=0, jmax=v.length; j < jmax; j++) {\n                a.push({name: n, value: v[j]});\n            }\n        }\n        else if (feature.fileapi && el.type == 'file') {\n            if (elements) {\n                elements.push(el);\n            }\n            var files = el.files;\n            if (files.length) {\n                for (j=0; j < files.length; j++) {\n                    a.push({name: n, value: files[j], type: el.type});\n                }\n            }\n            else {\n                // #180\n                a.push({ name: n, value: '', type: el.type });\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            if (elements) {\n                elements.push(el);\n            }\n            a.push({name: n, value: v, type: el.type, required: el.required});\n        }\n    }\n\n    if (!semantic && form.clk) {\n        // input type=='image' are not found in elements array! handle it here\n        var $input = $(form.clk), input = $input[0];\n        n = input.name;\n        if (n && !input.disabled && input.type == 'image') {\n            a.push({name: n, value: $input.val()});\n            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n        }\n    }\n    return a;\n};\n\n/**\n * Serializes form data into a 'submittable' string. This method will return a string\n * in the format: name1=value1&amp;name2=value2\n */\n$.fn.formSerialize = function(semantic) {\n    //hand off to jQuery.param for proper encoding\n    return $.param(this.formToArray(semantic));\n};\n\n/**\n * Serializes all field elements in the jQuery object into a query string.\n * This method will return a string in the format: name1=value1&amp;name2=value2\n */\n$.fn.fieldSerialize = function(successful) {\n    var a = [];\n    this.each(function() {\n        var n = this.name;\n        if (!n) {\n            return;\n        }\n        var v = $.fieldValue(this, successful);\n        if (v && v.constructor == Array) {\n            for (var i=0,max=v.length; i < max; i++) {\n                a.push({name: n, value: v[i]});\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            a.push({name: this.name, value: v});\n        }\n    });\n    //hand off to jQuery.param for proper encoding\n    return $.param(a);\n};\n\n/**\n * Returns the value(s) of the element in the matched set.  For example, consider the following form:\n *\n *  <form><fieldset>\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B1\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B2\"/>\n *      <input name=\"C\" type=\"radio\" value=\"C1\" />\n *      <input name=\"C\" type=\"radio\" value=\"C2\" />\n *  </fieldset></form>\n *\n *  var v = $('input[type=text]').fieldValue();\n *  // if no values are entered into the text inputs\n *  v == ['','']\n *  // if values entered into the text inputs are 'foo' and 'bar'\n *  v == ['foo','bar']\n *\n *  var v = $('input[type=checkbox]').fieldValue();\n *  // if neither checkbox is checked\n *  v === undefined\n *  // if both checkboxes are checked\n *  v == ['B1', 'B2']\n *\n *  var v = $('input[type=radio]').fieldValue();\n *  // if neither radio is checked\n *  v === undefined\n *  // if first radio is checked\n *  v == ['C1']\n *\n * The successful argument controls whether or not the field element must be 'successful'\n * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\n * The default value of the successful argument is true.  If this value is false the value(s)\n * for each element is returned.\n *\n * Note: This method *always* returns an array.  If no valid value can be determined the\n *    array will be empty, otherwise it will contain one or more values.\n */\n$.fn.fieldValue = function(successful) {\n    for (var val=[], i=0, max=this.length; i < max; i++) {\n        var el = this[i];\n        var v = $.fieldValue(el, successful);\n        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {\n            continue;\n        }\n        if (v.constructor == Array) {\n            $.merge(val, v);\n        }\n        else {\n            val.push(v);\n        }\n    }\n    return val;\n};\n\n/**\n * Returns the value of the field element.\n */\n$.fieldValue = function(el, successful) {\n    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();\n    if (successful === undefined) {\n        successful = true;\n    }\n\n    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||\n        (t == 'checkbox' || t == 'radio') && !el.checked ||\n        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||\n        tag == 'select' && el.selectedIndex == -1)) {\n            return null;\n    }\n\n    if (tag == 'select') {\n        var index = el.selectedIndex;\n        if (index < 0) {\n            return null;\n        }\n        var a = [], ops = el.options;\n        var one = (t == 'select-one');\n        var max = (one ? index+1 : ops.length);\n        for(var i=(one ? index : 0); i < max; i++) {\n            var op = ops[i];\n            if (op.selected) {\n                var v = op.value;\n                if (!v) { // extra pain for IE...\n                    v = (op.attributes && op.attributes.value && !(op.attributes.value.specified)) ? op.text : op.value;\n                }\n                if (one) {\n                    return v;\n                }\n                a.push(v);\n            }\n        }\n        return a;\n    }\n    return $(el).val();\n};\n\n/**\n * Clears the form data.  Takes the following actions on the form's input fields:\n *  - input text fields will have their 'value' property set to the empty string\n *  - select elements will have their 'selectedIndex' property set to -1\n *  - checkbox and radio inputs will have their 'checked' property set to false\n *  - inputs of type submit, button, reset, and hidden will *not* be effected\n *  - button elements will *not* be effected\n */\n$.fn.clearForm = function(includeHidden) {\n    return this.each(function() {\n        $('input,select,textarea', this).clearFields(includeHidden);\n    });\n};\n\n/**\n * Clears the selected form elements.\n */\n$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {\n    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\n    return this.each(function() {\n        var t = this.type, tag = this.tagName.toLowerCase();\n        if (re.test(t) || tag == 'textarea') {\n            this.value = '';\n        }\n        else if (t == 'checkbox' || t == 'radio') {\n            this.checked = false;\n        }\n        else if (tag == 'select') {\n            this.selectedIndex = -1;\n        }\n        else if (t == \"file\") {\n            if (/MSIE/.test(navigator.userAgent)) {\n                $(this).replaceWith($(this).clone(true));\n            } else {\n                $(this).val('');\n            }\n        }\n        else if (includeHidden) {\n            // includeHidden can be the value true, or it can be a selector string\n            // indicating a special test; for example:\n            //  $('#myForm').clearForm('.special:hidden')\n            // the above would clean hidden inputs that have the class of 'special'\n            if ( (includeHidden === true && /hidden/.test(t)) ||\n                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) ) {\n                this.value = '';\n            }\n        }\n    });\n};\n\n/**\n * Resets the form data.  Causes all form elements to be reset to their original value.\n */\n$.fn.resetForm = function() {\n    return this.each(function() {\n        // guard against an input with the name of 'reset'\n        // note that IE reports the reset function as an 'object'\n        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {\n            this.reset();\n        }\n    });\n};\n\n/**\n * Enables or disables any matching elements.\n */\n$.fn.enable = function(b) {\n    if (b === undefined) {\n        b = true;\n    }\n    return this.each(function() {\n        this.disabled = !b;\n    });\n};\n\n/**\n * Checks/unchecks any matching checkboxes or radio buttons and\n * selects/deselects and matching option elements.\n */\n$.fn.selected = function(select) {\n    if (select === undefined) {\n        select = true;\n    }\n    return this.each(function() {\n        var t = this.type;\n        if (t == 'checkbox' || t == 'radio') {\n            this.checked = select;\n        }\n        else if (this.tagName.toLowerCase() == 'option') {\n            var $sel = $(this).parent('select');\n            if (select && $sel[0] && $sel[0].type == 'select-one') {\n                // deselect all other options\n                $sel.find('option').selected(false);\n            }\n            this.selected = select;\n        }\n    });\n};\n\n// expose debug var\n$.fn.ajaxSubmit.debug = false;\n\n// helper fn for console logging\nfunction log() {\n    if (!$.fn.ajaxSubmit.debug) {\n        return;\n    }\n    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');\n    if (window.console && window.console.log) {\n        window.console.log(msg);\n    }\n    else if (window.opera && window.opera.postError) {\n        window.opera.postError(msg);\n    }\n}\n\n}));\n;/**\r\n *  umeditor完整配置项\r\n *  可以在这里配置整个编辑器的特性\r\n */\r\n/**************************提示********************************\r\n * 所有被注释的配置项均为UEditor默认值。\r\n * 修改默认配置请首先确保已经完全明确该参数的真实用途。\r\n * 主要有两种修改方案，一种是取消此处注释，然后修改成对应参数；另一种是在实例化编辑器时传入对应参数。\r\n * 当升级编辑器时，可直接使用旧版配置文件替换新版配置文件,不用担心旧版配置文件中因缺少新功能所需的参数而导致脚本报错。\r\n **************************提示********************************/\r\n\r\n\r\n(function () {\r\n    /**\r\n     * 编辑器资源文件根路径。它所表示的含义是：以编辑器实例化页面为当前路径，指向编辑器资源文件（即dialog等文件夹）的路径。\r\n     * 鉴于很多同学在使用编辑器的时候出现的种种路径问题，此处强烈建议大家使用\"相对于网站根目录的相对路径\"进行配置。\r\n     * \"相对于网站根目录的相对路径\"也就是以斜杠开头的形如\"/myProject/umeditor/\"这样的路径。\r\n     * 如果站点中有多个不在同一层级的页面需要实例化编辑器，且引用了同一UEditor的时候，此处的URL可能不适用于每个页面的编辑器。\r\n     * 因此，UEditor提供了针对不同页面的编辑器可单独配置的根路径，具体来说，在需要实例化编辑器的页面最顶部写上如下代码即可。当然，需要令此处的URL等于对应的配置。\r\n     * window.UMEDITOR_HOME_URL = \"/xxxx/xxxx/\";\r\n     */\r\n    var URL = window.UMEDITOR_HOME_URL || (function(){\r\n\r\n        function PathStack() {\r\n\r\n            this.documentURL = self.document.URL || self.location.href;\r\n\r\n            this.separator = '/';\r\n            this.separatorPattern = /\\\\|\\//g;\r\n            this.currentDir = './';\r\n            this.currentDirPattern = /^[.]\\/]/;\r\n\r\n            this.path = this.documentURL;\r\n            this.stack = [];\r\n\r\n            this.push( this.documentURL );\r\n\r\n        }\r\n\r\n        PathStack.isParentPath = function( path ){\r\n            return path === '..';\r\n        };\r\n\r\n        PathStack.hasProtocol = function( path ){\r\n            return !!PathStack.getProtocol( path );\r\n        };\r\n\r\n        PathStack.getProtocol = function( path ){\r\n\r\n            var protocol = /^[^:]*:\\/*/.exec( path );\r\n\r\n            return protocol ? protocol[0] : null;\r\n\r\n        };\r\n\r\n        PathStack.prototype = {\r\n            push: function( path ){\r\n\r\n                this.path = path;\r\n\r\n                update.call( this );\r\n                parse.call( this );\r\n\r\n                return this;\r\n\r\n            },\r\n            getPath: function(){\r\n                return this + \"\";\r\n            },\r\n            toString: function(){\r\n                return this.protocol + ( this.stack.concat( [''] ) ).join( this.separator );\r\n            }\r\n        };\r\n\r\n        function update() {\r\n\r\n            var protocol = PathStack.getProtocol( this.path || '' );\r\n\r\n            if( protocol ) {\r\n\r\n                //根协议\r\n                this.protocol = protocol;\r\n\r\n                //local\r\n                this.localSeparator = /\\\\|\\//.exec( this.path.replace( protocol, '' ) )[0];\r\n\r\n                this.stack = [];\r\n            } else {\r\n                protocol = /\\\\|\\//.exec( this.path );\r\n                protocol && (this.localSeparator = protocol[0]);\r\n            }\r\n\r\n        }\r\n\r\n        function parse(){\r\n\r\n            var parsedStack = this.path.replace( this.currentDirPattern, '' );\r\n\r\n            if( PathStack.hasProtocol( this.path ) ) {\r\n                parsedStack = parsedStack.replace( this.protocol , '');\r\n            }\r\n\r\n            parsedStack = parsedStack.split( this.localSeparator );\r\n            parsedStack.length = parsedStack.length - 1;\r\n\r\n            for(var i= 0,tempPath,l=parsedStack.length,root = this.stack;i<l;i++){\r\n                tempPath = parsedStack[i];\r\n                if(tempPath){\r\n                    if( PathStack.isParentPath( tempPath ) ) {\r\n                        root.pop();\r\n                    } else {\r\n                        root.push( tempPath );\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        var currentPath = document.getElementsByTagName('script');\r\n\r\n        currentPath = currentPath[ currentPath.length -1 ].src;\r\n\r\n        return new PathStack().push( currentPath ) + \"\";\r\n\r\n\r\n    })();\r\n\r\n    /**\r\n     * 配置项主体。注意，此处所有涉及到路径的配置别遗漏URL变量。\r\n     */\r\n    window.UMEDITOR_CONFIG = {\r\n\r\n        //为编辑器实例添加一个路径，这个不能被注释\r\n        UMEDITOR_HOME_URL : URL\r\n        \r\n        ,imageUrl:\"/imageUpload.action\" //\"jsp/imageUp.jsp\"             //图片上传提交地址\r\n         ,imagePath:\"http://res.hualala.com/\"                   //图片修正地址，引用了fixedImagePath,如有特殊需求，可自行配置\r\n         ,imageFieldName:\"myFile\"\r\n\r\n\r\n        //工具栏上的所有的功能按钮和下拉框，可以在new编辑器的实例时选择自己需要的从新定义\r\n        ,toolbar:[\r\n            'source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat |',\r\n            'insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize' ,\r\n            '| justifyleft justifycenter justifyright justifyjustify |',\r\n            'link unlink | emotion image video  | map',\r\n            '| horizontal print preview', 'drafts'\r\n        ]\r\n\r\n        //语言配置项,默认是zh-cn。有需要的话也可以使用如下这样的方式来自动多语言切换，当然，前提条件是lang文件夹下存在对应的语言文件：\r\n        //lang值也可以通过自动获取 (navigator.language||navigator.browserLanguage ||navigator.userLanguage).toLowerCase()\r\n        //,lang:\"zh-cn\"\r\n        //,langPath:URL +\"lang/\"\r\n\r\n        //ie下的链接自动监测\r\n        //,autourldetectinie:false\r\n\r\n        //主题配置项,默认是default。有需要的话也可以使用如下这样的方式来自动多主题切换，当然，前提条件是themes文件夹下存在对应的主题文件：\r\n        //现有如下皮肤:default\r\n        //,theme:'default'\r\n        //,themePath:URL +\"themes/\"\r\n\r\n\r\n\r\n        //针对getAllHtml方法，会在对应的head标签中增加该编码设置。\r\n        //,charset:\"utf-8\"\r\n\r\n        //常用配置项目\r\n        //,isShow : true    //默认显示编辑器\r\n\r\n        //,initialContent:'欢迎使用UMEDITOR!'    //初始化编辑器的内容,也可以通过textarea/script给值，看官网例子\r\n\r\n        //,initialFrameWidth:500 //初始化编辑器宽度,默认500\r\n        //,initialFrameHeight:500  //初始化编辑器高度,默认500\r\n\r\n        //,autoClearinitialContent:true //是否自动清除编辑器初始内容，注意：如果focus属性设置为true,这个也为真，那么编辑器一上来就会触发导致初始化的内容看不到了\r\n\r\n        //,textarea:'editorValue' // 提交表单时，服务器获取编辑器提交内容的所用的参数，多实例时可以给容器name属性，会将name给定的值最为每个实例的键值，不用每次实例化的时候都设置这个值\r\n\r\n        //,focus:false //初始化时，是否让编辑器获得焦点true或false\r\n\r\n        //,autoClearEmptyNode : true //getContent时，是否删除空的inlineElement节点（包括嵌套的情况）\r\n\r\n        //,fullscreen : false //是否开启初始化时即全屏，默认关闭\r\n\r\n        //,readonly : false //编辑器初始化结束后,编辑区域是否是只读的，默认是false\r\n\r\n        //,zIndex : 900     //编辑器层级的基数,默认是900\r\n\r\n        //如果自定义，最好给p标签如下的行高，要不输入中文时，会有跳动感\r\n        //注意这里添加的样式，最好放在.edui-editor-body .edui-body-container这两个的下边，防止跟页面上css冲突\r\n        //,initialStyle:'.edui-editor-body .edui-body-container p{line-height:1em}'\r\n\r\n        //,autoSyncData:true //自动同步编辑器要提交的数据\r\n\r\n        //,emotionLocalization:false //是否开启表情本地化，默认关闭。若要开启请确保emotion文件夹下包含官网提供的images表情文件夹\r\n\r\n        //,allHtmlEnabled:false //提交到后台的数据是否包含整个html字符串\r\n\r\n        //fontfamily\r\n        //字体设置\r\n//        ,'fontfamily':[\r\n//              { name: 'songti', val: '宋体,SimSun'},\r\n//          ]\r\n\r\n        //fontsize\r\n        //字号\r\n        //,'fontsize':[10, 11, 12, 14, 16, 18, 20, 24, 36]\r\n\r\n        //paragraph\r\n        //段落格式 值留空时支持多语言自动识别，若配置，则以配置值为准\r\n        //,'paragraph':{'p':'', 'h1':'', 'h2':'', 'h3':'', 'h4':'', 'h5':'', 'h6':''}\r\n\r\n        //undo\r\n        //可以最多回退的次数,默认20\r\n        //,maxUndoCount:20\r\n        //当输入的字符数超过该值时，保存一次现场\r\n        //,maxInputCount:1\r\n\r\n        //imageScaleEnabled\r\n        // 是否允许点击文件拖拽改变大小,默认true\r\n        //,imageScaleEnabled:true\r\n\r\n        //dropFileEnabled\r\n        // 是否允许拖放图片到编辑区域，上传并插入,默认true\r\n        //,dropFileEnabled:true\r\n\r\n        //pasteImageEnabled\r\n        // 是否允许粘贴QQ截屏，上传并插入,默认true\r\n        //,pasteImageEnabled:true\r\n\r\n        //autoHeightEnabled\r\n        // 是否自动长高,默认true\r\n        //,autoHeightEnabled:true\r\n\r\n        //autoFloatEnabled\r\n        //是否保持toolbar的位置不动,默认true\r\n        //,autoFloatEnabled:true\r\n\r\n        //浮动时工具栏距离浏览器顶部的高度，用于某些具有固定头部的页面\r\n        //,topOffset:30\r\n\r\n        //填写过滤规则\r\n        //,filterRules: {}\r\n    };\r\n})();\r\n;/*!\r\n * UEditor Mini版本\r\n * version: 1.2.2\r\n * build: Wed Mar 19 2014 17:14:25 GMT+0800 (中国标准时间)\r\n */\r\n\r\n(function($){\r\n\r\nUMEDITOR_CONFIG = window.UMEDITOR_CONFIG || {};\r\n\r\nwindow.UM = {\r\n    plugins : {},\r\n\r\n    commands : {},\r\n\r\n    I18N : {},\r\n\r\n    version : \"1.2.2\"\r\n};\r\n\r\nvar dom = UM.dom = {};\r\n/**\r\n * 浏览器判断模块\r\n * @file\r\n * @module UE.browser\r\n * @since 1.2.6.1\r\n */\r\n\r\n/**\r\n * 提供浏览器检测的模块\r\n * @unfile\r\n * @module UE.browser\r\n */\r\nvar browser = UM.browser = function(){\r\n    var agent = navigator.userAgent.toLowerCase(),\r\n        opera = window.opera,\r\n        browser = {\r\n            /**\r\n             * @property {boolean} ie 检测当前浏览器是否为IE\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie ) {\r\n         *     console.log( '当前浏览器是IE' );\r\n         * }\r\n             * ```\r\n             */\r\n            ie\t\t:  /(msie\\s|trident.*rv:)([\\w.]+)/.test(agent),\r\n\r\n            /**\r\n             * @property {boolean} opera 检测当前浏览器是否为Opera\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.opera ) {\r\n         *     console.log( '当前浏览器是Opera' );\r\n         * }\r\n             * ```\r\n             */\r\n            opera\t: ( !!opera && opera.version ),\r\n\r\n            /**\r\n             * @property {boolean} webkit 检测当前浏览器是否是webkit内核的浏览器\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.webkit ) {\r\n         *     console.log( '当前浏览器是webkit内核浏览器' );\r\n         * }\r\n             * ```\r\n             */\r\n            webkit\t: ( agent.indexOf( ' applewebkit/' ) > -1 ),\r\n\r\n            /**\r\n             * @property {boolean} mac 检测当前浏览器是否是运行在mac平台下\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.mac ) {\r\n         *     console.log( '当前浏览器运行在mac平台下' );\r\n         * }\r\n             * ```\r\n             */\r\n            mac\t: ( agent.indexOf( 'macintosh' ) > -1 ),\r\n\r\n            /**\r\n             * @property {boolean} quirks 检测当前浏览器是否处于“怪异模式”下\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.quirks ) {\r\n         *     console.log( '当前浏览器运行处于“怪异模式”' );\r\n         * }\r\n             * ```\r\n             */\r\n            quirks : ( document.compatMode == 'BackCompat' )\r\n        };\r\n\r\n    /**\r\n     * @property {boolean} gecko 检测当前浏览器内核是否是gecko内核\r\n     * @example\r\n     * ```javascript\r\n     * if ( UE.browser.gecko ) {\r\n    *     console.log( '当前浏览器内核是gecko内核' );\r\n    * }\r\n     * ```\r\n     */\r\n    browser.gecko =( navigator.product == 'Gecko' && !browser.webkit && !browser.opera && !browser.ie);\r\n\r\n    var version = 0;\r\n\r\n    // Internet Explorer 6.0+\r\n    if ( browser.ie ){\r\n\r\n\r\n        var v1 =  agent.match(/(?:msie\\s([\\w.]+))/);\r\n        var v2 = agent.match(/(?:trident.*rv:([\\w.]+))/);\r\n        if(v1 && v2 && v1[1] && v2[1]){\r\n            version = Math.max(v1[1]*1,v2[1]*1);\r\n        }else if(v1 && v1[1]){\r\n            version = v1[1]*1;\r\n        }else if(v2 && v2[1]){\r\n            version = v2[1]*1;\r\n        }else{\r\n            version = 0;\r\n        }\r\n\r\n        browser.ie11Compat = document.documentMode == 11;\r\n        /**\r\n         * @property { boolean } ie9Compat 检测浏览器模式是否为 IE9 兼容模式\r\n         * @warning 如果浏览器不是IE， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.ie9Compat ) {\r\n         *     console.log( '当前浏览器运行在IE9兼容模式下' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.ie9Compat = document.documentMode == 9;\r\n\r\n        /**\r\n         * @property { boolean } ie8 检测浏览器是否是IE8浏览器\r\n         * @warning 如果浏览器不是IE， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.ie8 ) {\r\n         *     console.log( '当前浏览器是IE8浏览器' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.ie8 = !!document.documentMode;\r\n\r\n        /**\r\n         * @property { boolean } ie8Compat 检测浏览器模式是否为 IE8 兼容模式\r\n         * @warning 如果浏览器不是IE， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.ie8Compat ) {\r\n         *     console.log( '当前浏览器运行在IE8兼容模式下' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.ie8Compat = document.documentMode == 8;\r\n\r\n        /**\r\n         * @property { boolean } ie7Compat 检测浏览器模式是否为 IE7 兼容模式\r\n         * @warning 如果浏览器不是IE， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.ie7Compat ) {\r\n         *     console.log( '当前浏览器运行在IE7兼容模式下' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.ie7Compat = ( ( version == 7 && !document.documentMode )\r\n            || document.documentMode == 7 );\r\n\r\n        /**\r\n         * @property { boolean } ie6Compat 检测浏览器模式是否为 IE6 模式 或者怪异模式\r\n         * @warning 如果浏览器不是IE， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.ie6Compat ) {\r\n         *     console.log( '当前浏览器运行在IE6模式或者怪异模式下' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.ie6Compat = ( version < 7 || browser.quirks );\r\n\r\n        browser.ie9above = version > 8;\r\n\r\n        browser.ie9below = version < 9;\r\n\r\n    }\r\n\r\n    // Gecko.\r\n    if ( browser.gecko ){\r\n        var geckoRelease = agent.match( /rv:([\\d\\.]+)/ );\r\n        if ( geckoRelease )\r\n        {\r\n            geckoRelease = geckoRelease[1].split( '.' );\r\n            version = geckoRelease[0] * 10000 + ( geckoRelease[1] || 0 ) * 100 + ( geckoRelease[2] || 0 ) * 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @property { Number } chrome 检测当前浏览器是否为Chrome, 如果是，则返回Chrome的大版本号\r\n     * @warning 如果浏览器不是chrome， 则该值为undefined\r\n     * @example\r\n     * ```javascript\r\n     * if ( UE.browser.chrome ) {\r\n     *     console.log( '当前浏览器是Chrome' );\r\n     * }\r\n     * ```\r\n     */\r\n    if (/chrome\\/(\\d+\\.\\d)/i.test(agent)) {\r\n        browser.chrome = + RegExp['\\x241'];\r\n    }\r\n\r\n    /**\r\n     * @property { Number } safari 检测当前浏览器是否为Safari, 如果是，则返回Safari的大版本号\r\n     * @warning 如果浏览器不是safari， 则该值为undefined\r\n     * @example\r\n     * ```javascript\r\n     * if ( UE.browser.safari ) {\r\n     *     console.log( '当前浏览器是Safari' );\r\n     * }\r\n     * ```\r\n     */\r\n    if(/(\\d+\\.\\d)?(?:\\.\\d)?\\s+safari\\/?(\\d+\\.\\d+)?/i.test(agent) && !/chrome/i.test(agent)){\r\n        browser.safari = + (RegExp['\\x241'] || RegExp['\\x242']);\r\n    }\r\n\r\n\r\n    // Opera 9.50+\r\n    if ( browser.opera )\r\n        version = parseFloat( opera.version() );\r\n\r\n    // WebKit 522+ (Safari 3+)\r\n    if ( browser.webkit )\r\n        version = parseFloat( agent.match( / applewebkit\\/(\\d+)/ )[1] );\r\n\r\n    /**\r\n     * @property { Number } version 检测当前浏览器版本号\r\n     * @remind\r\n     * <ul>\r\n     *     <li>IE系列返回值为5,6,7,8,9,10等</li>\r\n     *     <li>gecko系列会返回10900，158900等</li>\r\n     *     <li>webkit系列会返回其build号 (如 522等)</li>\r\n     * </ul>\r\n     * @example\r\n     * ```javascript\r\n     * console.log( '当前浏览器版本号是： ' + UE.browser.version );\r\n     * ```\r\n     */\r\n    browser.version = version;\r\n\r\n    /**\r\n     * @property { boolean } isCompatible 检测当前浏览器是否能够与UEditor良好兼容\r\n     * @example\r\n     * ```javascript\r\n     * if ( UE.browser.isCompatible ) {\r\n     *     console.log( '浏览器与UEditor能够良好兼容' );\r\n     * }\r\n     * ```\r\n     */\r\n    browser.isCompatible =\r\n        !browser.mobile && (\r\n            ( browser.ie && version >= 6 ) ||\r\n                ( browser.gecko && version >= 10801 ) ||\r\n                ( browser.opera && version >= 9.5 ) ||\r\n                ( browser.air && version >= 1 ) ||\r\n                ( browser.webkit && version >= 522 ) ||\r\n                false );\r\n    return browser;\r\n}();\r\n//快捷方式\r\nvar ie = browser.ie,\r\n    webkit = browser.webkit,\r\n    gecko = browser.gecko,\r\n    opera = browser.opera;\r\n/**\r\n * @file\r\n * @name UM.Utils\r\n * @short Utils\r\n * @desc UEditor封装使用的静态工具函数\r\n * @import editor.js\r\n */\r\nvar utils = UM.utils = {\r\n    /**\r\n     * 遍历数组，对象，nodeList\r\n     * @name each\r\n     * @grammar UM.utils.each(obj,iterator,[context])\r\n     * @since 1.2.4+\r\n     * @desc\r\n     * * obj 要遍历的对象\r\n     * * iterator 遍历的方法,方法的第一个是遍历的值，第二个是索引，第三个是obj\r\n     * * context  iterator的上下文\r\n     * @example\r\n     * UM.utils.each([1,2],function(v,i){\r\n     *     console.log(v)//值\r\n     *     console.log(i)//索引\r\n     * })\r\n     * UM.utils.each(document.getElementsByTagName('*'),function(n){\r\n     *     console.log(n.tagName)\r\n     * })\r\n     */\r\n    each : function(obj, iterator, context) {\r\n        if (obj == null) return;\r\n        if (obj.length === +obj.length) {\r\n            for (var i = 0, l = obj.length; i < l; i++) {\r\n                if(iterator.call(context, obj[i], i, obj) === false)\r\n                    return false;\r\n            }\r\n        } else {\r\n            for (var key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    if(iterator.call(context, obj[key], key, obj) === false)\r\n                        return false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    makeInstance:function (obj) {\r\n        var noop = new Function();\r\n        noop.prototype = obj;\r\n        obj = new noop;\r\n        noop.prototype = null;\r\n        return obj;\r\n    },\r\n    /**\r\n     * 将source对象中的属性扩展到target对象上\r\n     * @name extend\r\n     * @grammar UM.utils.extend(target,source)  => Object  //覆盖扩展\r\n     * @grammar UM.utils.extend(target,source,true)  ==> Object  //保留扩展\r\n     */\r\n    extend:function (t, s, b) {\r\n        if (s) {\r\n            for (var k in s) {\r\n                if (!b || !t.hasOwnProperty(k)) {\r\n                    t[k] = s[k];\r\n                }\r\n            }\r\n        }\r\n        return t;\r\n    },\r\n    extend2:function (t) {\r\n        var a = arguments;\r\n        for (var i = 1; i < a.length; i++) {\r\n            var x = a[i];\r\n            for (var k in x) {\r\n                if (!t.hasOwnProperty(k)) {\r\n                    t[k] = x[k];\r\n                }\r\n            }\r\n        }\r\n        return t;\r\n    },\r\n    /**\r\n     * 模拟继承机制，subClass继承superClass\r\n     * @name inherits\r\n     * @grammar UM.utils.inherits(subClass,superClass) => subClass\r\n     * @example\r\n     * function SuperClass(){\r\n     *     this.name = \"小李\";\r\n     * }\r\n     * SuperClass.prototype = {\r\n     *     hello:function(str){\r\n     *         console.log(this.name + str);\r\n     *     }\r\n     * }\r\n     * function SubClass(){\r\n     *     this.name = \"小张\";\r\n     * }\r\n     * UM.utils.inherits(SubClass,SuperClass);\r\n     * var sub = new SubClass();\r\n     * sub.hello(\"早上好!\"); ==> \"小张早上好！\"\r\n     */\r\n    inherits:function (subClass, superClass) {\r\n        var oldP = subClass.prototype,\r\n            newP = utils.makeInstance(superClass.prototype);\r\n        utils.extend(newP, oldP, true);\r\n        subClass.prototype = newP;\r\n        return (newP.constructor = subClass);\r\n    },\r\n\r\n    /**\r\n     * 用指定的context作为fn上下文，也就是this\r\n     * @name bind\r\n     * @grammar UM.utils.bind(fn,context)  =>  fn\r\n     */\r\n    bind:function (fn, context) {\r\n        return function () {\r\n            return fn.apply(context, arguments);\r\n        };\r\n    },\r\n\r\n    /**\r\n     * 创建延迟delay执行的函数fn\r\n     * @name defer\r\n     * @grammar UM.utils.defer(fn,delay)  =>fn   //延迟delay毫秒执行fn，返回fn\r\n     * @grammar UM.utils.defer(fn,delay,exclusion)  =>fn   //延迟delay毫秒执行fn，若exclusion为真，则互斥执行fn\r\n     * @example\r\n     * function test(){\r\n     *     console.log(\"延迟输出！\");\r\n     * }\r\n     * //非互斥延迟执行\r\n     * var testDefer = UM.utils.defer(test,1000);\r\n     * testDefer();   =>  \"延迟输出！\";\r\n     * testDefer();   =>  \"延迟输出！\";\r\n     * //互斥延迟执行\r\n     * var testDefer1 = UM.utils.defer(test,1000,true);\r\n     * testDefer1();   =>  //本次不执行\r\n     * testDefer1();   =>  \"延迟输出！\";\r\n     */\r\n    defer:function (fn, delay, exclusion) {\r\n        var timerID;\r\n        return function () {\r\n            if (exclusion) {\r\n                clearTimeout(timerID);\r\n            }\r\n            timerID = setTimeout(fn, delay);\r\n        };\r\n    },\r\n\r\n    /**\r\n     * 查找元素item在数组array中的索引, 若找不到返回-1\r\n     * @name indexOf\r\n     * @grammar UM.utils.indexOf(array,item)  => index|-1  //默认从数组开头部开始搜索\r\n     * @grammar UM.utils.indexOf(array,item,start)  => index|-1  //start指定开始查找的位置\r\n     */\r\n    indexOf:function (array, item, start) {\r\n        var index = -1;\r\n        start = this.isNumber(start) ? start : 0;\r\n        this.each(array, function (v, i) {\r\n            if (i >= start && v === item) {\r\n                index = i;\r\n                return false;\r\n            }\r\n        });\r\n        return index;\r\n    },\r\n\r\n    /**\r\n     * 移除数组array中的元素item\r\n     * @name removeItem\r\n     * @grammar UM.utils.removeItem(array,item)\r\n     */\r\n    removeItem:function (array, item) {\r\n        for (var i = 0, l = array.length; i < l; i++) {\r\n            if (array[i] === item) {\r\n                array.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 删除字符串str的首尾空格\r\n     * @name trim\r\n     * @grammar UM.utils.trim(str) => String\r\n     */\r\n    trim:function (str) {\r\n        return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\r\n    },\r\n\r\n    /**\r\n     * 将字符串list(以','分隔)或者数组list转成哈希对象\r\n     * @name listToMap\r\n     * @grammar UM.utils.listToMap(list)  => Object  //Object形如{test:1,br:1,textarea:1}\r\n     */\r\n    listToMap:function (list) {\r\n        if (!list)return {};\r\n        list = utils.isArray(list) ? list : list.split(',');\r\n        for (var i = 0, ci, obj = {}; ci = list[i++];) {\r\n            obj[ci.toUpperCase()] = obj[ci] = 1;\r\n        }\r\n        return obj;\r\n    },\r\n\r\n    /**\r\n     * 将str中的html符号转义,默认将转义''&<\">''四个字符，可自定义reg来确定需要转义的字符\r\n     * @name unhtml\r\n     * @grammar UM.utils.unhtml(str);  => String\r\n     * @grammar UM.utils.unhtml(str,reg)  => String\r\n     * @example\r\n     * var html = '<body>You say:\"你好！Baidu & UEditor!\"</body>';\r\n     * UM.utils.unhtml(html);   ==>  &lt;body&gt;You say:&quot;你好！Baidu &amp; UEditor!&quot;&lt;/body&gt;\r\n     * UM.utils.unhtml(html,/[<>]/g)  ==>  &lt;body&gt;You say:\"你好！Baidu & UEditor!\"&lt;/body&gt;\r\n     */\r\n    unhtml:function (str, reg) {\r\n        return str ? str.replace(reg || /[&<\">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g, function (a, b) {\r\n            if (b) {\r\n                return a;\r\n            } else {\r\n                return {\r\n                    '<':'&lt;',\r\n                    '&':'&amp;',\r\n                    '\"':'&quot;',\r\n                    '>':'&gt;',\r\n                    \"'\":'&#39;'\r\n                }[a]\r\n            }\r\n\r\n        }) : '';\r\n    },\r\n    /**\r\n     * 将str中的转义字符还原成html字符\r\n     * @name html\r\n     * @grammar UM.utils.html(str)  => String   //详细参见<code><a href = '#unhtml'>unhtml</a></code>\r\n     */\r\n    html:function (str) {\r\n        return str ? str.replace(/&((g|l|quo)t|amp|#39);/g, function (m) {\r\n            return {\r\n                '&lt;':'<',\r\n                '&amp;':'&',\r\n                '&quot;':'\"',\r\n                '&gt;':'>',\r\n                '&#39;':\"'\"\r\n            }[m]\r\n        }) : '';\r\n    },\r\n    /**\r\n     * 将css样式转换为驼峰的形式。如font-size => fontSize\r\n     * @name cssStyleToDomStyle\r\n     * @grammar UM.utils.cssStyleToDomStyle(cssName)  => String\r\n     */\r\n    cssStyleToDomStyle:function () {\r\n        var test = document.createElement('div').style,\r\n            cache = {\r\n                'float':test.cssFloat != undefined ? 'cssFloat' : test.styleFloat != undefined ? 'styleFloat' : 'float'\r\n            };\r\n\r\n        return function (cssName) {\r\n            return cache[cssName] || (cache[cssName] = cssName.toLowerCase().replace(/-./g, function (match) {\r\n                return match.charAt(1).toUpperCase();\r\n            }));\r\n        };\r\n    }(),\r\n    /**\r\n     * 动态加载文件到doc中，并依据obj来设置属性，加载成功后执行回调函数fn\r\n     * @name loadFile\r\n     * @grammar UM.utils.loadFile(doc,obj)\r\n     * @grammar UM.utils.loadFile(doc,obj,fn)\r\n     * @example\r\n     * //指定加载到当前document中一个script文件，加载成功后执行function\r\n     * utils.loadFile( document, {\r\n     *     src:\"test.js\",\r\n     *     tag:\"script\",\r\n     *     type:\"text/javascript\",\r\n     *     defer:\"defer\"\r\n     * }, function () {\r\n     *     console.log('加载成功！')\r\n     * });\r\n     */\r\n    loadFile:function () {\r\n        var tmpList = [];\r\n\r\n        function getItem(doc, obj) {\r\n            try {\r\n                for (var i = 0, ci; ci = tmpList[i++];) {\r\n                    if (ci.doc === doc && ci.url == (obj.src || obj.href)) {\r\n                        return ci;\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n\r\n        }\r\n\r\n        return function (doc, obj, fn) {\r\n            var item = getItem(doc, obj);\r\n            if (item) {\r\n                if (item.ready) {\r\n                    fn && fn();\r\n                } else {\r\n                    item.funs.push(fn)\r\n                }\r\n                return;\r\n            }\r\n            tmpList.push({\r\n                doc:doc,\r\n                url:obj.src || obj.href,\r\n                funs:[fn]\r\n            });\r\n            if (!doc.body) {\r\n                var html = [];\r\n                for (var p in obj) {\r\n                    if (p == 'tag')continue;\r\n                    html.push(p + '=\"' + obj[p] + '\"')\r\n                }\r\n                doc.write('<' + obj.tag + ' ' + html.join(' ') + ' ></' + obj.tag + '>');\r\n                return;\r\n            }\r\n            if (obj.id && doc.getElementById(obj.id)) {\r\n                return;\r\n            }\r\n            var element = doc.createElement(obj.tag);\r\n            delete obj.tag;\r\n            for (var p in obj) {\r\n                element.setAttribute(p, obj[p]);\r\n            }\r\n            element.onload = element.onreadystatechange = function () {\r\n                if (!this.readyState || /loaded|complete/.test(this.readyState)) {\r\n                    item = getItem(doc, obj);\r\n                    if (item.funs.length > 0) {\r\n                        item.ready = 1;\r\n                        for (var fi; fi = item.funs.pop();) {\r\n                            fi();\r\n                        }\r\n                    }\r\n                    element.onload = element.onreadystatechange = null;\r\n                }\r\n            };\r\n            element.onerror = function () {\r\n                throw Error('The load ' + (obj.href || obj.src) + ' fails,check the url settings of file umeditor.config.js ')\r\n            };\r\n            doc.getElementsByTagName(\"head\")[0].appendChild(element);\r\n        }\r\n    }(),\r\n    /**\r\n     * 判断obj对象是否为空\r\n     * @name isEmptyObject\r\n     * @grammar UM.utils.isEmptyObject(obj)  => true|false\r\n     * @example\r\n     * UM.utils.isEmptyObject({}) ==>true\r\n     * UM.utils.isEmptyObject([]) ==>true\r\n     * UM.utils.isEmptyObject(\"\") ==>true\r\n     */\r\n    isEmptyObject:function (obj) {\r\n        if (obj == null) return true;\r\n        if (this.isArray(obj) || this.isString(obj)) return obj.length === 0;\r\n        for (var key in obj) if (obj.hasOwnProperty(key)) return false;\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * 统一将颜色值使用16进制形式表示\r\n     * @name fixColor\r\n     * @grammar UM.utils.fixColor(name,value) => value\r\n     * @example\r\n     * rgb(255,255,255)  => \"#ffffff\"\r\n     */\r\n    fixColor:function (name, value) {\r\n        if (/color/i.test(name) && /rgba?/.test(value)) {\r\n            var array = value.split(\",\");\r\n            if (array.length > 3)\r\n                return \"\";\r\n            value = \"#\";\r\n            for (var i = 0, color; color = array[i++];) {\r\n                color = parseInt(color.replace(/[^\\d]/gi, ''), 10).toString(16);\r\n                value += color.length == 1 ? \"0\" + color : color;\r\n            }\r\n            value = value.toUpperCase();\r\n        }\r\n        return  value;\r\n    },\r\n\r\n    /**\r\n     * 深度克隆对象，从source到target\r\n     * @name clone\r\n     * @grammar UM.utils.clone(source) => anthorObj 新的对象是完整的source的副本\r\n     * @grammar UM.utils.clone(source,target) => target包含了source的所有内容，重名会覆盖\r\n     */\r\n    clone:function (source, target) {\r\n        var tmp;\r\n        target = target || {};\r\n        for (var i in source) {\r\n            if (source.hasOwnProperty(i)) {\r\n                tmp = source[i];\r\n                if (typeof tmp == 'object') {\r\n                    target[i] = utils.isArray(tmp) ? [] : {};\r\n                    utils.clone(source[i], target[i])\r\n                } else {\r\n                    target[i] = tmp;\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    },\r\n    /**\r\n     * 转换cm/pt到px\r\n     * @name transUnitToPx\r\n     * @grammar UM.utils.transUnitToPx('20pt') => '27px'\r\n     * @grammar UM.utils.transUnitToPx('0pt') => '0'\r\n     */\r\n    transUnitToPx:function (val) {\r\n        if (!/(pt|cm)/.test(val)) {\r\n            return val\r\n        }\r\n        var unit;\r\n        val.replace(/([\\d.]+)(\\w+)/, function (str, v, u) {\r\n            val = v;\r\n            unit = u;\r\n        });\r\n        switch (unit) {\r\n            case 'cm':\r\n                val = parseFloat(val) * 25;\r\n                break;\r\n            case 'pt':\r\n                val = Math.round(parseFloat(val) * 96 / 72);\r\n        }\r\n        return val + (val ? 'px' : '');\r\n    },\r\n    /**\r\n     * 动态添加css样式\r\n     * @name cssRule\r\n     * @grammar UM.utils.cssRule('添加的样式的节点名称',['样式'，'放到哪个document上'])\r\n     * @grammar UM.utils.cssRule('body','body{background:#ccc}') => null  //给body添加背景颜色\r\n     * @grammar UM.utils.cssRule('body') =>样式的字符串  //取得key值为body的样式的内容,如果没有找到key值先关的样式将返回空，例如刚才那个背景颜色，将返回 body{background:#ccc}\r\n     * @grammar UM.utils.cssRule('body','') =>null //清空给定的key值的背景颜色\r\n     */\r\n    cssRule:browser.ie && browser.version != 11 ? function (key, style, doc) {\r\n        var indexList, index;\r\n        doc = doc || document;\r\n        if (doc.indexList) {\r\n            indexList = doc.indexList;\r\n        } else {\r\n            indexList = doc.indexList = {};\r\n        }\r\n        var sheetStyle;\r\n        if (!indexList[key]) {\r\n            if (style === undefined) {\r\n                return ''\r\n            }\r\n            sheetStyle = doc.createStyleSheet('', index = doc.styleSheets.length);\r\n            indexList[key] = index;\r\n        } else {\r\n            sheetStyle = doc.styleSheets[indexList[key]];\r\n        }\r\n        if (style === undefined) {\r\n            return sheetStyle.cssText\r\n        }\r\n        sheetStyle.cssText = style || ''\r\n    } : function (key, style, doc) {\r\n        doc = doc || document;\r\n        var head = doc.getElementsByTagName('head')[0], node;\r\n        if (!(node = doc.getElementById(key))) {\r\n            if (style === undefined) {\r\n                return ''\r\n            }\r\n            node = doc.createElement('style');\r\n            node.id = key;\r\n            head.appendChild(node)\r\n        }\r\n        if (style === undefined) {\r\n            return node.innerHTML\r\n        }\r\n        if (style !== '') {\r\n            node.innerHTML = style;\r\n        } else {\r\n            head.removeChild(node)\r\n        }\r\n    }\r\n\r\n};\r\n/**\r\n * 判断str是否为字符串\r\n * @name isString\r\n * @grammar UM.utils.isString(str) => true|false\r\n */\r\n/**\r\n * 判断array是否为数组\r\n * @name isArray\r\n * @grammar UM.utils.isArray(obj) => true|false\r\n */\r\n/**\r\n * 判断obj对象是否为方法\r\n * @name isFunction\r\n * @grammar UM.utils.isFunction(obj)  => true|false\r\n */\r\n/**\r\n * 判断obj对象是否为数字\r\n * @name isNumber\r\n * @grammar UM.utils.isNumber(obj)  => true|false\r\n */\r\nutils.each(['String', 'Function', 'Array', 'Number', 'RegExp', 'Object'], function (v) {\r\n    UM.utils['is' + v] = function (obj) {\r\n        return Object.prototype.toString.apply(obj) == '[object ' + v + ']';\r\n    }\r\n});\r\n/**\r\n * @file\r\n * @name UM.EventBase\r\n * @short EventBase\r\n * @import editor.js,core/utils.js\r\n * @desc UE采用的事件基类，继承此类的对应类将获取addListener,removeListener,fireEvent方法。\r\n * 在UE中，Editor以及所有ui实例都继承了该类，故可以在对应的ui对象以及editor对象上使用上述方法。\r\n */\r\nvar EventBase = UM.EventBase = function () {};\r\n\r\nEventBase.prototype = {\r\n    /**\r\n     * 注册事件监听器\r\n     * @name addListener\r\n     * @grammar editor.addListener(types,fn)  //types为事件名称，多个可用空格分隔\r\n     * @example\r\n     * editor.addListener('selectionchange',function(){\r\n     *      console.log(\"选区已经变化！\");\r\n     * })\r\n     * editor.addListener('beforegetcontent aftergetcontent',function(type){\r\n     *         if(type == 'beforegetcontent'){\r\n     *             //do something\r\n     *         }else{\r\n     *             //do something\r\n     *         }\r\n     *         console.log(this.getContent) // this是注册的事件的编辑器实例\r\n     * })\r\n     */\r\n    addListener:function (types, listener) {\r\n        types = utils.trim(types).split(' ');\r\n        for (var i = 0, ti; ti = types[i++];) {\r\n            getListener(this, ti, true).push(listener);\r\n        }\r\n    },\r\n    /**\r\n     * 移除事件监听器\r\n     * @name removeListener\r\n     * @grammar editor.removeListener(types,fn)  //types为事件名称，多个可用空格分隔\r\n     * @example\r\n     * //changeCallback为方法体\r\n     * editor.removeListener(\"selectionchange\",changeCallback);\r\n     */\r\n    removeListener:function (types, listener) {\r\n        types = utils.trim(types).split(' ');\r\n        for (var i = 0, ti; ti = types[i++];) {\r\n            utils.removeItem(getListener(this, ti) || [], listener);\r\n        }\r\n    },\r\n    /**\r\n     * 触发事件\r\n     * @name fireEvent\r\n     * @grammar editor.fireEvent(types)  //types为事件名称，多个可用空格分隔\r\n     * @example\r\n     * editor.fireEvent(\"selectionchange\");\r\n     */\r\n    fireEvent:function () {\r\n        var types = arguments[0];\r\n        types = utils.trim(types).split(' ');\r\n        for (var i = 0, ti; ti = types[i++];) {\r\n            var listeners = getListener(this, ti),\r\n                r, t, k;\r\n            if (listeners) {\r\n                k = listeners.length;\r\n                while (k--) {\r\n                    if(!listeners[k])continue;\r\n                    t = listeners[k].apply(this, arguments);\r\n                    if(t === true){\r\n                        return t;\r\n                    }\r\n                    if (t !== undefined) {\r\n                        r = t;\r\n                    }\r\n                }\r\n            }\r\n            if (t = this['on' + ti.toLowerCase()]) {\r\n                r = t.apply(this, arguments);\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n};\r\n/**\r\n * 获得对象所拥有监听类型的所有监听器\r\n * @public\r\n * @function\r\n * @param {Object} obj  查询监听器的对象\r\n * @param {String} type 事件类型\r\n * @param {Boolean} force  为true且当前所有type类型的侦听器不存在时，创建一个空监听器数组\r\n * @returns {Array} 监听器数组\r\n */\r\nfunction getListener(obj, type, force) {\r\n    var allListeners;\r\n    type = type.toLowerCase();\r\n    return ( ( allListeners = ( obj.__allListeners || force && ( obj.__allListeners = {} ) ) )\r\n        && ( allListeners[type] || force && ( allListeners[type] = [] ) ) );\r\n}\r\n\r\n\r\n///import editor.js\r\n///import core/dom/dom.js\r\n///import core/utils.js\r\n/**\r\n * dtd html语义化的体现类\r\n * @constructor\r\n * @namespace dtd\r\n */\r\nvar dtd = dom.dtd = (function() {\r\n    function _( s ) {\r\n        for (var k in s) {\r\n            s[k.toUpperCase()] = s[k];\r\n        }\r\n        return s;\r\n    }\r\n    var X = utils.extend2;\r\n    var A = _({isindex:1,fieldset:1}),\r\n        B = _({input:1,button:1,select:1,textarea:1,label:1}),\r\n        C = X( _({a:1}), B ),\r\n        D = X( {iframe:1}, C ),\r\n        E = _({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),\r\n        F = _({ins:1,del:1,script:1,style:1}),\r\n        G = X( _({b:1,acronym:1,bdo:1,'var':1,'#':1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}), F ),\r\n        H = X( _({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}), G ),\r\n        I = X( _({p:1}), H ),\r\n        J = X( _({iframe:1}), H, B ),\r\n        K = _({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,'#':1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),\r\n\r\n        L = X( _({a:0}), J ),//a不能被切开，所以把他\r\n        M = _({tr:1}),\r\n        N = _({'#':1}),\r\n        O = X( _({param:1}), K ),\r\n        P = X( _({form:1}), A, D, E, I ),\r\n        Q = _({li:1,ol:1,ul:1}),\r\n        R = _({style:1,script:1}),\r\n        S = _({base:1,link:1,meta:1,title:1}),\r\n        T = X( S, R ),\r\n        U = _({head:1,body:1}),\r\n        V = _({html:1});\r\n\r\n    var block = _({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),\r\n\r\n        empty =  _({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});\r\n\r\n    return  _({\r\n\r\n        // $ 表示自定的属性\r\n\r\n        // body外的元素列表.\r\n        $nonBodyContent: X( V, U, S ),\r\n\r\n        //块结构元素列表\r\n        $block : block,\r\n\r\n        //内联元素列表\r\n        $inline : L,\r\n\r\n        $inlineWithA : X(_({a:1}),L),\r\n\r\n        $body : X( _({script:1,style:1}), block ),\r\n\r\n        $cdata : _({script:1,style:1}),\r\n\r\n        //自闭和元素\r\n        $empty : empty,\r\n\r\n        //不是自闭合，但不能让range选中里边\r\n        $nonChild : _({iframe:1,textarea:1}),\r\n        //列表元素列表\r\n        $listItem : _({dd:1,dt:1,li:1}),\r\n\r\n        //列表根元素列表\r\n        $list: _({ul:1,ol:1,dl:1}),\r\n\r\n        //不能认为是空的元素\r\n        $isNotEmpty : _({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),\r\n\r\n        //如果没有子节点就可以删除的元素列表，像span,a\r\n        $removeEmpty : _({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1}),\r\n\r\n        $removeEmptyBlock : _({'p':1,'div':1}),\r\n\r\n        //在table元素里的元素列表\r\n        $tableContent : _({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),\r\n        //不转换的标签\r\n        $notTransContent : _({pre:1,script:1,style:1,textarea:1}),\r\n        html: U,\r\n        head: T,\r\n        style: N,\r\n        script: N,\r\n        body: P,\r\n        base: {},\r\n        link: {},\r\n        meta: {},\r\n        title: N,\r\n        col : {},\r\n        tr : _({td:1,th:1}),\r\n        img : {},\r\n        embed: {},\r\n        colgroup : _({thead:1,col:1,tbody:1,tr:1,tfoot:1}),\r\n        noscript : P,\r\n        td : P,\r\n        br : {},\r\n        th : P,\r\n        center : P,\r\n        kbd : L,\r\n        button : X( I, E ),\r\n        basefont : {},\r\n        h5 : L,\r\n        h4 : L,\r\n        samp : L,\r\n        h6 : L,\r\n        ol : Q,\r\n        h1 : L,\r\n        h3 : L,\r\n        option : N,\r\n        h2 : L,\r\n        form : X( A, D, E, I ),\r\n        select : _({optgroup:1,option:1}),\r\n        font : L,\r\n        ins : L,\r\n        menu : Q,\r\n        abbr : L,\r\n        label : L,\r\n        table : _({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),\r\n        code : L,\r\n        tfoot : M,\r\n        cite : L,\r\n        li : P,\r\n        input : {},\r\n        iframe : P,\r\n        strong : L,\r\n        textarea : N,\r\n        noframes : P,\r\n        big : L,\r\n        small : L,\r\n        //trace:\r\n        span :_({'#':1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),\r\n        hr : L,\r\n        dt : L,\r\n        sub : L,\r\n        optgroup : _({option:1}),\r\n        param : {},\r\n        bdo : L,\r\n        'var' : L,\r\n        div : P,\r\n        object : O,\r\n        sup : L,\r\n        dd : P,\r\n        strike : L,\r\n        area : {},\r\n        dir : Q,\r\n        map : X( _({area:1,form:1,p:1}), A, F, E ),\r\n        applet : O,\r\n        dl : _({dt:1,dd:1}),\r\n        del : L,\r\n        isindex : {},\r\n        fieldset : X( _({legend:1}), K ),\r\n        thead : M,\r\n        ul : Q,\r\n        acronym : L,\r\n        b : L,\r\n        a : X( _({a:1}), J ),\r\n        blockquote :X(_({td:1,tr:1,tbody:1,li:1}),P),\r\n        caption : L,\r\n        i : L,\r\n        u : L,\r\n        tbody : M,\r\n        s : L,\r\n        address : X( D, I ),\r\n        tt : L,\r\n        legend : L,\r\n        q : L,\r\n        pre : X( G, C ),\r\n        p : X(_({'a':1}),L),\r\n        em :L,\r\n        dfn : L\r\n    });\r\n})();\r\n\r\n/**\r\n * @file\r\n * @name UM.dom.domUtils\r\n * @short DomUtils\r\n * @import editor.js, core/utils.js,core/browser.js,core/dom/dtd.js\r\n * @desc UEditor封装的底层dom操作库\r\n */\r\n\r\nfunction getDomNode(node, start, ltr, startFromChild, fn, guard) {\r\n    var tmpNode = startFromChild && node[start],\r\n        parent;\r\n    !tmpNode && (tmpNode = node[ltr]);\r\n    while (!tmpNode && (parent = (parent || node).parentNode)) {\r\n        if (parent.tagName == 'BODY' || guard && !guard(parent)) {\r\n            return null;\r\n        }\r\n        tmpNode = parent[ltr];\r\n    }\r\n    if (tmpNode && fn && !fn(tmpNode)) {\r\n        return  getDomNode(tmpNode, start, ltr, false, fn);\r\n    }\r\n    return tmpNode;\r\n}\r\nvar attrFix = ie && browser.version < 9 ? {\r\n        tabindex: \"tabIndex\",\r\n        readonly: \"readOnly\",\r\n        \"for\": \"htmlFor\",\r\n        \"class\": \"className\",\r\n        maxlength: \"maxLength\",\r\n        cellspacing: \"cellSpacing\",\r\n        cellpadding: \"cellPadding\",\r\n        rowspan: \"rowSpan\",\r\n        colspan: \"colSpan\",\r\n        usemap: \"useMap\",\r\n        frameborder: \"frameBorder\"\r\n    } : {\r\n        tabindex: \"tabIndex\",\r\n        readonly: \"readOnly\"\r\n    },\r\n    styleBlock = utils.listToMap([\r\n        '-webkit-box', '-moz-box', 'block' ,\r\n        'list-item' , 'table' , 'table-row-group' ,\r\n        'table-header-group', 'table-footer-group' ,\r\n        'table-row' , 'table-column-group' , 'table-column' ,\r\n        'table-cell' , 'table-caption'\r\n    ]);\r\nvar domUtils = dom.domUtils = {\r\n    //节点常量\r\n    NODE_ELEMENT: 1,\r\n    NODE_DOCUMENT: 9,\r\n    NODE_TEXT: 3,\r\n    NODE_COMMENT: 8,\r\n    NODE_DOCUMENT_FRAGMENT: 11,\r\n\r\n    //位置关系\r\n    POSITION_IDENTICAL: 0,\r\n    POSITION_DISCONNECTED: 1,\r\n    POSITION_FOLLOWING: 2,\r\n    POSITION_PRECEDING: 4,\r\n    POSITION_IS_CONTAINED: 8,\r\n    POSITION_CONTAINS: 16,\r\n    //ie6使用其他的会有一段空白出现\r\n    fillChar: ie && browser.version == '6' ? '\\ufeff' : '\\u200B',\r\n    //-------------------------Node部分--------------------------------\r\n    keys: {\r\n        /*Backspace*/ 8: 1, /*Delete*/ 46: 1,\r\n        /*Shift*/ 16: 1, /*Ctrl*/ 17: 1, /*Alt*/ 18: 1,\r\n        37: 1, 38: 1, 39: 1, 40: 1,\r\n        13: 1 /*enter*/\r\n    },\r\n    breakParent:function (node, parent) {\r\n        var tmpNode,\r\n            parentClone = node,\r\n            clone = node,\r\n            leftNodes,\r\n            rightNodes;\r\n        do {\r\n            parentClone = parentClone.parentNode;\r\n            if (leftNodes) {\r\n                tmpNode = parentClone.cloneNode(false);\r\n                tmpNode.appendChild(leftNodes);\r\n                leftNodes = tmpNode;\r\n                tmpNode = parentClone.cloneNode(false);\r\n                tmpNode.appendChild(rightNodes);\r\n                rightNodes = tmpNode;\r\n            } else {\r\n                leftNodes = parentClone.cloneNode(false);\r\n                rightNodes = leftNodes.cloneNode(false);\r\n            }\r\n            while (tmpNode = clone.previousSibling) {\r\n                leftNodes.insertBefore(tmpNode, leftNodes.firstChild);\r\n            }\r\n            while (tmpNode = clone.nextSibling) {\r\n                rightNodes.appendChild(tmpNode);\r\n            }\r\n            clone = parentClone;\r\n        } while (parent !== parentClone);\r\n        tmpNode = parent.parentNode;\r\n        tmpNode.insertBefore(leftNodes, parent);\r\n        tmpNode.insertBefore(rightNodes, parent);\r\n        tmpNode.insertBefore(node, rightNodes);\r\n        domUtils.remove(parent);\r\n        return node;\r\n    },\r\n    trimWhiteTextNode:function (node) {\r\n        function remove(dir) {\r\n            var child;\r\n            while ((child = node[dir]) && child.nodeType == 3 && domUtils.isWhitespace(child)) {\r\n                node.removeChild(child);\r\n            }\r\n        }\r\n        remove('firstChild');\r\n        remove('lastChild');\r\n    },\r\n    /**\r\n     * 获取节点A相对于节点B的位置关系\r\n     * @name getPosition\r\n     * @grammar UM.dom.domUtils.getPosition(nodeA,nodeB)  =>  Number\r\n     * @example\r\n     *  switch (returnValue) {\r\n     *      case 0: //相等，同一节点\r\n     *      case 1: //无关，节点不相连\r\n     *      case 2: //跟随，即节点A头部位于节点B头部的后面\r\n     *      case 4: //前置，即节点A头部位于节点B头部的前面\r\n     *      case 8: //被包含，即节点A被节点B包含\r\n     *      case 10://组合类型，即节点A满足跟随节点B且被节点B包含。实际上，如果被包含，必定跟随，所以returnValue事实上不会存在8的情况。\r\n     *      case 16://包含，即节点A包含节点B\r\n     *      case 20://组合类型，即节点A满足前置节点A且包含节点B。同样，如果包含，必定前置，所以returnValue事实上也不会存在16的情况\r\n     *  }\r\n     */\r\n    getPosition: function (nodeA, nodeB) {\r\n        // 如果两个节点是同一个节点\r\n        if (nodeA === nodeB) {\r\n            // domUtils.POSITION_IDENTICAL\r\n            return 0;\r\n        }\r\n        var node,\r\n            parentsA = [nodeA],\r\n            parentsB = [nodeB];\r\n        node = nodeA;\r\n        while (node = node.parentNode) {\r\n            // 如果nodeB是nodeA的祖先节点\r\n            if (node === nodeB) {\r\n                // domUtils.POSITION_IS_CONTAINED + domUtils.POSITION_FOLLOWING\r\n                return 10;\r\n            }\r\n            parentsA.push(node);\r\n        }\r\n        node = nodeB;\r\n        while (node = node.parentNode) {\r\n            // 如果nodeA是nodeB的祖先节点\r\n            if (node === nodeA) {\r\n                // domUtils.POSITION_CONTAINS + domUtils.POSITION_PRECEDING\r\n                return 20;\r\n            }\r\n            parentsB.push(node);\r\n        }\r\n        parentsA.reverse();\r\n        parentsB.reverse();\r\n        if (parentsA[0] !== parentsB[0]) {\r\n            // domUtils.POSITION_DISCONNECTED\r\n            return 1;\r\n        }\r\n        var i = -1;\r\n        while (i++, parentsA[i] === parentsB[i]) {\r\n        }\r\n        nodeA = parentsA[i];\r\n        nodeB = parentsB[i];\r\n        while (nodeA = nodeA.nextSibling) {\r\n            if (nodeA === nodeB) {\r\n                // domUtils.POSITION_PRECEDING\r\n                return 4\r\n            }\r\n        }\r\n        // domUtils.POSITION_FOLLOWING\r\n        return  2;\r\n    },\r\n\r\n    /**\r\n     * 返回节点node在父节点中的索引位置\r\n     * @name getNodeIndex\r\n     * @grammar UM.dom.domUtils.getNodeIndex(node)  => Number  //索引值从0开始\r\n     */\r\n    getNodeIndex: function (node, ignoreTextNode) {\r\n        var preNode = node,\r\n            i = 0;\r\n        while (preNode = preNode.previousSibling) {\r\n            if (ignoreTextNode && preNode.nodeType == 3) {\r\n                if (preNode.nodeType != preNode.nextSibling.nodeType) {\r\n                    i++;\r\n                }\r\n                continue;\r\n            }\r\n            i++;\r\n        }\r\n        return i;\r\n    },\r\n\r\n    /**\r\n     * 检测节点node是否在节点doc的树上，实质上是检测是否被doc包含\r\n     * @name inDoc\r\n     * @grammar UM.dom.domUtils.inDoc(node,doc)   =>  true|false\r\n     */\r\n    inDoc: function (node, doc) {\r\n        return domUtils.getPosition(node, doc) == 10;\r\n    },\r\n    /**\r\n     * 查找node节点的祖先节点\r\n     * @name findParent\r\n     * @grammar UM.dom.domUtils.findParent(node)  => Element  // 直接返回node节点的父节点\r\n     * @grammar UM.dom.domUtils.findParent(node,filterFn)  => Element  //filterFn为过滤函数，node作为参数，返回true时才会将node作为符合要求的节点返回\r\n     * @grammar UM.dom.domUtils.findParent(node,filterFn,includeSelf)  => Element  //includeSelf指定是否包含自身\r\n     */\r\n    findParent: function (node, filterFn, includeSelf) {\r\n        if (node && !domUtils.isBody(node)) {\r\n            node = includeSelf ? node : node.parentNode;\r\n            while (node) {\r\n                if (!filterFn || filterFn(node) || domUtils.isBody(node)) {\r\n                    return filterFn && !filterFn(node) && domUtils.isBody(node) ? null : node;\r\n                }\r\n                node = node.parentNode;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    /**\r\n     * 通过tagName查找node节点的祖先节点\r\n     * @name findParentByTagName\r\n     * @grammar UM.dom.domUtils.findParentByTagName(node,tagNames)   =>  Element  //tagNames支持数组，区分大小写\r\n     * @grammar UM.dom.domUtils.findParentByTagName(node,tagNames,includeSelf)   =>  Element  //includeSelf指定是否包含自身\r\n     * @grammar UM.dom.domUtils.findParentByTagName(node,tagNames,includeSelf,excludeFn)   =>  Element  //excludeFn指定例外过滤条件，返回true时忽略该节点\r\n     */\r\n    findParentByTagName: function (node, tagNames, includeSelf, excludeFn) {\r\n        tagNames = utils.listToMap(utils.isArray(tagNames) ? tagNames : [tagNames]);\r\n        return domUtils.findParent(node, function (node) {\r\n            return tagNames[node.tagName] && !(excludeFn && excludeFn(node));\r\n        }, includeSelf);\r\n    },\r\n    /**\r\n     * 查找节点node的祖先节点集合\r\n     * @name findParents\r\n     * @grammar UM.dom.domUtils.findParents(node)  => Array  //返回一个祖先节点数组集合，不包含自身\r\n     * @grammar UM.dom.domUtils.findParents(node,includeSelf)  => Array  //返回一个祖先节点数组集合，includeSelf指定是否包含自身\r\n     * @grammar UM.dom.domUtils.findParents(node,includeSelf,filterFn)  => Array  //返回一个祖先节点数组集合，filterFn指定过滤条件，返回true的node将被选取\r\n     * @grammar UM.dom.domUtils.findParents(node,includeSelf,filterFn,closerFirst)  => Array  //返回一个祖先节点数组集合，closerFirst为true的话，node的直接父亲节点是数组的第0个\r\n     */\r\n    findParents: function (node, includeSelf, filterFn, closerFirst) {\r\n        var parents = includeSelf && ( filterFn && filterFn(node) || !filterFn ) ? [node] : [];\r\n        while (node = domUtils.findParent(node, filterFn)) {\r\n            parents.push(node);\r\n        }\r\n        return closerFirst ? parents : parents.reverse();\r\n    },\r\n\r\n    /**\r\n     * 在节点node后面插入新节点newNode\r\n     * @name insertAfter\r\n     * @grammar UM.dom.domUtils.insertAfter(node,newNode)  => newNode\r\n     */\r\n    insertAfter: function (node, newNode) {\r\n        return node.parentNode.insertBefore(newNode, node.nextSibling);\r\n    },\r\n\r\n    /**\r\n     * 删除节点node，并根据keepChildren指定是否保留子节点\r\n     * @name remove\r\n     * @grammar UM.dom.domUtils.remove(node)  =>  node\r\n     * @grammar UM.dom.domUtils.remove(node,keepChildren)  =>  node\r\n     */\r\n    remove: function (node, keepChildren) {\r\n\r\n        var parent = node.parentNode,\r\n            child;\r\n        if (parent) {\r\n            if (keepChildren && node.hasChildNodes()) {\r\n                while (child = node.firstChild) {\r\n                    parent.insertBefore(child, node);\r\n                }\r\n            }\r\n            parent.removeChild(node);\r\n        }\r\n        return node;\r\n    },\r\n\r\n\r\n    /**\r\n     * 取得node节点的下一个兄弟节点， 如果该节点其后没有兄弟节点， 则递归查找其父节点之后的第一个兄弟节点，\r\n     * 直到找到满足条件的节点或者递归到BODY节点之后才会结束。\r\n     * @method getNextDomNode\r\n     * @param { Node } node 需要获取其后的兄弟节点的节点对象\r\n     * @return { Node | NULL } 如果找满足条件的节点， 则返回该节点， 否则返回NULL\r\n     * @example\r\n     * ```html\r\n     *     <body>\r\n     *      <div id=\"test\">\r\n     *          <span></span>\r\n     *      </div>\r\n     *      <i>xxx</i>\r\n     * </body>\r\n     * <script>\r\n     *\r\n     *     //output: i节点\r\n     *     console.log( UE.dom.domUtils.getNextDomNode( document.getElementById( \"test\" ) ) );\r\n     *\r\n     * </script>\r\n     * ```\r\n     * @example\r\n     * ```html\r\n     * <body>\r\n     *      <div>\r\n     *          <span></span>\r\n     *          <i id=\"test\">xxx</i>\r\n     *      </div>\r\n     *      <b>xxx</b>\r\n     * </body>\r\n     * <script>\r\n     *\r\n     *     //由于id为test的i节点之后没有兄弟节点， 则查找其父节点（div）后面的兄弟节点\r\n     *     //output: b节点\r\n     *     console.log( UE.dom.domUtils.getNextDomNode( document.getElementById( \"test\" ) ) );\r\n     *\r\n     * </script>\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 取得node节点的下一个兄弟节点， 如果startFromChild的值为ture，则先获取其子节点，\r\n     * 如果有子节点则直接返回第一个子节点；如果没有子节点或者startFromChild的值为false，\r\n     * 则执行<a href=\"#UE.dom.domUtils.getNextDomNode(Node)\">getNextDomNode(Node node)</a>的查找过程。\r\n     * @method getNextDomNode\r\n     * @param { Node } node 需要获取其后的兄弟节点的节点对象\r\n     * @param { Boolean } startFromChild 查找过程是否从其子节点开始\r\n     * @return { Node | NULL } 如果找满足条件的节点， 则返回该节点， 否则返回NULL\r\n     * @see UE.dom.domUtils.getNextDomNode(Node)\r\n     */\r\n    getNextDomNode:function (node, startFromChild, filterFn, guard) {\r\n        return getDomNode(node, 'firstChild', 'nextSibling', startFromChild, filterFn, guard);\r\n    },\r\n    getPreDomNode:function (node, startFromChild, filterFn, guard) {\r\n        return getDomNode(node, 'lastChild', 'previousSibling', startFromChild, filterFn, guard);\r\n    },\r\n\r\n    /**\r\n     * 检测节点node是否属于bookmark节点\r\n     * @name isBookmarkNode\r\n     * @grammar UM.dom.domUtils.isBookmarkNode(node)  => true|false\r\n     */\r\n    isBookmarkNode: function (node) {\r\n        return node.nodeType == 1 && node.id && /^_baidu_bookmark_/i.test(node.id);\r\n    },\r\n    /**\r\n     * 获取节点node所在的window对象\r\n     * @name  getWindow\r\n     * @grammar UM.dom.domUtils.getWindow(node)  => window对象\r\n     */\r\n    getWindow: function (node) {\r\n        var doc = node.ownerDocument || node;\r\n        return doc.defaultView || doc.parentWindow;\r\n    },\r\n\r\n    /**\r\n     * 获取离nodeA与nodeB最近的公共的祖先节点\r\n     * @method  getCommonAncestor\r\n     * @param { Node } nodeA 第一个节点\r\n     * @param { Node } nodeB 第二个节点\r\n     * @remind 如果给定的两个节点是同一个节点， 将直接返回该节点。\r\n     * @return { Node | NULL } 如果未找到公共节点， 返回NULL， 否则返回最近的公共祖先节点。\r\n     * @example\r\n     * ```javascript\r\n     * var commonAncestor = UE.dom.domUtils.getCommonAncestor( document.body, document.body.firstChild );\r\n     * //output: true\r\n     * console.log( commonAncestor.tagName.toLowerCase() === 'body' );\r\n     * ```\r\n     */\r\n    getCommonAncestor:function (nodeA, nodeB) {\r\n        if (nodeA === nodeB)\r\n            return nodeA;\r\n        var parentsA = [nodeA] , parentsB = [nodeB], parent = nodeA, i = -1;\r\n        while (parent = parent.parentNode) {\r\n            if (parent === nodeB) {\r\n                return parent;\r\n            }\r\n            parentsA.push(parent);\r\n        }\r\n        parent = nodeB;\r\n        while (parent = parent.parentNode) {\r\n            if (parent === nodeA)\r\n                return parent;\r\n            parentsB.push(parent);\r\n        }\r\n        parentsA.reverse();\r\n        parentsB.reverse();\r\n        while (i++, parentsA[i] === parentsB[i]) {\r\n        }\r\n        return i == 0 ? null : parentsA[i - 1];\r\n\r\n    },\r\n    /**\r\n     * 清除node节点左右连续为空的兄弟inline节点\r\n     * @method clearEmptySibling\r\n     * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n     * 则这些兄弟节点将被删除\r\n     * @grammar UE.dom.domUtils.clearEmptySibling(node,ignoreNext)  //ignoreNext指定是否忽略右边空节点\r\n     * @grammar UE.dom.domUtils.clearEmptySibling(node,ignoreNext,ignorePre)  //ignorePre指定是否忽略左边空节点\r\n     * @example\r\n     * ```html\r\n     * <body>\r\n     *     <div></div>\r\n     *     <span id=\"test\"></span>\r\n     *     <i></i>\r\n     *     <b></b>\r\n     *     <em>xxx</em>\r\n     *     <span></span>\r\n     * </body>\r\n     * <script>\r\n     *\r\n     *      UE.dom.domUtils.clearEmptySibling( document.getElementById( \"test\" ) );\r\n     *\r\n     *      //output: <div></div><span id=\"test\"></span><em>xxx</em><span></span>\r\n     *      console.log( document.body.innerHTML );\r\n     *\r\n     * </script>\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 清除node节点左右连续为空的兄弟inline节点， 如果ignoreNext的值为true，\r\n     * 则忽略对右边兄弟节点的操作。\r\n     * @method clearEmptySibling\r\n     * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n     * @param { Boolean } ignoreNext 是否忽略忽略对右边的兄弟节点的操作\r\n     * 则这些兄弟节点将被删除\r\n     * @see UE.dom.domUtils.clearEmptySibling(Node)\r\n     */\r\n\r\n    /**\r\n     * 清除node节点左右连续为空的兄弟inline节点， 如果ignoreNext的值为true，\r\n     * 则忽略对右边兄弟节点的操作， 如果ignorePre的值为true，则忽略对左边兄弟节点的操作。\r\n     * @method clearEmptySibling\r\n     * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n     * @param { Boolean } ignoreNext 是否忽略忽略对右边的兄弟节点的操作\r\n     * @param { Boolean } ignorePre 是否忽略忽略对左边的兄弟节点的操作\r\n     * 则这些兄弟节点将被删除\r\n     * @see UE.dom.domUtils.clearEmptySibling(Node)\r\n     */\r\n    clearEmptySibling:function (node, ignoreNext, ignorePre) {\r\n        function clear(next, dir) {\r\n            var tmpNode;\r\n            while (next && !domUtils.isBookmarkNode(next) && (domUtils.isEmptyInlineElement(next)\r\n                //这里不能把空格算进来会吧空格干掉，出现文字间的空格丢掉了\r\n                || !new RegExp('[^\\t\\n\\r' + domUtils.fillChar + ']').test(next.nodeValue) )) {\r\n                tmpNode = next[dir];\r\n                domUtils.remove(next);\r\n                next = tmpNode;\r\n            }\r\n        }\r\n        !ignoreNext && clear(node.nextSibling, 'nextSibling');\r\n        !ignorePre && clear(node.previousSibling, 'previousSibling');\r\n    },\r\n\r\n    /**\r\n     * 将一个文本节点node拆分成两个文本节点，offset指定拆分位置\r\n     * @name split\r\n     * @grammar UM.dom.domUtils.split(node,offset)  =>  TextNode  //返回从切分位置开始的后一个文本节点\r\n     */\r\n    split: function (node, offset) {\r\n        var doc = node.ownerDocument;\r\n        if (browser.ie && offset == node.nodeValue.length) {\r\n            var next = doc.createTextNode('');\r\n            return domUtils.insertAfter(node, next);\r\n        }\r\n        var retval = node.splitText(offset);\r\n        //ie8下splitText不会跟新childNodes,我们手动触发他的更新\r\n        if (browser.ie8) {\r\n            var tmpNode = doc.createTextNode('');\r\n            domUtils.insertAfter(retval, tmpNode);\r\n            domUtils.remove(tmpNode);\r\n        }\r\n        return retval;\r\n    },\r\n\r\n    /**\r\n     * 检测节点node是否为空节点（包括空格、换行、占位符等字符）\r\n     * @name  isWhitespace\r\n     * @grammar  UM.dom.domUtils.isWhitespace(node)  => true|false\r\n     */\r\n    isWhitespace: function (node) {\r\n        return !new RegExp('[^ \\t\\n\\r' + domUtils.fillChar + ']').test(node.nodeValue);\r\n    },\r\n    /**\r\n     * 获取元素element相对于viewport的位置坐标\r\n     * @name getXY\r\n     * @grammar UM.dom.domUtils.getXY(element)  => Object //返回坐标对象{x:left,y:top}\r\n     */\r\n    getXY: function (element) {\r\n        var x = 0, y = 0;\r\n        while (element.offsetParent) {\r\n            y += element.offsetTop;\r\n            x += element.offsetLeft;\r\n            element = element.offsetParent;\r\n        }\r\n        return { 'x': x, 'y': y};\r\n    },\r\n    /**\r\n     * 检查节点node是否是空inline节点\r\n     * @name  isEmptyInlineElement\r\n     * @grammar   UM.dom.domUtils.isEmptyInlineElement(node)  => 1|0\r\n     * @example\r\n     * <b><i></i></b> => 1\r\n     * <b><i></i><u></u></b> => 1\r\n     * <b></b> => 1\r\n     * <b>xx<i></i></b> => 0\r\n     */\r\n    isEmptyInlineElement: function (node) {\r\n        if (node.nodeType != 1 || !dtd.$removeEmpty[ node.tagName ]) {\r\n            return 0;\r\n        }\r\n        node = node.firstChild;\r\n        while (node) {\r\n            //如果是创建的bookmark就跳过\r\n            if (domUtils.isBookmarkNode(node)) {\r\n                return 0;\r\n            }\r\n            if (node.nodeType == 1 && !domUtils.isEmptyInlineElement(node) ||\r\n                node.nodeType == 3 && !domUtils.isWhitespace(node)\r\n                ) {\r\n                return 0;\r\n            }\r\n            node = node.nextSibling;\r\n        }\r\n        return 1;\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 检查节点node是否为块元素\r\n     * @name isBlockElm\r\n     * @grammar UM.dom.domUtils.isBlockElm(node)  => true|false\r\n     */\r\n    isBlockElm: function (node) {\r\n        return node.nodeType == 1 && (dtd.$block[node.tagName] || styleBlock[domUtils.getComputedStyle(node, 'display')]) && !dtd.$nonChild[node.tagName];\r\n    },\r\n\r\n\r\n    /**\r\n     * 原生方法getElementsByTagName的封装\r\n     * @name getElementsByTagName\r\n     * @grammar UM.dom.domUtils.getElementsByTagName(node,tagName)  => Array  //节点集合数组\r\n     */\r\n    getElementsByTagName: function (node, name, filter) {\r\n        if (filter && utils.isString(filter)) {\r\n            var className = filter;\r\n            filter = function (node) {\r\n                var result = false;\r\n                $.each(utils.trim(className).replace(/[ ]{2,}/g, ' ').split(' '), function (i, v) {\r\n                    if ($(node).hasClass(v)) {\r\n                        result = true;\r\n                        return false;\r\n                    }\r\n                })\r\n                return result;\r\n            }\r\n        }\r\n        name = utils.trim(name).replace(/[ ]{2,}/g, ' ').split(' ');\r\n        var arr = [];\r\n        for (var n = 0, ni; ni = name[n++];) {\r\n            var list = node.getElementsByTagName(ni);\r\n            for (var i = 0, ci; ci = list[i++];) {\r\n                if (!filter || filter(ci))\r\n                    arr.push(ci);\r\n            }\r\n        }\r\n        return arr;\r\n    },\r\n\r\n\r\n    /**\r\n     * 设置节点node及其子节点不会被选中\r\n     * @name unSelectable\r\n     * @grammar UM.dom.domUtils.unSelectable(node)\r\n     */\r\n    unSelectable: ie && browser.ie9below || browser.opera ? function (node) {\r\n        //for ie9\r\n        node.onselectstart = function () {\r\n            return false;\r\n        };\r\n        node.onclick = node.onkeyup = node.onkeydown = function () {\r\n            return false;\r\n        };\r\n        node.unselectable = 'on';\r\n        node.setAttribute(\"unselectable\", \"on\");\r\n        for (var i = 0, ci; ci = node.all[i++];) {\r\n            switch (ci.tagName.toLowerCase()) {\r\n                case 'iframe' :\r\n                case 'textarea' :\r\n                case 'input' :\r\n                case 'select' :\r\n                    break;\r\n                default :\r\n                    ci.unselectable = 'on';\r\n                    node.setAttribute(\"unselectable\", \"on\");\r\n            }\r\n        }\r\n    } : function (node) {\r\n        node.style.MozUserSelect =\r\n            node.style.webkitUserSelect =\r\n                    node.style.msUserSelect =\r\n                        node.style.KhtmlUserSelect = 'none';\r\n    },\r\n    /**\r\n     * 删除节点node上的属性attrNames，attrNames为属性名称数组\r\n     * @name  removeAttributes\r\n     * @grammar UM.dom.domUtils.removeAttributes(node,attrNames)\r\n     * @example\r\n     * //Before remove\r\n     * <span style=\"font-size:14px;\" id=\"test\" name=\"followMe\">xxxxx</span>\r\n     * //Remove\r\n     * UM.dom.domUtils.removeAttributes(node,[\"id\",\"name\"]);\r\n     * //After remove\r\n     * <span style=\"font-size:14px;\">xxxxx</span>\r\n     */\r\n    removeAttributes: function (node, attrNames) {\r\n        attrNames = utils.isArray(attrNames) ? attrNames : utils.trim(attrNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n        for (var i = 0, ci; ci = attrNames[i++];) {\r\n            ci = attrFix[ci] || ci;\r\n            switch (ci) {\r\n                case 'className':\r\n                    node[ci] = '';\r\n                    break;\r\n                case 'style':\r\n                    node.style.cssText = '';\r\n                    !browser.ie && node.removeAttributeNode(node.getAttributeNode('style'))\r\n            }\r\n            node.removeAttribute(ci);\r\n        }\r\n    },\r\n    /**\r\n     * 在doc下创建一个标签名为tag，属性为attrs的元素\r\n     * @name createElement\r\n     * @grammar UM.dom.domUtils.createElement(doc,tag,attrs)  =>  Node  //返回创建的节点\r\n     */\r\n    createElement: function (doc, tag, attrs) {\r\n        return domUtils.setAttributes(doc.createElement(tag), attrs)\r\n    },\r\n    /**\r\n     * 为节点node添加属性attrs，attrs为属性键值对\r\n     * @name setAttributes\r\n     * @grammar UM.dom.domUtils.setAttributes(node,attrs)  => node\r\n     */\r\n    setAttributes: function (node, attrs) {\r\n        for (var attr in attrs) {\r\n            if (attrs.hasOwnProperty(attr)) {\r\n                var value = attrs[attr];\r\n                switch (attr) {\r\n                    case 'class':\r\n                        //ie下要这样赋值，setAttribute不起作用\r\n                        node.className = value;\r\n                        break;\r\n                    case 'style' :\r\n                        node.style.cssText = node.style.cssText + \";\" + value;\r\n                        break;\r\n                    case 'innerHTML':\r\n                        node[attr] = value;\r\n                        break;\r\n                    case 'value':\r\n                        node.value = value;\r\n                        break;\r\n                    default:\r\n                        node.setAttribute(attrFix[attr] || attr, value);\r\n                }\r\n            }\r\n        }\r\n        return node;\r\n    },\r\n\r\n    /**\r\n     * 获取元素element的计算样式\r\n     * @name getComputedStyle\r\n     * @grammar UM.dom.domUtils.getComputedStyle(element,styleName)  => String //返回对应样式名称的样式值\r\n     * @example\r\n     * getComputedStyle(document.body,\"font-size\")  =>  \"15px\"\r\n     * getComputedStyle(form,\"color\")  =>  \"#ffccdd\"\r\n     */\r\n    getComputedStyle: function (element, styleName) {\r\n        return utils.transUnitToPx(utils.fixColor(styleName, $(element).css(styleName)));\r\n    },\r\n\r\n    /**\r\n     * 阻止事件默认行为\r\n     * @param {Event} evt    需要组织的事件对象\r\n     */\r\n    preventDefault: function (evt) {\r\n        evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n    },\r\n\r\n    /**\r\n     * 删除元素element指定的样式\r\n     * @method removeStyle\r\n     * @param { Element } element 需要删除样式的元素\r\n     * @param { String } styleName 需要删除的样式名\r\n     * @example\r\n     * ```html\r\n     * <span id=\"test\" style=\"color: red; background: blue;\"></span>\r\n     *\r\n     * <script>\r\n     *\r\n     *     var testNode = document.getElementById(\"test\");\r\n     *\r\n     *     UE.dom.domUtils.removeStyle( testNode, 'color' );\r\n     *\r\n     *     //output: background: blue;\r\n     *     console.log( testNode.style.cssText );\r\n     *\r\n     * </script>\r\n     * ```\r\n     */\r\n    removeStyle:function (element, name) {\r\n        if(browser.ie ){\r\n            //针对color先单独处理一下\r\n            if(name == 'color'){\r\n                name = '(^|;)' + name;\r\n            }\r\n            element.style.cssText = element.style.cssText.replace(new RegExp(name + '[^:]*:[^;]+;?','ig'),'')\r\n        }else{\r\n            if (element.style.removeProperty) {\r\n                element.style.removeProperty (name);\r\n            }else {\r\n                element.style.removeAttribute (utils.cssStyleToDomStyle(name));\r\n            }\r\n        }\r\n\r\n\r\n        if (!element.style.cssText) {\r\n            domUtils.removeAttributes(element, ['style']);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 获取元素element的某个样式值\r\n     * @name getStyle\r\n     * @grammar UM.dom.domUtils.getStyle(element,name)  => String\r\n     */\r\n    getStyle: function (element, name) {\r\n        var value = element.style[ utils.cssStyleToDomStyle(name) ];\r\n        return utils.fixColor(name, value);\r\n    },\r\n    /**\r\n     * 为元素element设置样式属性值\r\n     * @name setStyle\r\n     * @grammar UM.dom.domUtils.setStyle(element,name,value)\r\n     */\r\n    setStyle: function (element, name, value) {\r\n        element.style[utils.cssStyleToDomStyle(name)] = value;\r\n        if (!utils.trim(element.style.cssText)) {\r\n            this.removeAttributes(element, 'style')\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 删除_moz_dirty属性\r\n     * @function\r\n     */\r\n    removeDirtyAttr: function (node) {\r\n        for (var i = 0, ci, nodes = node.getElementsByTagName('*'); ci = nodes[i++];) {\r\n            ci.removeAttribute('_moz_dirty');\r\n        }\r\n        node.removeAttribute('_moz_dirty');\r\n    },\r\n    /**\r\n     * 返回子节点的数量\r\n     * @function\r\n     * @param {Node}    node    父节点\r\n     * @param  {Function}    fn    过滤子节点的规则，若为空，则得到所有子节点的数量\r\n     * @return {Number}    符合条件子节点的数量\r\n     */\r\n    getChildCount: function (node, fn) {\r\n        var count = 0, first = node.firstChild;\r\n        fn = fn || function () {\r\n            return 1;\r\n        };\r\n        while (first) {\r\n            if (fn(first)) {\r\n                count++;\r\n            }\r\n            first = first.nextSibling;\r\n        }\r\n        return count;\r\n    },\r\n\r\n    /**\r\n     * 判断是否为空节点\r\n     * @function\r\n     * @param {Node}    node    节点\r\n     * @return {Boolean}    是否为空节点\r\n     */\r\n    isEmptyNode: function (node) {\r\n        return !node.firstChild || domUtils.getChildCount(node, function (node) {\r\n            return  !domUtils.isBr(node) && !domUtils.isBookmarkNode(node) && !domUtils.isWhitespace(node)\r\n        }) == 0\r\n    },\r\n\r\n    /**\r\n     * 判断节点是否为br\r\n     * @function\r\n     * @param {Node}    node   节点\r\n     */\r\n    isBr: function (node) {\r\n        return node.nodeType == 1 && node.tagName == 'BR';\r\n    },\r\n    isFillChar: function (node, isInStart) {\r\n        return node.nodeType == 3 && !node.nodeValue.replace(new RegExp((isInStart ? '^' : '' ) + domUtils.fillChar), '').length\r\n    },\r\n\r\n    isEmptyBlock: function (node, reg) {\r\n        if (node.nodeType != 1)\r\n            return 0;\r\n        reg = reg || new RegExp('[ \\t\\r\\n' + domUtils.fillChar + ']', 'g');\r\n        if (node[browser.ie ? 'innerText' : 'textContent'].replace(reg, '').length > 0) {\r\n            return 0;\r\n        }\r\n        for (var n in dtd.$isNotEmpty) {\r\n            if (node.getElementsByTagName(n).length) {\r\n                return 0;\r\n            }\r\n        }\r\n        return 1;\r\n    },\r\n\r\n    //判断是否是编辑器自定义的参数\r\n    isCustomeNode: function (node) {\r\n        return node.nodeType == 1 && node.getAttribute('_ue_custom_node_');\r\n    },\r\n    fillNode: function (doc, node) {\r\n        var tmpNode = browser.ie ? doc.createTextNode(domUtils.fillChar) : doc.createElement('br');\r\n        node.innerHTML = '';\r\n        node.appendChild(tmpNode);\r\n    },\r\n    isBoundaryNode: function (node, dir) {\r\n        var tmp;\r\n        while (!domUtils.isBody(node)) {\r\n            tmp = node;\r\n            node = node.parentNode;\r\n            if (tmp !== node[dir]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    isFillChar: function (node, isInStart) {\r\n        return node.nodeType == 3 && !node.nodeValue.replace(new RegExp((isInStart ? '^' : '' ) + domUtils.fillChar), '').length\r\n    },\r\n    isBody: function(node){\r\n        return $(node).hasClass('edui-body-container');\r\n    }\r\n};\r\nvar fillCharReg = new RegExp(domUtils.fillChar, 'g');\r\n///import editor.js\r\n///import core/utils.js\r\n///import core/browser.js\r\n///import core/dom/dom.js\r\n///import core/dom/dtd.js\r\n///import core/dom/domUtils.js\r\n/**\r\n * @file\r\n * @name UM.dom.Range\r\n * @anthor zhanyi\r\n * @short Range\r\n * @import editor.js,core/utils.js,core/browser.js,core/dom/domUtils.js,core/dom/dtd.js\r\n * @desc Range范围实现类，本类是UEditor底层核心类，统一w3cRange和ieRange之间的差异，包括接口和属性\r\n */\r\n(function () {\r\n    var guid = 0,\r\n        fillChar = domUtils.fillChar,\r\n        fillData;\r\n\r\n    /**\r\n     * 更新range的collapse状态\r\n     * @param  {Range}   range    range对象\r\n     */\r\n    function updateCollapse(range) {\r\n        range.collapsed =\r\n            range.startContainer && range.endContainer &&\r\n                range.startContainer === range.endContainer &&\r\n                range.startOffset == range.endOffset;\r\n    }\r\n\r\n    function selectOneNode(rng){\r\n        return !rng.collapsed && rng.startContainer.nodeType == 1 && rng.startContainer === rng.endContainer && rng.endOffset - rng.startOffset == 1\r\n    }\r\n    function setEndPoint(toStart, node, offset, range) {\r\n        //如果node是自闭合标签要处理\r\n        if (node.nodeType == 1 && (dtd.$empty[node.tagName] || dtd.$nonChild[node.tagName])) {\r\n            offset = domUtils.getNodeIndex(node) + (toStart ? 0 : 1);\r\n            node = node.parentNode;\r\n        }\r\n        if (toStart) {\r\n            range.startContainer = node;\r\n            range.startOffset = offset;\r\n            if (!range.endContainer) {\r\n                range.collapse(true);\r\n            }\r\n        } else {\r\n            range.endContainer = node;\r\n            range.endOffset = offset;\r\n            if (!range.startContainer) {\r\n                range.collapse(false);\r\n            }\r\n        }\r\n        updateCollapse(range);\r\n        return range;\r\n    }\r\n\r\n\r\n    /**\r\n     * @name Range\r\n     * @grammar new UM.dom.Range(document)  => Range 实例\r\n     * @desc 创建一个跟document绑定的空的Range实例\r\n     * - ***startContainer*** 开始边界的容器节点,可以是elementNode或者是textNode\r\n     * - ***startOffset*** 容器节点中的偏移量，如果是elementNode就是childNodes中的第几个，如果是textNode就是nodeValue的第几个字符\r\n     * - ***endContainer*** 结束边界的容器节点,可以是elementNode或者是textNode\r\n     * - ***endOffset*** 容器节点中的偏移量，如果是elementNode就是childNodes中的第几个，如果是textNode就是nodeValue的第几个字符\r\n     * - ***document*** 跟range关联的document对象\r\n     * - ***collapsed*** 是否是闭合状态\r\n     */\r\n    var Range = dom.Range = function (document,body) {\r\n        var me = this;\r\n        me.startContainer =\r\n            me.startOffset =\r\n                me.endContainer =\r\n                    me.endOffset = null;\r\n        me.document = document;\r\n        me.collapsed = true;\r\n        me.body = body;\r\n    };\r\n\r\n    /**\r\n     * 删除fillData\r\n     * @param doc\r\n     * @param excludeNode\r\n     */\r\n    function removeFillData(doc, excludeNode) {\r\n        try {\r\n            if (fillData && domUtils.inDoc(fillData, doc)) {\r\n                if (!fillData.nodeValue.replace(fillCharReg, '').length) {\r\n                    var tmpNode = fillData.parentNode;\r\n                    domUtils.remove(fillData);\r\n                    while (tmpNode && domUtils.isEmptyInlineElement(tmpNode) &&\r\n                        //safari的contains有bug\r\n                        (browser.safari ? !(domUtils.getPosition(tmpNode,excludeNode) & domUtils.POSITION_CONTAINS) : !tmpNode.contains(excludeNode))\r\n                        ) {\r\n                        fillData = tmpNode.parentNode;\r\n                        domUtils.remove(tmpNode);\r\n                        tmpNode = fillData;\r\n                    }\r\n                } else {\r\n                    fillData.nodeValue = fillData.nodeValue.replace(fillCharReg, '');\r\n                }\r\n            }\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param node\r\n     * @param dir\r\n     */\r\n    function mergeSibling(node, dir) {\r\n        var tmpNode;\r\n        node = node[dir];\r\n        while (node && domUtils.isFillChar(node)) {\r\n            tmpNode = node[dir];\r\n            domUtils.remove(node);\r\n            node = tmpNode;\r\n        }\r\n    }\r\n\r\n    function execContentsAction(range, action) {\r\n        //调整边界\r\n        //range.includeBookmark();\r\n        var start = range.startContainer,\r\n            end = range.endContainer,\r\n            startOffset = range.startOffset,\r\n            endOffset = range.endOffset,\r\n            doc = range.document,\r\n            frag = doc.createDocumentFragment(),\r\n            tmpStart, tmpEnd;\r\n        if (start.nodeType == 1) {\r\n            start = start.childNodes[startOffset] || (tmpStart = start.appendChild(doc.createTextNode('')));\r\n        }\r\n        if (end.nodeType == 1) {\r\n            end = end.childNodes[endOffset] || (tmpEnd = end.appendChild(doc.createTextNode('')));\r\n        }\r\n        if (start === end && start.nodeType == 3) {\r\n            frag.appendChild(doc.createTextNode(start.substringData(startOffset, endOffset - startOffset)));\r\n            //is not clone\r\n            if (action) {\r\n                start.deleteData(startOffset, endOffset - startOffset);\r\n                range.collapse(true);\r\n            }\r\n            return frag;\r\n        }\r\n        var current, currentLevel, clone = frag,\r\n            startParents = domUtils.findParents(start, true), endParents = domUtils.findParents(end, true);\r\n        for (var i = 0; startParents[i] == endParents[i];) {\r\n            i++;\r\n        }\r\n        for (var j = i, si; si = startParents[j]; j++) {\r\n            current = si.nextSibling;\r\n            if (si == start) {\r\n                if (!tmpStart) {\r\n                    if (range.startContainer.nodeType == 3) {\r\n                        clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset)));\r\n                        //is not clone\r\n                        if (action) {\r\n                            start.deleteData(startOffset, start.nodeValue.length - startOffset);\r\n                        }\r\n                    } else {\r\n                        clone.appendChild(!action ? start.cloneNode(true) : start);\r\n                    }\r\n                }\r\n            } else {\r\n                currentLevel = si.cloneNode(false);\r\n                clone.appendChild(currentLevel);\r\n            }\r\n            while (current) {\r\n                if (current === end || current === endParents[j]) {\r\n                    break;\r\n                }\r\n                si = current.nextSibling;\r\n                clone.appendChild(!action ? current.cloneNode(true) : current);\r\n                current = si;\r\n            }\r\n            clone = currentLevel;\r\n        }\r\n        clone = frag;\r\n        if (!startParents[i]) {\r\n            clone.appendChild(startParents[i - 1].cloneNode(false));\r\n            clone = clone.firstChild;\r\n        }\r\n        for (var j = i, ei; ei = endParents[j]; j++) {\r\n            current = ei.previousSibling;\r\n            if (ei == end) {\r\n                if (!tmpEnd && range.endContainer.nodeType == 3) {\r\n                    clone.appendChild(doc.createTextNode(end.substringData(0, endOffset)));\r\n                    //is not clone\r\n                    if (action) {\r\n                        end.deleteData(0, endOffset);\r\n                    }\r\n                }\r\n            } else {\r\n                currentLevel = ei.cloneNode(false);\r\n                clone.appendChild(currentLevel);\r\n            }\r\n            //如果两端同级，右边第一次已经被开始做了\r\n            if (j != i || !startParents[i]) {\r\n                while (current) {\r\n                    if (current === start) {\r\n                        break;\r\n                    }\r\n                    ei = current.previousSibling;\r\n                    clone.insertBefore(!action ? current.cloneNode(true) : current, clone.firstChild);\r\n                    current = ei;\r\n                }\r\n            }\r\n            clone = currentLevel;\r\n        }\r\n        if (action) {\r\n            range.setStartBefore(!endParents[i] ? endParents[i - 1] : !startParents[i] ? startParents[i - 1] : endParents[i]).collapse(true);\r\n        }\r\n        tmpStart && domUtils.remove(tmpStart);\r\n        tmpEnd && domUtils.remove(tmpEnd);\r\n        return frag;\r\n    }\r\n    Range.prototype = {\r\n        /**\r\n         * @name deleteContents\r\n         * @grammar range.deleteContents()  => Range\r\n         * @desc 删除当前选区范围中的所有内容并返回range实例，这时的range已经变成了闭合状态\r\n         * @example\r\n         * DOM Element :\r\n         * <b>x<i>x[x<i>xx]x</b>\r\n         * //执行方法后\r\n         * <b>x<i>x<i>|x</b>\r\n         * 注意range改变了\r\n         * range.startContainer => b\r\n         * range.startOffset  => 2\r\n         * range.endContainer => b\r\n         * range.endOffset => 2\r\n         * range.collapsed => true\r\n         */\r\n        deleteContents:function () {\r\n            var txt;\r\n            if (!this.collapsed) {\r\n                execContentsAction(this, 1);\r\n            }\r\n            if (browser.webkit) {\r\n                txt = this.startContainer;\r\n                if (txt.nodeType == 3 && !txt.nodeValue.length) {\r\n                    this.setStartBefore(txt).collapse(true);\r\n                    domUtils.remove(txt);\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        inFillChar : function(){\r\n            var start = this.startContainer;\r\n            if(this.collapsed && start.nodeType == 3\r\n                && start.nodeValue.replace(new RegExp('^' + domUtils.fillChar),'').length + 1 == start.nodeValue.length\r\n                ){\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * @name  setStart\r\n         * @grammar range.setStart(node,offset)  => Range\r\n         * @desc    设置range的开始位置位于node节点内，偏移量为offset\r\n         * 如果node是elementNode那offset指的是childNodes中的第几个，如果是textNode那offset指的是nodeValue的第几个字符\r\n         */\r\n        setStart:function (node, offset) {\r\n            return setEndPoint(true, node, offset, this);\r\n        },\r\n        /**\r\n         * 设置range的结束位置位于node节点，偏移量为offset\r\n         * 如果node是elementNode那offset指的是childNodes中的第几个，如果是textNode那offset指的是nodeValue的第几个字符\r\n         * @name  setEnd\r\n         * @grammar range.setEnd(node,offset)  => Range\r\n         */\r\n        setEnd:function (node, offset) {\r\n            return setEndPoint(false, node, offset, this);\r\n        },\r\n        /**\r\n         * 将Range开始位置设置到node节点之后\r\n         * @name  setStartAfter\r\n         * @grammar range.setStartAfter(node)  => Range\r\n         * @example\r\n         * <b>xx<i>x|x</i>x</b>\r\n         * 执行setStartAfter(i)后\r\n         * range.startContainer =>b\r\n         * range.startOffset =>2\r\n         */\r\n        setStartAfter:function (node) {\r\n            return this.setStart(node.parentNode, domUtils.getNodeIndex(node) + 1);\r\n        },\r\n        /**\r\n         * 将Range开始位置设置到node节点之前\r\n         * @name  setStartBefore\r\n         * @grammar range.setStartBefore(node)  => Range\r\n         * @example\r\n         * <b>xx<i>x|x</i>x</b>\r\n         * 执行setStartBefore(i)后\r\n         * range.startContainer =>b\r\n         * range.startOffset =>1\r\n         */\r\n        setStartBefore:function (node) {\r\n            return this.setStart(node.parentNode, domUtils.getNodeIndex(node));\r\n        },\r\n        /**\r\n         * 将Range结束位置设置到node节点之后\r\n         * @name  setEndAfter\r\n         * @grammar range.setEndAfter(node)  => Range\r\n         * @example\r\n         * <b>xx<i>x|x</i>x</b>\r\n         * setEndAfter(i)后\r\n         * range.endContainer =>b\r\n         * range.endtOffset =>2\r\n         */\r\n        setEndAfter:function (node) {\r\n            return this.setEnd(node.parentNode, domUtils.getNodeIndex(node) + 1);\r\n        },\r\n        /**\r\n         * 将Range结束位置设置到node节点之前\r\n         * @name  setEndBefore\r\n         * @grammar range.setEndBefore(node)  => Range\r\n         * @example\r\n         * <b>xx<i>x|x</i>x</b>\r\n         * 执行setEndBefore(i)后\r\n         * range.endContainer =>b\r\n         * range.endtOffset =>1\r\n         */\r\n        setEndBefore:function (node) {\r\n            return this.setEnd(node.parentNode, domUtils.getNodeIndex(node));\r\n        },\r\n        /**\r\n         * 将Range开始位置设置到node节点内的开始位置\r\n         * @name  setStartAtFirst\r\n         * @grammar range.setStartAtFirst(node)  => Range\r\n         */\r\n        setStartAtFirst:function (node) {\r\n            return this.setStart(node, 0);\r\n        },\r\n        /**\r\n         * 将Range开始位置设置到node节点内的结束位置\r\n         * @name  setStartAtLast\r\n         * @grammar range.setStartAtLast(node)  => Range\r\n         */\r\n        setStartAtLast:function (node) {\r\n            return this.setStart(node, node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length);\r\n        },\r\n        /**\r\n         * 将Range结束位置设置到node节点内的开始位置\r\n         * @name  setEndAtFirst\r\n         * @grammar range.setEndAtFirst(node)  => Range\r\n         */\r\n        setEndAtFirst:function (node) {\r\n            return this.setEnd(node, 0);\r\n        },\r\n        /**\r\n         * 将Range结束位置设置到node节点内的结束位置\r\n         * @name  setEndAtLast\r\n         * @grammar range.setEndAtLast(node)  => Range\r\n         */\r\n        setEndAtLast:function (node) {\r\n            return this.setEnd(node, node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length);\r\n        },\r\n\r\n        /**\r\n         * 选中完整的指定节点,并返回包含该节点的range\r\n         * @name  selectNode\r\n         * @grammar range.selectNode(node)  => Range\r\n         */\r\n        selectNode:function (node) {\r\n            return this.setStartBefore(node).setEndAfter(node);\r\n        },\r\n        /**\r\n         * 选中node内部的所有节点，并返回对应的range\r\n         * @name selectNodeContents\r\n         * @grammar range.selectNodeContents(node)  => Range\r\n         * @example\r\n         * <b>xx[x<i>xxx</i>]xxx</b>\r\n         * 执行后\r\n         * <b>[xxx<i>xxx</i>xxx]</b>\r\n         * range.startContainer =>b\r\n         * range.startOffset =>0\r\n         * range.endContainer =>b\r\n         * range.endOffset =>3\r\n         */\r\n        selectNodeContents:function (node) {\r\n            return this.setStart(node, 0).setEndAtLast(node);\r\n        },\r\n\r\n        /**\r\n         * 克隆一个新的range对象\r\n         * @name  cloneRange\r\n         * @grammar range.cloneRange() => Range\r\n         */\r\n        cloneRange:function () {\r\n            var me = this;\r\n            return new Range(me.document).setStart(me.startContainer, me.startOffset).setEnd(me.endContainer, me.endOffset);\r\n\r\n        },\r\n\r\n        /**\r\n         * 让选区闭合到尾部，若toStart为真，则闭合到头部\r\n         * @name  collapse\r\n         * @grammar range.collapse() => Range\r\n         * @grammar range.collapse(true) => Range   //闭合选区到头部\r\n         */\r\n        collapse:function (toStart) {\r\n            var me = this;\r\n            if (toStart) {\r\n                me.endContainer = me.startContainer;\r\n                me.endOffset = me.startOffset;\r\n            } else {\r\n                me.startContainer = me.endContainer;\r\n                me.startOffset = me.endOffset;\r\n            }\r\n            me.collapsed = true;\r\n            return me;\r\n        },\r\n\r\n        /**\r\n         * 调整range的边界，使其\"收缩\"到最小的位置\r\n         * @name  shrinkBoundary\r\n         * @grammar range.shrinkBoundary()  => Range  //range开始位置和结束位置都调整，参见<code><a href=\"#adjustmentboundary\">adjustmentBoundary</a></code>\r\n         * @grammar range.shrinkBoundary(true)  => Range  //仅调整开始位置，忽略结束位置\r\n         * @example\r\n         * <b>xx[</b>xxxxx] ==> <b>xx</b>[xxxxx]\r\n         * <b>x[xx</b><i>]xxx</i> ==> <b>x[xx]</b><i>xxx</i>\r\n         * [<b><i>xxxx</i>xxxxxxx</b>] ==> <b><i>[xxxx</i>xxxxxxx]</b>\r\n         */\r\n        shrinkBoundary:function (ignoreEnd) {\r\n            var me = this, child,\r\n                collapsed = me.collapsed;\r\n            function check(node){\r\n                return node.nodeType == 1 && !domUtils.isBookmarkNode(node) && !dtd.$empty[node.tagName] && !dtd.$nonChild[node.tagName]\r\n            }\r\n            while (me.startContainer.nodeType == 1 //是element\r\n                && (child = me.startContainer.childNodes[me.startOffset]) //子节点也是element\r\n                && check(child)) {\r\n                me.setStart(child, 0);\r\n            }\r\n            if (collapsed) {\r\n                return me.collapse(true);\r\n            }\r\n            if (!ignoreEnd) {\r\n                while (me.endContainer.nodeType == 1//是element\r\n                    && me.endOffset > 0 //如果是空元素就退出 endOffset=0那么endOffst-1为负值，childNodes[endOffset]报错\r\n                    && (child = me.endContainer.childNodes[me.endOffset - 1]) //子节点也是element\r\n                    && check(child)) {\r\n                    me.setEnd(child, child.childNodes.length);\r\n                }\r\n            }\r\n            return me;\r\n        },\r\n\r\n        /**\r\n         * 调整边界容器，如果是textNode,就调整到elementNode上\r\n         * @name trimBoundary\r\n         * @grammar range.trimBoundary([ignoreEnd])  => Range //true忽略结束边界\r\n         * @example\r\n         * DOM Element :\r\n         * <b>|xxx</b>\r\n         * startContainer = xxx; startOffset = 0\r\n         * //执行后本方法后\r\n         * startContainer = <b>;  startOffset = 0\r\n         * @example\r\n         * Dom Element :\r\n         * <b>xx|x</b>\r\n         * startContainer = xxx;  startOffset = 2\r\n         * //执行本方法后，xxx被实实在在地切分成两个TextNode\r\n         * startContainer = <b>; startOffset = 1\r\n         */\r\n        trimBoundary:function (ignoreEnd) {\r\n            this.txtToElmBoundary();\r\n            var start = this.startContainer,\r\n                offset = this.startOffset,\r\n                collapsed = this.collapsed,\r\n                end = this.endContainer;\r\n            if (start.nodeType == 3) {\r\n                if (offset == 0) {\r\n                    this.setStartBefore(start);\r\n                } else {\r\n                    if (offset >= start.nodeValue.length) {\r\n                        this.setStartAfter(start);\r\n                    } else {\r\n                        var textNode = domUtils.split(start, offset);\r\n                        //跟新结束边界\r\n                        if (start === end) {\r\n                            this.setEnd(textNode, this.endOffset - offset);\r\n                        } else if (start.parentNode === end) {\r\n                            this.endOffset += 1;\r\n                        }\r\n                        this.setStartBefore(textNode);\r\n                    }\r\n                }\r\n                if (collapsed) {\r\n                    return this.collapse(true);\r\n                }\r\n            }\r\n            if (!ignoreEnd) {\r\n                offset = this.endOffset;\r\n                end = this.endContainer;\r\n                if (end.nodeType == 3) {\r\n                    if (offset == 0) {\r\n                        this.setEndBefore(end);\r\n                    } else {\r\n                        offset < end.nodeValue.length && domUtils.split(end, offset);\r\n                        this.setEndAfter(end);\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * 如果选区在文本的边界上，就扩展选区到文本的父节点上\r\n         * @name  txtToElmBoundary\r\n         * @example\r\n         * Dom Element :\r\n         * <b> |xxx</b>\r\n         * startContainer = xxx;  startOffset = 0\r\n         * //本方法执行后\r\n         * startContainer = <b>; startOffset = 0\r\n         * @example\r\n         * Dom Element :\r\n         * <b> xxx| </b>\r\n         * startContainer = xxx; startOffset = 3\r\n         * //本方法执行后\r\n         * startContainer = <b>; startOffset = 1\r\n         */\r\n        txtToElmBoundary:function (ignoreCollapsed) {\r\n            function adjust(r, c) {\r\n                var container = r[c + 'Container'],\r\n                    offset = r[c + 'Offset'];\r\n                if (container.nodeType == 3) {\r\n                    if (!offset) {\r\n                        r['set' + c.replace(/(\\w)/, function (a) {\r\n                            return a.toUpperCase();\r\n                        }) + 'Before'](container);\r\n                    } else if (offset >= container.nodeValue.length) {\r\n                        r['set' + c.replace(/(\\w)/, function (a) {\r\n                            return a.toUpperCase();\r\n                        }) + 'After' ](container);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (ignoreCollapsed || !this.collapsed) {\r\n                adjust(this, 'start');\r\n                adjust(this, 'end');\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * 在当前选区的开始位置前插入一个节点或者fragment，range的开始位置会在插入节点的前边\r\n         * @name  insertNode\r\n         * @grammar range.insertNode(node)  => Range //node可以是textNode,elementNode,fragment\r\n         * @example\r\n         * Range :\r\n         * xxx[x<p>xxxx</p>xxxx]x<p>sdfsdf</p>\r\n         * 待插入Node :\r\n         * <p>ssss</p>\r\n         * 执行本方法后的Range :\r\n         * xxx[<p>ssss</p>x<p>xxxx</p>xxxx]x<p>sdfsdf</p>\r\n         */\r\n        insertNode:function (node) {\r\n            var first = node, length = 1;\r\n            if (node.nodeType == 11) {\r\n                first = node.firstChild;\r\n                length = node.childNodes.length;\r\n            }\r\n            this.trimBoundary(true);\r\n            var start = this.startContainer,\r\n                offset = this.startOffset;\r\n            var nextNode = start.childNodes[ offset ];\r\n            if (nextNode) {\r\n                start.insertBefore(node, nextNode);\r\n            } else {\r\n                start.appendChild(node);\r\n            }\r\n            if (first.parentNode === this.endContainer) {\r\n                this.endOffset = this.endOffset + length;\r\n            }\r\n            return this.setStartBefore(first);\r\n        },\r\n        /**\r\n         * 设置光标闭合位置,toEnd设置为true时光标将闭合到选区的结尾\r\n         * @name  setCursor\r\n         * @grammar range.setCursor([toEnd])  =>  Range   //toEnd为true时，光标闭合到选区的末尾\r\n         */\r\n        setCursor:function (toEnd, noFillData) {\r\n            return this.collapse(!toEnd).select(noFillData);\r\n        },\r\n        /**\r\n         * 创建当前range的一个书签，记录下当前range的位置，方便当dom树改变时，还能找回原来的选区位置\r\n         * @name createBookmark\r\n         * @grammar range.createBookmark([serialize])  => Object  //{start:开始标记,end:结束标记,id:serialize} serialize为真时，开始结束标记是插入节点的id，否则是插入节点的引用\r\n         */\r\n        createBookmark:function (serialize, same) {\r\n            var endNode,\r\n                startNode = this.document.createElement('span');\r\n            startNode.style.cssText = 'display:none;line-height:0px;';\r\n            startNode.appendChild(this.document.createTextNode('\\u200D'));\r\n            startNode.id = '_baidu_bookmark_start_' + (same ? '' : guid++);\r\n\r\n            if (!this.collapsed) {\r\n                endNode = startNode.cloneNode(true);\r\n                endNode.id = '_baidu_bookmark_end_' + (same ? '' : guid++);\r\n            }\r\n            this.insertNode(startNode);\r\n            if (endNode) {\r\n                this.collapse().insertNode(endNode).setEndBefore(endNode);\r\n            }\r\n            this.setStartAfter(startNode);\r\n            return {\r\n                start:serialize ? startNode.id : startNode,\r\n                end:endNode ? serialize ? endNode.id : endNode : null,\r\n                id:serialize\r\n            }\r\n        },\r\n        /**\r\n         *  移动边界到书签位置，并删除插入的书签节点\r\n         *  @name  moveToBookmark\r\n         *  @grammar range.moveToBookmark(bookmark)  => Range //让当前的range选到给定bookmark的位置,bookmark对象是由range.createBookmark创建的\r\n         */\r\n        moveToBookmark:function (bookmark) {\r\n            var start = bookmark.id ? this.document.getElementById(bookmark.start) : bookmark.start,\r\n                end = bookmark.end && bookmark.id ? this.document.getElementById(bookmark.end) : bookmark.end;\r\n            this.setStartBefore(start);\r\n            domUtils.remove(start);\r\n            if (end) {\r\n                this.setEndBefore(end);\r\n                domUtils.remove(end);\r\n            } else {\r\n                this.collapse(true);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * 调整Range的边界，使其\"缩小\"到最合适的位置\r\n         * @name adjustmentBoundary\r\n         * @grammar range.adjustmentBoundary() => Range   //参见<code><a href=\"#shrinkboundary\">shrinkBoundary</a></code>\r\n         * @example\r\n         * <b>xx[</b>xxxxx] ==> <b>xx</b>[xxxxx]\r\n         * <b>x[xx</b><i>]xxx</i> ==> <b>x[xx</b>]<i>xxx</i>\r\n         */\r\n        adjustmentBoundary:function () {\r\n            if (!this.collapsed) {\r\n                while (!domUtils.isBody(this.startContainer) &&\r\n                    this.startOffset == this.startContainer[this.startContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length &&\r\n                    this.startContainer[this.startContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length\r\n                    ) {\r\n\r\n                    this.setStartAfter(this.startContainer);\r\n                }\r\n                while (!domUtils.isBody(this.endContainer) && !this.endOffset &&\r\n                    this.endContainer[this.endContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length\r\n                    ) {\r\n                    this.setEndBefore(this.endContainer);\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * 得到一个自闭合的节点,常用于获取自闭和的节点，例如图片节点\r\n         * @name  getClosedNode\r\n         * @grammar range.getClosedNode()  => node|null\r\n         * @example\r\n         * <b>xxxx[<img />]xxx</b>\r\n         */\r\n        getClosedNode:function () {\r\n            var node;\r\n            if (!this.collapsed) {\r\n                var range = this.cloneRange().adjustmentBoundary().shrinkBoundary();\r\n                if (selectOneNode(range)) {\r\n                    var child = range.startContainer.childNodes[range.startOffset];\r\n                    if (child && child.nodeType == 1 && (dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName])) {\r\n                        node = child;\r\n                    }\r\n                }\r\n            }\r\n            return node;\r\n        },\r\n        /**\r\n         * 根据当前range选中内容节点（在页面上表现为反白显示）\r\n         * @name select\r\n         * @grammar range.select();  => Range\r\n         */\r\n        select:browser.ie ? function (noFillData, textRange) {\r\n            var nativeRange;\r\n            if (!this.collapsed)\r\n                this.shrinkBoundary();\r\n            var node = this.getClosedNode();\r\n            if (node && !textRange) {\r\n                try {\r\n                    nativeRange = this.document.body.createControlRange();\r\n                    nativeRange.addElement(node);\r\n                    nativeRange.select();\r\n                } catch (e) {}\r\n                return this;\r\n            }\r\n            var bookmark = this.createBookmark(),\r\n                start = bookmark.start,\r\n                end;\r\n            nativeRange = this.document.body.createTextRange();\r\n            nativeRange.moveToElementText(start);\r\n            nativeRange.moveStart('character', 1);\r\n            if (!this.collapsed) {\r\n                var nativeRangeEnd = this.document.body.createTextRange();\r\n                end = bookmark.end;\r\n                nativeRangeEnd.moveToElementText(end);\r\n                nativeRange.setEndPoint('EndToEnd', nativeRangeEnd);\r\n            } else {\r\n                if (!noFillData && this.startContainer.nodeType != 3) {\r\n                    //使用<span>|x<span>固定住光标\r\n                    var tmpText = this.document.createTextNode(fillChar),\r\n                        tmp = this.document.createElement('span');\r\n                    tmp.appendChild(this.document.createTextNode(fillChar));\r\n                    start.parentNode.insertBefore(tmp, start);\r\n                    start.parentNode.insertBefore(tmpText, start);\r\n                    //当点b,i,u时，不能清除i上边的b\r\n                    removeFillData(this.document, tmpText);\r\n                    fillData = tmpText;\r\n                    mergeSibling(tmp, 'previousSibling');\r\n                    mergeSibling(start, 'nextSibling');\r\n                    nativeRange.moveStart('character', -1);\r\n                    nativeRange.collapse(true);\r\n                }\r\n            }\r\n            this.moveToBookmark(bookmark);\r\n            tmp && domUtils.remove(tmp);\r\n            //IE在隐藏状态下不支持range操作，catch一下\r\n            try {\r\n                nativeRange.select();\r\n            } catch (e) {\r\n            }\r\n            return this;\r\n        } : function (notInsertFillData) {\r\n            function checkOffset(rng){\r\n\r\n                function check(node,offset,dir){\r\n                    if(node.nodeType == 3 && node.nodeValue.length < offset){\r\n                        rng[dir + 'Offset'] = node.nodeValue.length\r\n                    }\r\n                }\r\n                check(rng.startContainer,rng.startOffset,'start');\r\n                check(rng.endContainer,rng.endOffset,'end');\r\n            }\r\n            var win = domUtils.getWindow(this.document),\r\n                sel = win.getSelection(),\r\n                txtNode;\r\n            //FF下关闭自动长高时滚动条在关闭dialog时会跳\r\n            //ff下如果不body.focus将不能定位闭合光标到编辑器内\r\n            browser.gecko ? this.body.focus() : win.focus();\r\n            if (sel) {\r\n                sel.removeAllRanges();\r\n                // trace:870 chrome/safari后边是br对于闭合得range不能定位 所以去掉了判断\r\n                // this.startContainer.nodeType != 3 &&! ((child = this.startContainer.childNodes[this.startOffset]) && child.nodeType == 1 && child.tagName == 'BR'\r\n                if (this.collapsed && !notInsertFillData) {\r\n//                    //opear如果没有节点接着，原生的不能够定位,不能在body的第一级插入空白节点\r\n//                    if (notInsertFillData && browser.opera && !domUtils.isBody(this.startContainer) && this.startContainer.nodeType == 1) {\r\n//                        var tmp = this.document.createTextNode('');\r\n//                        this.insertNode(tmp).setStart(tmp, 0).collapse(true);\r\n//                    }\r\n//\r\n                    //处理光标落在文本节点的情况\r\n                    //处理以下的情况\r\n                    //<b>|xxxx</b>\r\n                    //<b>xxxx</b>|xxxx\r\n                    //xxxx<b>|</b>\r\n                    var start = this.startContainer,child = start;\r\n                    if(start.nodeType == 1){\r\n                        child = start.childNodes[this.startOffset];\r\n\r\n                    }\r\n                    if( !(start.nodeType == 3 && this.startOffset)  &&\r\n                        (child ?\r\n                            (!child.previousSibling || child.previousSibling.nodeType != 3)\r\n                            :\r\n                            (!start.lastChild || start.lastChild.nodeType != 3)\r\n                            )\r\n                        ){\r\n                        txtNode = this.document.createTextNode(fillChar);\r\n                        //跟着前边走\r\n                        this.insertNode(txtNode);\r\n                        removeFillData(this.document, txtNode);\r\n                        mergeSibling(txtNode, 'previousSibling');\r\n                        mergeSibling(txtNode, 'nextSibling');\r\n                        fillData = txtNode;\r\n                        this.setStart(txtNode, browser.webkit ? 1 : 0).collapse(true);\r\n                    }\r\n                }\r\n                var nativeRange = this.document.createRange();\r\n                if(this.collapsed && browser.opera && this.startContainer.nodeType == 1){\r\n                    var child = this.startContainer.childNodes[this.startOffset];\r\n                    if(!child){\r\n                        //往前靠拢\r\n                        child = this.startContainer.lastChild;\r\n                        if( child && domUtils.isBr(child)){\r\n                            this.setStartBefore(child).collapse(true);\r\n                        }\r\n                    }else{\r\n                        //向后靠拢\r\n                        while(child && domUtils.isBlockElm(child)){\r\n                            if(child.nodeType == 1 && child.childNodes[0]){\r\n                                child = child.childNodes[0]\r\n                            }else{\r\n                                break;\r\n                            }\r\n                        }\r\n                        child && this.setStartBefore(child).collapse(true)\r\n                    }\r\n\r\n                }\r\n                //是createAddress最后一位算的不准，现在这里进行微调\r\n                checkOffset(this);\r\n                nativeRange.setStart(this.startContainer, this.startOffset);\r\n                nativeRange.setEnd(this.endContainer, this.endOffset);\r\n                sel.addRange(nativeRange);\r\n            }\r\n            return this;\r\n        },\r\n      \r\n\r\n        createAddress : function(ignoreEnd,ignoreTxt){\r\n            var addr = {},me = this;\r\n\r\n            function getAddress(isStart){\r\n                var node = isStart ? me.startContainer : me.endContainer;\r\n                var parents = domUtils.findParents(node,true,function(node){return !domUtils.isBody(node)}),\r\n                    addrs = [];\r\n                for(var i = 0,ci;ci = parents[i++];){\r\n                    addrs.push(domUtils.getNodeIndex(ci,ignoreTxt));\r\n                }\r\n                var firstIndex = 0;\r\n\r\n                if(ignoreTxt){\r\n                    if(node.nodeType == 3){\r\n                        var tmpNode = node.previousSibling;\r\n                        while(tmpNode && tmpNode.nodeType == 3){\r\n                            firstIndex += tmpNode.nodeValue.replace(fillCharReg,'').length;\r\n                            tmpNode = tmpNode.previousSibling;\r\n                        }\r\n                        firstIndex +=  (isStart ? me.startOffset : me.endOffset)// - (fillCharReg.test(node.nodeValue) ? 1 : 0 )\r\n                    }else{\r\n                        node =  node.childNodes[ isStart ? me.startOffset : me.endOffset];\r\n                        if(node){\r\n                            firstIndex = domUtils.getNodeIndex(node,ignoreTxt);\r\n                        }else{\r\n                            node = isStart ? me.startContainer : me.endContainer;\r\n                            var first = node.firstChild;\r\n                            while(first){\r\n                                if(domUtils.isFillChar(first)){\r\n                                    first = first.nextSibling;\r\n                                    continue;\r\n                                }\r\n                                firstIndex++;\r\n                                if(first.nodeType == 3){\r\n                                    while( first && first.nodeType == 3){\r\n                                        first = first.nextSibling;\r\n                                    }\r\n                                }else{\r\n                                    first = first.nextSibling;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }else{\r\n                    firstIndex = isStart ? domUtils.isFillChar(node) ? 0 : me.startOffset  : me.endOffset\r\n                }\r\n                if(firstIndex < 0){\r\n                    firstIndex = 0;\r\n                }\r\n                addrs.push(firstIndex);\r\n                return addrs;\r\n            }\r\n            addr.startAddress = getAddress(true);\r\n            if(!ignoreEnd){\r\n                addr.endAddress = me.collapsed ? [].concat(addr.startAddress) : getAddress();\r\n            }\r\n            return addr;\r\n        },\r\n        moveToAddress : function(addr,ignoreEnd){\r\n            var me = this;\r\n            function getNode(address,isStart){\r\n                var tmpNode = me.body,\r\n                    parentNode,offset;\r\n                for(var i= 0,ci,l=address.length;i<l;i++){\r\n                    ci = address[i];\r\n                    parentNode = tmpNode;\r\n                    tmpNode = tmpNode.childNodes[ci];\r\n                    if(!tmpNode){\r\n                        offset = ci;\r\n                        break;\r\n                    }\r\n                }\r\n                if(isStart){\r\n                    if(tmpNode){\r\n                        me.setStartBefore(tmpNode)\r\n                    }else{\r\n                        me.setStart(parentNode,offset)\r\n                    }\r\n                }else{\r\n                    if(tmpNode){\r\n                        me.setEndBefore(tmpNode)\r\n                    }else{\r\n                        me.setEnd(parentNode,offset)\r\n                    }\r\n                }\r\n            }\r\n            getNode(addr.startAddress,true);\r\n            !ignoreEnd && addr.endAddress &&  getNode(addr.endAddress);\r\n            return me;\r\n        },\r\n        equals : function(rng){\r\n            for(var p in this){\r\n                if(this.hasOwnProperty(p)){\r\n                    if(this[p] !== rng[p])\r\n                        return false\r\n                }\r\n            }\r\n            return true;\r\n\r\n        },\r\n        scrollIntoView : function(){\r\n            var $span = $('<span style=\"padding:0;margin:0;display:block;border:0\">&nbsp;</span>');\r\n            this.cloneRange().insertNode($span.get(0));\r\n            var winScrollTop = $(window).scrollTop(),\r\n                winHeight = $(window).height(),\r\n                spanTop = $span.offset().top;\r\n            if(spanTop < winScrollTop-winHeight || spanTop > winScrollTop + winHeight ){\r\n                if(spanTop > winScrollTop + winHeight){\r\n                    window.scrollTo(0,spanTop - winHeight + $span.height())\r\n                }else{\r\n                    window.scrollTo(0,winScrollTop - spanTop)\r\n                }\r\n\r\n            }\r\n            $span.remove();\r\n        },\r\n        getOffset : function(){\r\n            var bk = this.createBookmark();\r\n            var offset = $(bk.start).css('display','inline-block').offset();\r\n            this.moveToBookmark(bk);\r\n            return offset\r\n        }\r\n    };\r\n})();\r\n///import editor.js\r\n///import core/browser.js\r\n///import core/dom/dom.js\r\n///import core/dom/dtd.js\r\n///import core/dom/domUtils.js\r\n///import core/dom/Range.js\r\n/**\r\n * @class UM.dom.Selection    Selection类\r\n */\r\n(function () {\r\n\r\n    function getBoundaryInformation( range, start ) {\r\n        var getIndex = domUtils.getNodeIndex;\r\n        range = range.duplicate();\r\n        range.collapse( start );\r\n        var parent = range.parentElement();\r\n        //如果节点里没有子节点，直接退出\r\n        if ( !parent.hasChildNodes() ) {\r\n            return  {container:parent, offset:0};\r\n        }\r\n        var siblings = parent.children,\r\n            child,\r\n            testRange = range.duplicate(),\r\n            startIndex = 0, endIndex = siblings.length - 1, index = -1,\r\n            distance;\r\n        while ( startIndex <= endIndex ) {\r\n            index = Math.floor( (startIndex + endIndex) / 2 );\r\n            child = siblings[index];\r\n            testRange.moveToElementText( child );\r\n            var position = testRange.compareEndPoints( 'StartToStart', range );\r\n            if ( position > 0 ) {\r\n                endIndex = index - 1;\r\n            } else if ( position < 0 ) {\r\n                startIndex = index + 1;\r\n            } else {\r\n                //trace:1043\r\n                return  {container:parent, offset:getIndex( child )};\r\n            }\r\n        }\r\n        if ( index == -1 ) {\r\n            testRange.moveToElementText( parent );\r\n            testRange.setEndPoint( 'StartToStart', range );\r\n            distance = testRange.text.replace( /(\\r\\n|\\r)/g, '\\n' ).length;\r\n            siblings = parent.childNodes;\r\n            if ( !distance ) {\r\n                child = siblings[siblings.length - 1];\r\n                return  {container:child, offset:child.nodeValue.length};\r\n            }\r\n\r\n            var i = siblings.length;\r\n            while ( distance > 0 ){\r\n                distance -= siblings[ --i ].nodeValue.length;\r\n            }\r\n            return {container:siblings[i], offset:-distance};\r\n        }\r\n        testRange.collapse( position > 0 );\r\n        testRange.setEndPoint( position > 0 ? 'StartToStart' : 'EndToStart', range );\r\n        distance = testRange.text.replace( /(\\r\\n|\\r)/g, '\\n' ).length;\r\n        if ( !distance ) {\r\n            return  dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName] ?\r\n            {container:parent, offset:getIndex( child ) + (position > 0 ? 0 : 1)} :\r\n            {container:child, offset:position > 0 ? 0 : child.childNodes.length}\r\n        }\r\n        while ( distance > 0 ) {\r\n            try {\r\n                var pre = child;\r\n                child = child[position > 0 ? 'previousSibling' : 'nextSibling'];\r\n                distance -= child.nodeValue.length;\r\n            } catch ( e ) {\r\n                return {container:parent, offset:getIndex( pre )};\r\n            }\r\n        }\r\n        return  {container:child, offset:position > 0 ? -distance : child.nodeValue.length + distance}\r\n    }\r\n\r\n    /**\r\n     * 将ieRange转换为Range对象\r\n     * @param {Range}   ieRange    ieRange对象\r\n     * @param {Range}   range      Range对象\r\n     * @return  {Range}  range       返回转换后的Range对象\r\n     */\r\n    function transformIERangeToRange( ieRange, range ) {\r\n        if ( ieRange.item ) {\r\n            range.selectNode( ieRange.item( 0 ) );\r\n        } else {\r\n            var bi = getBoundaryInformation( ieRange, true );\r\n            range.setStart( bi.container, bi.offset );\r\n            if ( ieRange.compareEndPoints( 'StartToEnd', ieRange ) != 0 ) {\r\n                bi = getBoundaryInformation( ieRange, false );\r\n                range.setEnd( bi.container, bi.offset );\r\n            }\r\n        }\r\n        return range;\r\n    }\r\n\r\n    /**\r\n     * 获得ieRange\r\n     * @param {Selection} sel    Selection对象\r\n     * @return {ieRange}    得到ieRange\r\n     */\r\n    function _getIERange( sel,txtRange ) {\r\n        var ieRange;\r\n        //ie下有可能报错\r\n        try {\r\n            ieRange = sel.getNative(txtRange).createRange();\r\n        } catch ( e ) {\r\n            return null;\r\n        }\r\n        var el = ieRange.item ? ieRange.item( 0 ) : ieRange.parentElement();\r\n        if ( ( el.ownerDocument || el ) === sel.document ) {\r\n            return ieRange;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    var Selection = dom.Selection = function ( doc,body ) {\r\n        var me = this;\r\n        me.document = doc;\r\n        me.body = body;\r\n        if ( browser.ie9below ) {\r\n            $( body).on('beforedeactivate', function () {\r\n                me._bakIERange = me.getIERange();\r\n            } ).on('activate', function () {\r\n                try {\r\n                    var ieNativRng =  _getIERange( me );\r\n                    if ( (!ieNativRng || !me.rangeInBody(ieNativRng)) && me._bakIERange ) {\r\n                        me._bakIERange.select();\r\n                    }\r\n                } catch ( ex ) {\r\n                }\r\n                me._bakIERange = null;\r\n            } );\r\n        }\r\n    };\r\n\r\n    Selection.prototype = {\r\n        hasNativeRange : function(){\r\n            var rng;\r\n            if(!browser.ie || browser.ie9above){\r\n                var nativeSel = this.getNative();\r\n                if(!nativeSel.rangeCount){\r\n                    return false;\r\n                }\r\n                rng = nativeSel.getRangeAt(0);\r\n            }else{\r\n                rng = _getIERange(this);\r\n            }\r\n            return this.rangeInBody(rng);\r\n        },\r\n        /**\r\n         * 获取原生seleciton对象\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.getNative\r\n         * @return {Selection}    获得selection对象\r\n         */\r\n        getNative:function (txtRange) {\r\n            var doc = this.document;\r\n            try {\r\n                return !doc ? null : browser.ie9below || txtRange? doc.selection : domUtils.getWindow( doc ).getSelection();\r\n            } catch ( e ) {\r\n                return null;\r\n            }\r\n        },\r\n        /**\r\n         * 获得ieRange\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.getIERange\r\n         * @return {ieRange}    返回ie原生的Range\r\n         */\r\n        getIERange:function (txtRange) {\r\n            var ieRange = _getIERange( this,txtRange );\r\n            if ( !ieRange  || !this.rangeInBody(ieRange,txtRange)) {\r\n                if ( this._bakIERange ) {\r\n                    return this._bakIERange;\r\n                }\r\n            }\r\n            return ieRange;\r\n        },\r\n        rangeInBody : function(rng,txtRange){\r\n            var node = browser.ie9below || txtRange ? rng.item ? rng.item() : rng.parentElement() : rng.startContainer;\r\n\r\n            return node === this.body || domUtils.inDoc(node,this.body);\r\n        },\r\n        /**\r\n         * 缓存当前选区的range和选区的开始节点\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.cache\r\n         */\r\n        cache:function () {\r\n            this.clear();\r\n            this._cachedRange = this.getRange();\r\n            this._cachedStartElement = this.getStart();\r\n            this._cachedStartElementPath = this.getStartElementPath();\r\n        },\r\n\r\n        getStartElementPath:function () {\r\n            if ( this._cachedStartElementPath ) {\r\n                return this._cachedStartElementPath;\r\n            }\r\n            var start = this.getStart();\r\n            if ( start ) {\r\n                return domUtils.findParents( start, true, null, true )\r\n            }\r\n            return [];\r\n        },\r\n        /**\r\n         * 清空缓存\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.clear\r\n         */\r\n        clear:function () {\r\n            this._cachedStartElementPath = this._cachedRange = this._cachedStartElement = null;\r\n        },\r\n        /**\r\n         * 编辑器是否得到了选区\r\n         */\r\n        isFocus:function () {\r\n            return this.hasNativeRange()\r\n\r\n        },\r\n        /**\r\n         * 获取选区对应的Range\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.getRange\r\n         * @returns {UM.dom.Range}    得到Range对象\r\n         */\r\n        getRange:function () {\r\n            var me = this;\r\n            function optimze( range ) {\r\n                var child = me.body.firstChild,\r\n                    collapsed = range.collapsed;\r\n                while ( child && child.firstChild ) {\r\n                    range.setStart( child, 0 );\r\n                    child = child.firstChild;\r\n                }\r\n                if ( !range.startContainer ) {\r\n                    range.setStart( me.body, 0 )\r\n                }\r\n                if ( collapsed ) {\r\n                    range.collapse( true );\r\n                }\r\n            }\r\n\r\n            if ( me._cachedRange != null ) {\r\n                return this._cachedRange;\r\n            }\r\n            var range = new dom.Range( me.document,me.body );\r\n            if ( browser.ie9below ) {\r\n                var nativeRange = me.getIERange();\r\n                if ( nativeRange  && this.rangeInBody(nativeRange)) {\r\n\r\n                    try{\r\n                        transformIERangeToRange( nativeRange, range );\r\n                    }catch(e){\r\n                        optimze( range );\r\n                    }\r\n\r\n                } else {\r\n                    optimze( range );\r\n                }\r\n            } else {\r\n                var sel = me.getNative();\r\n                if ( sel && sel.rangeCount && me.rangeInBody(sel.getRangeAt( 0 ))) {\r\n                    var firstRange = sel.getRangeAt( 0 );\r\n                    var lastRange = sel.getRangeAt( sel.rangeCount - 1 );\r\n                    range.setStart( firstRange.startContainer, firstRange.startOffset ).setEnd( lastRange.endContainer, lastRange.endOffset );\r\n                    if ( range.collapsed && domUtils.isBody( range.startContainer ) && !range.startOffset ) {\r\n                        optimze( range );\r\n                    }\r\n                } else {\r\n                    //trace:1734 有可能已经不在dom树上了，标识的节点\r\n                    if ( this._bakRange && (this._bakRange.startContainer === this.body || domUtils.inDoc( this._bakRange.startContainer, this.body )) ){\r\n                        return this._bakRange;\r\n                    }\r\n                    optimze( range );\r\n                }\r\n            }\r\n\r\n            return this._bakRange = range;\r\n        },\r\n\r\n        /**\r\n         * 获取开始元素，用于状态反射\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.getStart\r\n         * @return {Element}     获得开始元素\r\n         */\r\n        getStart:function () {\r\n            if ( this._cachedStartElement ) {\r\n                return this._cachedStartElement;\r\n            }\r\n            var range = browser.ie9below ? this.getIERange() : this.getRange(),\r\n                tmpRange,\r\n                start, tmp, parent;\r\n            if ( browser.ie9below ) {\r\n                if ( !range ) {\r\n                    //todo 给第一个值可能会有问题\r\n                    return this.document.body.firstChild;\r\n                }\r\n                //control元素\r\n                if ( range.item ){\r\n                    return range.item( 0 );\r\n                }\r\n                tmpRange = range.duplicate();\r\n                //修正ie下<b>x</b>[xx] 闭合后 <b>x|</b>xx\r\n                tmpRange.text.length > 0 && tmpRange.moveStart( 'character', 1 );\r\n                tmpRange.collapse( 1 );\r\n                start = tmpRange.parentElement();\r\n                parent = tmp = range.parentElement();\r\n                while ( tmp = tmp.parentNode ) {\r\n                    if ( tmp == start ) {\r\n                        start = parent;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                start = range.startContainer;\r\n                if ( start.nodeType == 1 && start.hasChildNodes() ){\r\n                    start = start.childNodes[Math.min( start.childNodes.length - 1, range.startOffset )];\r\n                }\r\n                if ( start.nodeType == 3 ){\r\n                    return start.parentNode;\r\n                }\r\n            }\r\n            return start;\r\n        },\r\n        /**\r\n         * 得到选区中的文本\r\n         * @public\r\n         * @function\r\n         * @name    UM.dom.Selection.getText\r\n         * @return  {String}    选区中包含的文本\r\n         */\r\n        getText:function () {\r\n            var nativeSel, nativeRange;\r\n            if ( this.isFocus() && (nativeSel = this.getNative()) ) {\r\n                nativeRange = browser.ie9below ? nativeSel.createRange() : nativeSel.getRangeAt( 0 );\r\n                return browser.ie9below ? nativeRange.text : nativeRange.toString();\r\n            }\r\n            return '';\r\n        }\r\n    };\r\n})();\r\n/**\r\n * @file\r\n * @name UM.Editor\r\n * @short Editor\r\n * @import editor.js,core/utils.js,core/EventBase.js,core/browser.js,core/dom/dtd.js,core/dom/domUtils.js,core/dom/Range.js,core/dom/Selection.js,plugins/serialize.js\r\n * @desc 编辑器主类，包含编辑器提供的大部分公用接口\r\n */\r\n(function () {\r\n    var uid = 0, _selectionChangeTimer;\r\n\r\n    /**\r\n     * @private\r\n     * @ignore\r\n     * @param form  编辑器所在的form元素\r\n     * @param editor  编辑器实例对象\r\n     */\r\n    function setValue(form, editor) {\r\n        var textarea;\r\n        if (editor.textarea) {\r\n            if (utils.isString(editor.textarea)) {\r\n                for (var i = 0, ti, tis = domUtils.getElementsByTagName(form, 'textarea'); ti = tis[i++];) {\r\n                    if (ti.id == 'umeditor_textarea_' + editor.options.textarea) {\r\n                        textarea = ti;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                textarea = editor.textarea;\r\n            }\r\n        }\r\n        if (!textarea) {\r\n            form.appendChild(textarea = domUtils.createElement(document, 'textarea', {\r\n                'name': editor.options.textarea,\r\n                'id': 'umeditor_textarea_' + editor.options.textarea,\r\n                'style': \"display:none\"\r\n            }));\r\n            //不要产生多个textarea\r\n            editor.textarea = textarea;\r\n        }\r\n        textarea.value = editor.hasContents() ?\r\n            (editor.options.allHtmlEnabled ? editor.getAllHtml() : editor.getContent(null, null, true)) :\r\n            ''\r\n    }\r\n    function loadPlugins(me){\r\n        //初始化插件\r\n        for (var pi in UM.plugins) {\r\n            if(me.options.excludePlugins.indexOf(pi) == -1){\r\n                UM.plugins[pi].call(me);\r\n                me.plugins[pi] = 1;\r\n            }\r\n        }\r\n        me.langIsReady = true;\r\n\r\n        me.fireEvent(\"langReady\");\r\n    }\r\n    function checkCurLang(I18N){\r\n        for(var lang in I18N){\r\n            return lang\r\n        }\r\n    }\r\n    /**\r\n     * UEditor编辑器类\r\n     * @name Editor\r\n     * @desc 创建一个跟编辑器实例\r\n     * - ***container*** 编辑器容器对象\r\n     * - ***iframe*** 编辑区域所在的iframe对象\r\n     * - ***window*** 编辑区域所在的window\r\n     * - ***document*** 编辑区域所在的document对象\r\n     * - ***body*** 编辑区域所在的body对象\r\n     * - ***selection*** 编辑区域的选区对象\r\n     */\r\n    var Editor = UM.Editor = function (options) {\r\n        var me = this;\r\n        me.uid = uid++;\r\n        EventBase.call(me);\r\n        me.commands = {};\r\n        me.options = utils.extend(utils.clone(options || {}), UMEDITOR_CONFIG, true);\r\n        me.shortcutkeys = {};\r\n        me.inputRules = [];\r\n        me.outputRules = [];\r\n        //设置默认的常用属性\r\n        me.setOpt({\r\n            isShow: true,\r\n            initialContent: '',\r\n            initialStyle:'',\r\n            autoClearinitialContent: false,\r\n            textarea: 'editorValue',\r\n            focus: false,\r\n            focusInEnd: true,\r\n            autoClearEmptyNode: true,\r\n            fullscreen: false,\r\n            readonly: false,\r\n            zIndex: 999,\r\n            enterTag: 'p',\r\n            lang: 'zh-cn',\r\n            langPath: me.options.UMEDITOR_HOME_URL + 'lang/',\r\n            theme: 'default',\r\n            themePath: me.options.UMEDITOR_HOME_URL + 'themes/',\r\n            allHtmlEnabled: false,\r\n            autoSyncData : true,\r\n            autoHeightEnabled : true,\r\n            excludePlugins:''\r\n        });\r\n        me.plugins = {};\r\n        if(!utils.isEmptyObject(UM.I18N)){\r\n            //修改默认的语言类型\r\n            me.options.lang = checkCurLang(UM.I18N);\r\n            loadPlugins(me)\r\n        }else{\r\n            utils.loadFile(document, {\r\n                src: me.options.langPath + me.options.lang + \"/\" + me.options.lang + \".js\",\r\n                tag: \"script\",\r\n                type: \"text/javascript\",\r\n                defer: \"defer\"\r\n            }, function () {\r\n                loadPlugins(me)\r\n            });\r\n        }\r\n\r\n    };\r\n    Editor.prototype = {\r\n        /**\r\n         * 当编辑器ready后执行传入的fn,如果编辑器已经完成ready，就马上执行fn，fn的中的this是编辑器实例。\r\n         * 大部分的实例接口都需要放在该方法内部执行，否则在IE下可能会报错。\r\n         * @name ready\r\n         * @grammar editor.ready(fn) fn是当编辑器渲染好后执行的function\r\n         * @example\r\n         * var editor = new UM.ui.Editor();\r\n         * editor.render(\"myEditor\");\r\n         * editor.ready(function(){\r\n         *     editor.setContent(\"欢迎使用UEditor！\");\r\n         * })\r\n         */\r\n        ready: function (fn) {\r\n            var me = this;\r\n            if (fn) {\r\n                me.isReady ? fn.apply(me) : me.addListener('ready', fn);\r\n            }\r\n        },\r\n        /**\r\n         * 为编辑器设置默认参数值。若用户配置为空，则以默认配置为准\r\n         * @grammar editor.setOpt(key,value);      //传入一个键、值对\r\n         * @grammar editor.setOpt({ key:value});   //传入一个json对象\r\n         */\r\n        setOpt: function (key, val) {\r\n            var obj = {};\r\n            if (utils.isString(key)) {\r\n                obj[key] = val\r\n            } else {\r\n                obj = key;\r\n            }\r\n            utils.extend(this.options, obj, true);\r\n        },\r\n        getOpt:function(key){\r\n            return this.options[key] || ''\r\n        },\r\n        /**\r\n         * 销毁编辑器实例对象\r\n         * @name destroy\r\n         * @grammar editor.destroy();\r\n         */\r\n        destroy: function () {\r\n\r\n            var me = this;\r\n            me.fireEvent('destroy');\r\n            var container = me.container.parentNode;\r\n            if(container === document.body){\r\n                container = me.container;\r\n            }\r\n            var textarea = me.textarea;\r\n            if (!textarea) {\r\n                textarea = document.createElement('textarea');\r\n                container.parentNode.insertBefore(textarea, container);\r\n            } else {\r\n                textarea.style.display = ''\r\n            }\r\n\r\n            textarea.style.width = me.body.offsetWidth + 'px';\r\n            textarea.style.height = me.body.offsetHeight + 'px';\r\n            textarea.value = me.getContent();\r\n            textarea.id = me.key;\r\n            if(container.contains(textarea)){\r\n                $(textarea).insertBefore(container);\r\n            }\r\n            container.innerHTML = '';\r\n\r\n            domUtils.remove(container);\r\n            UM.clearCache(me.id);\r\n            //trace:2004\r\n            for (var p in me) {\r\n                if (me.hasOwnProperty(p)) {\r\n                    delete this[p];\r\n                }\r\n            }\r\n\r\n        },\r\n        initialCont : function(holder){\r\n\r\n            if(holder){\r\n                holder.getAttribute('name') && ( this.options.textarea = holder.getAttribute('name'));\r\n                if (holder && /script|textarea/ig.test(holder.tagName)) {\r\n                    var newDiv = document.createElement('div');\r\n                    holder.parentNode.insertBefore(newDiv, holder);\r\n                    this.options.initialContent = UM.htmlparser(holder.value || holder.innerHTML|| this.options.initialContent).toHtml();\r\n                    holder.className && (newDiv.className = holder.className);\r\n                    holder.style.cssText && (newDiv.style.cssText = holder.style.cssText);\r\n\r\n                    if (/textarea/i.test(holder.tagName)) {\r\n                        this.textarea = holder;\r\n                        this.textarea.style.display = 'none';\r\n\r\n                    } else {\r\n                        holder.parentNode.removeChild(holder);\r\n                        holder.id && (newDiv.id = holder.id);\r\n                    }\r\n                    holder = newDiv;\r\n                    holder.innerHTML = '';\r\n                }\r\n                return holder;\r\n            }else{\r\n                return null;\r\n            }\r\n\r\n        },\r\n        /**\r\n         * 渲染编辑器的DOM到指定容器，必须且只能调用一次\r\n         * @name render\r\n         * @grammar editor.render(containerId);    //可以指定一个容器ID\r\n         * @grammar editor.render(containerDom);   //也可以直接指定容器对象\r\n         */\r\n        render: function (container) {\r\n            var me = this,\r\n                options = me.options,\r\n                getStyleValue=function(attr){\r\n                    return parseInt($(container).css(attr));\r\n                };\r\n\r\n            if (utils.isString(container)) {\r\n                container = document.getElementById(container);\r\n            }\r\n            if (container) {\r\n                this.id = container.getAttribute('id');\r\n                UM.setEditor(this);\r\n                utils.cssRule('edui-style-body',me.options.initialStyle,document);\r\n\r\n                container = this.initialCont(container);\r\n\r\n                container.className += ' edui-body-container';\r\n\r\n                if(options.initialFrameWidth){\r\n                    options.minFrameWidth = options.initialFrameWidth\r\n                }else{\r\n                    //都没给值，先写死了\r\n                    options.minFrameWidth = options.initialFrameWidth = $(container).width() || UM.defaultWidth;\r\n                }\r\n                if(options.initialFrameHeight){\r\n                    options.minFrameHeight = options.initialFrameHeight\r\n                }else{\r\n\r\n                    options.initialFrameHeight = options.minFrameHeight = $(container).height() || UM.defaultHeight;\r\n                }\r\n\r\n                container.style.width = /%$/.test(options.initialFrameWidth) ?  '100%' : options.initialFrameWidth -\r\n                    getStyleValue(\"padding-left\")-\r\n                    getStyleValue(\"padding-right\")  +'px';\r\n\r\n                var height = /%$/.test(options.initialFrameHeight) ?  '100%' : (options.initialFrameHeight - getStyleValue(\"padding-top\")- getStyleValue(\"padding-bottom\") );\r\n                if(this.options.autoHeightEnabled){\r\n                    container.style.minHeight = height +'px';\r\n                    container.style.height = '';\r\n                    if(browser.ie && browser.version <= 6){\r\n                        container.style.height = height ;\r\n                        container.style.setExpression('height', 'this.scrollHeight <= ' + height + ' ? \"' + height + 'px\" : \"auto\"');\r\n                    }\r\n                }else{\r\n                    $(container).height(height)\r\n                }\r\n                container.style.zIndex = options.zIndex;\r\n                this._setup(container);\r\n\r\n            }\r\n        },\r\n        /**\r\n         * 编辑器初始化\r\n         * @private\r\n         * @ignore\r\n         * @param {Element} doc 编辑器Iframe中的文档对象\r\n         */\r\n        _setup: function (cont) {\r\n            var me = this,\r\n                options = me.options;\r\n\r\n            cont.contentEditable = true;\r\n            document.body.spellcheck = false;\r\n\r\n            me.document = document;\r\n            me.window = document.defaultView || document.parentWindow;\r\n            me.body = cont;\r\n            me.$body = $(cont);\r\n            me.selection = new dom.Selection(document,me.body);\r\n            me._isEnabled = false;\r\n            //gecko初始化就能得到range,无法判断isFocus了\r\n            var geckoSel;\r\n            if (browser.gecko && (geckoSel = this.selection.getNative())) {\r\n                geckoSel.removeAllRanges();\r\n            }\r\n            this._initEvents();\r\n            //为form提交提供一个隐藏的textarea\r\n            for (var form = cont.parentNode; form && !domUtils.isBody(form); form = form.parentNode) {\r\n                if (form.tagName == 'FORM') {\r\n                    me.form = form;\r\n                    if(me.options.autoSyncData){\r\n                        $(cont).on('blur',function(){\r\n                            setValue(form,me);\r\n                        })\r\n                    }else{\r\n                        $(form).on('submit', function () {\r\n                            setValue(this, me);\r\n                        })\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            if (options.initialContent) {\r\n                if (options.autoClearinitialContent) {\r\n                    var oldExecCommand = me.execCommand;\r\n                    me.execCommand = function () {\r\n                        me.fireEvent('firstBeforeExecCommand');\r\n                        return oldExecCommand.apply(me, arguments);\r\n                    };\r\n                    this._setDefaultContent(options.initialContent);\r\n                } else\r\n                    this.setContent(options.initialContent, false, true);\r\n            }\r\n\r\n            //编辑器不能为空内容\r\n\r\n            if (domUtils.isEmptyNode(me.body)) {\r\n                me.body.innerHTML = '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n            }\r\n            //如果要求focus, 就把光标定位到内容开始\r\n            if (options.focus) {\r\n                setTimeout(function () {\r\n                    me.focus(me.options.focusInEnd);\r\n                    //如果自动清除开着，就不需要做selectionchange;\r\n                    !me.options.autoClearinitialContent && me._selectionChange();\r\n                }, 0);\r\n            }\r\n            if (!me.container) {\r\n                me.container = cont.parentNode;\r\n            }\r\n\r\n            me._bindshortcutKeys();\r\n            me.isReady = 1;\r\n            me.fireEvent('ready');\r\n            options.onready && options.onready.call(me);\r\n            if(!browser.ie || browser.ie9above){\r\n\r\n                $(me.body).on( 'blur focus', function (e) {\r\n                    var nSel = me.selection.getNative();\r\n                    //chrome下会出现alt+tab切换时，导致选区位置不对\r\n                    if (e.type == 'blur') {\r\n                        if(nSel.rangeCount > 0 ){\r\n                            me._bakRange = nSel.getRangeAt(0);\r\n                        }\r\n                    } else {\r\n                        try {\r\n                            me._bakRange && nSel.addRange(me._bakRange)\r\n                        } catch (e) {\r\n                        }\r\n                        me._bakRange = null;\r\n                    }\r\n                });\r\n            }\r\n\r\n            !options.isShow && me.setHide();\r\n            options.readonly && me.setDisabled();\r\n        },\r\n        /**\r\n         * 同步编辑器的数据，为提交数据做准备，主要用于你是手动提交的情况\r\n         * @name sync\r\n         * @grammar editor.sync(); //从编辑器的容器向上查找，如果找到就同步数据\r\n         * @grammar editor.sync(formID); //formID制定一个要同步数据的form的id,编辑器的数据会同步到你指定form下\r\n         * @desc\r\n         * 后台取得数据得键值使用你容器上得''name''属性，如果没有就使用参数传入的''textarea''\r\n         * @example\r\n         * editor.sync();\r\n         * form.sumbit(); //form变量已经指向了form元素\r\n         *\r\n         */\r\n        sync: function (formId) {\r\n            var me = this,\r\n                form = formId ? document.getElementById(formId) :\r\n                    domUtils.findParent(me.body.parentNode, function (node) {\r\n                        return node.tagName == 'FORM'\r\n                    }, true);\r\n            form && setValue(form, me);\r\n        },\r\n        /**\r\n         * 设置编辑器高度\r\n         * @name setHeight\r\n         * @grammar editor.setHeight(number);  //纯数值，不带单位\r\n         */\r\n        setHeight: function (height,notSetHeight) {\r\n            !notSetHeight && (this.options.initialFrameHeight = height);\r\n            if(this.options.autoHeightEnabled){\r\n                $(this.body).css({\r\n                    'min-height':height + 'px'\r\n                });\r\n                if(browser.ie && browser.version <= 6 && this.container){\r\n                    this.container.style.height = height ;\r\n                    this.container.style.setExpression('height', 'this.scrollHeight <= ' + height + ' ? \"' + height + 'px\" : \"auto\"');\r\n                }\r\n            }else{\r\n                $(this.body).height(height)\r\n            }\r\n            this.fireEvent('resize');\r\n        },\r\n        /**\r\n         * 设置编辑器宽度\r\n         * @name setWidth\r\n         * @grammar editor.setWidth(number);  //纯数值，不带单位\r\n         */\r\n        setWidth:function(width){\r\n            this.$container && this.$container.width(width);\r\n            $(this.body).width(width - $(this.body).css('padding-left').replace('px','') * 1 - $(this.body).css('padding-right').replace('px','') * 1);\r\n            this.fireEvent('resize');\r\n        },\r\n        addshortcutkey: function (cmd, keys) {\r\n            var obj = {};\r\n            if (keys) {\r\n                obj[cmd] = keys\r\n            } else {\r\n                obj = cmd;\r\n            }\r\n            utils.extend(this.shortcutkeys, obj)\r\n        },\r\n        _bindshortcutKeys: function () {\r\n            var me = this, shortcutkeys = this.shortcutkeys;\r\n            me.addListener('keydown', function (type, e) {\r\n                var keyCode = e.keyCode || e.which;\r\n                for (var i in shortcutkeys) {\r\n                    var tmp = shortcutkeys[i].split(',');\r\n                    for (var t = 0, ti; ti = tmp[t++];) {\r\n                        ti = ti.split(':');\r\n                        var key = ti[0], param = ti[1];\r\n                        if (/^(ctrl)(\\+shift)?\\+(\\d+)$/.test(key.toLowerCase()) || /^(\\d+)$/.test(key)) {\r\n                            if (( (RegExp.$1 == 'ctrl' ? (e.ctrlKey || e.metaKey) : 0)\r\n                                && (RegExp.$2 != \"\" ? e[RegExp.$2.slice(1) + \"Key\"] : 1)\r\n                                && keyCode == RegExp.$3\r\n                                ) ||\r\n                                keyCode == RegExp.$1\r\n                                ) {\r\n                                if (me.queryCommandState(i,param) != -1)\r\n                                    me.execCommand(i, param);\r\n                                domUtils.preventDefault(e);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * 获取编辑器内容\r\n         * @name getContent\r\n         * @grammar editor.getContent()  => String //若编辑器中只包含字符\"&lt;p&gt;&lt;br /&gt;&lt;/p/&gt;\"会返回空。\r\n         * @grammar editor.getContent(fn)  => String\r\n         * @example\r\n         * getContent默认是会现调用hasContents来判断编辑器是否为空，如果是，就直接返回空字符串\r\n         * 你也可以传入一个fn来接替hasContents的工作，定制判断的规则\r\n         * editor.getContent(function(){\r\n         *     return false //编辑器没有内容 ，getContent直接返回空\r\n         * })\r\n         */\r\n        getContent: function (cmd, fn,notSetCursor,ignoreBlank,formatter) {\r\n            var me = this;\r\n            if (cmd && utils.isFunction(cmd)) {\r\n                fn = cmd;\r\n                cmd = '';\r\n            }\r\n            if (fn ? !fn() : !this.hasContents()) {\r\n                return '';\r\n            }\r\n            me.fireEvent('beforegetcontent');\r\n            var root = UM.htmlparser(me.body.innerHTML,ignoreBlank);\r\n            me.filterOutputRule(root);\r\n            me.fireEvent('aftergetcontent',root);\r\n            return  root.toHtml(formatter);\r\n        },\r\n        /**\r\n         * 取得完整的html代码，可以直接显示成完整的html文档\r\n         * @name getAllHtml\r\n         * @grammar editor.getAllHtml()  => String\r\n         */\r\n        getAllHtml: function () {\r\n            var me = this,\r\n                headHtml = [],\r\n                html = '';\r\n            me.fireEvent('getAllHtml', headHtml);\r\n            if (browser.ie && browser.version > 8) {\r\n                var headHtmlForIE9 = '';\r\n                utils.each(me.document.styleSheets, function (si) {\r\n                    headHtmlForIE9 += ( si.href ? '<link rel=\"stylesheet\" type=\"text/css\" href=\"' + si.href + '\" />' : '<style>' + si.cssText + '</style>');\r\n                });\r\n                utils.each(me.document.getElementsByTagName('script'), function (si) {\r\n                    headHtmlForIE9 += si.outerHTML;\r\n                });\r\n            }\r\n            return '<html><head>' + (me.options.charset ? '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + me.options.charset + '\"/>' : '')\r\n                + (headHtmlForIE9 || me.document.getElementsByTagName('head')[0].innerHTML) + headHtml.join('\\n') + '</head>'\r\n                + '<body ' + (ie && browser.version < 9 ? 'class=\"view\"' : '') + '>' + me.getContent(null, null, true) + '</body></html>';\r\n        },\r\n        /**\r\n         * 得到编辑器的纯文本内容，但会保留段落格式\r\n         * @name getPlainTxt\r\n         * @grammar editor.getPlainTxt()  => String\r\n         */\r\n        getPlainTxt: function () {\r\n            var reg = new RegExp(domUtils.fillChar, 'g'),\r\n                html = this.body.innerHTML.replace(/[\\n\\r]/g, '');//ie要先去了\\n在处理\r\n            html = html.replace(/<(p|div)[^>]*>(<br\\/?>|&nbsp;)<\\/\\1>/gi, '\\n')\r\n                .replace(/<br\\/?>/gi, '\\n')\r\n                .replace(/<[^>/]+>/g, '')\r\n                .replace(/(\\n)?<\\/([^>]+)>/g, function (a, b, c) {\r\n                    return dtd.$block[c] ? '\\n' : b ? b : '';\r\n                });\r\n            //取出来的空格会有c2a0会变成乱码，处理这种情况\\u00a0\r\n            return html.replace(reg, '').replace(/\\u00a0/g, ' ').replace(/&nbsp;/g, ' ');\r\n        },\r\n\r\n        /**\r\n         * 获取编辑器中的纯文本内容,没有段落格式\r\n         * @name getContentTxt\r\n         * @grammar editor.getContentTxt()  => String\r\n         */\r\n        getContentTxt: function () {\r\n            var reg = new RegExp(domUtils.fillChar, 'g');\r\n            //取出来的空格会有c2a0会变成乱码，处理这种情况\\u00a0\r\n            return this.body[browser.ie ? 'innerText' : 'textContent'].replace(reg, '').replace(/\\u00a0/g, ' ');\r\n        },\r\n\r\n        /**\r\n         * 将html设置到编辑器中, 如果是用于初始化时给编辑器赋初值，则必须放在ready方法内部执行\r\n         * @name setContent\r\n         * @grammar editor.setContent(html)\r\n         * @example\r\n         * var editor = new UM.ui.Editor()\r\n         * editor.ready(function(){\r\n         *     //需要ready后执行，否则可能报错\r\n         *     editor.setContent(\"欢迎使用UEditor！\");\r\n         * })\r\n         */\r\n        setContent: function (html, isAppendTo, notFireSelectionchange) {\r\n            var me = this;\r\n\r\n            me.fireEvent('beforesetcontent', html);\r\n            var root = UM.htmlparser(html);\r\n            me.filterInputRule(root);\r\n            html = root.toHtml();\r\n\r\n\r\n            me.body.innerHTML = (isAppendTo ? me.body.innerHTML : '') + html;\r\n\r\n\r\n            function isCdataDiv(node){\r\n                return  node.tagName == 'DIV' && node.getAttribute('cdata_tag');\r\n            }\r\n            //给文本或者inline节点套p标签\r\n            if (me.options.enterTag == 'p') {\r\n\r\n                var child = this.body.firstChild, tmpNode;\r\n                if (!child || child.nodeType == 1 &&\r\n                    (dtd.$cdata[child.tagName] || isCdataDiv(child) ||\r\n                        domUtils.isCustomeNode(child)\r\n                        )\r\n                    && child === this.body.lastChild) {\r\n                    this.body.innerHTML = '<p>' + (browser.ie ? '&nbsp;' : '<br/>') + '</p>' + this.body.innerHTML;\r\n\r\n                } else {\r\n                    var p = me.document.createElement('p');\r\n                    while (child) {\r\n                        while (child && (child.nodeType == 3 || child.nodeType == 1 && dtd.p[child.tagName] && !dtd.$cdata[child.tagName])) {\r\n                            tmpNode = child.nextSibling;\r\n                            p.appendChild(child);\r\n                            child = tmpNode;\r\n                        }\r\n                        if (p.firstChild) {\r\n                            if (!child) {\r\n                                me.body.appendChild(p);\r\n                                break;\r\n                            } else {\r\n                                child.parentNode.insertBefore(p, child);\r\n                                p = me.document.createElement('p');\r\n                            }\r\n                        }\r\n                        child = child.nextSibling;\r\n                    }\r\n                }\r\n            }\r\n            me.fireEvent('aftersetcontent');\r\n            me.fireEvent('contentchange');\r\n\r\n            !notFireSelectionchange && me._selectionChange();\r\n            //清除保存的选区\r\n            me._bakRange = me._bakIERange = me._bakNativeRange = null;\r\n            //trace:1742 setContent后gecko能得到焦点问题\r\n            var geckoSel;\r\n            if (browser.gecko && (geckoSel = this.selection.getNative())) {\r\n                geckoSel.removeAllRanges();\r\n            }\r\n            if(me.options.autoSyncData){\r\n                me.form && setValue(me.form,me);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 让编辑器获得焦点，toEnd确定focus位置\r\n         * @name focus\r\n         * @grammar editor.focus([toEnd])   //默认focus到编辑器头部，toEnd为true时focus到内容尾部\r\n         */\r\n        focus: function (toEnd) {\r\n            try {\r\n                var me = this,\r\n                    rng = me.selection.getRange();\r\n                if (toEnd) {\r\n                    rng.setStartAtLast(me.body.lastChild).setCursor(false, true);\r\n                } else {\r\n                    rng.select(true);\r\n                }\r\n                this.fireEvent('focus');\r\n            } catch (e) {\r\n            }\r\n        },\r\n        /**\r\n         * 使编辑区域失去焦点\r\n         */\r\n        blur:function(){\r\n            var sel = this.selection.getNative();\r\n            sel.empty ? sel.empty() : sel.removeAllRanges();\r\n            this.fireEvent('blur')\r\n        },\r\n        /**\r\n         * 判断编辑器当前是否获得了焦点\r\n         */\r\n        isFocus : function(){\r\n            if(this.fireEvent('isfocus')===true){\r\n                return true;\r\n            }\r\n            return this.selection.isFocus();\r\n        },\r\n\r\n        /**\r\n         * 初始化UE事件及部分事件代理\r\n         * @private\r\n         * @ignore\r\n         */\r\n        _initEvents: function () {\r\n            var me = this,\r\n                cont = me.body,\r\n                _proxyDomEvent = function(){\r\n                    me._proxyDomEvent.apply(me, arguments);\r\n                };\r\n\r\n            $(cont)\r\n                .on( 'click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart', _proxyDomEvent)\r\n                .on( 'focus blur', _proxyDomEvent)\r\n                .on('mouseup keydown', function (evt) {\r\n                    //特殊键不触发selectionchange\r\n                    if (evt.type == 'keydown' && (evt.ctrlKey || evt.metaKey || evt.shiftKey || evt.altKey)) {\r\n                        return;\r\n                    }\r\n                    if (evt.button == 2)return;\r\n                    me._selectionChange(250, evt);\r\n                });\r\n        },\r\n        /**\r\n         * 触发事件代理\r\n         * @private\r\n         * @ignore\r\n         */\r\n        _proxyDomEvent: function (evt) {\r\n            return this.fireEvent(evt.type.replace(/^on/, ''), evt);\r\n        },\r\n        /**\r\n         * 变化选区\r\n         * @private\r\n         * @ignore\r\n         */\r\n        _selectionChange: function (delay, evt) {\r\n            var me = this;\r\n            //有光标才做selectionchange 为了解决未focus时点击source不能触发更改工具栏状态的问题（source命令notNeedUndo=1）\r\n//            if ( !me.selection.isFocus() ){\r\n//                return;\r\n//            }\r\n\r\n\r\n            var hackForMouseUp = false;\r\n            var mouseX, mouseY;\r\n            if (browser.ie && browser.version < 9 && evt && evt.type == 'mouseup') {\r\n                var range = this.selection.getRange();\r\n                if (!range.collapsed) {\r\n                    hackForMouseUp = true;\r\n                    mouseX = evt.clientX;\r\n                    mouseY = evt.clientY;\r\n                }\r\n            }\r\n            clearTimeout(_selectionChangeTimer);\r\n            _selectionChangeTimer = setTimeout(function () {\r\n                if (!me.selection.getNative()) {\r\n                    return;\r\n                }\r\n                //修复一个IE下的bug: 鼠标点击一段已选择的文本中间时，可能在mouseup后的一段时间内取到的range是在selection的type为None下的错误值.\r\n                //IE下如果用户是拖拽一段已选择文本，则不会触发mouseup事件，所以这里的特殊处理不会对其有影响\r\n                var ieRange;\r\n                if (hackForMouseUp && me.selection.getNative().type == 'None') {\r\n                    ieRange = me.document.body.createTextRange();\r\n                    try {\r\n                        ieRange.moveToPoint(mouseX, mouseY);\r\n                    } catch (ex) {\r\n                        ieRange = null;\r\n                    }\r\n                }\r\n                var bakGetIERange;\r\n                if (ieRange) {\r\n                    bakGetIERange = me.selection.getIERange;\r\n                    me.selection.getIERange = function () {\r\n                        return ieRange;\r\n                    };\r\n                }\r\n                me.selection.cache();\r\n                if (bakGetIERange) {\r\n                    me.selection.getIERange = bakGetIERange;\r\n                }\r\n                if (me.selection._cachedRange && me.selection._cachedStartElement) {\r\n                    me.fireEvent('beforeselectionchange');\r\n                    // 第二个参数causeByUi为true代表由用户交互造成的selectionchange.\r\n                    me.fireEvent('selectionchange', !!evt);\r\n                    me.fireEvent('afterselectionchange');\r\n                    me.selection.clear();\r\n                }\r\n            }, delay || 50);\r\n        },\r\n        _callCmdFn: function (fnName, args) {\r\n            args = Array.prototype.slice.call(args,0);\r\n            var cmdName = args.shift().toLowerCase(),\r\n                cmd, cmdFn;\r\n            cmd = this.commands[cmdName] || UM.commands[cmdName];\r\n            cmdFn = cmd && cmd[fnName];\r\n            //没有querycommandstate或者没有command的都默认返回0\r\n            if ((!cmd || !cmdFn) && fnName == 'queryCommandState') {\r\n                return 0;\r\n            } else if (cmdFn) {\r\n                return cmdFn.apply(this, [cmdName].concat(args));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 执行编辑命令cmdName，完成富文本编辑效果\r\n         * @name execCommand\r\n         * @grammar editor.execCommand(cmdName)   => {*}\r\n         */\r\n        execCommand: function (cmdName) {\r\n            if(!this.isFocus()){\r\n                var bakRange = this.selection._bakRange;\r\n                if(bakRange){\r\n                    bakRange.select()\r\n                }else{\r\n                    this.focus(true)\r\n                }\r\n\r\n            }\r\n            cmdName = cmdName.toLowerCase();\r\n            var me = this,\r\n                result,\r\n                cmd = me.commands[cmdName] || UM.commands[cmdName];\r\n            if (!cmd || !cmd.execCommand) {\r\n                return null;\r\n            }\r\n            if (!cmd.notNeedUndo && !me.__hasEnterExecCommand) {\r\n                me.__hasEnterExecCommand = true;\r\n                if (me.queryCommandState.apply(me,arguments) != -1) {\r\n                    me.fireEvent('saveScene');\r\n                    me.fireEvent('beforeexeccommand', cmdName);\r\n                    result = this._callCmdFn('execCommand', arguments);\r\n                    (!cmd.ignoreContentChange && !me._ignoreContentChange) && me.fireEvent('contentchange');\r\n                    me.fireEvent('afterexeccommand', cmdName);\r\n                    me.fireEvent('saveScene');\r\n                }\r\n                me.__hasEnterExecCommand = false;\r\n            } else {\r\n                result = this._callCmdFn('execCommand', arguments);\r\n                (!me.__hasEnterExecCommand && !cmd.ignoreContentChange && !me._ignoreContentChange) && me.fireEvent('contentchange')\r\n            }\r\n            (!me.__hasEnterExecCommand && !cmd.ignoreContentChange && !me._ignoreContentChange) && me._selectionChange();\r\n            return result;\r\n        },\r\n        /**\r\n         * 根据传入的command命令，查选编辑器当前的选区，返回命令的状态\r\n         * @name  queryCommandState\r\n         * @grammar editor.queryCommandState(cmdName)  => (-1|0|1)\r\n         * @desc\r\n         * * ''-1'' 当前命令不可用\r\n         * * ''0'' 当前命令可用\r\n         * * ''1'' 当前命令已经执行过了\r\n         */\r\n        queryCommandState: function (cmdName) {\r\n            try{\r\n                return this._callCmdFn('queryCommandState', arguments);\r\n            }catch(e){\r\n                return 0\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * 根据传入的command命令，查选编辑器当前的选区，根据命令返回相关的值\r\n         * @name  queryCommandValue\r\n         * @grammar editor.queryCommandValue(cmdName)  =>  {*}\r\n         */\r\n        queryCommandValue: function (cmdName) {\r\n            try{\r\n                return this._callCmdFn('queryCommandValue', arguments);\r\n            }catch(e){\r\n                return null\r\n            }\r\n        },\r\n        /**\r\n         * 检查编辑区域中是否有内容，若包含tags中的节点类型，直接返回true\r\n         * @name  hasContents\r\n         * @desc\r\n         * 默认有文本内容，或者有以下节点都不认为是空\r\n         * <code>{table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}</code>\r\n         * @grammar editor.hasContents()  => (true|false)\r\n         * @grammar editor.hasContents(tags)  =>  (true|false)  //若文档中包含tags数组里对应的tag，直接返回true\r\n         * @example\r\n         * editor.hasContents(['span']) //如果编辑器里有这些，不认为是空\r\n         */\r\n        hasContents: function (tags) {\r\n            if (tags) {\r\n                for (var i = 0, ci; ci = tags[i++];) {\r\n                    if (this.body.getElementsByTagName(ci).length > 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            if (!domUtils.isEmptyBlock(this.body)) {\r\n                return true\r\n            }\r\n            //随时添加,定义的特殊标签如果存在，不能认为是空\r\n            tags = ['div'];\r\n            for (i = 0; ci = tags[i++];) {\r\n                var nodes = domUtils.getElementsByTagName(this.body, ci);\r\n                for (var n = 0, cn; cn = nodes[n++];) {\r\n                    if (domUtils.isCustomeNode(cn)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * 重置编辑器，可用来做多个tab使用同一个编辑器实例\r\n         * @name  reset\r\n         * @desc\r\n         * * 清空编辑器内容\r\n         * * 清空回退列表\r\n         * @grammar editor.reset()\r\n         */\r\n        reset: function () {\r\n            this.fireEvent('reset');\r\n        },\r\n        isEnabled: function(){\r\n            return this._isEnabled != true;\r\n        },\r\n\r\n        setEnabled: function () {\r\n            var me = this, range;\r\n\r\n            me.body.contentEditable = true;\r\n\r\n            /* 恢复选区 */\r\n            if (me.lastBk) {\r\n                range = me.selection.getRange();\r\n                try {\r\n                    range.moveToBookmark(me.lastBk);\r\n                    delete me.lastBk\r\n                } catch (e) {\r\n                    range.setStartAtFirst(me.body).collapse(true)\r\n                }\r\n                range.select(true);\r\n            }\r\n\r\n            /* 恢复query函数 */\r\n            if (me.bkqueryCommandState) {\r\n                me.queryCommandState = me.bkqueryCommandState;\r\n                delete me.bkqueryCommandState;\r\n            }\r\n\r\n            /* 恢复原生事件 */\r\n            if (me._bkproxyDomEvent) {\r\n                me._proxyDomEvent = me._bkproxyDomEvent;\r\n                delete me._bkproxyDomEvent;\r\n            }\r\n\r\n            /* 触发事件 */\r\n            me.fireEvent('setEnabled');\r\n        },\r\n        /**\r\n         * 设置当前编辑区域可以编辑\r\n         * @name enable\r\n         * @grammar editor.enable()\r\n         */\r\n        enable: function () {\r\n            return this.setEnabled();\r\n        },\r\n        setDisabled: function (except, keepDomEvent) {\r\n            var me = this;\r\n\r\n            me.body.contentEditable = false;\r\n            me._except = except ? utils.isArray(except) ? except : [except] : [];\r\n\r\n            /* 备份最后的选区 */\r\n            if (!me.lastBk) {\r\n                me.lastBk = me.selection.getRange().createBookmark(true);\r\n            }\r\n\r\n            /* 备份并重置query函数 */\r\n            if(!me.bkqueryCommandState) {\r\n                me.bkqueryCommandState = me.queryCommandState;\r\n                me.queryCommandState = function (type) {\r\n                    if (utils.indexOf(me._except, type) != -1) {\r\n                        return me.bkqueryCommandState.apply(me, arguments);\r\n                    }\r\n                    return -1;\r\n                };\r\n            }\r\n\r\n            /* 备份并墙原生事件 */\r\n            if(!keepDomEvent && !me._bkproxyDomEvent) {\r\n                me._bkproxyDomEvent = me._proxyDomEvent;\r\n                me._proxyDomEvent = function () {\r\n                    return false;\r\n                };\r\n            }\r\n\r\n            /* 触发事件 */\r\n            me.fireEvent('selectionchange');\r\n            me.fireEvent('setDisabled', me._except);\r\n        },\r\n        /** 设置当前编辑区域不可编辑,except中的命令除外\r\n         * @name disable\r\n         * @grammar editor.disable()\r\n         * @grammar editor.disable(except)  //例外的命令，也即即使设置了disable，此处配置的命令仍然可以执行\r\n         * @example\r\n         * //禁用工具栏中除加粗和插入图片之外的所有功能\r\n         * editor.disable(['bold','insertimage']);//可以是单一的String,也可以是Array\r\n         */\r\n        disable: function (except) {\r\n            return this.setDisabled(except);\r\n        },\r\n        /**\r\n         * 设置默认内容\r\n         * @ignore\r\n         * @private\r\n         * @param  {String} cont 要存入的内容\r\n         */\r\n        _setDefaultContent: function () {\r\n            function clear() {\r\n                var me = this;\r\n                if (me.document.getElementById('initContent')) {\r\n                    me.body.innerHTML = '<p>' + (ie ? '' : '<br/>') + '</p>';\r\n                    me.removeListener('firstBeforeExecCommand focus', clear);\r\n                    setTimeout(function () {\r\n                        me.focus();\r\n                        me._selectionChange();\r\n                    }, 0)\r\n                }\r\n            }\r\n\r\n            return function (cont) {\r\n                var me = this;\r\n                me.body.innerHTML = '<p id=\"initContent\">' + cont + '</p>';\r\n\r\n                me.addListener('firstBeforeExecCommand focus', clear);\r\n            }\r\n        }(),\r\n        /**\r\n         * show方法的兼容版本\r\n         * @private\r\n         * @ignore\r\n         */\r\n        setShow: function () {\r\n            var me = this, range = me.selection.getRange();\r\n            if (me.container.style.display == 'none') {\r\n                //有可能内容丢失了\r\n                try {\r\n                    range.moveToBookmark(me.lastBk);\r\n                    delete me.lastBk\r\n                } catch (e) {\r\n                    range.setStartAtFirst(me.body).collapse(true)\r\n                }\r\n                //ie下focus实效，所以做了个延迟\r\n                setTimeout(function () {\r\n                    range.select(true);\r\n                }, 100);\r\n                me.container.style.display = '';\r\n            }\r\n\r\n        },\r\n        /**\r\n         * 显示编辑器\r\n         * @name show\r\n         * @grammar editor.show()\r\n         */\r\n        show: function () {\r\n            return this.setShow();\r\n        },\r\n        /**\r\n         * hide方法的兼容版本\r\n         * @private\r\n         * @ignore\r\n         */\r\n        setHide: function () {\r\n            var me = this;\r\n            if (!me.lastBk) {\r\n                me.lastBk = me.selection.getRange().createBookmark(true);\r\n            }\r\n            me.container.style.display = 'none'\r\n        },\r\n        /**\r\n         * 隐藏编辑器\r\n         * @name hide\r\n         * @grammar editor.hide()\r\n         */\r\n        hide: function () {\r\n            return this.setHide();\r\n        },\r\n        /**\r\n         * 根据制定的路径，获取对应的语言资源\r\n         * @name  getLang\r\n         * @grammar editor.getLang(path)  =>  （JSON|String) 路径根据的是lang目录下的语言文件的路径结构\r\n         * @example\r\n         * editor.getLang('contextMenu.delete') //如果当前是中文，那返回是的是删除\r\n         */\r\n        getLang: function (path) {\r\n            var lang = UM.I18N[this.options.lang];\r\n            if (!lang) {\r\n                throw Error(\"not import language file\");\r\n            }\r\n            path = (path || \"\").split(\".\");\r\n            for (var i = 0, ci; ci = path[i++];) {\r\n                lang = lang[ci];\r\n                if (!lang)break;\r\n            }\r\n            return lang;\r\n        },\r\n        /**\r\n         * 计算编辑器当前内容的长度\r\n         * @name  getContentLength\r\n         * @grammar editor.getContentLength(ingoneHtml,tagNames)  =>\r\n         * @example\r\n         * editor.getLang(true)\r\n         */\r\n        getContentLength: function (ingoneHtml, tagNames) {\r\n            var count = this.getContent(false,false,true).length;\r\n            if (ingoneHtml) {\r\n                tagNames = (tagNames || []).concat([ 'hr', 'img', 'iframe']);\r\n                count = this.getContentTxt().replace(/[\\t\\r\\n]+/g, '').length;\r\n                for (var i = 0, ci; ci = tagNames[i++];) {\r\n                    count += this.body.getElementsByTagName(ci).length;\r\n                }\r\n            }\r\n            return count;\r\n        },\r\n        addInputRule: function (rule,ignoreUndo) {\r\n            rule.ignoreUndo = ignoreUndo;\r\n            this.inputRules.push(rule);\r\n        },\r\n        filterInputRule: function (root,isUndoLoad) {\r\n            for (var i = 0, ci; ci = this.inputRules[i++];) {\r\n                if(isUndoLoad && ci.ignoreUndo){\r\n                    continue;\r\n                }\r\n                ci.call(this, root)\r\n            }\r\n        },\r\n        addOutputRule: function (rule,ignoreUndo) {\r\n            rule.ignoreUndo = ignoreUndo;\r\n            this.outputRules.push(rule)\r\n        },\r\n        filterOutputRule: function (root,isUndoLoad) {\r\n            for (var i = 0, ci; ci = this.outputRules[i++];) {\r\n                if(isUndoLoad && ci.ignoreUndo){\r\n                    continue;\r\n                }\r\n                ci.call(this, root)\r\n            }\r\n        }\r\n    };\r\n    utils.inherits(Editor, EventBase);\r\n})();\r\n\r\n/**\r\n * @file\r\n * @name UM.filterWord\r\n * @short filterWord\r\n * @desc 用来过滤word粘贴过来的字符串\r\n * @import editor.js,core/utils.js\r\n * @anthor zhanyi\r\n */\r\nvar filterWord = UM.filterWord = function () {\r\n\r\n    //是否是word过来的内容\r\n    function isWordDocument( str ) {\r\n        return /(class=\"?Mso|style=\"[^\"]*\\bmso\\-|w:WordDocument|<(v|o):|lang=)/ig.test( str );\r\n    }\r\n    //去掉小数\r\n    function transUnit( v ) {\r\n        v = v.replace( /[\\d.]+\\w+/g, function ( m ) {\r\n            return utils.transUnitToPx(m);\r\n        } );\r\n        return v;\r\n    }\r\n\r\n    function filterPasteWord( str ) {\r\n        return str.replace(/[\\t\\r\\n]+/g,' ')\r\n            .replace( /<!--[\\s\\S]*?-->/ig, \"\" )\r\n            //转换图片\r\n            .replace(/<v:shape [^>]*>[\\s\\S]*?.<\\/v:shape>/gi,function(str){\r\n                //opera能自己解析出image所这里直接返回空\r\n                if(browser.opera){\r\n                    return '';\r\n                }\r\n                try{\r\n                    //有可能是bitmap占为图，无用，直接过滤掉，主要体现在粘贴excel表格中\r\n                    if(/Bitmap/i.test(str)){\r\n                        return '';\r\n                    }\r\n                    var width = str.match(/width:([ \\d.]*p[tx])/i)[1],\r\n                        height = str.match(/height:([ \\d.]*p[tx])/i)[1],\r\n                        src =  str.match(/src=\\s*\"([^\"]*)\"/i)[1];\r\n                    return '<img width=\"'+ transUnit(width) +'\" height=\"'+transUnit(height) +'\" src=\"' + src + '\" />';\r\n                } catch(e){\r\n                    return '';\r\n                }\r\n            })\r\n            //针对wps添加的多余标签处理\r\n            .replace(/<\\/?div[^>]*>/g,'')\r\n            //去掉多余的属性\r\n            .replace( /v:\\w+=([\"']?)[^'\"]+\\1/g, '' )\r\n            .replace( /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|xml|meta|link|style|\\w+:\\w+)(?=[\\s\\/>]))[^>]*>/gi, \"\" )\r\n            .replace( /<p [^>]*class=\"?MsoHeading\"?[^>]*>(.*?)<\\/p>/gi, \"<p><strong>$1</strong></p>\" )\r\n            //去掉多余的属性\r\n            .replace( /\\s+(class|lang|align)\\s*=\\s*(['\"]?)([\\w-]+)\\2/ig, function(str,name,marks,val){\r\n                //保留list的标示\r\n                return name == 'class' && val == 'MsoListParagraph' ? str : ''\r\n            })\r\n            //清除多余的font/span不能匹配&nbsp;有可能是空格\r\n            .replace( /<(font|span)[^>]*>(\\s*)<\\/\\1>/gi, function(a,b,c){\r\n                return c.replace(/[\\t\\r\\n ]+/g,' ')\r\n            })\r\n            //处理style的问题\r\n            .replace( /(<[a-z][^>]*)\\sstyle=([\"'])([^\\2]*?)\\2/gi, function( str, tag, tmp, style ) {\r\n                var n = [],\r\n                    s = style.replace( /^\\s+|\\s+$/, '' )\r\n                        .replace(/&#39;/g,'\\'')\r\n                        .replace( /&quot;/gi, \"'\" )\r\n                        .split( /;\\s*/g );\r\n\r\n                for ( var i = 0,v; v = s[i];i++ ) {\r\n\r\n                    var name, value,\r\n                        parts = v.split( \":\" );\r\n\r\n                    if ( parts.length == 2 ) {\r\n                        name = parts[0].toLowerCase();\r\n                        value = parts[1].toLowerCase();\r\n                        if(/^(background)\\w*/.test(name) && value.replace(/(initial|\\s)/g,'').length == 0\r\n                            ||\r\n                            /^(margin)\\w*/.test(name) && /^0\\w+$/.test(value)\r\n                            ){\r\n                            continue;\r\n                        }\r\n\r\n                        switch ( name ) {\r\n                            case \"mso-padding-alt\":\r\n                            case \"mso-padding-top-alt\":\r\n                            case \"mso-padding-right-alt\":\r\n                            case \"mso-padding-bottom-alt\":\r\n                            case \"mso-padding-left-alt\":\r\n                            case \"mso-margin-alt\":\r\n                            case \"mso-margin-top-alt\":\r\n                            case \"mso-margin-right-alt\":\r\n                            case \"mso-margin-bottom-alt\":\r\n                            case \"mso-margin-left-alt\":\r\n                            //ie下会出现挤到一起的情况\r\n                            //case \"mso-table-layout-alt\":\r\n                            case \"mso-height\":\r\n                            case \"mso-width\":\r\n                            case \"mso-vertical-align-alt\":\r\n                                //trace:1819 ff下会解析出padding在table上\r\n                                if(!/<table/.test(tag))\r\n                                    n[i] = name.replace( /^mso-|-alt$/g, \"\" ) + \":\" + transUnit( value );\r\n                                continue;\r\n                            case \"horiz-align\":\r\n                                n[i] = \"text-align:\" + value;\r\n                                continue;\r\n\r\n                            case \"vert-align\":\r\n                                n[i] = \"vertical-align:\" + value;\r\n                                continue;\r\n\r\n                            case \"font-color\":\r\n                            case \"mso-foreground\":\r\n                                n[i] = \"color:\" + value;\r\n                                continue;\r\n\r\n                            case \"mso-background\":\r\n                            case \"mso-highlight\":\r\n                                n[i] = \"background:\" + value;\r\n                                continue;\r\n\r\n                            case \"mso-default-height\":\r\n                                n[i] = \"min-height:\" + transUnit( value );\r\n                                continue;\r\n\r\n                            case \"mso-default-width\":\r\n                                n[i] = \"min-width:\" + transUnit( value );\r\n                                continue;\r\n\r\n                            case \"mso-padding-between-alt\":\r\n                                n[i] = \"border-collapse:separate;border-spacing:\" + transUnit( value );\r\n                                continue;\r\n\r\n                            case \"text-line-through\":\r\n                                if ( (value == \"single\") || (value == \"double\") ) {\r\n                                    n[i] = \"text-decoration:line-through\";\r\n                                }\r\n                                continue;\r\n                            case \"mso-zero-height\":\r\n                                if ( value == \"yes\" ) {\r\n                                    n[i] = \"display:none\";\r\n                                }\r\n                                continue;\r\n//                                case 'background':\r\n//                                    break;\r\n                            case 'margin':\r\n                                if ( !/[1-9]/.test( value ) ) {\r\n                                    continue;\r\n                                }\r\n\r\n                        }\r\n\r\n                        if ( /^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test( name )\r\n                            ||\r\n                            /text\\-indent|padding|margin/.test(name) && /\\-[\\d.]+/.test(value)\r\n                            ) {\r\n                            continue;\r\n                        }\r\n\r\n                        n[i] = name + \":\" + parts[1];\r\n                    }\r\n                }\r\n                return tag + (n.length ? ' style=\"' + n.join( ';').replace(/;{2,}/g,';') + '\"' : '');\r\n            })\r\n            .replace(/[\\d.]+(cm|pt)/g,function(str){\r\n                return utils.transUnitToPx(str)\r\n            })\r\n\r\n    }\r\n\r\n    return function ( html ) {\r\n        return (isWordDocument( html ) ? filterPasteWord( html ) : html);\r\n    };\r\n}();\r\n///import editor.js\r\n///import core/utils.js\r\n///import core/dom/dom.js\r\n///import core/dom/dtd.js\r\n///import core/htmlparser.js\r\n//模拟的节点类\r\n//by zhanyi\r\n(function () {\r\n    var uNode = UM.uNode = function (obj) {\r\n        this.type = obj.type;\r\n        this.data = obj.data;\r\n        this.tagName = obj.tagName;\r\n        this.parentNode = obj.parentNode;\r\n        this.attrs = obj.attrs || {};\r\n        this.children = obj.children;\r\n    };\r\n    var notTransAttrs = {\r\n        'href':1,\r\n        'src':1,\r\n        '_src':1,\r\n        '_href':1,\r\n        'cdata_data':1\r\n    };\r\n\r\n    var notTransTagName = {\r\n        style:1,\r\n        script:1\r\n    };\r\n\r\n    var indentChar = '    ',\r\n        breakChar = '\\n';\r\n\r\n    function insertLine(arr, current, begin) {\r\n        arr.push(breakChar);\r\n        return current + (begin ? 1 : -1);\r\n    }\r\n\r\n    function insertIndent(arr, current) {\r\n        //插入缩进\r\n        for (var i = 0; i < current; i++) {\r\n            arr.push(indentChar);\r\n        }\r\n    }\r\n\r\n    //创建uNode的静态方法\r\n    //支持标签和html\r\n    uNode.createElement = function (html) {\r\n        if (/[<>]/.test(html)) {\r\n            return UM.htmlparser(html).children[0]\r\n        } else {\r\n            return new uNode({\r\n                type:'element',\r\n                children:[],\r\n                tagName:html\r\n            })\r\n        }\r\n    };\r\n    uNode.createText = function (data,noTrans) {\r\n        return new UM.uNode({\r\n            type:'text',\r\n            'data':noTrans ? data : utils.unhtml(data || '')\r\n        })\r\n    };\r\n    function nodeToHtml(node, arr, formatter, current) {\r\n        switch (node.type) {\r\n            case 'root':\r\n                for (var i = 0, ci; ci = node.children[i++];) {\r\n                    //插入新行\r\n                    if (formatter && ci.type == 'element' && !dtd.$inlineWithA[ci.tagName] && i > 1) {\r\n                        insertLine(arr, current, true);\r\n                        insertIndent(arr, current)\r\n                    }\r\n                    nodeToHtml(ci, arr, formatter, current)\r\n                }\r\n                break;\r\n            case 'text':\r\n                isText(node, arr);\r\n                break;\r\n            case 'element':\r\n                isElement(node, arr, formatter, current);\r\n                break;\r\n            case 'comment':\r\n                isComment(node, arr, formatter);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function isText(node, arr) {\r\n        if(node.parentNode.tagName == 'pre'){\r\n            //源码模式下输入html标签，不能做转换处理，直接输出\r\n            arr.push(node.data)\r\n        }else{\r\n            arr.push(notTransTagName[node.parentNode.tagName] ? utils.html(node.data) : node.data.replace(/[ ]{2}/g,' &nbsp;'))\r\n        }\r\n\r\n    }\r\n\r\n    function isElement(node, arr, formatter, current) {\r\n        var attrhtml = '';\r\n        if (node.attrs) {\r\n            attrhtml = [];\r\n            var attrs = node.attrs;\r\n            for (var a in attrs) {\r\n                //这里就针对\r\n                //<p>'<img src='http://nsclick.baidu.com/u.gif?&asdf=\\\"sdf&asdfasdfs;asdf'></p>\r\n                //这里边的\\\"做转换，要不用innerHTML直接被截断了，属性src\r\n                //有可能做的不够\r\n                attrhtml.push(a + (attrs[a] !== undefined ? '=\"' + (notTransAttrs[a] ? utils.html(attrs[a]).replace(/[\"]/g, function (a) {\r\n                    return '&quot;'\r\n                }) : utils.unhtml(attrs[a])) + '\"' : ''))\r\n            }\r\n            attrhtml = attrhtml.join(' ');\r\n        }\r\n        arr.push('<' + node.tagName +\r\n            (attrhtml ? ' ' + attrhtml  : '') +\r\n            (dtd.$empty[node.tagName] ? '\\/' : '' ) + '>'\r\n        );\r\n        //插入新行\r\n        if (formatter  &&  !dtd.$inlineWithA[node.tagName] && node.tagName != 'pre') {\r\n            if(node.children && node.children.length){\r\n                current = insertLine(arr, current, true);\r\n                insertIndent(arr, current)\r\n            }\r\n\r\n        }\r\n        if (node.children && node.children.length) {\r\n            for (var i = 0, ci; ci = node.children[i++];) {\r\n                if (formatter && ci.type == 'element' &&  !dtd.$inlineWithA[ci.tagName] && i > 1) {\r\n                    insertLine(arr, current);\r\n                    insertIndent(arr, current)\r\n                }\r\n                nodeToHtml(ci, arr, formatter, current)\r\n            }\r\n        }\r\n        if (!dtd.$empty[node.tagName]) {\r\n            if (formatter && !dtd.$inlineWithA[node.tagName]  && node.tagName != 'pre') {\r\n\r\n                if(node.children && node.children.length){\r\n                    current = insertLine(arr, current);\r\n                    insertIndent(arr, current)\r\n                }\r\n            }\r\n            arr.push('<\\/' + node.tagName + '>');\r\n        }\r\n\r\n    }\r\n\r\n    function isComment(node, arr) {\r\n        arr.push('<!--' + node.data + '-->');\r\n    }\r\n\r\n    function getNodeById(root, id) {\r\n        var node;\r\n        if (root.type == 'element' && root.getAttr('id') == id) {\r\n            return root;\r\n        }\r\n        if (root.children && root.children.length) {\r\n            for (var i = 0, ci; ci = root.children[i++];) {\r\n                if (node = getNodeById(ci, id)) {\r\n                    return node;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function getNodesByTagName(node, tagName, arr) {\r\n        if (node.type == 'element' && node.tagName == tagName) {\r\n            arr.push(node);\r\n        }\r\n        if (node.children && node.children.length) {\r\n            for (var i = 0, ci; ci = node.children[i++];) {\r\n                getNodesByTagName(ci, tagName, arr)\r\n            }\r\n        }\r\n    }\r\n    function nodeTraversal(root,fn){\r\n        if(root.children && root.children.length){\r\n            for(var i= 0,ci;ci=root.children[i];){\r\n                nodeTraversal(ci,fn);\r\n                //ci被替换的情况，这里就不再走 fn了\r\n                if(ci.parentNode ){\r\n                    if(ci.children && ci.children.length){\r\n                        fn(ci)\r\n                    }\r\n                    if(ci.parentNode) i++\r\n                }\r\n            }\r\n        }else{\r\n            fn(root)\r\n        }\r\n\r\n    }\r\n    uNode.prototype = {\r\n\r\n        /**\r\n         * 当前节点对象，转换成html文本\r\n         * @method toHtml\r\n         * @return { String } 返回转换后的html字符串\r\n         * @example\r\n         * ```javascript\r\n         * node.toHtml();\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 当前节点对象，转换成html文本\r\n         * @method toHtml\r\n         * @param { Boolean } formatter 是否格式化返回值\r\n         * @return { String } 返回转换后的html字符串\r\n         * @example\r\n         * ```javascript\r\n         * node.toHtml( true );\r\n         * ```\r\n         */\r\n        toHtml:function (formatter) {\r\n            var arr = [];\r\n            nodeToHtml(this, arr, formatter, 0);\r\n            return arr.join('')\r\n        },\r\n\r\n        /**\r\n         * 获取节点的html内容\r\n         * @method innerHTML\r\n         * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n         * @return { String } 返回节点的html内容\r\n         * @example\r\n         * ```javascript\r\n         * var htmlstr = node.innerHTML();\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 设置节点的html内容\r\n         * @method innerHTML\r\n         * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n         * @param { String } htmlstr 传入要设置的html内容\r\n         * @return { UM.uNode } 返回节点本身\r\n         * @example\r\n         * ```javascript\r\n         * node.innerHTML('<span>text</span>');\r\n         * ```\r\n         */\r\n        innerHTML:function (htmlstr) {\r\n            if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n                return this;\r\n            }\r\n            if (utils.isString(htmlstr)) {\r\n                if(this.children){\r\n                    for (var i = 0, ci; ci = this.children[i++];) {\r\n                        ci.parentNode = null;\r\n                    }\r\n                }\r\n                this.children = [];\r\n                var tmpRoot = UM.htmlparser(htmlstr);\r\n                for (var i = 0, ci; ci = tmpRoot.children[i++];) {\r\n                    this.children.push(ci);\r\n                    ci.parentNode = this;\r\n                }\r\n                return this;\r\n            } else {\r\n                var tmpRoot = new UM.uNode({\r\n                    type:'root',\r\n                    children:this.children\r\n                });\r\n                return tmpRoot.toHtml();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 获取节点的纯文本内容\r\n         * @method innerText\r\n         * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n         * @return { String } 返回节点的存文本内容\r\n         * @example\r\n         * ```javascript\r\n         * var textStr = node.innerText();\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 设置节点的纯文本内容\r\n         * @method innerText\r\n         * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n         * @param { String } textStr 传入要设置的文本内容\r\n         * @return { UM.uNode } 返回节点本身\r\n         * @example\r\n         * ```javascript\r\n         * node.innerText('<span>text</span>');\r\n         * ```\r\n         */\r\n        innerText:function (textStr,noTrans) {\r\n            if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n                return this;\r\n            }\r\n            if (textStr) {\r\n                if(this.children){\r\n                    for (var i = 0, ci; ci = this.children[i++];) {\r\n                        ci.parentNode = null;\r\n                    }\r\n                }\r\n                this.children = [];\r\n                this.appendChild(uNode.createText(textStr,noTrans));\r\n                return this;\r\n            } else {\r\n                return this.toHtml().replace(/<[^>]+>/g, '');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 获取当前对象的data属性\r\n         * @method getData\r\n         * @return { Object } 若节点的type值是elemenet，返回空字符串，否则返回节点的data属性\r\n         * @example\r\n         * ```javascript\r\n         * node.getData();\r\n         * ```\r\n         */\r\n        getData:function () {\r\n            if (this.type == 'element')\r\n                return '';\r\n            return this.data\r\n        },\r\n\r\n        /**\r\n         * 获取当前节点下的第一个子节点\r\n         * @method firstChild\r\n         * @return { UM.uNode } 返回第一个子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.firstChild(); //返回第一个子节点\r\n         * ```\r\n         */\r\n        firstChild:function () {\r\n//            if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n//                return this;\r\n//            }\r\n            return this.children ? this.children[0] : null;\r\n        },\r\n\r\n        /**\r\n         * 获取当前节点下的最后一个子节点\r\n         * @method lastChild\r\n         * @return { UM.uNode } 返回最后一个子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.lastChild(); //返回最后一个子节点\r\n         * ```\r\n         */\r\n        lastChild:function () {\r\n//            if (this.type != 'element' || dtd.$empty[this.tagName] ) {\r\n//                return this;\r\n//            }\r\n            return this.children ? this.children[this.children.length - 1] : null;\r\n        },\r\n\r\n        /**\r\n         * 获取和当前节点有相同父亲节点的前一个节点\r\n         * @method previousSibling\r\n         * @return { UM.uNode } 返回前一个节点\r\n         * @example\r\n         * ```javascript\r\n         * node.children[2].previousSibling(); //返回子节点node.children[1]\r\n         * ```\r\n         */\r\n        previousSibling : function(){\r\n            var parent = this.parentNode;\r\n            for (var i = 0, ci; ci = parent.children[i]; i++) {\r\n                if (ci === this) {\r\n                    return i == 0 ? null : parent.children[i-1];\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * 获取和当前节点有相同父亲节点的后一个节点\r\n         * @method nextSibling\r\n         * @return { UM.uNode } 返回后一个节点,找不到返回null\r\n         * @example\r\n         * ```javascript\r\n         * node.children[2].nextSibling(); //如果有，返回子节点node.children[3]\r\n         * ```\r\n         */\r\n        nextSibling : function(){\r\n            var parent = this.parentNode;\r\n            for (var i = 0, ci; ci = parent.children[i++];) {\r\n                if (ci === this) {\r\n                    return parent.children[i];\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 用新的节点替换当前节点\r\n         * @method replaceChild\r\n         * @param { UM.uNode } target 要替换成该节点参数\r\n         * @param { UM.uNode } source 要被替换掉的节点\r\n         * @return { UM.uNode } 返回替换之后的节点对象\r\n         * @example\r\n         * ```javascript\r\n         * node.replaceChild(newNode, childNode); //用newNode替换childNode,childNode是node的子节点\r\n         * ```\r\n         */\r\n        replaceChild:function (target, source) {\r\n            if (this.children) {\r\n                if(target.parentNode){\r\n                    target.parentNode.removeChild(target);\r\n                }\r\n                for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                    if (ci === source) {\r\n                        this.children.splice(i, 1, target);\r\n                        source.parentNode = null;\r\n                        target.parentNode = this;\r\n                        return target;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 在节点的子节点列表最后位置插入一个节点\r\n         * @method appendChild\r\n         * @param { UM.uNode } node 要插入的节点\r\n         * @return { UM.uNode } 返回刚插入的子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.appendChild( newNode ); //在node内插入子节点newNode\r\n         * ```\r\n         */\r\n        appendChild:function (node) {\r\n            if (this.type == 'root' || (this.type == 'element' && !dtd.$empty[this.tagName])) {\r\n                if (!this.children) {\r\n                    this.children = []\r\n                }\r\n                if(node.parentNode){\r\n                    node.parentNode.removeChild(node);\r\n                }\r\n                for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                    if (ci === node) {\r\n                        this.children.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n                this.children.push(node);\r\n                node.parentNode = this;\r\n                return node;\r\n            }\r\n\r\n\r\n        },\r\n\r\n        /**\r\n         * 在传入节点的前面插入一个节点\r\n         * @method insertBefore\r\n         * @param { UM.uNode } target 要插入的节点\r\n         * @param { UM.uNode } source 在该参数节点前面插入\r\n         * @return { UM.uNode } 返回刚插入的子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.parentNode.insertBefore(newNode, node); //在node节点后面插入newNode\r\n         * ```\r\n         */\r\n        insertBefore:function (target, source) {\r\n            if (this.children) {\r\n                if(target.parentNode){\r\n                    target.parentNode.removeChild(target);\r\n                }\r\n                for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                    if (ci === source) {\r\n                        this.children.splice(i, 0, target);\r\n                        target.parentNode = this;\r\n                        return target;\r\n                    }\r\n                }\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 在传入节点的后面插入一个节点\r\n         * @method insertAfter\r\n         * @param { UM.uNode } target 要插入的节点\r\n         * @param { UM.uNode } source 在该参数节点后面插入\r\n         * @return { UM.uNode } 返回刚插入的子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.parentNode.insertAfter(newNode, node); //在node节点后面插入newNode\r\n         * ```\r\n         */\r\n        insertAfter:function (target, source) {\r\n            if (this.children) {\r\n                if(target.parentNode){\r\n                    target.parentNode.removeChild(target);\r\n                }\r\n                for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                    if (ci === source) {\r\n                        this.children.splice(i + 1, 0, target);\r\n                        target.parentNode = this;\r\n                        return target;\r\n                    }\r\n\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 从当前节点的子节点列表中，移除节点\r\n         * @method removeChild\r\n         * @param { UM.uNode } node 要移除的节点引用\r\n         * @param { Boolean } keepChildren 是否保留移除节点的子节点，若传入true，自动把移除节点的子节点插入到移除的位置\r\n         * @return { * } 返回刚移除的子节点\r\n         * @example\r\n         * ```javascript\r\n         * node.removeChild(childNode,true); //在node的子节点列表中移除child节点，并且吧child的子节点插入到移除的位置\r\n         * ```\r\n         */\r\n        removeChild:function (node,keepChildren) {\r\n            if (this.children) {\r\n                for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                    if (ci === node) {\r\n                        this.children.splice(i, 1);\r\n                        ci.parentNode = null;\r\n                        if(keepChildren && ci.children && ci.children.length){\r\n                            for(var j= 0,cj;cj=ci.children[j];j++){\r\n                                this.children.splice(i+j,0,cj);\r\n                                cj.parentNode = this;\r\n\r\n                            }\r\n                        }\r\n                        return ci;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 获取当前节点所代表的元素属性，即获取attrs对象下的属性值\r\n         * @method getAttr\r\n         * @param { String } attrName 要获取的属性名称\r\n         * @return { * } 返回attrs对象下的属性值\r\n         * @example\r\n         * ```javascript\r\n         * node.getAttr('title');\r\n         * ```\r\n         */\r\n        getAttr:function (attrName) {\r\n            return this.attrs && this.attrs[attrName.toLowerCase()]\r\n        },\r\n\r\n        /**\r\n         * 设置当前节点所代表的元素属性，即设置attrs对象下的属性值\r\n         * @method setAttr\r\n         * @param { String } attrName 要设置的属性名称\r\n         * @param { * } attrVal 要设置的属性值，类型视设置的属性而定\r\n         * @return { * } 返回attrs对象下的属性值\r\n         * @example\r\n         * ```javascript\r\n         * node.setAttr('title','标题');\r\n         * ```\r\n         */\r\n        setAttr:function (attrName, attrVal) {\r\n            if (!attrName) {\r\n                delete this.attrs;\r\n                return;\r\n            }\r\n            if(!this.attrs){\r\n                this.attrs = {};\r\n            }\r\n            if (utils.isObject(attrName)) {\r\n                for (var a in attrName) {\r\n                    if (!attrName[a]) {\r\n                        delete this.attrs[a]\r\n                    } else {\r\n                        this.attrs[a.toLowerCase()] = attrName[a];\r\n                    }\r\n                }\r\n            } else {\r\n                if (!attrVal) {\r\n                    delete this.attrs[attrName]\r\n                } else {\r\n                    this.attrs[attrName.toLowerCase()] = attrVal;\r\n                }\r\n\r\n            }\r\n        },\r\n        hasAttr: function( attrName ){\r\n            var attrVal = this.getAttr( attrName );\r\n            return ( attrVal !== null ) && ( attrVal !== undefined );\r\n        },\r\n        /**\r\n         * 获取当前节点在父节点下的位置索引\r\n         * @method getIndex\r\n         * @return { Number } 返回索引数值，如果没有父节点，返回-1\r\n         * @example\r\n         * ```javascript\r\n         * node.getIndex();\r\n         * ```\r\n         */\r\n        getIndex:function(){\r\n            var parent = this.parentNode;\r\n            for(var i= 0,ci;ci=parent.children[i];i++){\r\n                if(ci === this){\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        },\r\n\r\n        /**\r\n         * 在当前节点下，根据id查找节点\r\n         * @method getNodeById\r\n         * @param { String } id 要查找的id\r\n         * @return { UM.uNode } 返回找到的节点\r\n         * @example\r\n         * ```javascript\r\n         * node.getNodeById('textId');\r\n         * ```\r\n         */\r\n        getNodeById:function (id) {\r\n            var node;\r\n            if (this.children && this.children.length) {\r\n                for (var i = 0, ci; ci = this.children[i++];) {\r\n                    if (node = getNodeById(ci, id)) {\r\n                        return node;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 在当前节点下，根据元素名称查找节点列表\r\n         * @method getNodesByTagName\r\n         * @param { String } tagNames 要查找的元素名称\r\n         * @return { Array } 返回找到的节点列表\r\n         * @example\r\n         * ```javascript\r\n         * node.getNodesByTagName('span');\r\n         * ```\r\n         */\r\n        getNodesByTagName:function (tagNames) {\r\n            tagNames = utils.trim(tagNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            var arr = [], me = this;\r\n            utils.each(tagNames, function (tagName) {\r\n                if (me.children && me.children.length) {\r\n                    for (var i = 0, ci; ci = me.children[i++];) {\r\n                        getNodesByTagName(ci, tagName, arr)\r\n                    }\r\n                }\r\n            });\r\n            return arr;\r\n        },\r\n\r\n        /**\r\n         * 根据样式名称，获取节点的样式值\r\n         * @method getStyle\r\n         * @param { String } name 要获取的样式名称\r\n         * @return { String } 返回样式值\r\n         * @example\r\n         * ```javascript\r\n         * node.getStyle('font-size');\r\n         * ```\r\n         */\r\n        getStyle:function (name) {\r\n            var cssStyle = this.getAttr('style');\r\n            if (!cssStyle) {\r\n                return ''\r\n            }\r\n            var reg = new RegExp('(^|;)\\\\s*' + name + ':([^;]+)','i');\r\n            var match = cssStyle.match(reg);\r\n            if (match && match[0]) {\r\n                return match[2]\r\n            }\r\n            return '';\r\n        },\r\n\r\n        /**\r\n         * 给节点设置样式\r\n         * @method setStyle\r\n         * @param { String } name 要设置的的样式名称\r\n         * @param { String } val 要设置的的样值\r\n         * @example\r\n         * ```javascript\r\n         * node.setStyle('font-size', '12px');\r\n         * ```\r\n         */\r\n        setStyle:function (name, val) {\r\n            function exec(name, val) {\r\n                var reg = new RegExp('(^|;)\\\\s*' + name + ':([^;]+;?)', 'gi');\r\n                cssStyle = cssStyle.replace(reg, '$1');\r\n                if (val) {\r\n                    cssStyle = name + ':' + utils.unhtml(val) + ';' + cssStyle\r\n                }\r\n\r\n            }\r\n\r\n            var cssStyle = this.getAttr('style');\r\n            if (!cssStyle) {\r\n                cssStyle = '';\r\n            }\r\n            if (utils.isObject(name)) {\r\n                for (var a in name) {\r\n                    exec(a, name[a])\r\n                }\r\n            } else {\r\n                exec(name, val)\r\n            }\r\n            this.setAttr('style', utils.trim(cssStyle))\r\n        },\r\n        hasClass: function( className ){\r\n            if( this.hasAttr('class') ) {\r\n                var classNames = this.getAttr('class').split(/\\s+/),\r\n                    hasClass = false;\r\n                $.each(classNames, function(key, item){\r\n                    if( item === className ) {\r\n                        hasClass = true;\r\n                    }\r\n                });\r\n                return hasClass;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n        addClass: function( className ){\r\n\r\n            var classes = null,\r\n                hasClass = false;\r\n\r\n            if( this.hasAttr('class') ) {\r\n\r\n                classes = this.getAttr('class');\r\n                classes = classes.split(/\\s+/);\r\n\r\n                classes.forEach( function( item ){\r\n\r\n                    if( item===className ) {\r\n                        hasClass = true;\r\n                        return;\r\n                    }\r\n\r\n                } );\r\n\r\n                !hasClass && classes.push( className );\r\n\r\n                this.setAttr('class', classes.join(\" \"));\r\n\r\n            } else {\r\n                this.setAttr('class', className);\r\n            }\r\n\r\n        },\r\n        removeClass: function( className ){\r\n            if( this.hasAttr('class') ) {\r\n                var cl = this.getAttr('class');\r\n                cl = cl.replace(new RegExp('\\\\b' + className + '\\\\b', 'g'),'');\r\n                this.setAttr('class', utils.trim(cl).replace(/[ ]{2,}/g,' '));\r\n            }\r\n        },\r\n        /**\r\n         * 传入一个函数，递归遍历当前节点下的所有节点\r\n         * @method traversal\r\n         * @param { Function } fn 遍历到节点的时，传入节点作为参数，运行此函数\r\n         * @example\r\n         * ```javascript\r\n         * traversal(node, function(){\r\n         *     console.log(node.type);\r\n         * });\r\n         * ```\r\n         */\r\n        traversal:function(fn){\r\n            if(this.children && this.children.length){\r\n                nodeTraversal(this,fn);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n})();\r\n\r\n//html字符串转换成uNode节点\r\n//by zhanyi\r\nvar htmlparser = UM.htmlparser = function (htmlstr,ignoreBlank) {\r\n    //todo 原来的方式  [^\"'<>\\/] 有\\/就不能配对上 <TD vAlign=top background=../AAA.JPG> 这样的标签了\r\n    //先去掉了，加上的原因忘了，这里先记录\r\n    var re_tag = /<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s\\/>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'<>])*)\\/?>))/g,\r\n        re_attr = /([\\w\\-:.]+)(?:(?:\\s*=\\s*(?:(?:\"([^\"]*)\")|(?:'([^']*)')|([^\\s>]+)))|(?=\\s|$))/g;\r\n\r\n    //ie下取得的html可能会有\\n存在，要去掉，在处理replace(/[\\t\\r\\n]*/g,'');代码高量的\\n不能去除\r\n    var allowEmptyTags = {\r\n        b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,\r\n        sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1\r\n    };\r\n    htmlstr = htmlstr.replace(new RegExp(domUtils.fillChar, 'g'), '');\r\n    if(!ignoreBlank){\r\n        htmlstr = htmlstr.replace(new RegExp('[\\\\r\\\\t\\\\n'+(ignoreBlank?'':' ')+']*<\\/?(\\\\w+)\\\\s*(?:[^>]*)>[\\\\r\\\\t\\\\n'+(ignoreBlank?'':' ')+']*','g'), function(a,b){\r\n            //br暂时单独处理\r\n            if(b && allowEmptyTags[b.toLowerCase()]){\r\n                return a.replace(/(^[\\n\\r]+)|([\\n\\r]+$)/g,'');\r\n            }\r\n            return a.replace(new RegExp('^[\\\\r\\\\n'+(ignoreBlank?'':' ')+']+'),'').replace(new RegExp('[\\\\r\\\\n'+(ignoreBlank?'':' ')+']+$'),'');\r\n        });\r\n    }\r\n\r\n    var notTransAttrs = {\r\n        'href':1,\r\n        'src':1\r\n    };\r\n\r\n    var uNode = UM.uNode,\r\n        needParentNode = {\r\n            'td':'tr',\r\n            'tr':['tbody','thead','tfoot'],\r\n            'tbody':'table',\r\n            'th':'tr',\r\n            'thead':'table',\r\n            'tfoot':'table',\r\n            'caption':'table',\r\n            'li':['ul', 'ol'],\r\n            'dt':'dl',\r\n            'dd':'dl',\r\n            'option':'select'\r\n        },\r\n        needChild = {\r\n            'ol':'li',\r\n            'ul':'li'\r\n        };\r\n\r\n    function text(parent, data) {\r\n\r\n        if(needChild[parent.tagName]){\r\n            var tmpNode = uNode.createElement(needChild[parent.tagName]);\r\n            parent.appendChild(tmpNode);\r\n            tmpNode.appendChild(uNode.createText(data));\r\n            parent = tmpNode;\r\n        }else{\r\n\r\n            parent.appendChild(uNode.createText(data));\r\n        }\r\n    }\r\n\r\n    function element(parent, tagName, htmlattr) {\r\n        var needParentTag;\r\n        if (needParentTag = needParentNode[tagName]) {\r\n            var tmpParent = parent,hasParent;\r\n            while(tmpParent.type != 'root'){\r\n                if(utils.isArray(needParentTag) ? utils.indexOf(needParentTag, tmpParent.tagName) != -1 : needParentTag == tmpParent.tagName){\r\n                    parent = tmpParent;\r\n                    hasParent = true;\r\n                    break;\r\n                }\r\n                tmpParent = tmpParent.parentNode;\r\n            }\r\n            if(!hasParent){\r\n                parent = element(parent, utils.isArray(needParentTag) ? needParentTag[0] : needParentTag)\r\n            }\r\n        }\r\n        //按dtd处理嵌套\r\n//        if(parent.type != 'root' && !dtd[parent.tagName][tagName])\r\n//            parent = parent.parentNode;\r\n        var elm = new uNode({\r\n            parentNode:parent,\r\n            type:'element',\r\n            tagName:tagName.toLowerCase(),\r\n            //是自闭合的处理一下\r\n            children:dtd.$empty[tagName] ? null : []\r\n        });\r\n        //如果属性存在，处理属性\r\n        if (htmlattr) {\r\n            var attrs = {}, match;\r\n            while (match = re_attr.exec(htmlattr)) {\r\n                attrs[match[1].toLowerCase()] = notTransAttrs[match[1].toLowerCase()] ? (match[2] || match[3] || match[4]) : utils.unhtml(match[2] || match[3] || match[4])\r\n            }\r\n            elm.attrs = attrs;\r\n        }\r\n\r\n        parent.children.push(elm);\r\n        //如果是自闭合节点返回父亲节点\r\n        return  dtd.$empty[tagName] ? parent : elm\r\n    }\r\n\r\n    function comment(parent, data) {\r\n        parent.children.push(new uNode({\r\n            type:'comment',\r\n            data:data,\r\n            parentNode:parent\r\n        }));\r\n    }\r\n\r\n    var match, currentIndex = 0, nextIndex = 0;\r\n    //设置根节点\r\n    var root = new uNode({\r\n        type:'root',\r\n        children:[]\r\n    });\r\n    var currentParent = root;\r\n\r\n    while (match = re_tag.exec(htmlstr)) {\r\n        currentIndex = match.index;\r\n        try{\r\n            if (currentIndex > nextIndex) {\r\n                //text node\r\n                text(currentParent, htmlstr.slice(nextIndex, currentIndex));\r\n            }\r\n            if (match[3]) {\r\n\r\n                if(dtd.$cdata[currentParent.tagName]){\r\n                    text(currentParent, match[0]);\r\n                }else{\r\n                    //start tag\r\n                    currentParent = element(currentParent, match[3].toLowerCase(), match[4]);\r\n                }\r\n\r\n\r\n            } else if (match[1]) {\r\n                if(currentParent.type != 'root'){\r\n                    if(dtd.$cdata[currentParent.tagName] && !dtd.$cdata[match[1]]){\r\n                        text(currentParent, match[0]);\r\n                    }else{\r\n                        var tmpParent = currentParent;\r\n                        while(currentParent.type == 'element' && currentParent.tagName != match[1].toLowerCase()){\r\n                            currentParent = currentParent.parentNode;\r\n                            if(currentParent.type == 'root'){\r\n                                currentParent = tmpParent;\r\n                                throw 'break'\r\n                            }\r\n                        }\r\n                        //end tag\r\n                        currentParent = currentParent.parentNode;\r\n                    }\r\n\r\n                }\r\n\r\n            } else if (match[2]) {\r\n                //comment\r\n                comment(currentParent, match[2])\r\n            }\r\n        }catch(e){}\r\n\r\n        nextIndex = re_tag.lastIndex;\r\n\r\n    }\r\n    //如果结束是文本，就有可能丢掉，所以这里手动判断一下\r\n    //例如 <li>sdfsdfsdf<li>sdfsdfsdfsdf\r\n    if (nextIndex < htmlstr.length) {\r\n        text(currentParent, htmlstr.slice(nextIndex));\r\n    }\r\n    return root;\r\n};\r\n/**\r\n * @file\r\n * @name UM.filterNode\r\n * @short filterNode\r\n * @desc 根据给定的规则过滤节点\r\n * @import editor.js,core/utils.js\r\n * @anthor zhanyi\r\n */\r\nvar filterNode = UM.filterNode = function () {\r\n    function filterNode(node,rules){\r\n        switch (node.type) {\r\n            case 'text':\r\n                break;\r\n            case 'element':\r\n                var val;\r\n                if(val = rules[node.tagName]){\r\n                    if(val === '-'){\r\n                        node.parentNode.removeChild(node)\r\n                    }else if(utils.isFunction(val)){\r\n                        var parentNode = node.parentNode,\r\n                            index = node.getIndex();\r\n                        val(node);\r\n                        if(node.parentNode){\r\n                            if(node.children){\r\n                                for(var i = 0,ci;ci=node.children[i];){\r\n                                    filterNode(ci,rules);\r\n                                    if(ci.parentNode){\r\n                                        i++;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }else{\r\n                            for(var i = index,ci;ci=parentNode.children[i];){\r\n                                filterNode(ci,rules);\r\n                                if(ci.parentNode){\r\n                                    i++;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n\r\n                    }else{\r\n                        var attrs = val['$'];\r\n                        if(attrs && node.attrs){\r\n                            var tmpAttrs = {},tmpVal;\r\n                            for(var a in attrs){\r\n                                tmpVal = node.getAttr(a);\r\n                                //todo 只先对style单独处理\r\n                                if(a == 'style' && utils.isArray(attrs[a])){\r\n                                    var tmpCssStyle = [];\r\n                                    utils.each(attrs[a],function(v){\r\n                                        var tmp;\r\n                                        if(tmp = node.getStyle(v)){\r\n                                            tmpCssStyle.push(v + ':' + tmp);\r\n                                        }\r\n                                    });\r\n                                    tmpVal = tmpCssStyle.join(';')\r\n                                }\r\n                                if(tmpVal){\r\n                                    tmpAttrs[a] = tmpVal;\r\n                                }\r\n\r\n                            }\r\n                            node.attrs = tmpAttrs;\r\n                        }\r\n                        if(node.children){\r\n                            for(var i = 0,ci;ci=node.children[i];){\r\n                                filterNode(ci,rules);\r\n                                if(ci.parentNode){\r\n                                    i++;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }else{\r\n                    //如果不在名单里扣出子节点并删除该节点,cdata除外\r\n                    if(dtd.$cdata[node.tagName]){\r\n                        node.parentNode.removeChild(node)\r\n                    }else{\r\n                        var parentNode = node.parentNode,\r\n                            index = node.getIndex();\r\n                        node.parentNode.removeChild(node,true);\r\n                        for(var i = index,ci;ci=parentNode.children[i];){\r\n                            filterNode(ci,rules);\r\n                            if(ci.parentNode){\r\n                                i++;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'comment':\r\n                node.parentNode.removeChild(node)\r\n        }\r\n\r\n    }\r\n    return function(root,rules){\r\n        if(utils.isEmptyObject(rules)){\r\n            return root;\r\n        }\r\n        var val;\r\n        if(val = rules['-']){\r\n            utils.each(val.split(' '),function(k){\r\n                rules[k] = '-'\r\n            })\r\n        }\r\n        for(var i= 0,ci;ci=root.children[i];){\r\n            filterNode(ci,rules);\r\n            if(ci.parentNode){\r\n                i++;\r\n            }\r\n        }\r\n        return root;\r\n    }\r\n}();\r\n///import core\r\n/**\r\n * @description 插入内容\r\n * @name baidu.editor.execCommand\r\n * @param   {String}   cmdName     inserthtml插入内容的命令\r\n * @param   {String}   html                要插入的内容\r\n * @author zhanyi\r\n */\r\nUM.commands['inserthtml'] = {\r\n    execCommand: function (command,html,notNeedFilter){\r\n        var me = this,\r\n            range,\r\n            div;\r\n        if(!html){\r\n            return;\r\n        }\r\n        if(me.fireEvent('beforeinserthtml',html) === true){\r\n            return;\r\n        }\r\n        range = me.selection.getRange();\r\n        div = range.document.createElement( 'div' );\r\n        div.style.display = 'inline';\r\n\r\n        if (!notNeedFilter) {\r\n            var root = UM.htmlparser(html);\r\n            //如果给了过滤规则就先进行过滤\r\n            if(me.options.filterRules){\r\n                UM.filterNode(root,me.options.filterRules);\r\n            }\r\n            //执行默认的处理\r\n            me.filterInputRule(root);\r\n            html = root.toHtml()\r\n        }\r\n        div.innerHTML = utils.trim( html );\r\n\r\n        if ( !range.collapsed ) {\r\n            var tmpNode = range.startContainer;\r\n            if(domUtils.isFillChar(tmpNode)){\r\n                range.setStartBefore(tmpNode)\r\n            }\r\n            tmpNode = range.endContainer;\r\n            if(domUtils.isFillChar(tmpNode)){\r\n                range.setEndAfter(tmpNode)\r\n            }\r\n            range.txtToElmBoundary();\r\n            //结束边界可能放到了br的前边，要把br包含进来\r\n            // x[xxx]<br/>\r\n            if(range.endContainer && range.endContainer.nodeType == 1){\r\n                tmpNode = range.endContainer.childNodes[range.endOffset];\r\n                if(tmpNode && domUtils.isBr(tmpNode)){\r\n                    range.setEndAfter(tmpNode);\r\n                }\r\n            }\r\n            if(range.startOffset == 0){\r\n                tmpNode = range.startContainer;\r\n                if(domUtils.isBoundaryNode(tmpNode,'firstChild') ){\r\n                    tmpNode = range.endContainer;\r\n                    if(range.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length : tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode,'lastChild')){\r\n                        me.body.innerHTML = '<p>'+(browser.ie ? '' : '<br/>')+'</p>';\r\n                        range.setStart(me.body.firstChild,0).collapse(true)\r\n\r\n                    }\r\n                }\r\n            }\r\n            !range.collapsed && range.deleteContents();\r\n            if(range.startContainer.nodeType == 1){\r\n                var child = range.startContainer.childNodes[range.startOffset],pre;\r\n                if(child && domUtils.isBlockElm(child) && (pre = child.previousSibling) && domUtils.isBlockElm(pre)){\r\n                    range.setEnd(pre,pre.childNodes.length).collapse();\r\n                    while(child.firstChild){\r\n                        pre.appendChild(child.firstChild);\r\n                    }\r\n                    domUtils.remove(child);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n        var child,parent,pre,tmp,hadBreak = 0, nextNode;\r\n        //如果当前位置选中了fillchar要干掉，要不会产生空行\r\n        if(range.inFillChar()){\r\n            child = range.startContainer;\r\n            if(domUtils.isFillChar(child)){\r\n                range.setStartBefore(child).collapse(true);\r\n                domUtils.remove(child);\r\n            }else if(domUtils.isFillChar(child,true)){\r\n                child.nodeValue = child.nodeValue.replace(fillCharReg,'');\r\n                range.startOffset--;\r\n                range.collapsed && range.collapse(true)\r\n            }\r\n        }\r\n        while ( child = div.firstChild ) {\r\n            if(hadBreak){\r\n                var p = me.document.createElement('p');\r\n                while(child && (child.nodeType == 3 || !dtd.$block[child.tagName])){\r\n                    nextNode = child.nextSibling;\r\n                    p.appendChild(child);\r\n                    child = nextNode;\r\n                }\r\n                if(p.firstChild){\r\n\r\n                    child = p\r\n                }\r\n            }\r\n            range.insertNode( child );\r\n            nextNode = child.nextSibling;\r\n            if ( !hadBreak && child.nodeType == domUtils.NODE_ELEMENT && domUtils.isBlockElm( child ) ){\r\n\r\n                parent = domUtils.findParent( child,function ( node ){ return domUtils.isBlockElm( node ); } );\r\n                if ( parent && parent.tagName.toLowerCase() != 'body' && !(dtd[parent.tagName][child.nodeName] && child.parentNode === parent)){\r\n                    if(!dtd[parent.tagName][child.nodeName]){\r\n                        pre = parent;\r\n                    }else{\r\n                        tmp = child.parentNode;\r\n                        while (tmp !== parent){\r\n                            pre = tmp;\r\n                            tmp = tmp.parentNode;\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n                    domUtils.breakParent( child, pre || tmp );\r\n                    //去掉break后前一个多余的节点  <p>|<[p> ==> <p></p><div></div><p>|</p>\r\n                    var pre = child.previousSibling;\r\n                    domUtils.trimWhiteTextNode(pre);\r\n                    if(!pre.childNodes.length){\r\n                        domUtils.remove(pre);\r\n                    }\r\n                    //trace:2012,在非ie的情况，切开后剩下的节点有可能不能点入光标添加br占位\r\n\r\n                    if(!browser.ie &&\r\n                        (next = child.nextSibling) &&\r\n                        domUtils.isBlockElm(next) &&\r\n                        next.lastChild &&\r\n                        !domUtils.isBr(next.lastChild)){\r\n                        next.appendChild(me.document.createElement('br'));\r\n                    }\r\n                    hadBreak = 1;\r\n                }\r\n            }\r\n            var next = child.nextSibling;\r\n            if(!div.firstChild && next && domUtils.isBlockElm(next)){\r\n\r\n                range.setStart(next,0).collapse(true);\r\n                break;\r\n            }\r\n            range.setEndAfter( child ).collapse();\r\n\r\n        }\r\n\r\n        child = range.startContainer;\r\n\r\n        if(nextNode && domUtils.isBr(nextNode)){\r\n            domUtils.remove(nextNode)\r\n        }\r\n        //用chrome可能有空白展位符\r\n        if(domUtils.isBlockElm(child) && domUtils.isEmptyNode(child)){\r\n            if(nextNode = child.nextSibling){\r\n                domUtils.remove(child);\r\n                if(nextNode.nodeType == 1 && dtd.$block[nextNode.tagName]){\r\n\r\n                    range.setStart(nextNode,0).collapse(true).shrinkBoundary()\r\n                }\r\n            }else{\r\n\r\n                try{\r\n                    child.innerHTML = browser.ie ? domUtils.fillChar : '<br/>';\r\n                }catch(e){\r\n                    range.setStartBefore(child);\r\n                    domUtils.remove(child)\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        //加上true因为在删除表情等时会删两次，第一次是删的fillData\r\n        try{\r\n            if(browser.ie9below && range.startContainer.nodeType == 1 && !range.startContainer.childNodes[range.startOffset]){\r\n                var start = range.startContainer,pre = start.childNodes[range.startOffset-1];\r\n                if(pre && pre.nodeType == 1 && dtd.$empty[pre.tagName]){\r\n                    var txt = this.document.createTextNode(domUtils.fillChar);\r\n                    range.insertNode(txt).setStart(txt,0).collapse(true);\r\n                }\r\n            }\r\n            setTimeout(function(){\r\n                range.select(true);\r\n            })\r\n\r\n        }catch(e){}\r\n\r\n\r\n        setTimeout(function(){\r\n            range = me.selection.getRange();\r\n            range.scrollIntoView();\r\n            me.fireEvent('afterinserthtml');\r\n        },200);\r\n    }\r\n};\r\n\r\n///import core\r\n///import plugins\\inserthtml.js\r\n///commands 插入图片，操作图片的对齐方式\r\n///commandsName  InsertImage,ImageNone,ImageLeft,ImageRight,ImageCenter\r\n///commandsTitle  图片,默认,居左,居右,居中\r\n///commandsDialog  dialogs\\image\r\n/**\r\n * Created by .\r\n * User: zhanyi\r\n * for image\r\n */\r\nUM.commands['insertimage'] = {\r\n    execCommand:function (cmd, opt) {\r\n        opt = utils.isArray(opt) ? opt : [opt];\r\n        if (!opt.length) {\r\n            return;\r\n        }\r\n        var me = this;\r\n        var html = [], str = '', ci;\r\n        ci = opt[0];\r\n        if (opt.length == 1) {\r\n            str = '<img src=\"' + ci.src + '\" ' + (ci._src ? ' _src=\"' + ci._src + '\" ' : '') +\r\n                (ci.width ? 'width=\"' + ci.width + '\" ' : '') +\r\n                (ci.height ? ' height=\"' + ci.height + '\" ' : '') +\r\n                (ci['floatStyle'] == 'left' || ci['floatStyle'] == 'right' ? ' style=\"float:' + ci['floatStyle'] + ';\"' : '') +\r\n                (ci.title && ci.title != \"\" ? ' title=\"' + ci.title + '\"' : '') +\r\n                (ci.border && ci.border != \"0\" ? ' border=\"' + ci.border + '\"' : '') +\r\n                (ci.alt && ci.alt != \"\" ? ' alt=\"' + ci.alt + '\"' : '') +\r\n                (ci.hspace && ci.hspace != \"0\" ? ' hspace = \"' + ci.hspace + '\"' : '') +\r\n                (ci.vspace && ci.vspace != \"0\" ? ' vspace = \"' + ci.vspace + '\"' : '') + '/>';\r\n            if (ci['floatStyle'] == 'center') {\r\n                str = '<p style=\"text-align: center\">' + str + '</p>';\r\n            }\r\n            html.push(str);\r\n\r\n        } else {\r\n            for (var i = 0; ci = opt[i++];) {\r\n                str = '<p ' + (ci['floatStyle'] == 'center' ? 'style=\"text-align: center\" ' : '') + '><img src=\"' + ci.src + '\" ' +\r\n                    (ci.width ? 'width=\"' + ci.width + '\" ' : '') + (ci._src ? ' _src=\"' + ci._src + '\" ' : '') +\r\n                    (ci.height ? ' height=\"' + ci.height + '\" ' : '') +\r\n                    ' style=\"' + (ci['floatStyle'] && ci['floatStyle'] != 'center' ? 'float:' + ci['floatStyle'] + ';' : '') +\r\n                    (ci.border || '') + '\" ' +\r\n                    (ci.title ? ' title=\"' + ci.title + '\"' : '') + ' /></p>';\r\n                html.push(str);\r\n            }\r\n        }\r\n\r\n        me.execCommand('insertHtml', html.join(''), true);\r\n    }\r\n};\r\n///import core\r\n///commands 段落格式,居左,居右,居中,两端对齐\r\n///commandsName  JustifyLeft,JustifyCenter,JustifyRight,JustifyJustify\r\n///commandsTitle  居左对齐,居中对齐,居右对齐,两端对齐\r\n/**\r\n * @description 居左右中\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     justify执行对齐方式的命令\r\n * @param   {String}   align               对齐方式：left居左，right居右，center居中，justify两端对齐\r\n * @author zhanyi\r\n */\r\nUM.plugins['justify']=function(){\r\n    var me = this;\r\n    $.each('justifyleft justifyright justifycenter justifyfull'.split(' '),function(i,cmdName){\r\n        me.commands[cmdName] = {\r\n            execCommand:function (cmdName) {\r\n                return this.document.execCommand(cmdName);\r\n            },\r\n            queryCommandValue: function (cmdName) {\r\n                var val = this.document.queryCommandValue(cmdName);\r\n                return   val === true || val === 'true' ? cmdName.replace(/justify/,'') : '';\r\n            },\r\n            queryCommandState: function (cmdName) {\r\n                return this.document.queryCommandState(cmdName) ? 1 : 0\r\n            }\r\n        };\r\n    })\r\n};\r\n\r\n///import core\r\n///import plugins\\removeformat.js\r\n///commands 字体颜色,背景色,字号,字体,下划线,删除线\r\n///commandsName  ForeColor,BackColor,FontSize,FontFamily,Underline,StrikeThrough\r\n///commandsTitle  字体颜色,背景色,字号,字体,下划线,删除线\r\n/**\r\n * @description 字体\r\n * @name UM.execCommand\r\n * @param {String}     cmdName    执行的功能名称\r\n * @param {String}    value             传入的值\r\n */\r\nUM.plugins['font'] = function () {\r\n    var me = this,\r\n        fonts = {\r\n            'forecolor': 'forecolor',\r\n            'backcolor': 'backcolor',\r\n            'fontsize': 'fontsize',\r\n            'fontfamily': 'fontname'\r\n        },\r\n        cmdNameToStyle = {\r\n            'forecolor': 'color',\r\n            'backcolor': 'background-color',\r\n            'fontsize': 'font-size',\r\n            'fontfamily': 'font-family'\r\n        },\r\n        cmdNameToAttr = {\r\n            'forecolor': 'color',\r\n            'fontsize': 'size',\r\n            'fontfamily': 'face'\r\n        };\r\n    me.setOpt({\r\n        'fontfamily': [\r\n            { name: 'songti', val: '宋体,SimSun'},\r\n            { name: 'yahei', val: '微软雅黑,Microsoft YaHei'},\r\n            { name: 'kaiti', val: '楷体,楷体_GB2312, SimKai'},\r\n            { name: 'heiti', val: '黑体, SimHei'},\r\n            { name: 'lishu', val: '隶书, SimLi'},\r\n            { name: 'andaleMono', val: 'andale mono'},\r\n            { name: 'arial', val: 'arial, helvetica,sans-serif'},\r\n            { name: 'arialBlack', val: 'arial black,avant garde'},\r\n            { name: 'comicSansMs', val: 'comic sans ms'},\r\n            { name: 'impact', val: 'impact,chicago'},\r\n            { name: 'timesNewRoman', val: 'times new roman'},\r\n            { name: 'sans-serif',val:'sans-serif'}\r\n        ],\r\n        'fontsize': [10, 12,  16, 18,24, 32,48]\r\n    });\r\n\r\n    me.addOutputRule(function (root) {\r\n        utils.each(root.getNodesByTagName('font'), function (node) {\r\n            if (node.tagName == 'font') {\r\n                var cssStyle = [];\r\n                for (var p in node.attrs) {\r\n                    switch (p) {\r\n                        case 'size':\r\n                            var val =  node.attrs[p];\r\n                            $.each({\r\n                                '10':'1',\r\n                                '12':'2',\r\n                                '16':'3',\r\n                                '18':'4',\r\n                                '24':'5',\r\n                                '32':'6',\r\n                                '48':'7'\r\n                            },function(k,v){\r\n                                if(v == val){\r\n                                    val = k;\r\n                                    return false;\r\n                                }\r\n                            });\r\n                            cssStyle.push('font-size:' + val + 'px');\r\n                            break;\r\n                        case 'color':\r\n                            cssStyle.push('color:' + node.attrs[p]);\r\n                            break;\r\n                        case 'face':\r\n                            cssStyle.push('font-family:' + node.attrs[p]);\r\n                            break;\r\n                        case 'style':\r\n                            cssStyle.push(node.attrs[p]);\r\n                    }\r\n                }\r\n                node.attrs = {\r\n                    'style': cssStyle.join(';')\r\n                };\r\n            }\r\n            node.tagName = 'span';\r\n            if(node.parentNode.tagName == 'span' && node.parentNode.children.length == 1){\r\n                $.each(node.attrs,function(k,v){\r\n\r\n                    node.parentNode.attrs[k] = k == 'style' ? node.parentNode.attrs[k] + v : v;\r\n                })\r\n                node.parentNode.removeChild(node,true);\r\n            }\r\n        });\r\n    });\r\n    for(var p in fonts){\r\n        (function (cmd) {\r\n            me.commands[cmd] = {\r\n                execCommand: function (cmdName,value) {\r\n                    if(value == 'transparent'){\r\n                        return;\r\n                    }\r\n                    var rng = this.selection.getRange();\r\n                    if(rng.collapsed){\r\n                        var span = $('<span></span>').css(cmdNameToStyle[cmdName],value)[0];\r\n                        rng.insertNode(span).setStart(span,0).setCursor();\r\n                    }else{\r\n                        if(cmdName == 'fontsize'){\r\n                            value  = {\r\n                                '10':'1',\r\n                                '12':'2',\r\n                                '16':'3',\r\n                                '18':'4',\r\n                                '24':'5',\r\n                                '32':'6',\r\n                                '48':'7'\r\n                            }[(value+\"\").replace(/px/,'')]\r\n                        }\r\n                        this.document.execCommand(fonts[cmdName],false, value);\r\n                        if(browser.gecko){\r\n                            $.each(this.$body.find('a'),function(i,a){\r\n                                var parent = a.parentNode;\r\n                                if(parent.lastChild === parent.firstChild && /FONT|SPAN/.test(parent.tagName)){\r\n                                    var cloneNode = parent.cloneNode(false);\r\n                                    cloneNode.innerHTML = a.innerHTML;\r\n                                    $(a).html('').append(cloneNode).insertBefore(parent);\r\n\r\n                                    $(parent).remove();\r\n                                }\r\n                            });\r\n                        }\r\n                        if(!browser.ie){\r\n                            var nativeRange = this.selection.getNative().getRangeAt(0);\r\n                            var common = nativeRange.commonAncestorContainer;\r\n                            var rng = this.selection.getRange(),\r\n                                bk = rng.createBookmark(true);\r\n\r\n                            $(common).find('a').each(function(i,n){\r\n                                var parent = n.parentNode;\r\n                                if(parent.nodeName == 'FONT'){\r\n                                    var font = parent.cloneNode(false);\r\n                                    font.innerHTML = n.innerHTML;\r\n                                    $(n).html('').append(font);\r\n                                }\r\n                            });\r\n                            rng.moveToBookmark(bk).select()\r\n                        }\r\n                        return true\r\n                    }\r\n\r\n                },\r\n                queryCommandValue: function (cmdName) {\r\n                    var start = me.selection.getStart();\r\n                    var val = $(start).css(cmdNameToStyle[cmdName]);\r\n                    if(val === undefined){\r\n                        val = $(start).attr(cmdNameToAttr[cmdName])\r\n                    }\r\n                    return val ? utils.fixColor(cmdName,val).replace(/px/,'') : '';\r\n                },\r\n                queryCommandState: function (cmdName) {\r\n                    return this.queryCommandValue(cmdName)\r\n                }\r\n            };\r\n        })(p);\r\n    }\r\n};\r\n///import core\r\n///commands 超链接,取消链接\r\n///commandsName  Link,Unlink\r\n///commandsTitle  超链接,取消链接\r\n///commandsDialog  dialogs\\link\r\n/**\r\n * 超链接\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     link插入超链接\r\n * @param   {Object}  options         url地址，title标题，target是否打开新页\r\n * @author zhanyi\r\n */\r\n/**\r\n * 取消链接\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     unlink取消链接\r\n * @author zhanyi\r\n */\r\n\r\nUM.plugins['link'] = function(){\r\n    var me = this;\r\n\r\n    me.setOpt('autourldetectinie',false);\r\n    //在ie下禁用autolink\r\n    if(browser.ie && this.options.autourldetectinie === false){\r\n        this.addListener('keyup',function(cmd,evt){\r\n            var me = this,keyCode = evt.keyCode;\r\n            if(keyCode == 13 || keyCode == 32){\r\n                var rng = me.selection.getRange();\r\n                var start = rng.startContainer;\r\n                if(keyCode == 13){\r\n                    if(start.nodeName == 'P'){\r\n                        var pre = start.previousSibling;\r\n                        if(pre && pre.nodeType == 1){\r\n                            var pre = pre.lastChild;\r\n                            if(pre && pre.nodeName == 'A' && !pre.getAttribute('_href')){\r\n                                domUtils.remove(pre,true);\r\n                            }\r\n                        }\r\n                    }\r\n                }else if(keyCode == 32){\r\n                   if(start.nodeType == 3 && /^\\s$/.test(start.nodeValue)){\r\n                       start = start.previousSibling;\r\n                       if(start && start.nodeName == 'A' && !start.getAttribute('_href')){\r\n                           domUtils.remove(start,true);\r\n                       }\r\n                   }\r\n                }\r\n\r\n            }\r\n\r\n\r\n        });\r\n    }\r\n\r\n    this.addOutputRule(function(root){\r\n        $.each(root.getNodesByTagName('a'),function(i,a){\r\n            var _href = utils.html(a.getAttr('_href'));\r\n            if(!/^(ftp|https?|\\/|file)/.test(_href)){\r\n                _href = 'http://' + _href;\r\n            }\r\n            a.setAttr('href', _href);\r\n            a.setAttr('_href')\r\n            if(a.getAttr('title')==''){\r\n                a.setAttr('title')\r\n            }\r\n        })\r\n    });\r\n    this.addInputRule(function(root){\r\n        $.each(root.getNodesByTagName('a'),function(i,a){\r\n            a.setAttr('_href', utils.html(a.getAttr('href')));\r\n        })\r\n    });\r\n    me.commands['link'] = {\r\n        execCommand : function( cmdName, opt ) {\r\n\r\n            var me = this;\r\n            var rng = me.selection.getRange();\r\n            if(rng.collapsed){\r\n                var start = rng.startContainer;\r\n                if(start = domUtils.findParentByTagName(start,'a',true)){\r\n                    $(start).attr(opt);\r\n                    rng.selectNode(start).select()\r\n                }else{\r\n                    rng.insertNode($('<a>' +opt.href+'</a>').attr(opt)[0]).select()\r\n\r\n                }\r\n\r\n            }else{\r\n                me.document.execCommand('createlink',false,'_umeditor_link');\r\n                utils.each(domUtils.getElementsByTagName(me.body,'a',function(n){\r\n\r\n                    return n.getAttribute('href') == '_umeditor_link'\r\n                }),function(l){\r\n                    if($(l).text() == '_umeditor_link'){\r\n                        $(l).text(opt.href);\r\n                    }\r\n                    domUtils.setAttributes(l,opt);\r\n                    rng.selectNode(l).select()\r\n                })\r\n            }\r\n\r\n        },\r\n        queryCommandState:function(){\r\n            return this.queryCommandValue('link') ? 1 : 0;\r\n        },\r\n        queryCommandValue:function(){\r\n            var path = this.selection.getStartElementPath();\r\n            var result;\r\n            $.each(path,function(i,n){\r\n                if(n.nodeName == \"A\"){\r\n                    result = n;\r\n                    return false;\r\n                }\r\n            })\r\n            return result;\r\n        }\r\n    };\r\n    me.commands['unlink'] = {\r\n        execCommand : function() {\r\n            this.document.execCommand('unlink');\r\n        }\r\n    };\r\n};\r\n///import core\r\n///commands 打印\r\n///commandsName  Print\r\n///commandsTitle  打印\r\n/**\r\n * @description 打印\r\n * @name baidu.editor.execCommand\r\n * @param   {String}   cmdName     print打印编辑器内容\r\n * @author zhanyi\r\n */\r\nUM.commands['print'] = {\r\n    execCommand : function(){\r\n        var me = this,\r\n            id = 'editor_print_' + +new Date();\r\n\r\n        $('<iframe src=\"\" id=\"' + id + '\" name=\"' + id + '\" frameborder=\"0\"></iframe>').attr('id', id)\r\n            .css({\r\n                width:'0px',\r\n                height:'0px',\r\n                'overflow':'hidden',\r\n                'float':'left',\r\n                'position':'absolute',\r\n                top:'-10000px',\r\n                left:'-10000px'\r\n            })\r\n            .appendTo(me.$container.find('.edui-dialog-container'));\r\n\r\n        var w = window.open('', id, ''),\r\n            d = w.document;\r\n        d.open();\r\n        d.write('<html><head></head><body><div>'+this.getContent(null,null,true)+'</div><script>' +\r\n            \"setTimeout(function(){\" +\r\n            \"window.print();\" +\r\n            \"setTimeout(function(){\" +\r\n            \"window.parent.$('#\" + id + \"').remove();\" +\r\n            \"},100);\" +\r\n            \"},200);\" +\r\n            '</script></body></html>');\r\n        d.close();\r\n    },\r\n    notNeedUndo : 1\r\n};\r\n///import core\r\n///commands 格式\r\n///commandsName  Paragraph\r\n///commandsTitle  段落格式\r\n/**\r\n * 段落样式\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     paragraph插入段落执行命令\r\n * @param   {String}   style               标签值为：'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'\r\n * @param   {String}   attrs               标签的属性\r\n * @author zhanyi\r\n */\r\nUM.plugins['paragraph'] = function() {\r\n    var me = this;\r\n    me.setOpt('paragraph',{'p':'', 'h1':'', 'h2':'', 'h3':'', 'h4':'', 'h5':'', 'h6':''});\r\n    me.commands['paragraph'] = {\r\n        execCommand : function( cmdName, style ) {\r\n            return this.document.execCommand('formatBlock',false,'<' + style + '>');\r\n        },\r\n        queryCommandValue : function() {\r\n            try{\r\n                var  val = this.document.queryCommandValue('formatBlock')\r\n            }catch(e){\r\n            }\r\n            return val ;\r\n        }\r\n    };\r\n};\r\n\r\n///import core\r\n///import plugins\\inserthtml.js\r\n///commands 分割线\r\n///commandsName  Horizontal\r\n///commandsTitle  分隔线\r\n/**\r\n * 分割线\r\n * @function\r\n * @name UM.execCommand\r\n * @param {String}     cmdName    horizontal插入分割线\r\n */\r\nUM.plugins['horizontal'] = function(){\r\n    var me = this;\r\n    me.commands['horizontal'] = {\r\n        execCommand : function(  ) {\r\n            this.document.execCommand('insertHorizontalRule');\r\n            var rng = me.selection.getRange().txtToElmBoundary(true),\r\n                start = rng.startContainer;\r\n            if(domUtils.isBody(rng.startContainer)){\r\n                var next = rng.startContainer.childNodes[rng.startOffset];\r\n                if(!next){\r\n                    next = $('<p></p>').appendTo(rng.startContainer).html(browser.ie ? '&nbsp;' : '<br/>')[0]\r\n                }\r\n                rng.setStart(next,0).setCursor()\r\n            }else{\r\n\r\n                while(dtd.$inline[start.tagName] && start.lastChild === start.firstChild){\r\n\r\n                    var parent = start.parentNode;\r\n                    parent.appendChild(start.firstChild);\r\n                    parent.removeChild(start);\r\n                    start = parent;\r\n                }\r\n                while(dtd.$inline[start.tagName]){\r\n                    start = start.parentNode;\r\n                }\r\n                if(start.childNodes.length == 1 && start.lastChild.nodeName == 'HR'){\r\n                    var hr = start.lastChild;\r\n                    $(hr).insertBefore(start);\r\n                    rng.setStart(start,0).setCursor();\r\n                }else{\r\n                    hr = $('hr',start)[0];\r\n                    domUtils.breakParent(hr,start);\r\n                    var pre = hr.previousSibling;\r\n                    if(pre && domUtils.isEmptyBlock(pre)){\r\n                        $(pre).remove()\r\n                    }\r\n                    rng.setStart(hr.nextSibling,0).setCursor();\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n};\r\n\r\n\r\n///import core\r\n///commands 清空文档\r\n///commandsName  ClearDoc\r\n///commandsTitle  清空文档\r\n/**\r\n *\r\n * 清空文档\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     cleardoc清空文档\r\n */\r\n\r\nUM.commands['cleardoc'] = {\r\n    execCommand : function() {\r\n        var me = this,\r\n            range = me.selection.getRange();\r\n        me.body.innerHTML = \"<p>\"+(ie ? \"\" : \"<br/>\")+\"</p>\";\r\n        range.setStart(me.body.firstChild,0).setCursor(false,true);\r\n        setTimeout(function(){\r\n            me.fireEvent(\"clearDoc\");\r\n        },0);\r\n\r\n    }\r\n};\r\n\r\n\r\n///import core\r\n///commands 撤销和重做\r\n///commandsName  Undo,Redo\r\n///commandsTitle  撤销,重做\r\n/**\r\n * @description 回退\r\n * @author zhanyi\r\n */\r\n\r\nUM.plugins['undo'] = function () {\r\n    var saveSceneTimer;\r\n    var me = this,\r\n        maxUndoCount = me.options.maxUndoCount || 20,\r\n        maxInputCount = me.options.maxInputCount || 20,\r\n        fillchar = new RegExp(domUtils.fillChar + '|<\\/hr>', 'gi');// ie会产生多余的</hr>\r\n    var noNeedFillCharTags = {\r\n        ol:1,ul:1,table:1,tbody:1,tr:1,body:1\r\n    };\r\n    var orgState = me.options.autoClearEmptyNode;\r\n    function compareAddr(indexA, indexB) {\r\n        if (indexA.length != indexB.length)\r\n            return 0;\r\n        for (var i = 0, l = indexA.length; i < l; i++) {\r\n            if (indexA[i] != indexB[i])\r\n                return 0\r\n        }\r\n        return 1;\r\n    }\r\n\r\n    function compareRangeAddress(rngAddrA, rngAddrB) {\r\n        if (rngAddrA.collapsed != rngAddrB.collapsed) {\r\n            return 0;\r\n        }\r\n        if (!compareAddr(rngAddrA.startAddress, rngAddrB.startAddress) || !compareAddr(rngAddrA.endAddress, rngAddrB.endAddress)) {\r\n            return 0;\r\n        }\r\n        return 1;\r\n    }\r\n\r\n    function UndoManager() {\r\n        this.list = [];\r\n        this.index = 0;\r\n        this.hasUndo = false;\r\n        this.hasRedo = false;\r\n        this.undo = function () {\r\n            if (this.hasUndo) {\r\n                if (!this.list[this.index - 1] && this.list.length == 1) {\r\n                    this.reset();\r\n                    return;\r\n                }\r\n                while (this.list[this.index].content == this.list[this.index - 1].content) {\r\n                    this.index--;\r\n                    if (this.index == 0) {\r\n                        return this.restore(0);\r\n                    }\r\n                }\r\n                this.restore(--this.index);\r\n            }\r\n        };\r\n        this.redo = function () {\r\n            if (this.hasRedo) {\r\n                while (this.list[this.index].content == this.list[this.index + 1].content) {\r\n                    this.index++;\r\n                    if (this.index == this.list.length - 1) {\r\n                        return this.restore(this.index);\r\n                    }\r\n                }\r\n                this.restore(++this.index);\r\n            }\r\n        };\r\n\r\n        this.restore = function () {\r\n            var me = this.editor;\r\n            var scene = this.list[this.index];\r\n            var root = UM.htmlparser(scene.content.replace(fillchar, ''));\r\n            me.options.autoClearEmptyNode = false;\r\n            me.filterInputRule(root,true);\r\n            me.options.autoClearEmptyNode = orgState;\r\n            //trace:873\r\n            //去掉展位符\r\n            me.body.innerHTML = root.toHtml();\r\n            me.fireEvent('afterscencerestore');\r\n            //处理undo后空格不展位的问题\r\n            if (browser.ie) {\r\n                utils.each(domUtils.getElementsByTagName(me.document,'td th caption p'),function(node){\r\n                    if(domUtils.isEmptyNode(node)){\r\n                        domUtils.fillNode(me.document, node);\r\n                    }\r\n                })\r\n            }\r\n\r\n            try{\r\n                var rng = new dom.Range(me.document,me.body).moveToAddress(scene.address);\r\n                if(browser.ie && rng.collapsed && rng.startContainer.nodeType == 1){\r\n                    var tmpNode = rng.startContainer.childNodes[rng.startOffset];\r\n                    if( !tmpNode || tmpNode.nodeType == 1 && dtd.$empty[tmpNode]){\r\n                        rng.insertNode(me.document.createTextNode(' ')).collapse(true);\r\n                    }\r\n                }\r\n                rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()]);\r\n            }catch(e){}\r\n\r\n            this.update();\r\n            this.clearKey();\r\n            //不能把自己reset了\r\n            me.fireEvent('reset', true);\r\n        };\r\n\r\n        this.getScene = function () {\r\n            var me = this.editor;\r\n            var rng = me.selection.getRange(),\r\n                rngAddress = rng.createAddress(false,true);\r\n            me.fireEvent('beforegetscene');\r\n            var root = UM.htmlparser(me.body.innerHTML,true);\r\n            me.options.autoClearEmptyNode = false;\r\n            me.filterOutputRule(root,true);\r\n            me.options.autoClearEmptyNode = orgState;\r\n            var cont = root.toHtml();\r\n            browser.ie && (cont = cont.replace(/>&nbsp;</g, '><').replace(/\\s*</g, '<').replace(/>\\s*/g, '>'));\r\n            me.fireEvent('aftergetscene');\r\n            return {\r\n                address:rngAddress,\r\n                content:cont\r\n            }\r\n        };\r\n        this.save = function (notCompareRange,notSetCursor) {\r\n            clearTimeout(saveSceneTimer);\r\n            var currentScene = this.getScene(notSetCursor),\r\n                lastScene = this.list[this.index];\r\n            //内容相同位置相同不存\r\n            if (lastScene && lastScene.content == currentScene.content &&\r\n                ( notCompareRange ? 1 : compareRangeAddress(lastScene.address, currentScene.address) )\r\n                ) {\r\n                return;\r\n            }\r\n            this.list = this.list.slice(0, this.index + 1);\r\n            this.list.push(currentScene);\r\n            //如果大于最大数量了，就把最前的剔除\r\n            if (this.list.length > maxUndoCount) {\r\n                this.list.shift();\r\n            }\r\n            this.index = this.list.length - 1;\r\n            this.clearKey();\r\n            //跟新undo/redo状态\r\n            this.update();\r\n\r\n        };\r\n        this.update = function () {\r\n            this.hasRedo = !!this.list[this.index + 1];\r\n            this.hasUndo = !!this.list[this.index - 1];\r\n        };\r\n        this.reset = function () {\r\n            this.list = [];\r\n            this.index = 0;\r\n            this.hasUndo = false;\r\n            this.hasRedo = false;\r\n            this.clearKey();\r\n        };\r\n        this.clearKey = function () {\r\n            keycont = 0;\r\n            lastKeyCode = null;\r\n        };\r\n    }\r\n\r\n    me.undoManger = new UndoManager();\r\n    me.undoManger.editor = me;\r\n    function saveScene() {\r\n        this.undoManger.save();\r\n    }\r\n\r\n    me.addListener('saveScene', function () {\r\n        var args = Array.prototype.splice.call(arguments,1);\r\n        this.undoManger.save.apply(this.undoManger,args);\r\n    });\r\n\r\n    me.addListener('beforeexeccommand', saveScene);\r\n    me.addListener('afterexeccommand', saveScene);\r\n\r\n    me.addListener('reset', function (type, exclude) {\r\n        if (!exclude) {\r\n            this.undoManger.reset();\r\n        }\r\n    });\r\n    me.commands['redo'] = me.commands['undo'] = {\r\n        execCommand:function (cmdName) {\r\n            this.undoManger[cmdName]();\r\n        },\r\n        queryCommandState:function (cmdName) {\r\n            return this.undoManger['has' + (cmdName.toLowerCase() == 'undo' ? 'Undo' : 'Redo')] ? 0 : -1;\r\n        },\r\n        notNeedUndo:1\r\n    };\r\n\r\n    var keys = {\r\n            //  /*Backspace*/ 8:1, /*Delete*/ 46:1,\r\n            /*Shift*/ 16:1, /*Ctrl*/ 17:1, /*Alt*/ 18:1,\r\n            37:1, 38:1, 39:1, 40:1\r\n\r\n        },\r\n        keycont = 0,\r\n        lastKeyCode;\r\n    //输入法状态下不计算字符数\r\n    var inputType = false;\r\n    me.addListener('ready', function () {\r\n        $(this.body).on('compositionstart', function () {\r\n            inputType = true;\r\n        }).on('compositionend', function () {\r\n            inputType = false;\r\n        })\r\n    });\r\n    //快捷键\r\n    me.addshortcutkey({\r\n        \"Undo\":\"ctrl+90\", //undo\r\n        \"Redo\":\"ctrl+89,shift+ctrl+z\" //redo\r\n\r\n    });\r\n    var isCollapsed = true;\r\n    me.addListener('keydown', function (type, evt) {\r\n\r\n        var me = this;\r\n        var keyCode = evt.keyCode || evt.which;\r\n        if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {\r\n            if (inputType)\r\n                return;\r\n\r\n            if(!me.selection.getRange().collapsed){\r\n                me.undoManger.save(false,true);\r\n                isCollapsed = false;\r\n                return;\r\n            }\r\n            if (me.undoManger.list.length == 0) {\r\n                me.undoManger.save(true);\r\n            }\r\n            clearTimeout(saveSceneTimer);\r\n            function save(cont){\r\n\r\n                if (cont.selection.getRange().collapsed)\r\n                    cont.fireEvent('contentchange');\r\n                cont.undoManger.save(false,true);\r\n                cont.fireEvent('selectionchange');\r\n            }\r\n            saveSceneTimer = setTimeout(function(){\r\n                if(inputType){\r\n                    var interalTimer = setInterval(function(){\r\n                        if(!inputType){\r\n                            save(me);\r\n                            clearInterval(interalTimer)\r\n                        }\r\n                    },300)\r\n                    return;\r\n                }\r\n                save(me);\r\n            },200);\r\n\r\n            lastKeyCode = keyCode;\r\n            keycont++;\r\n            if (keycont >= maxInputCount ) {\r\n                save(me)\r\n            }\r\n        }\r\n    });\r\n    me.addListener('keyup', function (type, evt) {\r\n        var keyCode = evt.keyCode || evt.which;\r\n        if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {\r\n            if (inputType)\r\n                return;\r\n            if(!isCollapsed){\r\n                this.undoManger.save(false,true);\r\n                isCollapsed = true;\r\n            }\r\n        }\r\n    });\r\n\r\n};\r\n\r\n///import core\r\n///import plugins/inserthtml.js\r\n///import plugins/undo.js\r\n///import plugins/serialize.js\r\n///commands 粘贴\r\n///commandsName  PastePlain\r\n///commandsTitle  纯文本粘贴模式\r\n/**\r\n * @description 粘贴\r\n * @author zhanyi\r\n */\r\nUM.plugins['paste'] = function () {\r\n    function getClipboardData(callback) {\r\n        var doc = this.document;\r\n        if (doc.getElementById('baidu_pastebin')) {\r\n            return;\r\n        }\r\n        var range = this.selection.getRange(),\r\n            bk = range.createBookmark(),\r\n        //创建剪贴的容器div\r\n            pastebin = doc.createElement('div');\r\n        pastebin.id = 'baidu_pastebin';\r\n        // Safari 要求div必须有内容，才能粘贴内容进来\r\n        browser.webkit && pastebin.appendChild(doc.createTextNode(domUtils.fillChar + domUtils.fillChar));\r\n        this.body.appendChild(pastebin);\r\n        //trace:717 隐藏的span不能得到top\r\n        //bk.start.innerHTML = '&nbsp;';\r\n        bk.start.style.display = '';\r\n\r\n        pastebin.style.cssText = \"position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:\" +\r\n        //要在现在光标平行的位置加入，否则会出现跳动的问题\r\n        $(bk.start).position().top  + 'px';\r\n\r\n        range.selectNodeContents(pastebin).select(true);\r\n\r\n        setTimeout(function () {\r\n            if (browser.webkit) {\r\n                for (var i = 0, pastebins = doc.querySelectorAll('#baidu_pastebin'), pi; pi = pastebins[i++];) {\r\n                    if (domUtils.isEmptyNode(pi)) {\r\n                        domUtils.remove(pi);\r\n                    } else {\r\n                        pastebin = pi;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            try {\r\n                pastebin.parentNode.removeChild(pastebin);\r\n            } catch (e) {\r\n            }\r\n            range.moveToBookmark(bk).select(true);\r\n            callback(pastebin);\r\n        }, 0);\r\n    }\r\n\r\n    var me = this;\r\n\r\n\r\n    function filter(div) {\r\n        var html;\r\n        if (div.firstChild) {\r\n            //去掉cut中添加的边界值\r\n            var nodes = domUtils.getElementsByTagName(div, 'span');\r\n            for (var i = 0, ni; ni = nodes[i++];) {\r\n                if (ni.id == '_baidu_cut_start' || ni.id == '_baidu_cut_end') {\r\n                    domUtils.remove(ni);\r\n                }\r\n            }\r\n\r\n            if (browser.webkit) {\r\n\r\n                var brs = div.querySelectorAll('div br');\r\n                for (var i = 0, bi; bi = brs[i++];) {\r\n                    var pN = bi.parentNode;\r\n                    if (pN.tagName == 'DIV' && pN.childNodes.length == 1) {\r\n                        pN.innerHTML = '<p><br/></p>';\r\n                        domUtils.remove(pN);\r\n                    }\r\n                }\r\n                var divs = div.querySelectorAll('#baidu_pastebin');\r\n                for (var i = 0, di; di = divs[i++];) {\r\n                    var tmpP = me.document.createElement('p');\r\n                    di.parentNode.insertBefore(tmpP, di);\r\n                    while (di.firstChild) {\r\n                        tmpP.appendChild(di.firstChild);\r\n                    }\r\n                    domUtils.remove(di);\r\n                }\r\n\r\n                var metas = div.querySelectorAll('meta');\r\n                for (var i = 0, ci; ci = metas[i++];) {\r\n                    domUtils.remove(ci);\r\n                }\r\n\r\n                var brs = div.querySelectorAll('br');\r\n                for (i = 0; ci = brs[i++];) {\r\n                    if (/^apple-/i.test(ci.className)) {\r\n                        domUtils.remove(ci);\r\n                    }\r\n                }\r\n            }\r\n            if (browser.gecko) {\r\n                var dirtyNodes = div.querySelectorAll('[_moz_dirty]');\r\n                for (i = 0; ci = dirtyNodes[i++];) {\r\n                    ci.removeAttribute('_moz_dirty');\r\n                }\r\n            }\r\n            if (!browser.ie) {\r\n                var spans = div.querySelectorAll('span.Apple-style-span');\r\n                for (var i = 0, ci; ci = spans[i++];) {\r\n                    domUtils.remove(ci, true);\r\n                }\r\n            }\r\n\r\n            //ie下使用innerHTML会产生多余的\\r\\n字符，也会产生&nbsp;这里过滤掉\r\n            html = div.innerHTML;//.replace(/>(?:(\\s|&nbsp;)*?)</g,'><');\r\n\r\n            //过滤word粘贴过来的冗余属性\r\n            html = UM.filterWord(html);\r\n            //取消了忽略空白的第二个参数，粘贴过来的有些是有空白的，会被套上相关的标签\r\n            var root = UM.htmlparser(html);\r\n            //如果给了过滤规则就先进行过滤\r\n            if (me.options.filterRules) {\r\n                UM.filterNode(root, me.options.filterRules);\r\n            }\r\n            //执行默认的处理\r\n            me.filterInputRule(root);\r\n            //针对chrome的处理\r\n            if (browser.webkit) {\r\n                var br = root.lastChild();\r\n                if (br && br.type == 'element' && br.tagName == 'br') {\r\n                    root.removeChild(br)\r\n                }\r\n                utils.each(me.body.querySelectorAll('div'), function (node) {\r\n                    if (domUtils.isEmptyBlock(node)) {\r\n                        domUtils.remove(node)\r\n                    }\r\n                })\r\n            }\r\n            html = {'html': root.toHtml()};\r\n            me.fireEvent('beforepaste', html, root);\r\n            //抢了默认的粘贴，那后边的内容就不执行了，比如表格粘贴\r\n            if(!html.html){\r\n                return;\r\n            }\r\n\r\n            me.execCommand('insertHtml', html.html, true);\r\n            me.fireEvent(\"afterpaste\", html);\r\n        }\r\n    }\r\n\r\n\r\n    me.addListener('ready', function () {\r\n        $(me.body).on( 'cut', function () {\r\n            var range = me.selection.getRange();\r\n            if (!range.collapsed && me.undoManger) {\r\n                me.undoManger.save();\r\n            }\r\n        }).on(browser.ie || browser.opera ? 'keydown' : 'paste', function (e) {\r\n            //ie下beforepaste在点击右键时也会触发，所以用监控键盘才处理\r\n            if ((browser.ie || browser.opera) && ((!e.ctrlKey && !e.metaKey) || e.keyCode != '86')) {\r\n                return;\r\n            }\r\n            getClipboardData.call(me, function (div) {\r\n                filter(div);\r\n            });\r\n        });\r\n\r\n    });\r\n};\r\n\r\n\r\n///import core\r\n///commands 有序列表,无序列表\r\n///commandsName  InsertOrderedList,InsertUnorderedList\r\n///commandsTitle  有序列表,无序列表\r\n/**\r\n * 有序列表\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     insertorderlist插入有序列表\r\n * @param   {String}   style               值为：decimal,lower-alpha,lower-roman,upper-alpha,upper-roman\r\n * @author zhanyi\r\n */\r\n/**\r\n * 无序链接\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     insertunorderlist插入无序列表\r\n * * @param   {String}   style            值为：circle,disc,square\r\n * @author zhanyi\r\n */\r\n\r\nUM.plugins['list'] = function () {\r\n    var me = this;\r\n\r\n    me.setOpt( {\r\n        'insertorderedlist':{\r\n            'decimal':'',\r\n            'lower-alpha':'',\r\n            'lower-roman':'',\r\n            'upper-alpha':'',\r\n            'upper-roman':''\r\n        },\r\n        'insertunorderedlist':{\r\n            'circle':'',\r\n            'disc':'',\r\n            'square':''\r\n        }\r\n    } );\r\n\r\n    this.addInputRule(function(root){\r\n        utils.each(root.getNodesByTagName('li'), function (node) {\r\n            if(node.children.length == 0){\r\n                node.parentNode.removeChild(node);\r\n            }\r\n        })\r\n    });\r\n    me.commands['insertorderedlist'] =\r\n    me.commands['insertunorderedlist'] = {\r\n            execCommand:function (cmdName) {\r\n                this.document.execCommand(cmdName);\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n\r\n                this.$body.find('ol,ul').each(function(i,n){\r\n                    var parent = n.parentNode;\r\n                    if(parent.tagName == 'P' && parent.lastChild === parent.firstChild){\r\n                        $(n).children().each(function(j,li){\r\n                            var p = parent.cloneNode(false);\r\n                            $(p).append(li.innerHTML);\r\n                            $(li).html('').append(p);\r\n                        });\r\n                        $(n).insertBefore(parent);\r\n                        $(parent).remove();\r\n                    }\r\n\r\n                    if(dtd.$inline[parent.tagName]){\r\n                        if(parent.tagName == 'SPAN'){\r\n\r\n                            $(n).children().each(function(k,li){\r\n                                var span = parent.cloneNode(false);\r\n                                if(li.firstChild.nodeName != 'P'){\r\n\r\n                                    while(li.firstChild){\r\n                                        span.appendChild(li.firstChild)\r\n                                    };\r\n                                    $('<p></p>').appendTo(li).append(span);\r\n                                }else{\r\n                                    while(li.firstChild){\r\n                                        span.appendChild(li.firstChild)\r\n                                    };\r\n                                    $(li.firstChild).append(span);\r\n                                }\r\n                            })\r\n\r\n                        }\r\n                        domUtils.remove(parent,true)\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\n                rng.moveToBookmark(bk).select();\r\n                return true;\r\n            },\r\n            queryCommandState:function (cmdName) {\r\n                return this.document.queryCommandState(cmdName);\r\n            }\r\n        };\r\n};\r\n\r\n\r\n///import core\r\n///import plugins/serialize.js\r\n///import plugins/undo.js\r\n///commands 查看源码\r\n///commandsName  Source\r\n///commandsTitle  查看源码\r\n(function (){\r\n    var sourceEditors = {\r\n        textarea: function (editor, holder){\r\n            var textarea = holder.ownerDocument.createElement('textarea');\r\n            textarea.style.cssText = 'resize:none;border:0;padding:0;margin:0;overflow-y:auto;outline:0';\r\n            // todo: IE下只有onresize属性可用... 很纠结\r\n            if (browser.ie && browser.version < 8) {\r\n\r\n                textarea.style.width = holder.offsetWidth + 'px';\r\n                textarea.style.height = holder.offsetHeight + 'px';\r\n                holder.onresize = function (){\r\n                    textarea.style.width = holder.offsetWidth + 'px';\r\n                    textarea.style.height = holder.offsetHeight + 'px';\r\n                };\r\n            }\r\n            holder.appendChild(textarea);\r\n            return {\r\n                container : textarea,\r\n                setContent: function (content){\r\n                    textarea.value = content;\r\n                },\r\n                getContent: function (){\r\n                    return textarea.value;\r\n                },\r\n                select: function (){\r\n                    var range;\r\n                    if (browser.ie) {\r\n                        range = textarea.createTextRange();\r\n                        range.collapse(true);\r\n                        range.select();\r\n                    } else {\r\n                        //todo: chrome下无法设置焦点\r\n                        textarea.setSelectionRange(0, 0);\r\n                        textarea.focus();\r\n                    }\r\n                },\r\n                dispose: function (){\r\n                    holder.removeChild(textarea);\r\n                    // todo\r\n                    holder.onresize = null;\r\n                    textarea = null;\r\n                    holder = null;\r\n                }\r\n            };\r\n        }\r\n    };\r\n\r\n    UM.plugins['source'] = function (){\r\n        var me = this;\r\n        var opt = this.options;\r\n        var sourceMode = false;\r\n        var sourceEditor;\r\n\r\n        opt.sourceEditor = 'textarea';\r\n\r\n        me.setOpt({\r\n            sourceEditorFirst:false\r\n        });\r\n        function createSourceEditor(holder){\r\n            return sourceEditors.textarea(me, holder);\r\n        }\r\n\r\n        var bakCssText;\r\n        //解决在源码模式下getContent不能得到最新的内容问题\r\n        var oldGetContent = me.getContent,\r\n            bakAddress;\r\n\r\n        me.commands['source'] = {\r\n            execCommand: function (){\r\n\r\n                sourceMode = !sourceMode;\r\n                if (sourceMode) {\r\n                    bakAddress = me.selection.getRange().createAddress(false,true);\r\n                    me.undoManger && me.undoManger.save(true);\r\n                    if(browser.gecko){\r\n                        me.body.contentEditable = false;\r\n                    }\r\n\r\n//                    bakCssText = me.body.style.cssText;\r\n                    me.body.style.cssText += ';position:absolute;left:-32768px;top:-32768px;';\r\n\r\n\r\n                    me.fireEvent('beforegetcontent');\r\n                    var root = UM.htmlparser(me.body.innerHTML);\r\n                    me.filterOutputRule(root);\r\n                    root.traversal(function (node) {\r\n                        if (node.type == 'element') {\r\n                            switch (node.tagName) {\r\n                                case 'td':\r\n                                case 'th':\r\n                                case 'caption':\r\n                                    if(node.children && node.children.length == 1){\r\n                                        if(node.firstChild().tagName == 'br' ){\r\n                                            node.removeChild(node.firstChild())\r\n                                        }\r\n                                    };\r\n                                    break;\r\n                                case 'pre':\r\n                                    node.innerText(node.innerText().replace(/&nbsp;/g,' '))\r\n\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    me.fireEvent('aftergetcontent');\r\n\r\n                    var content = root.toHtml(true);\r\n\r\n                    sourceEditor = createSourceEditor(me.body.parentNode);\r\n\r\n                    sourceEditor.setContent(content);\r\n\r\n                    var getStyleValue=function(attr){\r\n                        return parseInt($(me.body).css(attr));\r\n                    };\r\n                    $(sourceEditor.container).width($(me.body).width()+getStyleValue(\"padding-left\")+getStyleValue(\"padding-right\"))\r\n                        .height($(me.body).height());\r\n                    setTimeout(function (){\r\n                        sourceEditor.select();\r\n                    });\r\n                    //重置getContent，源码模式下取值也能是最新的数据\r\n                    me.getContent = function (){\r\n                        return sourceEditor.getContent() || '<p>' + (browser.ie ? '' : '<br/>')+'</p>';\r\n                    };\r\n                } else {\r\n                    me.$body.css({\r\n                        'position':'',\r\n                        'left':'',\r\n                        'top':''\r\n                    });\r\n//                    me.body.style.cssText = bakCssText;\r\n                    var cont = sourceEditor.getContent() || '<p>' + (browser.ie ? '' : '<br/>')+'</p>';\r\n                    //处理掉block节点前后的空格,有可能会误命中，暂时不考虑\r\n                    cont = cont.replace(new RegExp('[\\\\r\\\\t\\\\n ]*<\\/?(\\\\w+)\\\\s*(?:[^>]*)>','g'), function(a,b){\r\n                        if(b && !dtd.$inlineWithA[b.toLowerCase()]){\r\n                            return a.replace(/(^[\\n\\r\\t ]*)|([\\n\\r\\t ]*$)/g,'');\r\n                        }\r\n                        return a.replace(/(^[\\n\\r\\t]*)|([\\n\\r\\t]*$)/g,'')\r\n                    });\r\n                    me.setContent(cont);\r\n                    sourceEditor.dispose();\r\n                    sourceEditor = null;\r\n                    //还原getContent方法\r\n                    me.getContent = oldGetContent;\r\n                    var first = me.body.firstChild;\r\n                    //trace:1106 都删除空了，下边会报错，所以补充一个p占位\r\n                    if(!first){\r\n                        me.body.innerHTML = '<p>'+(browser.ie?'':'<br/>')+'</p>';\r\n                    }\r\n                    //要在ifm为显示时ff才能取到selection,否则报错\r\n                    //这里不能比较位置了\r\n                    me.undoManger && me.undoManger.save(true);\r\n                    if(browser.gecko){\r\n                        me.body.contentEditable = true;\r\n                    }\r\n                    try{\r\n                        me.selection.getRange().moveToAddress(bakAddress).select();\r\n                    }catch(e){}\r\n\r\n                }\r\n                this.fireEvent('sourcemodechanged', sourceMode);\r\n            },\r\n            queryCommandState: function (){\r\n                return sourceMode|0;\r\n            },\r\n            notNeedUndo : 1\r\n        };\r\n        var oldQueryCommandState = me.queryCommandState;\r\n\r\n\r\n        me.queryCommandState = function (cmdName){\r\n            cmdName = cmdName.toLowerCase();\r\n            if (sourceMode) {\r\n                //源码模式下可以开启的命令\r\n                return cmdName in {\r\n                    'source' : 1,\r\n                    'fullscreen' : 1\r\n                } ? oldQueryCommandState.apply(this, arguments)  : -1\r\n            }\r\n            return oldQueryCommandState.apply(this, arguments);\r\n        };\r\n\r\n    };\r\n\r\n})();\r\n///import core\r\n///import plugins/undo.js\r\n///commands 设置回车标签p或br\r\n///commandsName  EnterKey\r\n///commandsTitle  设置回车标签p或br\r\n/**\r\n * @description 处理回车\r\n * @author zhanyi\r\n */\r\nUM.plugins['enterkey'] = function() {\r\n    var hTag,\r\n        me = this,\r\n        tag = me.options.enterTag;\r\n    me.addListener('keyup', function(type, evt) {\r\n\r\n        var keyCode = evt.keyCode || evt.which;\r\n        if (keyCode == 13) {\r\n            var range = me.selection.getRange(),\r\n                start = range.startContainer,\r\n                doSave;\r\n\r\n            //修正在h1-h6里边回车后不能嵌套p的问题\r\n            if (!browser.ie) {\r\n\r\n                if (/h\\d/i.test(hTag)) {\r\n                    if (browser.gecko) {\r\n                        var h = domUtils.findParentByTagName(start, [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6','blockquote','caption','table'], true);\r\n                        if (!h) {\r\n                            me.document.execCommand('formatBlock', false, '<p>');\r\n                            doSave = 1;\r\n                        }\r\n                    } else {\r\n                        //chrome remove div\r\n                        if (start.nodeType == 1) {\r\n                            var tmp = me.document.createTextNode(''),div;\r\n                            range.insertNode(tmp);\r\n                            div = domUtils.findParentByTagName(tmp, 'div', true);\r\n                            if (div) {\r\n                                var p = me.document.createElement('p');\r\n                                while (div.firstChild) {\r\n                                    p.appendChild(div.firstChild);\r\n                                }\r\n                                div.parentNode.insertBefore(p, div);\r\n                                domUtils.remove(div);\r\n                                range.setStartBefore(tmp).setCursor();\r\n                                doSave = 1;\r\n                            }\r\n                            domUtils.remove(tmp);\r\n\r\n                        }\r\n                    }\r\n\r\n                    if (me.undoManger && doSave) {\r\n                        me.undoManger.save();\r\n                    }\r\n                }\r\n                //没有站位符，会出现多行的问题\r\n                browser.opera &&  range.select();\r\n            }else{\r\n                me.fireEvent('saveScene',true,true)\r\n            }\r\n        }\r\n    });\r\n\r\n    me.addListener('keydown', function(type, evt) {\r\n        var keyCode = evt.keyCode || evt.which;\r\n        if (keyCode == 13) {//回车\r\n            if(me.fireEvent('beforeenterkeydown')){\r\n                domUtils.preventDefault(evt);\r\n                return;\r\n            }\r\n            me.fireEvent('saveScene',true,true);\r\n            hTag = '';\r\n\r\n\r\n            var range = me.selection.getRange();\r\n\r\n            if (!range.collapsed) {\r\n                //跨td不能删\r\n                var start = range.startContainer,\r\n                    end = range.endContainer,\r\n                    startTd = domUtils.findParentByTagName(start, 'td', true),\r\n                    endTd = domUtils.findParentByTagName(end, 'td', true);\r\n                if (startTd && endTd && startTd !== endTd || !startTd && endTd || startTd && !endTd) {\r\n                    evt.preventDefault ? evt.preventDefault() : ( evt.returnValue = false);\r\n                    return;\r\n                }\r\n            }\r\n            if (tag == 'p') {\r\n\r\n\r\n                if (!browser.ie) {\r\n\r\n                    start = domUtils.findParentByTagName(range.startContainer, ['ol','ul','p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6','blockquote','caption'], true);\r\n\r\n                    //opera下执行formatblock会在table的场景下有问题，回车在opera原生支持很好，所以暂时在opera去掉调用这个原生的command\r\n                    //trace:2431\r\n                    if (!start && !browser.opera) {\r\n\r\n                        me.document.execCommand('formatBlock', false, '<p>');\r\n\r\n                        if (browser.gecko) {\r\n                            range = me.selection.getRange();\r\n                            start = domUtils.findParentByTagName(range.startContainer, 'p', true);\r\n                            start && domUtils.removeDirtyAttr(start);\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        hTag = start.tagName;\r\n                        start.tagName.toLowerCase() == 'p' && browser.gecko && domUtils.removeDirtyAttr(start);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n    browser.ie && me.addListener('setDisabled',function(){\r\n        $(me.body).find('p').each(function(i,p){\r\n            if(domUtils.isEmptyBlock(p)){\r\n                p.innerHTML = '&nbsp;'\r\n            }\r\n        })\r\n    })\r\n};\r\n\r\n///import core\r\n///commands 预览\r\n///commandsName  Preview\r\n///commandsTitle  预览\r\n/**\r\n * 预览\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName     preview预览编辑器内容\r\n */\r\nUM.commands['preview'] = {\r\n    execCommand : function(){\r\n        var w = window.open('', '_blank', ''),\r\n            d = w.document,\r\n            c = this.getContent(null,null,true),\r\n            path = this.getOpt('UMEDITOR_HOME_URL'),\r\n            formula = c.indexOf('mathquill-embedded-latex')!=-1 ?\r\n                '<link rel=\"stylesheet\" href=\"' + path + 'third-party/mathquill/mathquill.css\"/>' +\r\n                '<script src=\"' + path + 'third-party/jquery.min.js\"></script>' +\r\n                '<script src=\"' + path + 'third-party/mathquill/mathquill.min.js\"></script>':'';\r\n        d.open();\r\n        d.write('<html><head>' + formula + '</head><body><div>'+c+'</div></body></html>');\r\n        d.close();\r\n    },\r\n    notNeedUndo : 1\r\n};\r\n\r\n///import core\r\n///commands 加粗,斜体,上标,下标\r\n///commandsName  Bold,Italic,Subscript,Superscript\r\n///commandsTitle  加粗,加斜,下标,上标\r\n/**\r\n * b u i等基础功能实现\r\n * @function\r\n * @name UM.execCommands\r\n * @param    {String}    cmdName    bold加粗。italic斜体。subscript上标。superscript下标。\r\n*/\r\nUM.plugins['basestyle'] = function(){\r\n    var basestyles = ['bold','underline','superscript','subscript','italic','strikethrough'],\r\n        me = this;\r\n    //添加快捷键\r\n    me.addshortcutkey({\r\n        \"Bold\" : \"ctrl+66\",//^B\r\n        \"Italic\" : \"ctrl+73\", //^I\r\n        \"Underline\" : \"ctrl+shift+85\",//^U\r\n        \"strikeThrough\" : 'ctrl+shift+83' //^s\r\n    });\r\n    //过滤最后的产出数据\r\n    me.addOutputRule(function(root){\r\n        $.each(root.getNodesByTagName('b i u strike s'),function(i,node){\r\n            switch (node.tagName){\r\n                case 'b':\r\n                    node.tagName = 'strong';\r\n                    break;\r\n                case 'i':\r\n                    node.tagName = 'em';\r\n                    break;\r\n                case 'u':\r\n                    node.tagName = 'span';\r\n                    node.setStyle('text-decoration','underline');\r\n                    break;\r\n                case 's':\r\n                case 'strike':\r\n                    node.tagName = 'span';\r\n                    node.setStyle('text-decoration','line-through')\r\n            }\r\n        });\r\n    });\r\n    $.each(basestyles,function(i,cmd){\r\n        me.commands[cmd] = {\r\n            execCommand : function( cmdName ) {\r\n                var rng = this.selection.getRange();\r\n                if(rng.collapsed && this.queryCommandState(cmdName) != 1){\r\n                    var node = this.document.createElement({\r\n                        'bold':'strong',\r\n                        'underline':'u',\r\n                        'superscript':'sup',\r\n                        'subscript':'sub',\r\n                        'italic':'em',\r\n                        'strikethrough':'strike'\r\n                    }[cmdName]);\r\n                    rng.insertNode(node).setStart(node,0).setCursor(false);\r\n                    return true;\r\n                }else{\r\n                    return this.document.execCommand(cmdName)\r\n                }\r\n\r\n            },\r\n            queryCommandState : function(cmdName) {\r\n                if(browser.gecko){\r\n                    return this.document.queryCommandState(cmdName)\r\n                }\r\n                var path = this.selection.getStartElementPath(),result = false;\r\n                $.each(path,function(i,n){\r\n                    switch (cmdName){\r\n                        case 'bold':\r\n                            if(n.nodeName == 'STRONG' || n.nodeName == 'B'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                        case 'underline':\r\n                            if(n.nodeName == 'U' || n.nodeName == 'SPAN' && $(n).css('text-decoration') == 'underline'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                        case 'superscript':\r\n                            if(n.nodeName == 'SUP'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                        case 'subscript':\r\n                            if(n.nodeName == 'SUB'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                        case 'italic':\r\n                            if(n.nodeName == 'EM' || n.nodeName == 'I'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                        case 'strikethrough':\r\n                            if(n.nodeName == 'S' || n.nodeName == 'STRIKE' || n.nodeName == 'SPAN' && $(n).css('text-decoration') == 'line-through'){\r\n                                result = 1;\r\n                                return false;\r\n                            }\r\n                            break;\r\n                    }\r\n                })\r\n                return result\r\n            }\r\n        };\r\n    })\r\n};\r\n\r\n\r\n///import core\r\n///import plugins/inserthtml.js\r\n///commands 视频\r\n///commandsName InsertVideo\r\n///commandsTitle  插入视频\r\n///commandsDialog  dialogs\\video\r\nUM.plugins['video'] = function (){\r\n    var me =this,\r\n        div;\r\n\r\n    /**\r\n     * 创建插入视频字符窜\r\n     * @param url 视频地址\r\n     * @param width 视频宽度\r\n     * @param height 视频高度\r\n     * @param align 视频对齐\r\n     * @param toEmbed 是否以flash代替显示\r\n     * @param addParagraph  是否需要添加P 标签\r\n     */\r\n    function creatInsertStr(url,width,height,id,align,toEmbed){\r\n        return  !toEmbed ?\r\n\r\n                '<img ' + (id ? 'id=\"' + id+'\"' : '') + ' width=\"'+ width +'\" height=\"' + height + '\" _url=\"'+url+'\" class=\"edui-faked-video\"'  +\r\n                ' src=\"' + me.options.UMEDITOR_HOME_URL+'themes/default/images/spacer.gif\" style=\"background:url('+me.options.UMEDITOR_HOME_URL+'themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;'+(align ? 'float:' + align + ';': '')+'\" />'\r\n\r\n                :\r\n                '<embed type=\"application/x-shockwave-flash\" class=\"edui-faked-video\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\"' +\r\n                ' src=\"' + url + '\" width=\"' + width  + '\" height=\"' + height  + '\"'  + (align ? ' style=\"float:' + align + '\"': '') +\r\n                ' wmode=\"transparent\" play=\"true\" loop=\"false\" menu=\"false\" allowscriptaccess=\"never\" allowfullscreen=\"true\" >';\r\n    }\r\n\r\n    function switchImgAndEmbed(root,img2embed){\r\n        utils.each(root.getNodesByTagName(img2embed ? 'img' : 'embed'),function(node){\r\n            if(node.getAttr('class') == 'edui-faked-video'){\r\n\r\n                var html = creatInsertStr( img2embed ? node.getAttr('_url') : node.getAttr('src'),node.getAttr('width'),node.getAttr('height'),null,node.getStyle('float') || '',img2embed);\r\n                node.parentNode.replaceChild(UM.uNode.createElement(html),node)\r\n            }\r\n        })\r\n    }\r\n\r\n    me.addOutputRule(function(root){\r\n        switchImgAndEmbed(root,true)\r\n    });\r\n    me.addInputRule(function(root){\r\n        switchImgAndEmbed(root)\r\n    });\r\n\r\n    me.commands[\"insertvideo\"] = {\r\n        execCommand: function (cmd, videoObjs){\r\n            videoObjs = utils.isArray(videoObjs)?videoObjs:[videoObjs];\r\n            var html = [],id = 'tmpVedio';\r\n            for(var i=0,vi,len = videoObjs.length;i<len;i++){\r\n                 vi = videoObjs[i];\r\n                 html.push(creatInsertStr( vi.url, vi.width || 420,  vi.height || 280, id + i,vi.align,false));\r\n            }\r\n            me.execCommand(\"inserthtml\",html.join(\"\"),true);\r\n\r\n        },\r\n        queryCommandState : function(){\r\n            var img = me.selection.getRange().getClosedNode(),\r\n                flag = img && (img.className == \"edui-faked-video\");\r\n            return flag ? 1 : 0;\r\n        }\r\n    };\r\n};\r\n///import core\r\n///commands 全选\r\n///commandsName  SelectAll\r\n///commandsTitle  全选\r\n/**\r\n * 选中所有\r\n * @function\r\n * @name UM.execCommand\r\n * @param   {String}   cmdName    selectall选中编辑器里的所有内容\r\n * @author zhanyi\r\n*/\r\nUM.plugins['selectall'] = function(){\r\n    var me = this;\r\n    me.commands['selectall'] = {\r\n        execCommand : function(){\r\n            //去掉了原生的selectAll,因为会出现报错和当内容为空时，不能出现闭合状态的光标\r\n            var me = this,body = me.body,\r\n                range = me.selection.getRange();\r\n            range.selectNodeContents(body);\r\n            if(domUtils.isEmptyBlock(body)){\r\n                //opera不能自动合并到元素的里边，要手动处理一下\r\n                if(browser.opera && body.firstChild && body.firstChild.nodeType == 1){\r\n                    range.setStartAtFirst(body.firstChild);\r\n                }\r\n                range.collapse(true);\r\n            }\r\n            range.select(true);\r\n        },\r\n        notNeedUndo : 1\r\n    };\r\n\r\n\r\n    //快捷键\r\n    me.addshortcutkey({\r\n         \"selectAll\" : \"ctrl+65\"\r\n    });\r\n};\r\n\r\n//UM.plugins['removeformat'] = function () {\r\n//    var me = this;\r\n//    me.commands['removeformat'] = {\r\n//        execCommand: function () {\r\n//            me.document.execCommand('removeformat');\r\n//\r\n//            /* 处理ie8和firefox选区有链接时,清除格式的bug */\r\n//            if (browser.gecko || browser.ie8 || browser.webkit) {\r\n//                var nativeRange = this.selection.getNative().getRangeAt(0),\r\n//                    common = nativeRange.commonAncestorContainer,\r\n//                    rng = me.selection.getRange(),\r\n//                    bk = rng.createBookmark();\r\n//\r\n//                function isEleInBookmark(node, bk){\r\n//                    if ( (domUtils.getPosition(node, bk.start) & domUtils.POSITION_FOLLOWING) &&\r\n//                        (domUtils.getPosition(bk.end, node) & domUtils.POSITION_FOLLOWING) ) {\r\n//                        return true;\r\n//                    } else if ( (domUtils.getPosition(node, bk.start) & domUtils.POSITION_CONTAINS) ||\r\n//                        (domUtils.getPosition(node, bk.end) & domUtils.POSITION_CONTAINS) ) {\r\n//                        return true;\r\n//                    }\r\n//                    return false;\r\n//                }\r\n//\r\n//                $(common).find('a').each(function (k, a) {\r\n//                    if ( isEleInBookmark(a, bk) ) {\r\n//                        a.removeAttribute('style');\r\n//                    }\r\n//                });\r\n//\r\n//            }\r\n//        }\r\n//    };\r\n//\r\n//};\r\n//\r\n\r\n\r\nUM.plugins['removeformat'] = function(){\r\n    var me = this;\r\n    me.setOpt({\r\n        'removeFormatTags': 'b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var',\r\n        'removeFormatAttributes':'class,style,lang,width,height,align,hspace,valign'\r\n    });\r\n    me.commands['removeformat'] = {\r\n        execCommand : function( cmdName, tags, style, attrs,notIncludeA ) {\r\n\r\n            var tagReg = new RegExp( '^(?:' + (tags || this.options.removeFormatTags).replace( /,/g, '|' ) + ')$', 'i' ) ,\r\n                removeFormatAttributes = style ? [] : (attrs || this.options.removeFormatAttributes).split( ',' ),\r\n                range = new dom.Range( this.document ),\r\n                bookmark,node,parent,\r\n                filter = function( node ) {\r\n                    return node.nodeType == 1;\r\n                };\r\n\r\n            function isRedundantSpan (node) {\r\n                if (node.nodeType == 3 || node.tagName.toLowerCase() != 'span'){\r\n                    return 0;\r\n                }\r\n                if (browser.ie) {\r\n                    //ie 下判断实效，所以只能简单用style来判断\r\n                    //return node.style.cssText == '' ? 1 : 0;\r\n                    var attrs = node.attributes;\r\n                    if ( attrs.length ) {\r\n                        for ( var i = 0,l = attrs.length; i<l; i++ ) {\r\n                            if ( attrs[i].specified ) {\r\n                                return 0;\r\n                            }\r\n                        }\r\n                        return 1;\r\n                    }\r\n                }\r\n                return !node.attributes.length;\r\n            }\r\n            function doRemove( range ) {\r\n\r\n                var bookmark1 = range.createBookmark();\r\n                if ( range.collapsed ) {\r\n                    range.enlarge( true );\r\n                }\r\n\r\n                //不能把a标签切了\r\n                if(!notIncludeA){\r\n                    var aNode = domUtils.findParentByTagName(range.startContainer,'a',true);\r\n                    if(aNode){\r\n                        range.setStartBefore(aNode);\r\n                    }\r\n\r\n                    aNode = domUtils.findParentByTagName(range.endContainer,'a',true);\r\n                    if(aNode){\r\n                        range.setEndAfter(aNode);\r\n                    }\r\n\r\n                }\r\n\r\n\r\n                bookmark = range.createBookmark();\r\n\r\n                node = bookmark.start;\r\n\r\n                //切开始\r\n                while ( (parent = node.parentNode) && !domUtils.isBlockElm( parent ) ) {\r\n                    domUtils.breakParent( node, parent );\r\n                    domUtils.clearEmptySibling( node );\r\n                }\r\n                if ( bookmark.end ) {\r\n                    //切结束\r\n                    node = bookmark.end;\r\n                    while ( (parent = node.parentNode) && !domUtils.isBlockElm( parent ) ) {\r\n                        domUtils.breakParent( node, parent );\r\n                        domUtils.clearEmptySibling( node );\r\n                    }\r\n\r\n                    //开始去除样式\r\n                    var current = domUtils.getNextDomNode( bookmark.start, false, filter ),\r\n                        next;\r\n                    while ( current ) {\r\n                        if ( current == bookmark.end ) {\r\n                            break;\r\n                        }\r\n\r\n                        next = domUtils.getNextDomNode( current, true, filter );\r\n\r\n                        if ( !dtd.$empty[current.tagName.toLowerCase()] && !domUtils.isBookmarkNode( current ) ) {\r\n                            if ( tagReg.test( current.tagName ) ) {\r\n                                if ( style ) {\r\n                                    domUtils.removeStyle( current, style );\r\n                                    if ( isRedundantSpan( current ) && style != 'text-decoration'){\r\n                                        domUtils.remove( current, true );\r\n                                    }\r\n                                } else {\r\n                                    domUtils.remove( current, true );\r\n                                }\r\n                            } else {\r\n                                //trace:939  不能把list上的样式去掉\r\n                                if(!dtd.$tableContent[current.tagName] && !dtd.$list[current.tagName]){\r\n                                    domUtils.removeAttributes( current, removeFormatAttributes );\r\n                                    if ( isRedundantSpan( current ) ){\r\n                                        domUtils.remove( current, true );\r\n                                    }\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                        current = next;\r\n                    }\r\n                }\r\n                //trace:1035\r\n                //trace:1096 不能把td上的样式去掉，比如边框\r\n                var pN = bookmark.start.parentNode;\r\n                if(domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName] && !dtd.$list[pN.tagName]){\r\n                    domUtils.removeAttributes(  pN,removeFormatAttributes );\r\n                }\r\n                pN = bookmark.end.parentNode;\r\n                if(bookmark.end && domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName]&& !dtd.$list[pN.tagName]){\r\n                    domUtils.removeAttributes(  pN,removeFormatAttributes );\r\n                }\r\n                range.moveToBookmark( bookmark ).moveToBookmark(bookmark1);\r\n                //清除冗余的代码 <b><bookmark></b>\r\n                var node = range.startContainer,\r\n                    tmp,\r\n                    collapsed = range.collapsed;\r\n                while(node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]){\r\n                    tmp = node.parentNode;\r\n                    range.setStartBefore(node);\r\n                    //trace:937\r\n                    //更新结束边界\r\n                    if(range.startContainer === range.endContainer){\r\n                        range.endOffset--;\r\n                    }\r\n                    domUtils.remove(node);\r\n                    node = tmp;\r\n                }\r\n\r\n                if(!collapsed){\r\n                    node = range.endContainer;\r\n                    while(node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]){\r\n                        tmp = node.parentNode;\r\n                        range.setEndBefore(node);\r\n                        domUtils.remove(node);\r\n\r\n                        node = tmp;\r\n                    }\r\n\r\n\r\n                }\r\n            }\r\n\r\n\r\n\r\n            range = this.selection.getRange();\r\n            if(!range.collapsed) {\r\n                doRemove( range );\r\n                range.select();\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n};\r\n/*\r\n *   处理特殊键的兼容性问题\r\n */\r\nUM.plugins['keystrokes'] = function() {\r\n    var me = this;\r\n    var collapsed = true;\r\n    me.addListener('keydown', function(type, evt) {\r\n        var keyCode = evt.keyCode || evt.which,\r\n            rng = me.selection.getRange();\r\n\r\n        //处理全选的情况\r\n        if(!rng.collapsed && !(evt.ctrlKey || evt.shiftKey || evt.altKey || evt.metaKey) && (keyCode >= 65 && keyCode <=90\r\n            || keyCode >= 48 && keyCode <= 57 ||\r\n            keyCode >= 96 && keyCode <= 111 || {\r\n            13:1,\r\n            8:1,\r\n            46:1\r\n        }[keyCode])\r\n            ){\r\n\r\n            var tmpNode = rng.startContainer;\r\n            if(domUtils.isFillChar(tmpNode)){\r\n                rng.setStartBefore(tmpNode)\r\n            }\r\n            tmpNode = rng.endContainer;\r\n            if(domUtils.isFillChar(tmpNode)){\r\n                rng.setEndAfter(tmpNode)\r\n            }\r\n            rng.txtToElmBoundary();\r\n            //结束边界可能放到了br的前边，要把br包含进来\r\n            // x[xxx]<br/>\r\n            if(rng.endContainer && rng.endContainer.nodeType == 1){\r\n                tmpNode = rng.endContainer.childNodes[rng.endOffset];\r\n                if(tmpNode && domUtils.isBr(tmpNode)){\r\n                    rng.setEndAfter(tmpNode);\r\n                }\r\n            }\r\n            if(rng.startOffset == 0){\r\n                tmpNode = rng.startContainer;\r\n                if(domUtils.isBoundaryNode(tmpNode,'firstChild') ){\r\n                    tmpNode = rng.endContainer;\r\n                    if(rng.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length : tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode,'lastChild')){\r\n                        me.fireEvent('saveScene');\r\n                        me.body.innerHTML = '<p>'+(browser.ie ? '' : '<br/>')+'</p>';\r\n                        rng.setStart(me.body.firstChild,0).setCursor(false,true);\r\n                        me._selectionChange();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //处理backspace\r\n        if (keyCode == 8) {\r\n            rng = me.selection.getRange();\r\n            collapsed = rng.collapsed;\r\n            if(me.fireEvent('delkeydown',evt)){\r\n                return;\r\n            }\r\n            var start,end;\r\n            //避免按两次删除才能生效的问题\r\n            if(rng.collapsed && rng.inFillChar()){\r\n                start = rng.startContainer;\r\n\r\n                if(domUtils.isFillChar(start)){\r\n                    rng.setStartBefore(start).shrinkBoundary(true).collapse(true);\r\n                    domUtils.remove(start)\r\n                }else{\r\n                    start.nodeValue = start.nodeValue.replace(new RegExp('^' + domUtils.fillChar ),'');\r\n                    rng.startOffset--;\r\n                    rng.collapse(true).select(true)\r\n                }\r\n            }\r\n            //解决选中control元素不能删除的问题\r\n            if (start = rng.getClosedNode()) {\r\n                me.fireEvent('saveScene');\r\n                rng.setStartBefore(start);\r\n                domUtils.remove(start);\r\n                rng.setCursor();\r\n                me.fireEvent('saveScene');\r\n                domUtils.preventDefault(evt);\r\n                return;\r\n            }\r\n            //阻止在table上的删除\r\n            if (!browser.ie) {\r\n                start = domUtils.findParentByTagName(rng.startContainer, 'table', true);\r\n                end = domUtils.findParentByTagName(rng.endContainer, 'table', true);\r\n                if (start && !end || !start && end || start !== end) {\r\n                    evt.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            start = rng.startContainer;\r\n            if(rng.collapsed && start.nodeType == 1){\r\n                var currentNode = start.childNodes[rng.startOffset-1];\r\n                if(currentNode && currentNode.nodeType == 1 && currentNode.tagName == 'BR'){\r\n                    me.fireEvent('saveScene');\r\n                    rng.setStartBefore(currentNode).collapse(true);\r\n                    domUtils.remove(currentNode);\r\n                    rng.select();\r\n                    me.fireEvent('saveScene');\r\n                }\r\n            }\r\n\r\n            //trace:3613\r\n            if(browser.chrome){\r\n                if(rng.collapsed){\r\n\r\n                    while(rng.startOffset == 0 && !domUtils.isEmptyBlock(rng.startContainer)){\r\n                        rng.setStartBefore(rng.startContainer)\r\n                    }\r\n                    var pre = rng.startContainer.childNodes[rng.startOffset-1];\r\n                    if(pre && pre.nodeName == 'BR'){\r\n                        rng.setStartBefore(pre);\r\n                        me.fireEvent('saveScene');\r\n                        $(pre).remove();\r\n                        rng.setCursor();\r\n                        me.fireEvent('saveScene');\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        //trace:1634\r\n        //ff的del键在容器空的时候，也会删除\r\n        if(browser.gecko && keyCode == 46){\r\n            var range = me.selection.getRange();\r\n            if(range.collapsed){\r\n                start = range.startContainer;\r\n                if(domUtils.isEmptyBlock(start)){\r\n                    var parent = start.parentNode;\r\n                    while(domUtils.getChildCount(parent) == 1 && !domUtils.isBody(parent)){\r\n                        start = parent;\r\n                        parent = parent.parentNode;\r\n                    }\r\n                    if(start === parent.lastChild)\r\n                        evt.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    me.addListener('keyup', function(type, evt) {\r\n        var keyCode = evt.keyCode || evt.which,\r\n            rng,me = this;\r\n        if(keyCode == 8){\r\n            if(me.fireEvent('delkeyup')){\r\n                return;\r\n            }\r\n            rng = me.selection.getRange();\r\n            if(rng.collapsed){\r\n                var tmpNode,\r\n                    autoClearTagName = ['h1','h2','h3','h4','h5','h6'];\r\n                if(tmpNode = domUtils.findParentByTagName(rng.startContainer,autoClearTagName,true)){\r\n                    if(domUtils.isEmptyBlock(tmpNode)){\r\n                        var pre = tmpNode.previousSibling;\r\n                        if(pre && pre.nodeName != 'TABLE'){\r\n                            domUtils.remove(tmpNode);\r\n                            rng.setStartAtLast(pre).setCursor(false,true);\r\n                            return;\r\n                        }else{\r\n                            var next = tmpNode.nextSibling;\r\n                            if(next && next.nodeName != 'TABLE'){\r\n                                domUtils.remove(tmpNode);\r\n                                rng.setStartAtFirst(next).setCursor(false,true);\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //处理当删除到body时，要重新给p标签展位\r\n                if(domUtils.isBody(rng.startContainer)){\r\n                    var tmpNode = domUtils.createElement(me.document,'p',{\r\n                        'innerHTML' : browser.ie ? domUtils.fillChar : '<br/>'\r\n                    });\r\n                    rng.insertNode(tmpNode).setStart(tmpNode,0).setCursor(false,true);\r\n                }\r\n            }\r\n\r\n\r\n            //chrome下如果删除了inline标签，浏览器会有记忆，在输入文字还是会套上刚才删除的标签，所以这里再选一次就不会了\r\n            if( !collapsed && (rng.startContainer.nodeType == 3 || rng.startContainer.nodeType == 1 && domUtils.isEmptyBlock(rng.startContainer))){\r\n                if(browser.ie){\r\n                    var span = rng.document.createElement('span');\r\n                    rng.insertNode(span).setStartBefore(span).collapse(true);\r\n                    rng.select();\r\n                    domUtils.remove(span)\r\n                }else{\r\n                    rng.select()\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    })\r\n};\r\n/**\r\n * 自动保存草稿\r\n */\r\nUM.plugins['autosave'] = function() {\r\n\r\n\r\n    var me = this,\r\n        //无限循环保护\r\n        lastSaveTime = new Date(),\r\n        //最小保存间隔时间\r\n        MIN_TIME = 20,\r\n        //auto save key\r\n        saveKey = null;\r\n\r\n\r\n    //默认间隔时间\r\n    me.setOpt('saveInterval', 500);\r\n\r\n    //存储媒介封装\r\n    var LocalStorage = UM.LocalStorage = ( function () {\r\n\r\n        var storage = window.localStorage || getUserData() || null,\r\n            LOCAL_FILE = \"localStorage\";\r\n\r\n        return {\r\n\r\n            saveLocalData: function ( key, data ) {\r\n\r\n                if ( storage && data) {\r\n                    storage.setItem( key, data  );\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n\r\n            },\r\n\r\n            getLocalData: function ( key ) {\r\n\r\n                if ( storage ) {\r\n                    return storage.getItem( key );\r\n                }\r\n\r\n                return null;\r\n\r\n            },\r\n\r\n            removeItem: function ( key ) {\r\n\r\n                storage && storage.removeItem( key );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function getUserData () {\r\n\r\n            var container = document.createElement( \"div\" );\r\n            container.style.display = \"none\";\r\n\r\n            if( !container.addBehavior ) {\r\n                return null;\r\n            }\r\n\r\n            container.addBehavior(\"#default#userdata\");\r\n\r\n            return {\r\n\r\n                getItem: function ( key ) {\r\n\r\n                    var result = null;\r\n\r\n                    try {\r\n                        document.body.appendChild( container );\r\n                        container.load( LOCAL_FILE );\r\n                        result = container.getAttribute( key );\r\n                        document.body.removeChild( container );\r\n                    } catch ( e ) {\r\n                    }\r\n\r\n                    return result;\r\n\r\n                },\r\n\r\n                setItem: function ( key, value ) {\r\n\r\n                    document.body.appendChild( container );\r\n                    container.setAttribute( key, value );\r\n                    container.save( LOCAL_FILE );\r\n                    document.body.removeChild( container );\r\n\r\n                },\r\n//               暂时没有用到\r\n//                clear: function () {\r\n//\r\n//                    var expiresTime = new Date();\r\n//                    expiresTime.setFullYear( expiresTime.getFullYear() - 1 );\r\n//                    document.body.appendChild( container );\r\n//                    container.expires = expiresTime.toUTCString();\r\n//                    container.save( LOCAL_FILE );\r\n//                    document.body.removeChild( container );\r\n//\r\n//                },\r\n\r\n                removeItem: function ( key ) {\r\n\r\n                    document.body.appendChild( container );\r\n                    container.removeAttribute( key );\r\n                    container.save( LOCAL_FILE );\r\n                    document.body.removeChild( container );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n    } )();\r\n\r\n    function save ( editor ) {\r\n\r\n        var saveData = null;\r\n\r\n        if ( new Date() - lastSaveTime < MIN_TIME ) {\r\n            return;\r\n        }\r\n\r\n        if ( !editor.hasContents() ) {\r\n            //这里不能调用命令来删除， 会造成事件死循环\r\n            saveKey && LocalStorage.removeItem( saveKey );\r\n            return;\r\n        }\r\n\r\n        lastSaveTime = new Date();\r\n\r\n        editor._saveFlag = null;\r\n\r\n        saveData = me.body.innerHTML;\r\n\r\n        if ( editor.fireEvent( \"beforeautosave\", {\r\n            content: saveData\r\n        } ) === false ) {\r\n            return;\r\n        }\r\n\r\n        LocalStorage.saveLocalData( saveKey, saveData );\r\n\r\n        editor.fireEvent( \"afterautosave\", {\r\n            content: saveData\r\n        } );\r\n\r\n    }\r\n\r\n    me.addListener('ready', function(){\r\n        var _suffix = \"-drafts-data\",\r\n            key = null;\r\n\r\n        if ( me.key ) {\r\n            key = me.key + _suffix;\r\n        } else {\r\n            key = ( me.container.parentNode.id || 'ue-common' ) + _suffix;\r\n        }\r\n\r\n        //页面地址+编辑器ID 保持唯一\r\n        saveKey = ( location.protocol + location.host + location.pathname ).replace( /[.:\\/]/g, '_' ) + key;\r\n    });\r\n\r\n    me.addListener('contentchange', function(){\r\n\r\n        if ( !saveKey ) {\r\n            return;\r\n        }\r\n\r\n        if ( me._saveFlag ) {\r\n            window.clearTimeout( me._saveFlag );\r\n        }\r\n\r\n        if ( me.options.saveInterval > 0 ) {\r\n\r\n            me._saveFlag = window.setTimeout( function () {\r\n\r\n                save( me );\r\n\r\n            }, me.options.saveInterval );\r\n\r\n        } else {\r\n\r\n            save(me);\r\n\r\n        }\r\n\r\n    })\r\n\r\n\r\n    me.commands['clearlocaldata'] = {\r\n        execCommand:function (cmd, name) {\r\n            if ( saveKey && LocalStorage.getLocalData( saveKey ) ) {\r\n                LocalStorage.removeItem( saveKey )\r\n            }\r\n        },\r\n        notNeedUndo: true,\r\n        ignoreContentChange:true\r\n    };\r\n\r\n    me.commands['getlocaldata'] = {\r\n        execCommand:function (cmd, name) {\r\n            return saveKey ? LocalStorage.getLocalData( saveKey ) || '' : '';\r\n        },\r\n        notNeedUndo: true,\r\n        ignoreContentChange:true\r\n    };\r\n\r\n    me.commands['drafts'] = {\r\n        execCommand:function (cmd, name) {\r\n            if ( saveKey ) {\r\n                me.body.innerHTML = LocalStorage.getLocalData( saveKey ) || '<p>'+(browser.ie ? '&nbsp;' : '<br/>')+'</p>';\r\n                me.focus(true);\r\n            }\r\n        },\r\n        queryCommandState: function () {\r\n            return saveKey ? ( LocalStorage.getLocalData( saveKey ) === null ? -1 : 0 ) : -1;\r\n        },\r\n        notNeedUndo: true,\r\n        ignoreContentChange:true\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @description\r\n * 1.拖放文件到编辑区域，自动上传并插入到选区\r\n * 2.插入粘贴板的图片，自动上传并插入到选区\r\n * @author Jinqn\r\n * @date 2013-10-14\r\n */\r\nUM.plugins['autoupload'] = function () {\r\n\r\n    var me = this;\r\n\r\n    me.setOpt('pasteImageEnabled', true);\r\n    me.setOpt('dropFileEnabled', true);\r\n    var sendAndInsertImage = function (file, editor) {\r\n        //模拟数据\r\n        var fd = new FormData();\r\n        fd.append(editor.options.imageFieldName || 'upfile', file, file.name || ('blob.' + file.type.substr('image/'.length)));\r\n        fd.append('type', 'ajax');\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"post\", me.options.imageUrl, true);\r\n        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n        xhr.addEventListener('load', function (e) {\r\n            try {\r\n                var json = eval('('+e.target.response+')'),\r\n                    link = json.url,\r\n                    picLink = me.options.imagePath + link;\r\n                editor.execCommand('insertimage', {\r\n                    src: picLink,\r\n                    _src: picLink\r\n                });\r\n            } catch (er) {\r\n            }\r\n        });\r\n        xhr.send(fd);\r\n    };\r\n\r\n    function getPasteImage(e) {\r\n        return e.clipboardData && e.clipboardData.items && e.clipboardData.items.length == 1 && /^image\\//.test(e.clipboardData.items[0].type) ? e.clipboardData.items : null;\r\n    }\r\n\r\n    function getDropImage(e) {\r\n        return  e.dataTransfer && e.dataTransfer.files ? e.dataTransfer.files : null;\r\n    }\r\n\r\n    me.addListener('ready', function () {\r\n        if (window.FormData && window.FileReader) {\r\n            var autoUploadHandler = function (e) {\r\n                var hasImg = false,\r\n                    items;\r\n                //获取粘贴板文件列表或者拖放文件列表\r\n                items = e.type == 'paste' ? getPasteImage(e.originalEvent) : getDropImage(e.originalEvent);\r\n                if (items) {\r\n                    var len = items.length,\r\n                        file;\r\n                    while (len--) {\r\n                        file = items[len];\r\n                        if (file.getAsFile) file = file.getAsFile();\r\n                        if (file && file.size > 0 && /image\\/\\w+/i.test(file.type)) {\r\n                            sendAndInsertImage(file, me);\r\n                            hasImg = true;\r\n                        }\r\n                    }\r\n                    if (hasImg) return false;\r\n                }\r\n\r\n            };\r\n            me.getOpt('pasteImageEnabled') && me.$body.on('paste', autoUploadHandler);\r\n            me.getOpt('dropFileEnabled') && me.$body.on('drop', autoUploadHandler);\r\n\r\n            //取消拖放图片时出现的文字光标位置提示\r\n            me.$body.on('dragover', function (e) {\r\n                if (e.originalEvent.dataTransfer.types[0] == 'Files') {\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n};\r\n/**\r\n * 公式插件\r\n */\r\nUM.plugins['formula'] = function () {\r\n    var me = this;\r\n\r\n    function getActiveIframe() {\r\n        return me.$body.find('iframe.edui-formula-active')[0] || null;\r\n    }\r\n\r\n    function blurActiveIframe(){\r\n        var iframe = getActiveIframe();\r\n        iframe && iframe.contentWindow.formula.blur();\r\n    }\r\n\r\n    me.addInputRule(function (root) {\r\n        $.each(root.getNodesByTagName('span'), function (i, node) {\r\n            if (node.hasClass('mathquill-embedded-latex')) {\r\n                var firstChild, latex = '';\r\n                while(firstChild = node.firstChild()){\r\n                    latex += firstChild.data;\r\n                    node.removeChild(firstChild);\r\n                }\r\n                node.tagName = 'iframe';\r\n                node.setAttr({\r\n                    'frameborder': '0',\r\n                    'src': me.getOpt('UMEDITOR_HOME_URL') + 'dialogs/formula/formula.html',\r\n                    'data-latex': utils.unhtml(latex)\r\n                });\r\n            }\r\n        });\r\n    });\r\n    me.addOutputRule(function (root) {\r\n        $.each(root.getNodesByTagName('iframe'), function (i, node) {\r\n            if (node.hasClass('mathquill-embedded-latex')) {\r\n                node.tagName = 'span';\r\n                node.appendChild(UM.uNode.createText(node.getAttr('data-latex')));\r\n                node.setAttr({\r\n                    'frameborder': '',\r\n                    'src': '',\r\n                    'data-latex': ''\r\n                });\r\n            }\r\n        });\r\n    });\r\n    me.addListener('click', function(){\r\n        blurActiveIframe();\r\n    });\r\n    me.addListener('afterexeccommand', function(type, cmd){\r\n        if(cmd != 'formula') {\r\n            blurActiveIframe();\r\n        }\r\n    });\r\n\r\n    me.commands['formula'] = {\r\n        execCommand: function (cmd, latex) {\r\n            var iframe = getActiveIframe();\r\n            if (iframe) {\r\n                iframe.contentWindow.formula.insertLatex(latex);\r\n            } else {\r\n                me.execCommand('inserthtml', '<span class=\"mathquill-embedded-latex\">' + latex + '</span>');\r\n                browser.ie && browser.ie9below && setTimeout(function(){\r\n                    var rng = me.selection.getRange(),\r\n                        startContainer = rng.startContainer;\r\n                    if(startContainer.nodeType == 1 && !startContainer.childNodes[rng.startOffset]){\r\n                        rng.insertNode(me.document.createTextNode(' '));\r\n                        rng.setCursor()\r\n                    }\r\n                },100)\r\n            }\r\n        },\r\n        queryCommandState: function (cmd) {\r\n            return 0;\r\n        },\r\n        queryCommandValue: function (cmd) {\r\n            var iframe = getActiveIframe();\r\n            return iframe && iframe.contentWindow.formula.getLatex();\r\n        }\r\n    }\r\n\r\n};\r\n\r\n(function ($) {\r\n    //对jquery的扩展\r\n    $.parseTmpl = function parse(str, data) {\r\n        var tmpl = 'var __p=[],print=function(){__p.push.apply(__p,arguments);};' + 'with(obj||{}){__p.push(\\'' + str.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\").replace(/<%=([\\s\\S]+?)%>/g,function (match, code) {\r\n            return \"',\" + code.replace(/\\\\'/g, \"'\") + \",'\";\r\n        }).replace(/<%([\\s\\S]+?)%>/g,function (match, code) {\r\n                return \"');\" + code.replace(/\\\\'/g, \"'\").replace(/[\\r\\n\\t]/g, ' ') + \"__p.push('\";\r\n            }).replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t') + \"');}return __p.join('');\";\r\n        var func = new Function('obj', tmpl);\r\n        return data ? func(data) : func;\r\n    };\r\n    $.extend2 = function (t, s) {\r\n        var a = arguments,\r\n            notCover = $.type(a[a.length - 1]) == 'boolean' ? a[a.length - 1] : false,\r\n            len = $.type(a[a.length - 1]) == 'boolean' ? a.length - 1 : a.length;\r\n        for (var i = 1; i < len; i++) {\r\n            var x = a[i];\r\n            for (var k in x) {\r\n                if (!notCover || !t.hasOwnProperty(k)) {\r\n                    t[k] = x[k];\r\n                }\r\n            }\r\n        }\r\n        return t;\r\n    };\r\n\r\n    $.IE6 = !!window.ActiveXObject && parseFloat(navigator.userAgent.match(/msie (\\d+)/i)[1]) == 6;\r\n\r\n    //所有ui的基类\r\n    var _eventHandler = [];\r\n    var _widget = function () {\r\n    };\r\n    var _prefix = 'edui';\r\n    _widget.prototype = {\r\n        on: function (ev, cb) {\r\n            this.root().on(ev, $.proxy(cb, this));\r\n            return this;\r\n        },\r\n        off: function (ev, cb) {\r\n            this.root().off(ev, $.proxy(cb, this));\r\n            return this;\r\n        },\r\n        trigger: function (ev, data) {\r\n            return  this.root().trigger(ev, data) === false ? false : this;\r\n        },\r\n        root: function ($el) {\r\n            return this._$el || (this._$el = $el);\r\n        },\r\n        destroy: function () {\r\n\r\n        },\r\n        data: function (key, val) {\r\n            if (val !== undefined) {\r\n                this.root().data(_prefix + key, val);\r\n                return this;\r\n            } else {\r\n                return this.root().data(_prefix + key)\r\n            }\r\n        },\r\n        register: function (eventName, $el, fn) {\r\n            _eventHandler.push({\r\n                'evtname': eventName,\r\n                '$els': $.isArray($el) ? $el : [$el],\r\n                handler: $.proxy(fn, $el)\r\n            })\r\n        }\r\n    };\r\n\r\n    //从jq实例上拿到绑定的widget实例\r\n    $.fn.edui = function (obj) {\r\n        return obj ? this.data('eduiwidget', obj) : this.data('eduiwidget');\r\n    };\r\n\r\n    function _createClass(ClassObj, properties, supperClass) {\r\n        ClassObj.prototype = $.extend2(\r\n            $.extend({}, properties),\r\n            (UM.ui[supperClass] || _widget).prototype,\r\n            true\r\n        );\r\n        ClassObj.prototype.supper = (UM.ui[supperClass] || _widget).prototype;\r\n        //父class的defaultOpt 合并\r\n        if( UM.ui[supperClass] && UM.ui[supperClass].prototype.defaultOpt ) {\r\n\r\n            var parentDefaultOptions = UM.ui[supperClass].prototype.defaultOpt,\r\n                subDefaultOptions = ClassObj.prototype.defaultOpt;\r\n\r\n            ClassObj.prototype.defaultOpt = $.extend( {}, parentDefaultOptions, subDefaultOptions || {} );\r\n\r\n        }\r\n        return ClassObj\r\n    }\r\n\r\n    var _guid = 1;\r\n\r\n    function mergeToJQ(ClassObj, className) {\r\n        $[_prefix + className] = ClassObj;\r\n        $.fn[_prefix + className] = function (opt) {\r\n            var result, args = Array.prototype.slice.call(arguments, 1);\r\n\r\n            this.each(function (i, el) {\r\n                var $this = $(el);\r\n                var obj = $this.edui();\r\n                if (!obj) {\r\n                    ClassObj(!opt || !$.isPlainObject(opt) ? {} : opt, $this);\r\n                    $this.edui(obj)\r\n                }\r\n                if ($.type(opt) == 'string') {\r\n                    if (opt == 'this') {\r\n                        result = obj;\r\n                    } else {\r\n                        result = obj[opt].apply(obj, args);\r\n                        if (result !== obj && result !== undefined) {\r\n                            return false;\r\n                        }\r\n                        result = null;\r\n                    }\r\n\r\n                }\r\n            });\r\n\r\n            return result !== null ? result : this;\r\n        }\r\n    }\r\n\r\n    UM.ui = {\r\n        define: function (className, properties, supperClass) {\r\n            var ClassObj = UM.ui[className] = _createClass(function (options, $el) {\r\n                    var _obj = function () {\r\n                    };\r\n                    $.extend(_obj.prototype, ClassObj.prototype, {\r\n                            guid: className + _guid++,\r\n                            widgetName: className\r\n                        }\r\n                    );\r\n                    var obj = new _obj;\r\n                    if ($.type(options) == 'string') {\r\n                        obj.init && obj.init({});\r\n                        obj.root().edui(obj);\r\n                        obj.root().find('a').click(function (evt) {\r\n                            evt.preventDefault()\r\n                        });\r\n                        return obj.root()[_prefix + className].apply(obj.root(), arguments)\r\n                    } else {\r\n                        $el && obj.root($el);\r\n                        obj.init && obj.init(!options || $.isPlainObject(options) ? $.extend2(options || {}, obj.defaultOpt || {}, true) : options);\r\n                        try{\r\n                            obj.root().find('a').click(function (evt) {\r\n                                evt.preventDefault()\r\n                            });\r\n                        }catch(e){\r\n                        }\r\n\r\n                        return obj.root().edui(obj);\r\n                    }\r\n\r\n                },properties, supperClass);\r\n\r\n            mergeToJQ(ClassObj, className);\r\n        }\r\n    };\r\n\r\n    $(function () {\r\n        $(document).on('click mouseup mousedown dblclick mouseover', function (evt) {\r\n            $.each(_eventHandler, function (i, obj) {\r\n                if (obj.evtname == evt.type) {\r\n                    $.each(obj.$els, function (i, $el) {\r\n                        if ($el[0] !== evt.target && !$.contains($el[0], evt.target)) {\r\n                            obj.handler(evt);\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        })\r\n    })\r\n})(jQuery);\r\n//button 类\r\nUM.ui.define('button', {\r\n    tpl: '<<%if(!texttype){%>div class=\"edui-btn edui-btn-<%=icon%> <%if(name){%>edui-btn-name-<%=name%><%}%>\" unselectable=\"on\" onmousedown=\"return false\" <%}else{%>a class=\"edui-text-btn\"<%}%><% if(title) {%> data-original-title=\"<%=title%>\" <%};%>> ' +\r\n        '<% if(icon) {%><div unselectable=\"on\" class=\"edui-icon-<%=icon%> edui-icon\"></div><% }; %><%if(text) {%><span unselectable=\"on\" onmousedown=\"return false\" class=\"edui-button-label\"><%=text%></span><%}%>' +\r\n        '<%if(caret && text){%><span class=\"edui-button-spacing\"></span><%}%>' +\r\n        '<% if(caret) {%><span unselectable=\"on\" onmousedown=\"return false\" class=\"edui-caret\"></span><% };%></<%if(!texttype){%>div<%}else{%>a<%}%>>',\r\n    defaultOpt: {\r\n        text: '',\r\n        title: '',\r\n        icon: '',\r\n        width: '',\r\n        caret: false,\r\n        texttype: false,\r\n        click: function () {\r\n        }\r\n    },\r\n    init: function (options) {\r\n        var me = this;\r\n\r\n        me.root($($.parseTmpl(me.tpl, options)))\r\n            .click(function (evt) {\r\n                me.wrapclick(options.click, evt)\r\n            });\r\n\r\n        me.root().hover(function () {\r\n            if(!me.root().hasClass(\"edui-disabled\")){\r\n                me.root().toggleClass('edui-hover')\r\n            }\r\n        })\r\n\r\n        return me;\r\n    },\r\n    wrapclick: function (fn, evt) {\r\n        if (!this.disabled()) {\r\n            this.root().trigger('wrapclick');\r\n            $.proxy(fn, this, evt)()\r\n        }\r\n        return this;\r\n    },\r\n    label: function (text) {\r\n        if (text === undefined) {\r\n            return this.root().find('.edui-button-label').text();\r\n        } else {\r\n            this.root().find('.edui-button-label').text(text);\r\n            return this;\r\n        }\r\n    },\r\n    disabled: function (state) {\r\n        if (state === undefined) {\r\n            return this.root().hasClass('edui-disabled')\r\n        }\r\n        this.root().toggleClass('edui-disabled', state);\r\n        if(this.root().hasClass('edui-disabled')){\r\n            this.root().removeClass('edui-hover')\r\n        }\r\n        return this;\r\n    },\r\n    active: function (state) {\r\n        if (state === undefined) {\r\n            return this.root().hasClass('edui-active')\r\n        }\r\n        this.root().toggleClass('edui-active', state)\r\n\r\n        return this;\r\n    },\r\n    mergeWith: function ($obj) {\r\n        var me = this;\r\n        me.data('$mergeObj', $obj);\r\n        $obj.edui().data('$mergeObj', me.root());\r\n        if (!$.contains(document.body, $obj[0])) {\r\n            $obj.appendTo(me.root());\r\n        }\r\n        me.on('click',function () {\r\n            me.wrapclick(function () {\r\n                $obj.edui().show();\r\n            })\r\n        }).register('click', me.root(), function (evt) {\r\n                $obj.hide()\r\n            });\r\n    }\r\n});\r\n//toolbar 类\r\n(function () {\r\n    UM.ui.define('toolbar', {\r\n        tpl: '<div class=\"edui-toolbar\"  ><div class=\"edui-btn-toolbar\" unselectable=\"on\" onmousedown=\"return false\"  ></div></div>'\r\n          ,\r\n        init: function () {\r\n            var $root = this.root($(this.tpl));\r\n            this.data('$btnToolbar', $root.find('.edui-btn-toolbar'))\r\n        },\r\n        appendToBtnmenu : function(data){\r\n            var $cont = this.data('$btnToolbar');\r\n            data = $.isArray(data) ? data : [data];\r\n            $.each(data,function(i,$item){\r\n                $cont.append($item)\r\n            })\r\n        }\r\n    });\r\n})();\r\n\r\n//menu 类\r\nUM.ui.define('menu',{\r\n    show : function($obj,dir,fnname,topOffset,leftOffset){\r\n\r\n        fnname = fnname || 'position';\r\n        if(this.trigger('beforeshow') === false){\r\n            return;\r\n        }else{\r\n            this.root().css($.extend({display:'block'},$obj ? {\r\n                top : $obj[fnname]().top + ( dir == 'right' ? 0 : $obj.outerHeight()) - (topOffset || 0),\r\n                left : $obj[fnname]().left + (dir == 'right' ?  $obj.outerWidth() : 0) -  (leftOffset || 0)\r\n            }:{}))\r\n            this.trigger('aftershow');\r\n        }\r\n    },\r\n    hide : function(all){\r\n        var $parentmenu;\r\n        if(this.trigger('beforehide') === false){\r\n            return;\r\n        } else {\r\n\r\n            if($parentmenu = this.root().data('parentmenu')){\r\n                if($parentmenu.data('parentmenu')|| all)\r\n                    $parentmenu.edui().hide();\r\n            }\r\n            this.root().css('display','none');\r\n            this.trigger('afterhide');\r\n        }\r\n    },\r\n    attachTo : function($obj){\r\n        var me = this;\r\n        if(!$obj.data('$mergeObj')){\r\n            $obj.data('$mergeObj',me.root());\r\n            $obj.on('wrapclick',function(evt){\r\n                me.show()\r\n            });\r\n            me.register('click',$obj,function(evt){\r\n               me.hide()\r\n            });\r\n            me.data('$mergeObj',$obj)\r\n        }\r\n    }\r\n});\r\n//dropmenu 类\r\nUM.ui.define('dropmenu', {\r\n    tmpl: '<ul class=\"edui-dropdown-menu\" aria-labelledby=\"dropdownMenu\" >' +\r\n        '<%for(var i=0,ci;ci=data[i++];){%>' +\r\n        '<%if(ci.divider){%><li class=\"edui-divider\"></li><%}else{%>' +\r\n        '<li <%if(ci.active||ci.disabled){%>class=\"<%= ci.active|| \\'\\' %> <%=ci.disabled||\\'\\' %>\" <%}%> data-value=\"<%= ci.value%>\">' +\r\n        '<a href=\"#\" tabindex=\"-1\"><em class=\"edui-dropmenu-checkbox\"><i class=\"edui-icon-ok\"></i></em><%= ci.label%></a>' +\r\n        '</li><%}%>' +\r\n        '<%}%>' +\r\n        '</ul>',\r\n    defaultOpt: {\r\n        data: [],\r\n        click: function () {\r\n\r\n        }\r\n    },\r\n    init: function (options) {\r\n        var me = this;\r\n        var eventName = {\r\n            click: 1,\r\n            mouseover: 1,\r\n            mouseout: 1\r\n        };\r\n\r\n        this.root($($.parseTmpl(this.tmpl, options))).on('click', 'li[class!=\"edui-disabled edui-divider edui-dropdown-submenu\"]',function (evt) {\r\n            $.proxy(options.click, me, evt, $(this).data('value'), $(this))()\r\n        }).find('li').each(function (i, el) {\r\n                var $this = $(this);\r\n                if (!$this.hasClass(\"edui-disabled edui-divider edui-dropdown-submenu\")) {\r\n                    var data = options.data[i];\r\n                    $.each(eventName, function (k) {\r\n                        data[k] && $this[k](function (evt) {\r\n                            $.proxy(data[k], el)(evt, data, me.root)\r\n                        })\r\n                    })\r\n                }\r\n            })\r\n\r\n    },\r\n    disabled: function (cb) {\r\n        $('li[class!=edui-divider]', this.root()).each(function () {\r\n            var $el = $(this);\r\n            if (cb === true) {\r\n                $el.addClass('edui-disabled')\r\n            } else if ($.isFunction(cb)) {\r\n                $el.toggleClass('edui-disabled', cb(li))\r\n            } else {\r\n                $el.removeClass('edui-disabled')\r\n            }\r\n\r\n        });\r\n    },\r\n    val: function (val) {\r\n        var currentVal;\r\n        $('li[class!=\"edui-divider edui-disabled edui-dropdown-submenu\"]', this.root()).each(function () {\r\n            var $el = $(this);\r\n            if (val === undefined) {\r\n                if ($el.find('em.edui-dropmenu-checked').length) {\r\n                    currentVal = $el.data('value');\r\n                    return false\r\n                }\r\n            } else {\r\n                $el.find('em').toggleClass('edui-dropmenu-checked', $el.data('value') == val)\r\n            }\r\n        });\r\n        if (val === undefined) {\r\n            return currentVal\r\n        }\r\n    },\r\n    addSubmenu: function (label, menu, index) {\r\n        index = index || 0;\r\n\r\n        var $list = $('li[class!=edui-divider]', this.root());\r\n        var $node = $('<li class=\"edui-dropdown-submenu\"><a tabindex=\"-1\" href=\"#\">' + label + '</a></li>').append(menu);\r\n\r\n        if (index >= 0 && index < $list.length) {\r\n            $node.insertBefore($list[index]);\r\n        } else if (index < 0) {\r\n            $node.insertBefore($list[0]);\r\n        } else if (index >= $list.length) {\r\n            $node.appendTo($list);\r\n        }\r\n    }\r\n}, 'menu');\r\n//splitbutton 类\r\n///import button\r\nUM.ui.define('splitbutton',{\r\n    tpl :'<div class=\"edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>\"  unselectable=\"on\" <%if(title){%>data-original-title=\"<%=title%>\"<%}%>><div class=\"edui-btn\"  unselectable=\"on\" ><%if(icon){%><div  unselectable=\"on\" class=\"edui-icon-<%=icon%> edui-icon\"></div><%}%><%if(text){%><%=text%><%}%></div>'+\r\n            '<div  unselectable=\"on\" class=\"edui-btn edui-dropdown-toggle\" >'+\r\n                '<div  unselectable=\"on\" class=\"edui-caret\"><\\/div>'+\r\n            '</div>'+\r\n        '</div>',\r\n    defaultOpt:{\r\n        text:'',\r\n        title:'',\r\n        click:function(){}\r\n    },\r\n    init : function(options){\r\n        var me = this;\r\n        me.root( $($.parseTmpl(me.tpl,options)));\r\n        me.root().find('.edui-btn:first').click(function(evt){\r\n            if(!me.disabled()){\r\n                $.proxy(options.click,me)();\r\n            }\r\n        });\r\n        me.root().find('.edui-dropdown-toggle').click(function(){\r\n            if(!me.disabled()){\r\n                me.trigger('arrowclick')\r\n            }\r\n        });\r\n        me.root().hover(function () {\r\n            if(!me.root().hasClass(\"edui-disabled\")){\r\n                me.root().toggleClass('edui-hover')\r\n            }\r\n        });\r\n\r\n        return me;\r\n    },\r\n    wrapclick:function(fn,evt){\r\n        if(!this.disabled()){\r\n            $.proxy(fn,this,evt)()\r\n        }\r\n        return this;\r\n    },\r\n    disabled : function(state){\r\n        if(state === undefined){\r\n            return this.root().hasClass('edui-disabled')\r\n        }\r\n        this.root().toggleClass('edui-disabled',state).find('.edui-btn').toggleClass('edui-disabled',state);\r\n        return this;\r\n    },\r\n    active:function(state){\r\n        if(state === undefined){\r\n            return this.root().hasClass('edui-active')\r\n        }\r\n        this.root().toggleClass('edui-active',state).find('.edui-btn:first').toggleClass('edui-active',state);\r\n        return this;\r\n    },\r\n    mergeWith:function($obj){\r\n        var me = this;\r\n        me.data('$mergeObj',$obj);\r\n        $obj.edui().data('$mergeObj',me.root());\r\n        if(!$.contains(document.body,$obj[0])){\r\n            $obj.appendTo(me.root());\r\n        }\r\n        me.root().delegate('.edui-dropdown-toggle','click',function(){\r\n            me.wrapclick(function(){\r\n                $obj.edui().show();\r\n            })\r\n        });\r\n        me.register('click',me.root().find('.edui-dropdown-toggle'),function(evt){\r\n            $obj.hide()\r\n        });\r\n    }\r\n});\r\n/**\r\n * Created with JetBrains PhpStorm.\r\n * User: hn\r\n * Date: 13-7-10\r\n * Time: 下午3:07\r\n * To change this template use File | Settings | File Templates.\r\n */\r\nUM.ui.define('colorsplitbutton',{\r\n\r\n    tpl : '<div class=\"edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>\"  unselectable=\"on\" <%if(title){%>data-original-title=\"<%=title%>\"<%}%>><div class=\"edui-btn\"  unselectable=\"on\" ><%if(icon){%><div  unselectable=\"on\" class=\"edui-icon-<%=icon%> edui-icon\"></div><%}%><div class=\"edui-splitbutton-color-label\" <%if (color) {%>style=\"background: <%=color%>\"<%}%>></div><%if(text){%><%=text%><%}%></div>'+\r\n            '<div  unselectable=\"on\" class=\"edui-btn edui-dropdown-toggle\" >'+\r\n            '<div  unselectable=\"on\" class=\"edui-caret\"><\\/div>'+\r\n            '</div>'+\r\n            '</div>',\r\n    defaultOpt: {\r\n        color: ''\r\n    },\r\n    init: function( options ){\r\n\r\n        var me = this;\r\n\r\n        me.supper.init.call( me, options );\r\n\r\n    },\r\n    colorLabel: function(){\r\n        return this.root().find('.edui-splitbutton-color-label');\r\n    }\r\n\r\n}, 'splitbutton');\r\n//popup 类\r\nUM.ui.define('popup', {\r\n    tpl: '<div class=\"edui-dropdown-menu edui-popup\"'+\r\n        '<%if(!<%=stopprop%>){%>onmousedown=\"return false\"<%}%>'+\r\n        '><div class=\"edui-popup-body\" unselectable=\"on\" onmousedown=\"return false\"><%=subtpl%></div>' +\r\n        '<div class=\"edui-popup-caret\"></div>' +\r\n        '</div>',\r\n    defaultOpt: {\r\n        stopprop:false,\r\n        subtpl: '',\r\n        width: '',\r\n        height: ''\r\n    },\r\n    init: function (options) {\r\n        this.root($($.parseTmpl(this.tpl, options)));\r\n        return this;\r\n    },\r\n    mergeTpl: function (data) {\r\n        return $.parseTmpl(this.tpl, {subtpl: data});\r\n    },\r\n    show: function ($obj, posObj) {\r\n        if (!posObj) posObj = {};\r\n\r\n        var fnname = posObj.fnname || 'position';\r\n        if (this.trigger('beforeshow') === false) {\r\n            return;\r\n        } else {\r\n            this.root().css($.extend({display: 'block'}, $obj ? {\r\n                top: $obj[fnname]().top + ( posObj.dir == 'right' ? 0 : $obj.outerHeight()) - (posObj.offsetTop || 0),\r\n                left: $obj[fnname]().left + (posObj.dir == 'right' ? $obj.outerWidth() : 0) - (posObj.offsetLeft || 0),\r\n                position: 'absolute'\r\n            } : {}));\r\n\r\n            this.root().find('.edui-popup-caret').css({\r\n                top: posObj.caretTop || 0,\r\n                left: posObj.caretLeft || 0,\r\n                position: 'absolute'\r\n            }).addClass(posObj.caretDir || \"up\")\r\n\r\n        }\r\n        this.trigger(\"aftershow\");\r\n    },\r\n    hide: function () {\r\n        this.root().css('display', 'none');\r\n        this.trigger('afterhide')\r\n    },\r\n    attachTo: function ($obj, posObj) {\r\n        var me = this\r\n        if (!$obj.data('$mergeObj')) {\r\n            $obj.data('$mergeObj', me.root());\r\n            $obj.on('wrapclick', function (evt) {\r\n                me.show($obj, posObj)\r\n            });\r\n            me.register('click', $obj, function (evt) {\r\n                me.hide()\r\n            });\r\n            me.data('$mergeObj', $obj)\r\n        }\r\n    },\r\n    getBodyContainer: function () {\r\n        return this.root().find(\".edui-popup-body\");\r\n    }\r\n});\r\n//scale 类\r\nUM.ui.define('scale', {\r\n    tpl: '<div class=\"edui-scale\" unselectable=\"on\">' +\r\n        '<span class=\"edui-scale-hand0\"></span>' +\r\n        '<span class=\"edui-scale-hand1\"></span>' +\r\n        '<span class=\"edui-scale-hand2\"></span>' +\r\n        '<span class=\"edui-scale-hand3\"></span>' +\r\n        '<span class=\"edui-scale-hand4\"></span>' +\r\n        '<span class=\"edui-scale-hand5\"></span>' +\r\n        '<span class=\"edui-scale-hand6\"></span>' +\r\n        '<span class=\"edui-scale-hand7\"></span>' +\r\n        '</div>',\r\n    defaultOpt: {\r\n        $doc: $(document),\r\n        $wrap: $(document)\r\n    },\r\n    init: function (options) {\r\n        if(options.$doc) this.defaultOpt.$doc = options.$doc;\r\n        if(options.$wrap) this.defaultOpt.$wrap = options.$wrap;\r\n        this.root($($.parseTmpl(this.tpl, options)));\r\n        this.initStyle();\r\n        this.startPos = this.prePos = {x: 0, y: 0};\r\n        this.dragId = -1;\r\n        return this;\r\n    },\r\n    initStyle: function () {\r\n        utils.cssRule('edui-style-scale', '.edui-scale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;}' +\r\n            '.edui-scale span{position:absolute;left:0;top:0;width:7px;height:7px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}'\r\n            + '.edui-scale .edui-scale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}'\r\n            + '.edui-scale .edui-scale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}'\r\n            + '.edui-scale .edui-scale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}'\r\n            + '.edui-scale .edui-scale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}'\r\n            + '.edui-scale .edui-scale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}'\r\n            + '.edui-scale .edui-scale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}'\r\n            + '.edui-scale .edui-scale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}'\r\n            + '.edui-scale .edui-scale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}');\r\n    },\r\n    _eventHandler: function (e) {\r\n        var me = this,\r\n            $doc = me.defaultOpt.$doc;\r\n        switch (e.type) {\r\n            case 'mousedown':\r\n                var hand = e.target || e.srcElement, hand;\r\n                if (hand.className.indexOf('edui-scale-hand') != -1) {\r\n                    me.dragId = hand.className.slice(-1);\r\n                    me.startPos.x = me.prePos.x = e.clientX;\r\n                    me.startPos.y = me.prePos.y = e.clientY;\r\n                    $doc.bind('mousemove', $.proxy(me._eventHandler, me));\r\n                }\r\n                break;\r\n            case 'mousemove':\r\n                if (me.dragId != -1) {\r\n                    me.updateContainerStyle(me.dragId, {x: e.clientX - me.prePos.x, y: e.clientY - me.prePos.y});\r\n                    me.prePos.x = e.clientX;\r\n                    me.prePos.y = e.clientY;\r\n                    me.updateTargetElement();\r\n                }\r\n                break;\r\n            case 'mouseup':\r\n                if (me.dragId != -1) {\r\n                    me.dragId = -1;\r\n                    me.updateTargetElement();\r\n                    var $target = me.data('$scaleTarget');\r\n                    if ($target.parent()) me.attachTo(me.data('$scaleTarget'));\r\n                }\r\n                $doc.unbind('mousemove', $.proxy(me._eventHandler, me));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    updateTargetElement: function () {\r\n        var me = this,\r\n            $root = me.root(),\r\n            $target = me.data('$scaleTarget');\r\n        $target.css({width: $root.width(), height: $root.height()});\r\n        me.attachTo($target);\r\n    },\r\n    updateContainerStyle: function (dir, offset) {\r\n        var me = this,\r\n            $dom = me.root(),\r\n            tmp,\r\n            rect = [\r\n                //[left, top, width, height]\r\n                [0, 0, -1, -1],\r\n                [0, 0, 0, -1],\r\n                [0, 0, 1, -1],\r\n                [0, 0, -1, 0],\r\n                [0, 0, 1, 0],\r\n                [0, 0, -1, 1],\r\n                [0, 0, 0, 1],\r\n                [0, 0, 1, 1]\r\n            ];\r\n\r\n        if (rect[dir][0] != 0) {\r\n            tmp = parseInt($dom.offset().left) + offset.x;\r\n            $dom.css('left', me._validScaledProp('left', tmp));\r\n        }\r\n        if (rect[dir][1] != 0) {\r\n            tmp = parseInt($dom.offset().top) + offset.y;\r\n            $dom.css('top', me._validScaledProp('top', tmp));\r\n        }\r\n        if (rect[dir][2] != 0) {\r\n            tmp = $dom.width() + rect[dir][2] * offset.x;\r\n            $dom.css('width', me._validScaledProp('width', tmp));\r\n        }\r\n        if (rect[dir][3] != 0) {\r\n            tmp = $dom.height() + rect[dir][3] * offset.y;\r\n            $dom.css('height', me._validScaledProp('height', tmp));\r\n        }\r\n    },\r\n    _validScaledProp: function (prop, value) {\r\n        var $ele = this.root(),\r\n            $wrap = this.defaultOpt.$doc,\r\n            calc = function(val, a, b){\r\n                return (val + a) > b ? b - a : value;\r\n            };\r\n\r\n        value = isNaN(value) ? 0 : value;\r\n        switch (prop) {\r\n            case 'left':\r\n                return value < 0 ? 0 : calc(value, $ele.width(), $wrap.width());\r\n            case 'top':\r\n                return value < 0 ? 0 : calc(value, $ele.height(),$wrap.height());\r\n            case 'width':\r\n                return value <= 0 ? 1 : calc(value, $ele.offset().left, $wrap.width());\r\n            case 'height':\r\n                return value <= 0 ? 1 : calc(value, $ele.offset().top, $wrap.height());\r\n        }\r\n    },\r\n    show: function ($obj) {\r\n        var me = this;\r\n        if ($obj) me.attachTo($obj);\r\n        me.root().bind('mousedown', $.proxy(me._eventHandler, me));\r\n        me.defaultOpt.$doc.bind('mouseup', $.proxy(me._eventHandler, me));\r\n        me.root().show();\r\n        me.trigger(\"aftershow\");\r\n    },\r\n    hide: function () {\r\n        var me = this;\r\n        me.root().unbind('mousedown', $.proxy(me._eventHandler, me));\r\n        me.defaultOpt.$doc.unbind('mouseup', $.proxy(me._eventHandler, me));\r\n        me.root().hide();\r\n        me.trigger('afterhide')\r\n    },\r\n    attachTo: function ($obj) {\r\n        var me = this,\r\n            imgPos = $obj.offset(),\r\n            $root = me.root(),\r\n            $wrap = me.defaultOpt.$wrap,\r\n            posObj = $wrap.offset();\r\n\r\n        me.data('$scaleTarget', $obj);\r\n        me.root().css({\r\n            position: 'absolute',\r\n            width: $obj.width(),\r\n            height: $obj.height(),\r\n            left: imgPos.left - posObj.left - parseInt($wrap.css('border-left-width')) - parseInt($root.css('border-left-width')),\r\n            top: imgPos.top - posObj.top - parseInt($wrap.css('border-top-width')) - parseInt($root.css('border-top-width'))\r\n        });\r\n    },\r\n    getScaleTarget: function () {\r\n        return this.data('$scaleTarget')[0];\r\n    }\r\n});\r\n//colorpicker 类\r\nUM.ui.define('colorpicker', {\r\n    tpl: function (opt) {\r\n        var COLORS = (\r\n            'ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,' +\r\n                'f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,' +\r\n                'd8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,' +\r\n                'bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,' +\r\n                'a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,' +\r\n                '7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,' +\r\n                'c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,').split(',');\r\n\r\n        var html = '<div unselectable=\"on\" onmousedown=\"return false\" class=\"edui-colorpicker<%if (name){%> edui-colorpicker-<%=name%><%}%>\" >' +\r\n            '<table unselectable=\"on\" onmousedown=\"return false\">' +\r\n            '<tr><td colspan=\"10\">'+opt.lang_themeColor+'</td> </tr>' +\r\n            '<tr class=\"edui-colorpicker-firstrow\" >';\r\n\r\n        for (var i = 0; i < COLORS.length; i++) {\r\n            if (i && i % 10 === 0) {\r\n                html += '</tr>' + (i == 60 ? '<tr><td colspan=\"10\">'+opt.lang_standardColor+'</td></tr>' : '') + '<tr' + (i == 60 ? ' class=\"edui-colorpicker-firstrow\"' : '') + '>';\r\n            }\r\n            html += i < 70 ? '<td><a unselectable=\"on\" onmousedown=\"return false\" title=\"' + COLORS[i] + '\" class=\"edui-colorpicker-colorcell\"' +\r\n                ' data-color=\"#' + COLORS[i] + '\"' +\r\n                ' style=\"background-color:#' + COLORS[i] + ';border:solid #ccc;' +\r\n                (i < 10 || i >= 60 ? 'border-width:1px;' :\r\n                    i >= 10 && i < 20 ? 'border-width:1px 1px 0 1px;' :\r\n                        'border-width:0 1px 0 1px;') +\r\n                '\"' +\r\n                '></a></td>' : '';\r\n        }\r\n        html += '</tr></table></div>';\r\n        return html;\r\n    },\r\n    init: function (options) {\r\n        var me = this;\r\n        me.root($($.parseTmpl(me.supper.mergeTpl(me.tpl(options)),options)));\r\n\r\n        me.root().on(\"click\",function (e) {\r\n            me.trigger('pickcolor',  $(e.target).data('color'));\r\n        });\r\n    }\r\n}, 'popup');\r\n/**\r\n * Created with JetBrains PhpStorm.\r\n * User: hn\r\n * Date: 13-5-29\r\n * Time: 下午8:01\r\n * To change this template use File | Settings | File Templates.\r\n */\r\n\r\n(function(){\r\n\r\n    var widgetName = 'combobox',\r\n        itemClassName = 'edui-combobox-item',\r\n        HOVER_CLASS = 'edui-combobox-item-hover',\r\n        ICON_CLASS = 'edui-combobox-checked-icon',\r\n        labelClassName = 'edui-combobox-item-label';\r\n\r\n    UM.ui.define( widgetName, ( function(){\r\n\r\n        return {\r\n            tpl: \"<ul class=\\\"dropdown-menu edui-combobox-menu<%if (comboboxName!=='') {%> edui-combobox-<%=comboboxName%><%}%>\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\" role=\\\"menu\\\" aria-labelledby=\\\"dropdownMenu\\\">\" +\r\n                \"<%if(autoRecord) {%>\" +\r\n                \"<%for( var i=0, len = recordStack.length; i<len; i++ ) {%>\" +\r\n                \"<%var index = recordStack[i];%>\" +\r\n                \"<li class=\\\"<%=itemClassName%><%if( selected == index ) {%> edui-combobox-checked<%}%>\\\" data-item-index=\\\"<%=index%>\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\">\" +\r\n                \"<span class=\\\"edui-combobox-icon\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\"></span>\" +\r\n                \"<label class=\\\"<%=labelClassName%>\\\" style=\\\"<%=itemStyles[ index ]%>\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\"><%=items[index]%></label>\" +\r\n                \"</li>\" +\r\n                \"<%}%>\" +\r\n                \"<%if( i ) {%>\" +\r\n                \"<li class=\\\"edui-combobox-item-separator\\\"></li>\" +\r\n                \"<%}%>\" +\r\n                \"<%}%>\" +\r\n                \"<%for( var i=0, label; label = items[i]; i++ ) {%>\" +\r\n                \"<li class=\\\"<%=itemClassName%><%if( selected == i ) {%> edui-combobox-checked<%}%> edui-combobox-item-<%=i%>\\\" data-item-index=\\\"<%=i%>\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\">\" +\r\n                \"<span class=\\\"edui-combobox-icon\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\"></span>\" +\r\n                \"<label class=\\\"<%=labelClassName%>\\\" style=\\\"<%=itemStyles[ i ]%>\\\" unselectable=\\\"on\\\" onmousedown=\\\"return false\\\"><%=label%></label>\" +\r\n                \"</li>\" +\r\n                \"<%}%>\" +\r\n                \"</ul>\",\r\n            defaultOpt: {\r\n                //记录栈初始列表\r\n                recordStack: [],\r\n                //可用项列表\r\n                items: [],\r\n\t\t        //item对应的值列表\r\n                value: [],\r\n                comboboxName: '',\r\n                selected: '',\r\n                //自动记录\r\n                autoRecord: true,\r\n                //最多记录条数\r\n                recordCount: 5\r\n            },\r\n            init: function( options ){\r\n\r\n                var me = this;\r\n\r\n                $.extend( me._optionAdaptation( options ), me._createItemMapping( options.recordStack, options.items ), {\r\n                    itemClassName: itemClassName,\r\n                    iconClass: ICON_CLASS,\r\n                    labelClassName: labelClassName\r\n                } );\r\n\r\n                this._transStack( options );\r\n\r\n                me.root( $( $.parseTmpl( me.tpl, options ) ) );\r\n\r\n                this.data( 'options', options ).initEvent();\r\n\r\n            },\r\n            initEvent: function(){\r\n\r\n                var me = this;\r\n\r\n                me.initSelectItem();\r\n\r\n                this.initItemActive();\r\n\r\n            },\r\n            /**\r\n             * 初始化选择项\r\n             */\r\n            initSelectItem: function(){\r\n\r\n                var me = this,\r\n                    labelClass = \".\"+labelClassName;\r\n\r\n                me.root().delegate('.' + itemClassName, 'click', function(){\r\n\r\n                    var $li = $(this),\r\n                        index = $li.attr('data-item-index');\r\n\r\n                    me.trigger('comboboxselect', {\r\n                        index: index,\r\n                        label: $li.find(labelClass).text(),\r\n                        value: me.data('options').value[ index ]\r\n                    }).select( index );\r\n\r\n                    me.hide();\r\n\r\n                    return false;\r\n\r\n                });\r\n\r\n            },\r\n            initItemActive: function(){\r\n                var fn = {\r\n                    mouseenter: 'addClass',\r\n                    mouseleave: 'removeClass'\r\n                };\r\n                if ($.IE6) {\r\n                    this.root().delegate( '.'+itemClassName,  'mouseenter mouseleave', function( evt ){\r\n                        $(this)[ fn[ evt.type ] ]( HOVER_CLASS );\r\n                    }).one('afterhide', function(){\r\n                    });\r\n                }\r\n            },\r\n            /**\r\n             * 选择给定索引的项\r\n             * @param index 项索引\r\n             * @returns {*} 如果存在对应索引的项，则返回该项；否则返回null\r\n             */\r\n            select: function( index ){\r\n\r\n                var itemCount = this.data('options').itemCount,\r\n                    items = this.data('options').autowidthitem;\r\n\r\n                if ( items && !items.length ) {\r\n                    items = this.data('options').items;\r\n                }\r\n\r\n                if( itemCount == 0 ) {\r\n                    return null;\r\n                }\r\n\r\n                if( index < 0 ) {\r\n\r\n                    index = itemCount + index % itemCount;\r\n\r\n                } else if ( index >= itemCount ) {\r\n\r\n                    index = itemCount-1;\r\n\r\n                }\r\n\r\n                this.trigger( 'changebefore', items[ index ] );\r\n\r\n                this._update( index );\r\n\r\n                this.trigger( 'changeafter', items[ index ] );\r\n\r\n                return null;\r\n\r\n            },\r\n            selectItemByLabel: function( label ){\r\n\r\n                var itemMapping = this.data('options').itemMapping,\r\n                    me = this,\r\n                    index = null;\r\n\r\n                !$.isArray( label ) && ( label = [ label ] );\r\n\r\n                $.each( label, function( i, item ){\r\n\r\n                    index = itemMapping[ item ];\r\n\r\n                    if( index !== undefined ) {\r\n\r\n                        me.select( index );\r\n                        return false;\r\n\r\n                    }\r\n\r\n                } );\r\n\r\n            },\r\n            /**\r\n             * 转换记录栈\r\n             */\r\n            _transStack: function( options ) {\r\n\r\n                var temp = [],\r\n                    itemIndex = -1,\r\n                    selected = -1;\r\n\r\n                $.each( options.recordStack, function( index, item ){\r\n\r\n                    itemIndex = options.itemMapping[ item ];\r\n\r\n                    if( $.isNumeric( itemIndex ) ) {\r\n\r\n                        temp.push( itemIndex );\r\n\r\n                        //selected的合法性检测\r\n                        if( item == options.selected ) {\r\n                            selected = itemIndex;\r\n                        }\r\n\r\n                    }\r\n\r\n                } );\r\n\r\n                options.recordStack = temp;\r\n                options.selected = selected;\r\n                temp = null;\r\n\r\n            },\r\n            _optionAdaptation: function( options ) {\r\n\r\n                if( !( 'itemStyles' in options ) ) {\r\n\r\n                    options.itemStyles = [];\r\n\r\n                    for( var i = 0, len = options.items.length; i < len; i++ ) {\r\n                        options.itemStyles.push('');\r\n                    }\r\n\r\n                }\r\n\r\n                options.autowidthitem = options.autowidthitem || options.items;\r\n                options.itemCount = options.items.length;\r\n\r\n                return options;\r\n\r\n            },\r\n            _createItemMapping: function( stackItem, items ){\r\n\r\n                var temp = {},\r\n                    result = {\r\n                        recordStack: [],\r\n                        mapping: {}\r\n                    };\r\n\r\n                $.each( items, function( index, item ){\r\n                    temp[ item ] = index;\r\n                } );\r\n\r\n                result.itemMapping = temp;\r\n\r\n                $.each( stackItem, function( index, item ){\r\n\r\n                    if( temp[ item ] !== undefined ) {\r\n                        result.recordStack.push( temp[ item ] );\r\n                        result.mapping[ item ] = temp[ item ];\r\n                    }\r\n\r\n                } );\r\n\r\n                return result;\r\n\r\n            },\r\n            _update: function ( index ) {\r\n\r\n                var options = this.data(\"options\"),\r\n                    newStack = [],\r\n                    newChilds = null;\r\n\r\n                $.each( options.recordStack, function( i, item ){\r\n\r\n                    if( item != index ) {\r\n                        newStack.push( item );\r\n                    }\r\n\r\n                } );\r\n\r\n                //压入最新的记录\r\n                newStack.unshift( index );\r\n\r\n                if( newStack.length > options.recordCount ) {\r\n                    newStack.length = options.recordCount;\r\n                }\r\n\r\n                options.recordStack = newStack;\r\n                options.selected = index;\r\n\r\n                newChilds = $( $.parseTmpl( this.tpl, options ) );\r\n\r\n                //重新渲染\r\n                this.root().html( newChilds.html() );\r\n\r\n                newChilds = null;\r\n                newStack = null;\r\n\r\n            }\r\n        };\r\n\r\n    } )(), 'menu' );\r\n\r\n})();\r\n\r\n/**\r\n * Combox 抽象基类\r\n * User: hn\r\n * Date: 13-5-29\r\n * Time: 下午8:01\r\n * To change this template use File | Settings | File Templates.\r\n */\r\n\r\n(function(){\r\n\r\n    var widgetName = 'buttoncombobox';\r\n\r\n    UM.ui.define( widgetName, ( function(){\r\n\r\n        return {\r\n            defaultOpt: {\r\n                //按钮初始文字\r\n                label: '',\r\n                title: ''\r\n            },\r\n            init: function( options ) {\r\n\r\n                var me = this;\r\n\r\n                var btnWidget = $.eduibutton({\r\n                    caret: true,\r\n                    name: options.comboboxName,\r\n                    title: options.title,\r\n                    text: options.label,\r\n                    click: function(){\r\n                        me.show( this.root() );\r\n                    }\r\n                });\r\n\r\n                me.supper.init.call( me, options );\r\n\r\n                //监听change， 改变button显示内容\r\n                me.on('changebefore', function( e, label ){\r\n                    btnWidget.eduibutton('label', label );\r\n                });\r\n\r\n                me.data( 'button', btnWidget );\r\n\r\n                me.attachTo(btnWidget)\r\n\r\n            },\r\n            button: function(){\r\n                return this.data( 'button' );\r\n            }\r\n        }\r\n\r\n    } )(), 'combobox' );\r\n\r\n})();\r\n\r\n/*modal 类*/\r\nUM.ui.define('modal', {\r\n    tpl: '<div class=\"edui-modal\" tabindex=\"-1\" >' +\r\n        '<div class=\"edui-modal-header\">' +\r\n        '<div class=\"edui-close\" data-hide=\"modal\"></div>' +\r\n        '<h3 class=\"edui-title\"><%=title%></h3>' +\r\n        '</div>' +\r\n        '<div class=\"edui-modal-body\"  style=\"<%if(width){%>width:<%=width%>px;<%}%>' +\r\n        '<%if(height){%>height:<%=height%>px;<%}%>\">' +\r\n        ' </div>' +\r\n        '<% if(cancellabel || oklabel) {%>' +\r\n        '<div class=\"edui-modal-footer\">' +\r\n        '<div class=\"edui-modal-tip\"></div>' +\r\n        '<%if(oklabel){%><div class=\"edui-btn edui-btn-primary\" data-ok=\"modal\"><%=oklabel%></div><%}%>' +\r\n        '<%if(cancellabel){%><div class=\"edui-btn\" data-hide=\"modal\"><%=cancellabel%></div><%}%>' +\r\n        '</div>' +\r\n        '<%}%></div>',\r\n    defaultOpt: {\r\n        title: \"\",\r\n        cancellabel: \"\",\r\n        oklabel: \"\",\r\n        width: '',\r\n        height: '',\r\n        backdrop: true,\r\n        keyboard: true\r\n    },\r\n    init: function (options) {\r\n        var me = this;\r\n\r\n        me.root($($.parseTmpl(me.tpl, options || {})));\r\n\r\n        me.data(\"options\", options);\r\n        if (options.okFn) {\r\n            me.on('ok', $.proxy(options.okFn, me))\r\n        }\r\n        if (options.cancelFn) {\r\n            me.on('beforehide', $.proxy(options.cancelFn, me))\r\n        }\r\n\r\n        me.root().delegate('[data-hide=\"modal\"]', 'click', $.proxy(me.hide, me))\r\n            .delegate('[data-ok=\"modal\"]', 'click', $.proxy(me.ok, me));\r\n\r\n        $('[data-hide=\"modal\"],[data-ok=\"modal\"]',me.root()).hover(function(){\r\n            $(this).toggleClass('edui-hover')\r\n        });\r\n    },\r\n    toggle: function () {\r\n        var me = this;\r\n        return me[!me.data(\"isShown\") ? 'show' : 'hide']();\r\n    },\r\n    show: function () {\r\n\r\n        var me = this;\r\n\r\n        me.trigger(\"beforeshow\");\r\n\r\n        if (me.data(\"isShown\")) return;\r\n\r\n        me.data(\"isShown\", true);\r\n\r\n        me.escape();\r\n\r\n        me.backdrop(function () {\r\n            me.autoCenter();\r\n            me.root()\r\n                .show()\r\n                .focus()\r\n                .trigger('aftershow');\r\n        })\r\n    },\r\n    showTip: function ( text ) {\r\n        $( '.edui-modal-tip', this.root() ).html( text ).fadeIn();\r\n    },\r\n    hideTip: function ( text ) {\r\n        $( '.edui-modal-tip', this.root() ).fadeOut( function (){\r\n            $(this).html('');\r\n        } );\r\n    },\r\n    autoCenter: function () {\r\n        //ie6下不用处理了\r\n        !$.IE6 && this.root().css(\"margin-left\", -(this.root().width() / 2));\r\n    },\r\n    hide: function () {\r\n        var me = this;\r\n\r\n        me.trigger(\"beforehide\");\r\n\r\n        if (!me.data(\"isShown\")) return;\r\n\r\n        me.data(\"isShown\", false);\r\n\r\n        me.escape();\r\n\r\n        me.hideModal();\r\n    },\r\n    escape: function () {\r\n        var me = this;\r\n        if (me.data(\"isShown\") && me.data(\"options\").keyboard) {\r\n            me.root().on('keyup', function (e) {\r\n                e.which == 27 && me.hide();\r\n            })\r\n        }\r\n        else if (!me.data(\"isShown\")) {\r\n            me.root().off('keyup');\r\n        }\r\n    },\r\n    hideModal: function () {\r\n        var me = this;\r\n        me.root().hide();\r\n        me.backdrop(function () {\r\n            me.removeBackdrop();\r\n            me.trigger('afterhide');\r\n        })\r\n    },\r\n    removeBackdrop: function () {\r\n        this.$backdrop && this.$backdrop.remove();\r\n        this.$backdrop = null;\r\n    },\r\n    backdrop: function (callback) {\r\n        var me = this;\r\n        if (me.data(\"isShown\") && me.data(\"options\").backdrop) {\r\n            me.$backdrop = $('<div class=\"edui-modal-backdrop\" />').click(\r\n                me.data(\"options\").backdrop == 'static' ?\r\n                    $.proxy(me.root()[0].focus, me.root()[0])\r\n                    : $.proxy(me.hide, me)\r\n            )\r\n        }\r\n        me.trigger('afterbackdrop');\r\n        callback && callback();\r\n\r\n    },\r\n    attachTo: function ($obj) {\r\n        var me = this\r\n        if (!$obj.data('$mergeObj')) {\r\n\r\n            $obj.data('$mergeObj', me.root());\r\n            $obj.on('click', function () {\r\n                me.toggle($obj)\r\n            });\r\n            me.data('$mergeObj', $obj)\r\n        }\r\n    },\r\n    ok: function () {\r\n        var me = this;\r\n        me.trigger('beforeok');\r\n        if (me.trigger(\"ok\", me) === false) {\r\n            return;\r\n        }\r\n        me.hide();\r\n    },\r\n    getBodyContainer: function () {\r\n        return this.root().find('.edui-modal-body')\r\n    }\r\n});\r\n\r\n\r\n/*tooltip 类*/\r\nUM.ui.define('tooltip', {\r\n    tpl: '<div class=\"edui-tooltip\" unselectable=\"on\" onmousedown=\"return false\">' +\r\n        '<div class=\"edui-tooltip-arrow\" unselectable=\"on\" onmousedown=\"return false\"></div>' +\r\n        '<div class=\"edui-tooltip-inner\" unselectable=\"on\" onmousedown=\"return false\"></div>' +\r\n        '</div>',\r\n    init: function (options) {\r\n        var me = this;\r\n        me.root($($.parseTmpl(me.tpl, options || {})));\r\n    },\r\n    content: function (e) {\r\n        var me = this,\r\n            title = $(e.currentTarget).attr(\"data-original-title\");\r\n\r\n        me.root().find('.edui-tooltip-inner')['text'](title);\r\n    },\r\n    position: function (e) {\r\n        var me = this,\r\n            $obj = $(e.currentTarget);\r\n\r\n        me.root().css($.extend({display: 'block'}, $obj ? {\r\n            top: $obj.outerHeight(),\r\n            left: (($obj.outerWidth() - me.root().outerWidth()) / 2)\r\n        } : {}))\r\n    },\r\n    show: function (e) {\r\n        if ($(e.currentTarget).hasClass('edui-disabled')) return;\r\n\r\n        var me = this;\r\n        me.content(e);\r\n        me.root().appendTo($(e.currentTarget));\r\n        me.position(e);\r\n        me.root().css('display', 'block');\r\n    },\r\n    hide: function () {\r\n        var me = this;\r\n        me.root().css('display', 'none')\r\n    },\r\n    attachTo: function ($obj) {\r\n        var me = this;\r\n\r\n        function tmp($obj) {\r\n            var me = this;\r\n\r\n            if (!$.contains(document.body, me.root()[0])) {\r\n                me.root().appendTo($obj);\r\n            }\r\n\r\n            me.data('tooltip', me.root());\r\n\r\n            $obj.each(function () {\r\n                if ($(this).attr(\"data-original-title\")) {\r\n                    $(this).on('mouseenter', $.proxy(me.show, me))\r\n                        .on('mouseleave click', $.proxy(me.hide, me))\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        if ($.type($obj) === \"undefined\") {\r\n            $(\"[data-original-title]\").each(function (i, el) {\r\n                tmp.call(me, $(el));\r\n            })\r\n\r\n        } else {\r\n            if (!$obj.data('tooltip')) {\r\n                tmp.call(me, $obj);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n/*tab 类*/\r\nUM.ui.define('tab', {\r\n    init: function (options) {\r\n        var me = this,\r\n            slr = options.selector;\r\n\r\n        if ($.type(slr)) {\r\n            me.root($(slr, options.context));\r\n            me.data(\"context\", options.context);\r\n\r\n            $(slr, me.data(\"context\")).on('click', function (e) {\r\n                me.show(e);\r\n            });\r\n        }\r\n    },\r\n    show: function (e) {\r\n\r\n        var me = this,\r\n            $cur = $(e.target),\r\n            $ul = $cur.closest('ul'),\r\n            selector,\r\n            previous,\r\n            $target,\r\n            e;\r\n\r\n        selector = $cur.attr('data-context');\r\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '');\r\n\r\n        var $tmp = $cur.parent('li');\r\n\r\n        if (!$tmp.length || $tmp.hasClass('edui-active')) return;\r\n\r\n        previous = $ul.find('.edui-active:last a')[0];\r\n\r\n        e = $.Event('beforeshow', {\r\n            target: $cur[0],\r\n            relatedTarget: previous\r\n        });\r\n\r\n        me.trigger(e);\r\n\r\n        if (e.isDefaultPrevented()) return;\r\n\r\n        $target = $(selector, me.data(\"context\"));\r\n\r\n        me.activate($cur.parent('li'), $ul);\r\n        me.activate($target, $target.parent(), function () {\r\n            me.trigger({\r\n                type: 'aftershow', relatedTarget: previous\r\n            })\r\n        });\r\n    },\r\n    activate: function (element, container, callback) {\r\n        if (element === undefined) {\r\n            return $(\".edui-tab-item.edui-active\",this.root()).index();\r\n        }\r\n\r\n        var $active = container.find('> .edui-active');\r\n\r\n        $active.removeClass('edui-active');\r\n\r\n        element.addClass('edui-active');\r\n\r\n        callback && callback();\r\n    }\r\n});\r\n\r\n\r\n//button 类\r\nUM.ui.define('separator', {\r\n    tpl: '<div class=\"edui-separator\" unselectable=\"on\" onmousedown=\"return false\" ></div>',\r\n    init: function (options) {\r\n        var me = this;\r\n        me.root($($.parseTmpl(me.tpl, options)));\r\n        return me;\r\n    }\r\n});\r\n/**\r\n * @file adapter.js\r\n * @desc adapt ui to editor\r\n * @import core/Editor.js, core/utils.js\r\n */\r\n\r\n(function () {\r\n    var _editorUI = {},\r\n        _editors = {},\r\n        _readyFn = [],\r\n        _activeWidget = null,\r\n        _widgetData = {},\r\n        _widgetCallBack = {},\r\n        _cacheUI = {},\r\n        _maxZIndex = null;\r\n\r\n    utils.extend(UM, {\r\n        defaultWidth : 500,\r\n        defaultHeight : 500,\r\n        registerUI: function (name, fn) {\r\n            utils.each(name.split(/\\s+/), function (uiname) {\r\n                _editorUI[uiname] = fn;\r\n            })\r\n        },\r\n\r\n        setEditor : function(editor){\r\n            !_editors[editor.id] && (_editors[editor.id] = editor);\r\n        },\r\n        registerWidget : function(name,pro,cb){\r\n            _widgetData[name] = $.extend2(pro,{\r\n                $root : '',\r\n                _preventDefault:false,\r\n                root:function($el){\r\n                    return this.$root || (this.$root = $el);\r\n                },\r\n                preventDefault:function(){\r\n                    this._preventDefault = true;\r\n                },\r\n                clear:false\r\n            });\r\n            if(cb){\r\n                _widgetCallBack[name] = cb;\r\n            }\r\n        },\r\n        getWidgetData : function(name){\r\n            return _widgetData[name]\r\n        },\r\n        setWidgetBody : function(name,$widget,editor){\r\n            if(!editor._widgetData){\r\n\r\n                utils.extend(editor,{\r\n                    _widgetData : {},\r\n                    getWidgetData : function(name){\r\n                        return this._widgetData[name];\r\n                    },\r\n                    getWidgetCallback : function(widgetName){\r\n                        var me = this;\r\n                        return function(){\r\n                            return  _widgetCallBack[widgetName].apply(me,[me,$widget].concat(Array.prototype.slice.call(arguments,0)))\r\n                        }\r\n                    }\r\n                })\r\n\r\n            }\r\n            var pro = _widgetData[name];\r\n            if(!pro){\r\n                return null;\r\n            }\r\n            pro = editor._widgetData[name];\r\n            if(!pro){\r\n                pro = _widgetData[name];\r\n                pro = editor._widgetData[name] = $.type(pro) == 'function' ? pro : utils.clone(pro);\r\n            }\r\n\r\n            pro.root($widget.edui().getBodyContainer());\r\n\r\n            pro.initContent(editor,$widget);\r\n            if(!pro._preventDefault){\r\n                pro.initEvent(editor,$widget);\r\n            }\r\n\r\n            pro.width &&  $widget.width(pro.width);\r\n\r\n\r\n        },\r\n        setActiveWidget : function($widget){\r\n            _activeWidget = $widget;\r\n        },\r\n        getEditor: function (id, options) {\r\n            var editor = _editors[id] || (_editors[id] = this.createEditor(id, options));\r\n            _maxZIndex = _maxZIndex ? Math.max(editor.getOpt('zIndex'), _maxZIndex):editor.getOpt('zIndex');\r\n            return editor;\r\n        },\r\n        setTopEditor: function(editor){\r\n            $.each(_editors, function(i, o){\r\n                if(editor == o) {\r\n                    editor.$container && editor.$container.css('zIndex', _maxZIndex + 1);\r\n                } else {\r\n                    o.$container && o.$container.css('zIndex', o.getOpt('zIndex'));\r\n                }\r\n            });\r\n        },\r\n        clearCache : function(id){\r\n            if ( _editors[id]) {\r\n                delete  _editors[id]\r\n            }\r\n        },\r\n        delEditor: function (id) {\r\n            var editor;\r\n            if (editor = _editors[id]) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        ready: function( fn ){\r\n            _readyFn.push( fn );\r\n        },\r\n        createEditor: function (id, opt) {\r\n            var editor = new UM.Editor(opt);\r\n            var T = this;\r\n\r\n            editor.langIsReady ? $.proxy(renderUI,T)() : editor.addListener(\"langReady\", $.proxy(renderUI,T));\r\n            function renderUI(){\r\n\r\n\r\n                var $container = this.createUI('#' + id, editor);\r\n                editor.key=id;\r\n                editor.ready(function(){\r\n                    $.each( _readyFn, function( index, fn ){\r\n                        $.proxy( fn, editor )();\r\n                    } );\r\n                });\r\n                var options = editor.options;\r\n                if(options.initialFrameWidth){\r\n                    options.minFrameWidth = options.initialFrameWidth\r\n                }else{\r\n                    options.minFrameWidth = options.initialFrameWidth = editor.$body.width() || UM.defaultWidth;\r\n                }\r\n\r\n                $container.css({\r\n                    width: options.initialFrameWidth,\r\n                    zIndex:editor.getOpt('zIndex')\r\n                });\r\n\r\n                //ie6下缓存图片\r\n                UM.browser.ie && UM.browser.version === 6 && document.execCommand(\"BackgroundImageCache\", false, true);\r\n\r\n                editor.render(id);\r\n\r\n\r\n                //添加tooltip;\r\n                $.eduitooltip && $.eduitooltip('attachTo', $(\"[data-original-title]\",$container)).css('z-index',editor.getOpt('zIndex')+1);\r\n\r\n                $container.find('a').click(function(evt){\r\n                    evt.preventDefault()\r\n                });\r\n\r\n                editor.fireEvent(\"afteruiready\");\r\n            }\r\n\r\n            return editor;\r\n\r\n        },\r\n        createUI: function (id, editor) {\r\n            var $editorCont = $(id),\r\n                $container = $('<div class=\"edui-container\"><div class=\"edui-editor-body\"></div></div>').insertBefore($editorCont);\r\n            editor.$container = $container;\r\n            editor.container = $container[0];\r\n\r\n            editor.$body = $editorCont;\r\n\r\n            //修正在ie9+以上的版本中，自动长高收起时的，残影问题\r\n            if(browser.ie && browser.ie9above){\r\n                var $span = $('<span style=\"padding:0;margin:0;height:0;width:0\"></span>');\r\n                $span.insertAfter($container);\r\n            }\r\n            //初始化注册的ui组件\r\n            $.each(_editorUI,function(n,v){\r\n                var widget = v.call(editor,n);\r\n                if(widget){\r\n                    _cacheUI[n] = widget;\r\n                }\r\n\r\n            });\r\n\r\n            $container.find('.edui-editor-body').append($editorCont).before(this.createToolbar(editor.options, editor));\r\n\r\n            $container.find('.edui-toolbar').append($('<div class=\"edui-dialog-container\"></div>'));\r\n\r\n\r\n            return $container;\r\n        },\r\n        createToolbar: function (options, editor) {\r\n            var $toolbar = $.eduitoolbar(), toolbar = $toolbar.edui();\r\n            //创建下来菜单列表\r\n\r\n            if (options.toolbar && options.toolbar.length) {\r\n                var btns = [];\r\n                $.each(options.toolbar,function(i,uiNames){\r\n                    $.each(uiNames.split(/\\s+/),function(index,name){\r\n                        if(name == '|'){\r\n                                $.eduiseparator && btns.push($.eduiseparator());\r\n                        }else{\r\n                            var ui = _cacheUI[name];\r\n                            if(name==\"fullscreen\"){\r\n                                ui&&btns.unshift(ui);\r\n                            }else{\r\n                                ui && btns.push(ui);\r\n                            }\r\n                        }\r\n\r\n                    });\r\n                    btns.length && toolbar.appendToBtnmenu(btns);\r\n                });\r\n            } else {\r\n                $toolbar.find('.edui-btn-toolbar').remove()\r\n            }\r\n            return $toolbar;\r\n        }\r\n\r\n    })\r\n\r\n\r\n})();\r\n\r\n\r\n\r\nUM.registerUI('bold italic redo undo underline strikethrough superscript subscript insertorderedlist insertunorderedlist ' +\r\n    'cleardoc selectall link unlink print preview justifyleft justifycenter justifyright justifyfull removeformat horizontal drafts',\r\n    function(name) {\r\n        var me = this;\r\n        var $btn = $.eduibutton({\r\n            icon : name,\r\n            click : function(){\r\n                me.execCommand(name);\r\n            },\r\n            title: this.getLang('labelMap')[name] || ''\r\n        });\r\n\r\n        this.addListener('selectionchange',function(){\r\n            var state = this.queryCommandState(name);\r\n            $btn.edui().disabled(state == -1).active(state == 1)\r\n        });\r\n        return $btn;\r\n    }\r\n);\r\n\r\n\r\n/**\r\n * 全屏组件\r\n */\r\n\r\n(function(){\r\n\r\n    //状态缓存\r\n    var STATUS_CACHE = {},\r\n    //状态值列表\r\n        STATUS_LIST = [ 'width', 'height', 'position', 'top', 'left', 'margin', 'padding', 'overflowX', 'overflowY' ],\r\n        CONTENT_AREA_STATUS = {},\r\n    //页面状态\r\n        DOCUMENT_STATUS = {},\r\n        DOCUMENT_ELEMENT_STATUS = {},\r\n\r\n        FULLSCREENS = {};\r\n\r\n\r\n    UM.registerUI('fullscreen', function( name ){\r\n\r\n        var me = this,\r\n            $button = $.eduibutton({\r\n                'icon': 'fullscreen',\r\n                'title': (me.options.labelMap && me.options.labelMap[name]) || me.getLang(\"labelMap.\" + name),\r\n                'click': function(){\r\n                    //切换\r\n                    me.execCommand( name );\r\n                    UM.setTopEditor(me);\r\n                }\r\n            });\r\n\r\n        me.addListener( \"selectionchange\", function () {\r\n\r\n            var state = this.queryCommandState( name );\r\n            $button.edui().disabled( state == -1 ).active( state == 1 );\r\n\r\n        } );\r\n\r\n        //切换至全屏\r\n        me.addListener('ready', function(){\r\n\r\n            me.options.fullscreen && Fullscreen.getInstance( me ).toggle();\r\n\r\n        });\r\n\r\n        return $button;\r\n\r\n    });\r\n\r\n    UM.commands[ 'fullscreen' ] = {\r\n\r\n        execCommand: function (cmdName) {\r\n\r\n            Fullscreen.getInstance( this ).toggle();\r\n\r\n        },\r\n        queryCommandState: function (cmdName) {\r\n\r\n            return this._edui_fullscreen_status;\r\n        },\r\n        notNeedUndo: 1\r\n\r\n    };\r\n\r\n    function Fullscreen( editor ) {\r\n\r\n        var me = this;\r\n\r\n        if( !editor ) {\r\n            throw new Error('invalid params, notfound editor');\r\n        }\r\n\r\n        me.editor = editor;\r\n\r\n        //记录初始化的全屏组件\r\n        FULLSCREENS[ editor.uid ] = this;\r\n\r\n        editor.addListener('destroy', function(){\r\n            delete FULLSCREENS[ editor.uid ];\r\n            me.editor = null;\r\n        });\r\n\r\n    }\r\n\r\n    Fullscreen.prototype = {\r\n\r\n        /**\r\n         * 全屏状态切换\r\n         */\r\n        toggle: function(){\r\n\r\n            var editor = this.editor,\r\n            //当前编辑器的缩放状态\r\n                _edui_fullscreen_status = this.isFullState();\r\n            editor.fireEvent('beforefullscreenchange', !_edui_fullscreen_status );\r\n\r\n            //更新状态\r\n            this.update( !_edui_fullscreen_status );\r\n\r\n            !_edui_fullscreen_status ? this.enlarge() : this.revert();\r\n\r\n            editor.fireEvent('afterfullscreenchange', !_edui_fullscreen_status );\r\n            if(editor.body.contentEditable === 'true'){\r\n                editor.fireEvent( 'fullscreenchanged', !_edui_fullscreen_status );\r\n            }\r\n\r\n            editor.fireEvent( 'selectionchange' );\r\n\r\n        },\r\n        /**\r\n         * 执行放大\r\n         */\r\n        enlarge: function(){\r\n\r\n            this.saveSataus();\r\n\r\n            this.setDocumentStatus();\r\n\r\n            this.resize();\r\n\r\n        },\r\n        /**\r\n         * 全屏还原\r\n         */\r\n        revert: function(){\r\n\r\n            //还原CSS表达式\r\n            var options = this.editor.options,\r\n                height = /%$/.test(options.initialFrameHeight) ?  '100%' : (options.initialFrameHeight - this.getStyleValue(\"padding-top\")- this.getStyleValue(\"padding-bottom\") - this.getStyleValue('border-width'));\r\n\r\n            $.IE6 && this.getEditorHolder().style.setExpression('height', 'this.scrollHeight <= ' + height + ' ? \"' + height + 'px\" : \"auto\"');\r\n\r\n            //还原容器状态\r\n            this.revertContainerStatus();\r\n\r\n            this.revertContentAreaStatus();\r\n\r\n            this.revertDocumentStatus();\r\n\r\n        },\r\n        /**\r\n         * 更新状态\r\n         * @param isFull 当前状态是否是全屏状态\r\n         */\r\n        update: function( isFull ) {\r\n            this.editor._edui_fullscreen_status = isFull;\r\n        },\r\n        /**\r\n         * 调整当前编辑器的大小, 如果当前编辑器不处于全屏状态， 则不做调整\r\n         */\r\n        resize: function(){\r\n\r\n            var $win = null,\r\n                height = 0,\r\n                width = 0,\r\n                borderWidth = 0,\r\n                paddingWidth = 0,\r\n                editor = this.editor,\r\n                me = this,\r\n                bound = null,\r\n                editorBody = null;\r\n\r\n            if( !this.isFullState() ) {\r\n                return;\r\n            }\r\n\r\n            $win = $( window );\r\n            width = $win.width();\r\n            height = $win.height();\r\n            editorBody = this.getEditorHolder();\r\n            //文本编辑区border宽度\r\n            borderWidth = parseInt( domUtils.getComputedStyle( editorBody, 'border-width' ), 10 ) || 0;\r\n            //容器border宽度\r\n            borderWidth += parseInt( domUtils.getComputedStyle( editor.container, 'border-width' ), 10 ) || 0;\r\n            //容器padding\r\n            paddingWidth += parseInt( domUtils.getComputedStyle( editorBody, 'padding-left' ), 10 ) + parseInt( domUtils.getComputedStyle( editorBody, 'padding-right' ), 10 ) || 0;\r\n\r\n            //干掉css表达式\r\n            $.IE6 && editorBody.style.setExpression( 'height', null );\r\n\r\n            bound = this.getBound();\r\n\r\n            $( editor.container ).css( {\r\n                width: width + 'px',\r\n                height: height + 'px',\r\n                position: !$.IE6 ? 'fixed' : 'absolute',\r\n                top: bound.top,\r\n                left: bound.left,\r\n                margin: 0,\r\n                padding: 0,\r\n                overflowX: 'hidden',\r\n                overflowY: 'hidden'\r\n            } );\r\n\r\n            $( editorBody ).css({\r\n                width: width - 2*borderWidth - paddingWidth + 'px',\r\n                height: height - 2*borderWidth - ( editor.options.withoutToolbar ? 0 : $( '.edui-toolbar', editor.container ).outerHeight() ) - $( '.edui-bottombar', editor.container).outerHeight() + 'px',\r\n                overflowX: 'hidden',\r\n                overflowY: 'auto'\r\n            });\r\n\r\n        },\r\n        /**\r\n         * 保存状态\r\n         */\r\n        saveSataus: function(){\r\n\r\n            var styles = this.editor.container.style,\r\n                tmp = null,\r\n                cache = {};\r\n\r\n            for( var i= 0, len = STATUS_LIST.length; i<len; i++ ) {\r\n\r\n                tmp = STATUS_LIST[ i ];\r\n                cache[ tmp ] = styles[ tmp ];\r\n\r\n            }\r\n\r\n            STATUS_CACHE[ this.editor.uid ] = cache;\r\n\r\n            this.saveContentAreaStatus();\r\n            this.saveDocumentStatus();\r\n\r\n        },\r\n        saveContentAreaStatus: function(){\r\n\r\n            var $holder = $(this.getEditorHolder());\r\n\r\n            CONTENT_AREA_STATUS[ this.editor.uid ] = {\r\n                width: $holder.css(\"width\"),\r\n                overflowX: $holder.css(\"overflowX\"),\r\n                overflowY: $holder.css(\"overflowY\"),\r\n                height: $holder.css(\"height\")\r\n            };\r\n\r\n        },\r\n        /**\r\n         * 保存与指定editor相关的页面的状态\r\n         */\r\n        saveDocumentStatus: function(){\r\n\r\n            var $doc = $( this.getEditorDocumentBody() );\r\n\r\n            DOCUMENT_STATUS[ this.editor.uid ] = {\r\n                overflowX: $doc.css( 'overflowX' ),\r\n                overflowY: $doc.css( 'overflowY' )\r\n            };\r\n            DOCUMENT_ELEMENT_STATUS[ this.editor.uid ] = {\r\n                overflowX: $( this.getEditorDocumentElement() ).css( 'overflowX'),\r\n                overflowY: $( this.getEditorDocumentElement() ).css( 'overflowY' )\r\n            };\r\n\r\n        },\r\n        /**\r\n         * 恢复容器状态\r\n         */\r\n        revertContainerStatus: function(){\r\n            $( this.editor.container ).css( this.getEditorStatus() );\r\n        },\r\n        /**\r\n         * 恢复编辑区状态\r\n         */\r\n        revertContentAreaStatus: function(){\r\n            var holder = this.getEditorHolder(),\r\n                state = this.getContentAreaStatus();\r\n\r\n            if ( this.supportMin() ) {\r\n                delete state.height;\r\n                holder.style.height = null;\r\n            }\r\n\r\n            $( holder ).css( state );\r\n        },\r\n        /**\r\n         * 恢复页面状态\r\n         */\r\n        revertDocumentStatus: function() {\r\n\r\n            var status = this.getDocumentStatus();\r\n            $( this.getEditorDocumentBody() ).css( 'overflowX', status.body.overflowX );\r\n            $( this.getEditorDocumentElement() ).css( 'overflowY', status.html.overflowY );\r\n\r\n        },\r\n        setDocumentStatus: function(){\r\n            $(this.getEditorDocumentBody()).css( {\r\n                overflowX: 'hidden',\r\n                overflowY: 'hidden'\r\n            } );\r\n            $(this.getEditorDocumentElement()).css( {\r\n                overflowX: 'hidden',\r\n                overflowY: 'hidden'\r\n            } );\r\n        },\r\n        /**\r\n         * 检测当前编辑器是否处于全屏状态全屏状态\r\n         * @returns {boolean} 是否处于全屏状态\r\n         */\r\n        isFullState: function(){\r\n            return !!this.editor._edui_fullscreen_status;\r\n        },\r\n        /**\r\n         * 获取编辑器状态\r\n         */\r\n        getEditorStatus: function(){\r\n            return STATUS_CACHE[ this.editor.uid ];\r\n        },\r\n        getContentAreaStatus: function(){\r\n            return CONTENT_AREA_STATUS[ this.editor.uid ];\r\n        },\r\n        getEditorDocumentElement: function(){\r\n            return this.editor.container.ownerDocument.documentElement;\r\n        },\r\n        getEditorDocumentBody: function(){\r\n            return this.editor.container.ownerDocument.body;\r\n        },\r\n        /**\r\n         * 获取编辑区包裹对象\r\n         */\r\n        getEditorHolder: function(){\r\n            return this.editor.body;\r\n        },\r\n        /**\r\n         * 获取编辑器状态\r\n         * @returns {*}\r\n         */\r\n        getDocumentStatus: function(){\r\n            return {\r\n                'body': DOCUMENT_STATUS[ this.editor.uid ],\r\n                'html': DOCUMENT_ELEMENT_STATUS[ this.editor.uid ]\r\n            };\r\n        },\r\n        supportMin: function () {\r\n\r\n            var node = null;\r\n\r\n            if ( !this._support ) {\r\n\r\n                node = document.createElement(\"div\");\r\n\r\n                this._support = \"minWidth\" in node.style;\r\n\r\n                node = null;\r\n\r\n            }\r\n\r\n            return this._support;\r\n\r\n        },\r\n        getBound: function () {\r\n\r\n            var tags = {\r\n                    html: true,\r\n                    body: true\r\n                },\r\n                result = {\r\n                    top: 0,\r\n                    left: 0\r\n                },\r\n                offsetParent = null;\r\n\r\n            if ( !$.IE6 ) {\r\n                return result;\r\n            }\r\n\r\n            offsetParent = this.editor.container.offsetParent;\r\n\r\n            if( offsetParent && !tags[ offsetParent.nodeName.toLowerCase() ] ) {\r\n                tags = offsetParent.getBoundingClientRect();\r\n                result.top = -tags.top;\r\n                result.left = -tags.left;\r\n            }\r\n\r\n            return result;\r\n\r\n        },\r\n        getStyleValue: function (attr) {\r\n            return parseInt(domUtils.getComputedStyle( this.getEditorHolder() ,attr));\r\n        }\r\n    };\r\n\r\n\r\n    $.extend( Fullscreen, {\r\n        /**\r\n         * 监听resize\r\n         */\r\n        listen: function(){\r\n\r\n            var timer = null;\r\n\r\n            if( Fullscreen._hasFullscreenListener ) {\r\n                return;\r\n            }\r\n\r\n            Fullscreen._hasFullscreenListener = true;\r\n\r\n            $( window ).on( 'resize', function(){\r\n\r\n                if( timer !== null ) {\r\n                    window.clearTimeout( timer );\r\n                    timer = null;\r\n                }\r\n\r\n                timer = window.setTimeout(function(){\r\n\r\n                    for( var key in FULLSCREENS ) {\r\n                        FULLSCREENS[ key ].resize();\r\n                    }\r\n\r\n                    timer = null;\r\n\r\n                }, 50);\r\n\r\n            } );\r\n\r\n        },\r\n\r\n        getInstance: function ( editor ) {\r\n\r\n            if ( !FULLSCREENS[editor.uid  ] ) {\r\n                new Fullscreen( editor );\r\n            }\r\n\r\n            return FULLSCREENS[editor.uid  ];\r\n\r\n        }\r\n\r\n    });\r\n\r\n    //开始监听\r\n    Fullscreen.listen();\r\n\r\n})();\r\nUM.registerUI('link image video map formula',function(name){\r\n\r\n    var me = this, currentRange, $dialog,\r\n        opt = {\r\n            title: (me.options.labelMap && me.options.labelMap[name]) || me.getLang(\"labelMap.\" + name),\r\n            url: me.options.UMEDITOR_HOME_URL + 'dialogs/' + name + '/' + name + '.js'\r\n        };\r\n\r\n    var $btn = $.eduibutton({\r\n        icon: name,\r\n        title: this.getLang('labelMap')[name] || ''\r\n    });\r\n    //加载模版数据\r\n    utils.loadFile(document,{\r\n        src: opt.url,\r\n        tag: \"script\",\r\n        type: \"text/javascript\",\r\n        defer: \"defer\"\r\n    },function(){\r\n        //调整数据\r\n        var data = UM.getWidgetData(name);\r\n        if(!data) return;\r\n        if(data.buttons){\r\n            var ok = data.buttons.ok;\r\n            if(ok){\r\n                opt.oklabel = ok.label || me.getLang('ok');\r\n                if(ok.exec){\r\n                    opt.okFn = function(){\r\n                        return $.proxy(ok.exec,null,me,$dialog)()\r\n                    }\r\n                }\r\n            }\r\n            var cancel = data.buttons.cancel;\r\n            if(cancel){\r\n                opt.cancellabel = cancel.label || me.getLang('cancel');\r\n                if(cancel.exec){\r\n                    opt.cancelFn = function(){\r\n                        return $.proxy(cancel.exec,null,me,$dialog)()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        data.width && (opt.width = data.width);\r\n        data.height && (opt.height = data.height);\r\n\r\n        $dialog = $.eduimodal(opt);\r\n\r\n        $dialog.attr('id', 'edui-dialog-' + name).addClass('edui-dialog-' + name)\r\n            .find('.edui-modal-body').addClass('edui-dialog-' + name + '-body');\r\n\r\n        $dialog.edui().on('beforehide',function () {\r\n            var rng = me.selection.getRange();\r\n            if (rng.equals(currentRange)) {\r\n                rng.select()\r\n            }\r\n        }).on('beforeshow', function () {\r\n                var $root = this.root(),\r\n                    win = null,\r\n                    offset = null;\r\n                currentRange = me.selection.getRange();\r\n                if (!$root.parent()[0]) {\r\n                    me.$container.find('.edui-dialog-container').append($root);\r\n                }\r\n\r\n                //IE6下 特殊处理, 通过计算进行定位\r\n                if( $.IE6 ) {\r\n\r\n                    win = {\r\n                        width: $( window ).width(),\r\n                        height: $( window ).height()\r\n                    };\r\n                    offset = $root.parents(\".edui-toolbar\")[0].getBoundingClientRect();\r\n                    $root.css({\r\n                        position: 'absolute',\r\n                        margin: 0,\r\n                        left: ( win.width - $root.width() ) / 2 - offset.left,\r\n                        top: 100 - offset.top\r\n                    });\r\n\r\n                }\r\n                UM.setWidgetBody(name,$dialog,me);\r\n                UM.setTopEditor(me);\r\n        }).on('afterbackdrop',function(){\r\n            this.$backdrop.css('zIndex',me.getOpt('zIndex')+1).appendTo(me.$container.find('.edui-dialog-container'))\r\n            $dialog.css('zIndex',me.getOpt('zIndex')+2)\r\n        }).on('beforeok',function(){\r\n            try{\r\n                currentRange.select()\r\n            }catch(e){}\r\n        }).attachTo($btn)\r\n    });\r\n\r\n\r\n\r\n\r\n    me.addListener('selectionchange', function () {\r\n        var state = this.queryCommandState(name);\r\n        $btn.edui().disabled(state == -1).active(state == 1)\r\n    });\r\n    return $btn;\r\n});\r\nUM.registerUI( 'emotion formula', function( name ){\r\n    var me = this,\r\n        url  = me.options.UMEDITOR_HOME_URL + 'dialogs/' +name+ '/'+name+'.js';\r\n\r\n    var $btn = $.eduibutton({\r\n        icon: name,\r\n        title: this.getLang('labelMap')[name] || ''\r\n    });\r\n\r\n    //加载模版数据\r\n    utils.loadFile(document,{\r\n        src: url,\r\n        tag: \"script\",\r\n        type: \"text/javascript\",\r\n        defer: \"defer\"\r\n    },function(){\r\n        var opt = {\r\n            url : url\r\n        };\r\n        //调整数据\r\n        var data = UM.getWidgetData(name);\r\n\r\n        data.width && (opt.width = data.width);\r\n        data.height && (opt.height = data.height);\r\n\r\n        $.eduipopup(opt).css('zIndex',me.options.zIndex + 1)\r\n            .addClass('edui-popup-' + name)\r\n            .edui()\r\n            .on('beforeshow',function(){\r\n                var $root = this.root();\r\n                if(!$root.parent().length){\r\n                    me.$container.find('.edui-dialog-container').append($root);\r\n                }\r\n                UM.setWidgetBody(name,$root,me);\r\n                UM.setTopEditor(me);\r\n            }).attachTo($btn,{\r\n                offsetTop:-5,\r\n                offsetLeft:10,\r\n                caretLeft:11,\r\n                caretTop:-8\r\n            });\r\n        me.addListener('selectionchange', function () {\r\n            var state = this.queryCommandState(name);\r\n            $btn.edui().disabled(state == -1).active(state == 1);\r\n        });\r\n    });\r\n    return $btn;\r\n\r\n} );\r\nUM.registerUI('imagescale',function () {\r\n    var me = this,\r\n        $imagescale;\r\n\r\n    me.setOpt('imageScaleEnabled', true);\r\n\r\n    if (browser.webkit && me.getOpt('imageScaleEnabled')) {\r\n\r\n        me.addListener('click', function (type, e) {\r\n            var range = me.selection.getRange(),\r\n                img = range.getClosedNode(),\r\n                target = e.target;\r\n\r\n            /* 点击第一个图片的后面,八个角不消失 fix:3652 */\r\n            if (img && img.tagName == 'IMG' && target == img) {\r\n\r\n                if (!$imagescale) {\r\n                    $imagescale = $.eduiscale({'$wrap':me.$container}).css('zIndex', me.options.zIndex);\r\n                    me.$container.append($imagescale);\r\n\r\n                    var _keyDownHandler = function () {\r\n                        $imagescale.edui().hide();\r\n                    }, _mouseDownHandler = function (e) {\r\n                        var ele = e.target || e.srcElement;\r\n                        if (ele && ele.className.indexOf('edui-scale') == -1) {\r\n                            _keyDownHandler(e);\r\n                        }\r\n                    }, timer;\r\n\r\n                    $imagescale.edui()\r\n                        .on('aftershow', function () {\r\n                            $(document).bind('keydown', _keyDownHandler);\r\n                            $(document).bind('mousedown', _mouseDownHandler);\r\n                            me.selection.getNative().removeAllRanges();\r\n                        })\r\n                        .on('afterhide', function () {\r\n                            $(document).unbind('keydown', _keyDownHandler);\r\n                            $(document).unbind('mousedown', _mouseDownHandler);\r\n                            var target = $imagescale.edui().getScaleTarget();\r\n                            if (target.parentNode) {\r\n                                me.selection.getRange().selectNode(target).select();\r\n                            }\r\n                        })\r\n                        .on('mousedown', function (e) {\r\n                            me.selection.getNative().removeAllRanges();\r\n                            var ele = e.target || e.srcElement;\r\n                            if (ele && ele.className.indexOf('edui-scale-hand') == -1) {\r\n                                timer = setTimeout(function() {\r\n                                    $imagescale.edui().hide();\r\n                                }, 200);\r\n                            }\r\n                        })\r\n                        .on('mouseup', function (e) {\r\n                            var ele = e.target || e.srcElement;\r\n                            if (ele && ele.className.indexOf('edui-scale-hand') == -1) {\r\n                                clearTimeout(timer);\r\n                            }\r\n                        });\r\n                }\r\n                $imagescale.edui().show($(img));\r\n\r\n            } else {\r\n                if ($imagescale && $imagescale.css('display') != 'none') $imagescale.edui().hide();\r\n\r\n            }\r\n        });\r\n\r\n        me.addListener('click', function (type, e) {\r\n            if (e.target.tagName == 'IMG') {\r\n                var range = new dom.Range(me.document, me.body);\r\n                range.selectNode(e.target).select();\r\n            }\r\n        });\r\n\r\n    }\r\n});\r\nUM.registerUI('autofloat',function(){\r\n    var me = this,\r\n        lang = me.getLang();\r\n    me.setOpt({\r\n        autoFloatEnabled: true,\r\n        topOffset: 0\r\n    });\r\n    var optsAutoFloatEnabled = me.options.autoFloatEnabled !== false,\r\n        topOffset = me.options.topOffset;\r\n\r\n\r\n    //如果不固定toolbar的位置，则直接退出\r\n    if(!optsAutoFloatEnabled){\r\n        return;\r\n    }\r\n    me.ready(function(){\r\n        var LteIE6 = browser.ie && browser.version <= 6,\r\n            quirks = browser.quirks;\r\n\r\n        function checkHasUI(){\r\n            if(!UM.ui){\r\n                alert(lang.autofloatMsg);\r\n                return 0;\r\n            }\r\n            return 1;\r\n        }\r\n        function fixIE6FixedPos(){\r\n            var docStyle = document.body.style;\r\n            docStyle.backgroundImage = 'url(\"about:blank\")';\r\n            docStyle.backgroundAttachment = 'fixed';\r\n        }\r\n        var\tbakCssText,\r\n            placeHolder = document.createElement('div'),\r\n            toolbarBox,orgTop,\r\n            getPosition=function(element){\r\n                var bcr;\r\n                //trace  IE6下在控制编辑器显隐时可能会报错，catch一下\r\n                try{\r\n                    bcr = element.getBoundingClientRect();\r\n                }catch(e){\r\n                    bcr={left:0,top:0,height:0,width:0}\r\n                }\r\n                var rect = {\r\n                    left: Math.round(bcr.left),\r\n                    top: Math.round(bcr.top),\r\n                    height: Math.round(bcr.bottom - bcr.top),\r\n                    width: Math.round(bcr.right - bcr.left)\r\n                };\r\n                var doc;\r\n                while ((doc = element.ownerDocument) !== document &&\r\n                    (element = domUtils.getWindow(doc).frameElement)) {\r\n                    bcr = element.getBoundingClientRect();\r\n                    rect.left += bcr.left;\r\n                    rect.top += bcr.top;\r\n                }\r\n                rect.bottom = rect.top + rect.height;\r\n                rect.right = rect.left + rect.width;\r\n                return rect;\r\n            };\r\n        var isFullScreening = false;\r\n        function setFloating(){\r\n            if(isFullScreening){\r\n                return;\r\n            }\r\n            var toobarBoxPos = domUtils.getXY(toolbarBox),\r\n                origalFloat = domUtils.getComputedStyle(toolbarBox,'position'),\r\n                origalLeft = domUtils.getComputedStyle(toolbarBox,'left');\r\n            toolbarBox.style.width = toolbarBox.offsetWidth + 'px';\r\n            toolbarBox.style.zIndex = me.options.zIndex * 1 + 1;\r\n            toolbarBox.parentNode.insertBefore(placeHolder, toolbarBox);\r\n            if (LteIE6 || (quirks && browser.ie)) {\r\n                if(toolbarBox.style.position != 'absolute'){\r\n                    toolbarBox.style.position = 'absolute';\r\n                }\r\n                toolbarBox.style.top = (document.body.scrollTop||document.documentElement.scrollTop) - orgTop + topOffset  + 'px';\r\n            } else {\r\n                if(toolbarBox.style.position != 'fixed'){\r\n                    toolbarBox.style.position = 'fixed';\r\n                    toolbarBox.style.top = topOffset +\"px\";\r\n                    ((origalFloat == 'absolute' || origalFloat == 'relative') && parseFloat(origalLeft)) && (toolbarBox.style.left = toobarBoxPos.x + 'px');\r\n                }\r\n            }\r\n        }\r\n        function unsetFloating(){\r\n\r\n            if(placeHolder.parentNode){\r\n                placeHolder.parentNode.removeChild(placeHolder);\r\n            }\r\n            toolbarBox.style.cssText = bakCssText;\r\n        }\r\n\r\n        function updateFloating(){\r\n            var rect3 = getPosition(me.container);\r\n            var offset=me.options.toolbarTopOffset||0;\r\n            if (rect3.top < 0 && rect3.bottom - toolbarBox.offsetHeight > offset) {\r\n                setFloating();\r\n            }else{\r\n                unsetFloating();\r\n            }\r\n        }\r\n        var defer_updateFloating = utils.defer(function(){\r\n            updateFloating();\r\n        },browser.ie ? 200 : 100,true);\r\n\r\n        me.addListener('destroy',function(){\r\n            $(window).off('scroll resize',updateFloating);\r\n            me.removeListener('keydown', defer_updateFloating);\r\n        });\r\n\r\n        if(checkHasUI(me)){\r\n            toolbarBox = $('.edui-toolbar',me.container)[0];\r\n            me.addListener(\"afteruiready\",function(){\r\n                setTimeout(function(){\r\n                    orgTop = $(toolbarBox).offset().top;\r\n                },100);\r\n            });\r\n            bakCssText = toolbarBox.style.cssText;\r\n            placeHolder.style.height = toolbarBox.offsetHeight + 'px';\r\n            if(LteIE6){\r\n                fixIE6FixedPos();\r\n            }\r\n\r\n            $(window).on('scroll resize',updateFloating);\r\n            me.addListener('keydown', defer_updateFloating);\r\n            me.addListener('resize', function(){\r\n                unsetFloating();\r\n                placeHolder.style.height = toolbarBox.offsetHeight + 'px';\r\n                updateFloating();\r\n            });\r\n\r\n            me.addListener('beforefullscreenchange', function (t, enabled){\r\n                if (enabled) {\r\n                    unsetFloating();\r\n                    isFullScreening = enabled;\r\n                }\r\n            });\r\n            me.addListener('fullscreenchanged', function (t, enabled){\r\n                if (!enabled) {\r\n                    updateFloating();\r\n                }\r\n                isFullScreening = enabled;\r\n            });\r\n            me.addListener('sourcemodechanged', function (t, enabled){\r\n                setTimeout(function (){\r\n                    updateFloating();\r\n                },0);\r\n            });\r\n            me.addListener(\"clearDoc\",function(){\r\n                setTimeout(function(){\r\n                    updateFloating();\r\n                },0);\r\n\r\n            })\r\n        }\r\n    })\r\n\r\n\r\n});\r\nUM.registerUI('source',function(name){\r\n    var me = this;\r\n    me.addListener('fullscreenchanged',function(){\r\n        me.$container.find('textarea').width(me.$body.width() - 10).height(me.$body.height())\r\n\r\n    });\r\n    var $btn = $.eduibutton({\r\n        icon : name,\r\n        click : function(){\r\n            me.execCommand(name);\r\n            UM.setTopEditor(me);\r\n        },\r\n        title: this.getLang('labelMap')[name] || ''\r\n    });\r\n\r\n    this.addListener('selectionchange',function(){\r\n        var state = this.queryCommandState(name);\r\n        $btn.edui().disabled(state == -1).active(state == 1)\r\n    });\r\n    return $btn;\r\n});\r\n\r\nUM.registerUI('paragraph fontfamily fontsize', function( name ) {\r\n\r\n    var me = this,\r\n        label = (me.options.labelMap && me.options.labelMap[name]) || me.getLang(\"labelMap.\" + name),\r\n        options = {\r\n            label: label,\r\n            title: label,\r\n            comboboxName: name,\r\n            items: me.options[ name ] || [],\r\n            itemStyles: [],\r\n            value: [],\r\n            autowidthitem: []\r\n        },\r\n        $combox = null,\r\n        comboboxWidget = null;\r\n    if(options.items.length == 0){\r\n        return null;\r\n    }\r\n    switch ( name ) {\r\n\r\n        case 'paragraph':\r\n            options = transForParagraph( options );\r\n            break;\r\n\r\n        case 'fontfamily':\r\n            options = transForFontfamily( options );\r\n            break;\r\n\r\n        case 'fontsize':\r\n            options = transForFontsize( options );\r\n            break;\r\n\r\n    }\r\n\r\n    //实例化\r\n    $combox =  $.eduibuttoncombobox(options).css('zIndex',me.getOpt('zIndex') + 1);\r\n    comboboxWidget =  $combox.edui();\r\n\r\n    comboboxWidget.on('comboboxselect', function( evt, res ){\r\n                        me.execCommand( name, res.value );\r\n                    }).on(\"beforeshow\", function(){\r\n                        if( $combox.parent().length === 0 ) {\r\n                            $combox.appendTo(  me.$container.find('.edui-dialog-container') );\r\n                        }\r\n                        UM.setTopEditor(me);\r\n                    });\r\n\r\n\r\n    //状态反射\r\n    this.addListener('selectionchange',function( evt ){\r\n\r\n        var state  = this.queryCommandState( name ),\r\n            value = this.queryCommandValue( name );\r\n\r\n        //设置按钮状态\r\n        comboboxWidget.button().edui().disabled( state == -1 ).active( state == 1 );\r\n        if(value){\r\n            //设置label\r\n            value = value.replace(/['\"]/g, '').toLowerCase().split(/['|\"]?\\s*,\\s*[\\1]?/);\r\n\r\n            comboboxWidget.selectItemByLabel( value );\r\n        }\r\n\r\n\r\n    });\r\n\r\n    return comboboxWidget.button().addClass('edui-combobox');\r\n\r\n    /**\r\n     * 宽度自适应工具函数\r\n     * @param word 单词内容\r\n     * @param hasSuffix 是否含有后缀\r\n     */\r\n    function wordCountAdaptive ( word, hasSuffix ) {\r\n\r\n        var $tmpNode = $('<span>' ).html( word ).css( {\r\n                display: 'inline',\r\n                position: 'absolute',\r\n                top: -10000000,\r\n                left: -100000\r\n            } ).appendTo( document.body),\r\n            width = $tmpNode.width();\r\n\r\n        $tmpNode.remove();\r\n        $tmpNode = null;\r\n\r\n        if( width < 50 ) {\r\n\r\n            return word;\r\n\r\n        } else {\r\n\r\n            word = word.slice( 0, hasSuffix ? -4 : -1 );\r\n\r\n            if( !word.length ) {\r\n                return '...';\r\n            }\r\n\r\n            return wordCountAdaptive( word + '...', true );\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    //段落参数转换\r\n    function transForParagraph ( options ) {\r\n\r\n        var tempItems = [];\r\n\r\n        for( var key in options.items ) {\r\n\r\n            options.value.push( key );\r\n            tempItems.push( key );\r\n            options.autowidthitem.push( wordCountAdaptive( key ) );\r\n\r\n        }\r\n\r\n        options.items = tempItems;\r\n        options.autoRecord = false;\r\n\r\n        return options;\r\n\r\n    }\r\n\r\n    //字体参数转换\r\n    function transForFontfamily ( options ) {\r\n\r\n        var temp = null,\r\n            tempItems = [];\r\n\r\n        for( var i = 0, len = options.items.length; i < len; i++ ) {\r\n\r\n            temp = options.items[ i ].val;\r\n            tempItems.push( temp.split(/\\s*,\\s*/)[0] );\r\n            options.itemStyles.push('font-family: ' + temp);\r\n            options.value.push( temp );\r\n            options.autowidthitem.push( wordCountAdaptive( tempItems[ i ] ) );\r\n\r\n        }\r\n\r\n        options.items = tempItems;\r\n\r\n        return options;\r\n\r\n    }\r\n\r\n    //字体大小参数转换\r\n    function transForFontsize ( options ) {\r\n\r\n        var temp = null,\r\n            tempItems = [];\r\n\r\n        options.itemStyles = [];\r\n        options.value = [];\r\n\r\n        for( var i = 0, len = options.items.length; i < len; i++ ) {\r\n\r\n            temp = options.items[ i ];\r\n            tempItems.push( temp );\r\n            options.itemStyles.push('font-size: ' + temp +'px');\r\n\r\n        }\r\n\r\n        options.value = options.items;\r\n        options.items = tempItems;\r\n        options.autoRecord = false;\r\n\r\n        return options;\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\nUM.registerUI('forecolor backcolor', function( name ) {\r\n    function getCurrentColor() {\r\n        return domUtils.getComputedStyle( $colorLabel[0], 'background-color' );\r\n    }\r\n\r\n    var me = this,\r\n        $colorPickerWidget = null,\r\n        $colorLabel = null,\r\n        $btn = null;\r\n\r\n    //querycommand\r\n    this.addListener('selectionchange', function(){\r\n\r\n        var state = this.queryCommandState( name );\r\n        $btn.edui().disabled( state == -1 ).active( state == 1 );\r\n\r\n    });\r\n\r\n    $btn = $.eduicolorsplitbutton({\r\n        icon: name,\r\n        caret: true,\r\n        name: name,\r\n        title: me.getLang(\"labelMap\")[name],\r\n        click: function() {\r\n            me.execCommand( name, getCurrentColor() );\r\n        }\r\n    });\r\n\r\n    $colorLabel = $btn.edui().colorLabel();\r\n\r\n    $colorPickerWidget = $.eduicolorpicker({\r\n        name: name,\r\n        lang_clearColor: me.getLang('clearColor') || '',\r\n        lang_themeColor: me.getLang('themeColor') || '',\r\n        lang_standardColor: me.getLang('standardColor') || ''\r\n    })\r\n        .on('pickcolor', function( evt, color ){\r\n            window.setTimeout( function(){\r\n                $colorLabel.css(\"backgroundColor\", color);\r\n                me.execCommand( name, color );\r\n            }, 0 );\r\n        })\r\n        .on('show',function(){\r\n            UM.setActiveWidget( colorPickerWidget.root() );\r\n        }).css('zIndex',me.getOpt('zIndex') + 1);\r\n\r\n    $btn.edui().on('arrowclick',function(){\r\n        if(!$colorPickerWidget.parent().length){\r\n            me.$container.find('.edui-dialog-container').append($colorPickerWidget);\r\n        }\r\n        $colorPickerWidget.edui().show($btn,{\r\n            caretDir:\"down\",\r\n            offsetTop:-5,\r\n            offsetLeft:8,\r\n            caretLeft:11,\r\n            caretTop:-8\r\n        });\r\n        UM.setTopEditor(me);\r\n    }).register('click', $btn, function () {\r\n            $colorPickerWidget.edui().hide()\r\n        });\r\n\r\n    return $btn;\r\n\r\n});\r\n\r\n})(jQuery);/**\r\n * 中文语言包\r\n */\r\nUM.I18N['zh-cn'] = {\r\n    'labelMap':{\r\n        'anchor':'锚点', 'undo':'撤销', 'redo':'重做', 'bold':'加粗', 'indent':'首行缩进', 'snapscreen':'截图',\r\n        'italic':'斜体', 'underline':'下划线', 'strikethrough':'删除线', 'subscript':'下标','fontborder':'字符边框',\r\n        'superscript':'上标', 'formatmatch':'格式刷', 'source':'源代码', 'blockquote':'引用',\r\n        'pasteplain':'纯文本粘贴模式', 'selectall':'全选', 'print':'打印', 'preview':'预览',\r\n        'horizontal':'分隔线', 'removeformat':'清除格式', 'time':'时间', 'date':'日期',\r\n        'unlink':'取消链接', 'insertrow':'前插入行', 'insertcol':'前插入列', 'mergeright':'右合并单元格', 'mergedown':'下合并单元格',\r\n        'deleterow':'删除行', 'deletecol':'删除列', 'splittorows':'拆分成行', 'splittocols':'拆分成列', 'splittocells':'完全拆分单元格',\r\n        'mergecells':'合并多个单元格', 'deletetable':'删除表格', 'cleardoc':'清空文档','insertparagraphbeforetable':\"表格前插入行\",'insertcode':'代码语言','fontfamily':'字体', 'fontsize':'字号', 'paragraph':'段落格式', 'image':'图片',\r\n        'edittable':'表格属性','edittd':'单元格属性', 'link':'超链接','emotion':'表情', 'spechars':'特殊字符', 'searchreplace':'查询替换', 'map':'百度地图', 'gmap':'Google地图',\r\n        'video':'视频', 'help':'帮助', 'justifyleft':'居左对齐', 'justifyright':'居右对齐', 'justifycenter':'居中对齐',\r\n        'justifyjustify':'两端对齐', 'forecolor':'字体颜色', 'backcolor':'背景色', 'insertorderedlist':'有序列表',\r\n        'insertunorderedlist':'无序列表', 'fullscreen':'全屏', 'directionalityltr':'从左向右输入', 'directionalityrtl':'从右向左输入',\r\n        'rowspacingtop':'段前距', 'rowspacingbottom':'段后距', 'highlightcode':'插入代码', 'pagebreak':'分页', 'insertframe':'插入Iframe', 'imagenone':'默认',\r\n        'imageleft':'左浮动', 'imageright':'右浮动', 'attachment':'附件', 'imagecenter':'居中', 'wordimage':'图片转存',\r\n        'lineheight':'行间距','edittip' :'编辑提示','customstyle':'自定义标题', 'autotypeset':'自动排版', 'webapp':'百度应用',\r\n        'touppercase':'字母大写', 'tolowercase':'字母小写','background':'背景','template':'模板','scrawl':'涂鸦','music':'音乐','inserttable':'插入表格',\r\n        'drafts': '草稿箱', 'formula':'数学公式'\r\n\r\n\r\n    },\r\n    'paragraph':{'p':'段落', 'h1':'标题 1', 'h2':'标题 2', 'h3':'标题 3', 'h4':'标题 4', 'h5':'标题 5', 'h6':'标题 6'},\r\n    'fontfamily':{\r\n        'songti':'宋体',\r\n        'kaiti':'楷体',\r\n        'heiti':'黑体',\r\n        'lishu':'隶书',\r\n        'yahei':'微软雅黑',\r\n        'andaleMono':'andale mono',\r\n        'arial': 'arial',\r\n        'arialBlack':'arial black',\r\n        'comicSansMs':'comic sans ms',\r\n        'impact':'impact',\r\n        'timesNewRoman':'times new roman'\r\n    },\r\n    'ok':\"确认\",\r\n    'cancel':\"取消\",\r\n    'closeDialog':\"关闭对话框\",\r\n    'tableDrag':\"表格拖动必须引入uiUtils.js文件！\",\r\n    'autofloatMsg':\"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!\",\r\n    'anthorMsg':\"链接\",\r\n    'clearColor':'清空颜色',\r\n    'standardColor':'标准颜色',\r\n    'themeColor':'主题颜色',\r\n    'property':'属性',\r\n    'default':'默认',\r\n    'modify':'修改',\r\n    'justifyleft':'左对齐',\r\n    'justifyright':'右对齐',\r\n    'justifycenter':'居中',\r\n    'justify':'默认',\r\n    'clear':'清除',\r\n    'anchorMsg':'锚点',\r\n    'delete':'删除',\r\n    'clickToUpload':\"点击上传\",\r\n    'unset':'尚未设置语言文件',\r\n    't_row':'行',\r\n    't_col':'列',\r\n    'more':'更多',\r\n    'pasteOpt':'粘贴选项',\r\n    'pasteSourceFormat':\"保留源格式\",\r\n    'tagFormat':'只保留标签',\r\n    'pasteTextFormat':'只保留文本',\r\n\r\n    //===============dialog i18N=======================\r\n    'image':{\r\n        'static':{\r\n            'lang_tab_local':\"本地上传\",\r\n            'lang_tab_imgSearch':\"网络图片\",\r\n            'lang_input_dragTip':\"支持图片拖拽上传\",\r\n            'lang_btn_add':\"添加\"\r\n        },\r\n        'uploadError': '上传出错'\r\n    },\r\n    'emotion':{\r\n        'static':{\r\n            'lang_input_choice':'精选',\r\n            'lang_input_Tuzki':'兔斯基',\r\n            'lang_input_BOBO':'BOBO',\r\n            'lang_input_lvdouwa':'绿豆蛙',\r\n            'lang_input_babyCat':'baby猫',\r\n            'lang_input_bubble':'泡泡',\r\n            'lang_input_youa':'有啊'\r\n        }\r\n    },\r\n    'gmap':{\r\n        'static':{\r\n            'lang_input_address':'地址',\r\n            'lang_input_search':'搜索',\r\n            'address':{'value':\"北京\"}\r\n        },\r\n        'searchError':'无法定位到该地址!'\r\n    },\r\n    'link':{\r\n        'static':{\r\n            'lang_input_text':'文本内容：',\r\n            'lang_input_url':'链接地址：',\r\n            'lang_input_title':'标题：',\r\n            'lang_input_target':'是否在新窗口打开：'\r\n        },\r\n        'validLink':'只支持选中一个链接时生效',\r\n        'httpPrompt':'您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀'\r\n    },\r\n    'map':{\r\n        'static':{\r\n            'lang_city':\"城市\",\r\n            'lang_address':\"地址\",\r\n            'city':{'value':\"北京\"},\r\n            'lang_search':\"搜索\",\r\n            'lang_dynamicmap':\"插入动态地图\"\r\n        },\r\n        'cityMsg':\"请选择城市\",\r\n        'errorMsg':\"抱歉，找不到该位置！\"\r\n    },\r\n    'video':{\r\n        'static':{\r\n            'lang_tab_insertV':\"插入视频\",\r\n            'lang_video_url':\"视频网址\",\r\n            'lang_video_size':\"视频尺寸\",\r\n            'lang_videoW':\"宽度\",\r\n            'lang_videoH':\"高度\",\r\n            'lang_alignment':\"对齐方式\",\r\n            'videoSearchTxt':{'value':\"请输入搜索关键字！\"},\r\n            'videoType':{'options':[\"全部\", \"热门\", \"娱乐\", \"搞笑\", \"体育\", \"科技\", \"综艺\"]},\r\n            'videoSearchBtn':{'value':\"百度一下\"},\r\n            'videoSearchReset':{'value':\"清空结果\"}\r\n        },\r\n        'numError':\"请输入正确的数值，如123,400\",\r\n        'floatLeft':\"左浮动\",\r\n        'floatRight':\"右浮动\",\r\n        'default':\"默认\",\r\n        'block':\"独占一行\",\r\n        'urlError':\"输入的视频地址有误，请检查后再试！\",\r\n        'loading':\" &nbsp;视频加载中，请等待……\",\r\n        'clickToSelect':\"点击选中\",\r\n        'goToSource':'访问源视频',\r\n        'noVideo':\" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！\"\r\n    },\r\n    'formula':{\r\n        'static':{\r\n            'lang_tab_common':'常用公式',\r\n            'lang_tab_symbol':'符号',\r\n            'lang_tab_letter':'字母'\r\n        }\r\n    }\r\n};"]}