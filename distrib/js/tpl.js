/** 
 * -------------------------------------------------
 * Copyright (c) 2014, All rights reserved. 
 * Hualala-Merchant-Management
 * 
 * @version : 0.1.0
 * @author : HuHao
 * @description : Hualala Merchant Management System.  
 * -------------------------------------------------
 */ 

(function ($, window) {
	IX.ns("Hualala");
	var TemplateList = new IX.IListManager();
	// 顶部提示框模板
	var tpl_site_toptip = [
		'<div id="site_toptip_{{id}}" class="site-toptip alert alert-{{type}} fade in">',
			'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">',
				'<span aria-hidden="true">&times;</span>',
				'<span class="sr-only">关闭</span>',
			'</button>',
			'<p>{{msg}}</p>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_toptip', tpl_site_toptip);

	// 模态窗口模板
	var tpl_modal_dialog = [
		'<div class="modal fade {{clz}}" id="{{id}}" data-backdrop="{{backdrop}}">',
			'<div class="modal-dialog">',
				'<div class="modal-content">',
					'<div class="modal-header">',
						'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',
						'<h4 class="modal-title">{{title}}</h4>',
					'</div>',
					'<div class="modal-body"></div>',
					'<div class="modal-footer">',
                        '<button class="btn btn-default btn-close" data-dismiss="modal">取消</button>',
                        '<button class="btn btn-warning btn-ok">保存</button>',
                    '</div>',
				'</div>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_modal_dialog', tpl_modal_dialog);

	var tpl_empty_placeholder = [
		'<div class="alert alert-warning {{clz}}" role="alert">',
			'<strong>{{{msg}}}</strong>',
		'</div>'
	].join('');
	TemplateList.register('tpl_empty_placeholder', tpl_empty_placeholder);

	// 页面整体Layout模板
	var tpl_site_layout = [
		'<div id="ix_wrapper">',
			// Header 
            // @NOTE: 
			'<div class="navbar navbar-default navbar-fixed-top ix-header" role="navigation">',
				'<div class="header-line clearfix">',
					'<div class="container">',
						// @NOTE: for 1.1 delete top bar link and add site logo
						// '<div class="hidden-xs pull-left">',
						// 	// '<a href="{{header.pcClientPath}}" target="_blank"><span class="icon-pcclient"></span>哗啦啦PC客户端</a>',
						// 	'<a href="{{header.hualalaUrl}}" target="_blank"><span class="icon-jumpsite"></span>访问哗啦啦网站</a>',
						// '</div>',
						'<div class=" pull-left">',
							'<a class="logo" href="{{header.merchantRoot}}" title="哗啦啦商户中心">',
								'<img alt="哗啦啦商户中心" src="{{header.logo}}" />',
							'</a>',
							'<h1 class="ix-group-brand ">{{header.groupName}}</h1>',
						'</div>',
						'{{#if header.isLogin}}',
						'<div class="pull-right hidden">',
							'<span class="hello">Hi</span><span class="user">{{header.loginName}},</span>',
							'<a class="logout" href="{{header.logoutPath}}">退出</a>',
						'</div>',
						'<div class="nav navbar-nav navbar-right user-mgr">',
							'<div class="dropdown">',
								'<a id="user_mgr" class="btn btn-link user" href="javascript:void(0);"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',
									'{{header.loginName}}',
									'<span class="caret"></span>',
								'</a>',
								'<ul class="dropdown-menu" role="menu" aria-labelledby="user_mgr">',
									'{{#if header.isSuperAdmin}}',
									'{{else}}',
										'<li>',
											'<a class="btn btn-link btn-block" href="javascript:void(0);" data-target="bind_mobile">绑定手机</a>',
										'</li>',
									'{{/if}}',
									'<li>',
										'<a class="btn btn-link btn-block" href="javascript:void(0);" data-target="reset_pwd">重置密码</a>',
									'</li>',
									'<li class="divider"></li>',
									'<li>',
										'<a class="btn btn-link btn-block logout" href="{{header.logoutPath}}">退出</a>',
									'</li>',
								'</ul>',
							'</div>',
						'</div>',
						'{{else}}',
						'<div class="pull-right">',
							'<span class="hello">Hi,</span><span class="">欢迎来到哗啦啦商户中心</span>',
						'</div>',
						'{{/if}}',
					'</div>',
				'</div>',
				'<div class="container">',
					'<div class="navbar-header">',
						// @NOTE for 1.1 delete site logo in navbar and move to topbar
						// '<a class="navbar-brand logo" href="{{header.merchantRoot}}" title="哗啦啦商户中心"><img alt="哗啦啦商户中心" src="{{header.logo}}" /></a>',
						// '<h1 class="ix-group-brand">{{header.groupName}}</h1>',
					'</div>',
				'</div>',
			'</div>',
			// Body
			'<div class="ix-body">',
				'<div class="container">',
				'</div>',
			'</div>',
			// Footer
             // @NOTE: For 1.1 hidden site footer (#4105)
			'<div class="ix-footer navbar-fixed-bottom in hidden">',
				'<div class="btn-toggle">',
					'<div class="toggle-icon"><span></span></div>',
				'</div>',
				'<div class="container footer-cnt">',
					'<p class="links">',
						'<a href="{{footer.aboutPath}}">关于哗啦啦商户中心</a>',
						'<a href="{{footer.contactPath}}">联系我们</a>',
					'</p>',
					'<p class="copyright">',
						'<img alt="Gozap" src="{{footer.gozapLogo}}"/>',
						'<span class="">&nbsp;旗下网站&nbsp;&copy;&nbsp;2014&nbsp;hualala.com&nbsp;京IPC备14019284号-3</span>',
					'</p>',
				'</div>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_layout', tpl_site_layout);

	// 站点导航栏
	var tpl_site_navbar = [
		'<div class="navbar-collapse collapse" id="site_navbar">',
			'<ul class="nav nav-justified nav-pills navbar-right">',
				'{{#each items}}',
					'{{#if isSubNav}}',
						'<li class="dropdown {{active}} {{disabled}}">',
							'{{#if disabled}}',
								'<a class="" href="javascript:void(0);" data-page-type="{{name}}">{{label}}',
									'<span class="caret"></span>',
								'</a>',
							'{{else}}',
								'<a class="dropdown-toggle " data-toggle="dropdown" data-page-type="{{name}}" href="javascript:void(0);">',
									'{{label}}',
									'<span class="caret"></span>',
								'</a>',
								'<ul class="dropdown-menu" role="menu">',
								'{{#each subnavs}}',
									'<li class="{{active}} {{disabled}}">',
										'<a href="{{path}}" data-page-type="{{name}}"  >{{label}}</a>',
									'</li>',
								'{{/each}}',
								'</ul>',
							'{{/if}}',
						'</li>',
					'{{else}}',
						'<li class="{{active}} {{disabled}}">',
							'{{#if noPath}}',
								'<a href="javascript:void(0);" data-page-type="{{name}}" >{{label}}</a>',
							'{{else}}',
								'<a href="{{path}}" data-page-type="{{name}}" >{{label}}</a>',
							'{{/if}}',
						'</li>',
					'{{/if}}',
					
				// <li class="active"><a href="#">店铺管理</a></li>',
				// <li class=""><a href="#about">结算</a></li>',
				// <li><a href="#contact">订单</a></li>',
				// <li><a href="#contact">业务设置</a></li>',
				// <li><a href="#contact">帐号管理</a></li>',
				'{{/each}}',
			'</ul>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_navbar', tpl_site_navbar);

	// 小屏幕下，站点导航栏的触发按钮
	var tpl_site_navbarToggle = [
		// '<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">',
		'<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="{{target}}">',
			'<span class="sr-only">Toggle navigation</span>',
			'<span class="icon-bar"></span>',
			'<span class="icon-bar"></span>',
			'<span class="icon-bar"></span>',
		'</button>'
	].join('');
	TemplateList.register('tpl_site_navbarToggle', tpl_site_navbarToggle);

	// 嗅探到低版本IE浏览器后，给出高级浏览器的下载链接和相关友好提示
	var tpl_site_browserSupport = [
		'<div id="ix_wrapper">',
			'<div class="container">',
				'<div class="jumbotron support-box">',
					'<h1 class="mb-12">让管理店铺变得更加高大上',
                        '<a class="btn btn-primary btn-lg pull-right" role="button">跳过提示，继续访问</a>',
                    '</h1>',
					'<p>{{{msg}}}</p>',
					'<p>',
						'<ul class="media-list">',
						'{{#each items}}',
							'<li class="media">',
								'<a class="media-left " href="{{href}}" target="_blank">',
									// '<img src="{{icon}}" alt="{{name}}" width="64" height="64" />',
									'<span class="{{icon}}" alt="{{name}}" ></span>',
								'</a>',
								'<div class="media-body">',
									'<h3 class="media-heading">',
										'<a href="{{href}}"><strong>{{name}}</strong></a>',
									'</h3>',
									'<p>{{desc}}</p>',
								'</div>',
							'</li>',
						'{{/each}}',
						'</ul>',
					'</p>',
					'<p class="clearfix"><a class="btn btn-primary btn-lg pull-right" role="button">跳过提示，继续访问</a></p>',
				'</div>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_browserSupport', tpl_site_browserSupport);

	// 登录页面
	var tpl_site_login = [
		'<div class="jumbotron login-box">',
			'<div class="row">',
				'<div class="hidden-xs col-sm-7 col-md-7 col-lg-7 login-pic">',
					'<img alt="pic" src="{{bannerImg}}" />',
				'</div>',
				'<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">',
					'<div class="panel panel-warning panel-login">',
						'<div class="panel-heading">',
							'<h3 class="panel-title">立即登录</h3>',
						'</div>',
						'<div class="panel-body">',

							'<div class="form-horizontal">',
								'<!-- Text input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<input id="group_name" name="group_name" type="text" placeholder="请输入主账号" autocomplete="off" class="form-control input-md" tabIndex="1">',
									'</div>',
								'</div>',
								'<!-- Text input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<input id="group_subname" name="group_subname" type="text" placeholder="请输入子账号" autocomplete="off" class="form-control input-md" tabIndex="2" >',
									'</div>',
								'</div>',
								'<!-- Password input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<input id="login_pwd" name="login_pwd" type="password" placeholder="请输入登录密码" autocomplete="off" class="form-control input-md" tabIndex="3" >',
									'</div>',
								'</div>',
								'<!-- Auth code input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-xs-8 col-sm-8 col-md-7 col-lg-7">',
										'<input id="login_auth" name="login_auth" type="text" placeholder="请输入验证码" autocomplete="off" class="form-control input-md" tabIndex="4" >',
									'</div>',
									'<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">',
										'<div class="ix-authcode">',
											'<img alt="动态验证码" class="auth-img pull-right hidden" src=""/>',
											// '<input type="hidden" name="auth_code" id="auth_code" />',
											'<div class="progress ">',
												'<div class="progress-bar progress-bar-warning progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">',
													// '<span class="sr-only">45% Complete</span>',
												'</div>',
											'</div>',
										'</div>',
									'</div>',
								'</div>',
								'<!-- Button -->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<button type="submit" id="login_sub" name="login_sub" class="btn btn-warning btn-lg btn-block " tabIndex="5">登录</button>',
										'<div class="progress hidden">',
											'<div class="progress-bar progress-bar-warning progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">',
												// '<span class="sr-only">45% Complete</span>',
											'</div>',
										'</div>',
									'</div>',
								'</div>',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<a class="btn btn-link pull-left btn-change-mode" data-mode="mobile" href="javascript:void(0);">忘记密码？</a>',
									'</div>',
								'</div>',
							'</div>',
						'</div>',
					'</div>',
					'<div class="panel panel-warning panel-forget-pwd hidden">',
						'<div class="panel-heading">',
							'<h3 class="panel-title">手机动态密码登录</h3>',
						'</div>',
						'<div class="panel-body">',
							'<div class="form-horizontal">',
								'<!-- Text input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<input id="group_name" name="group_name" type="text" placeholder="请输入主账号" autocomplete="off" class="form-control input-md" tabIndex="1">',
									'</div>',
								'</div>',
								'<!-- Text input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<input id="group_mobile" name="group_mobile" type="text" placeholder="请输入子账号绑定的手机号" autocomplete="off" class="form-control input-md" tabIndex="2" >',
									'</div>',
								'</div>',
								'<!-- Text input-->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-xs-7 col-md-6 col-lg-6">',
										'<input id="mobile_pwd" name="mobile_pwd" type="text" placeholder="请输入短信动态密码" autocomplete="off" class="form-control input-md" tabIndex="2" >',
									'</div>',
									'<div class="col-xs-4 col-md-4 col-lg-4">',
										'<button class="btn btn-warning  btn-mobile-pwd" data-loading-text="发送中...">获取动态密码</button>',
									'</div>',
								'</div>',
								'<!-- Button -->',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<button type="submit" id="login_mobile" name="login_mobile" class="btn btn-warning btn-lg btn-block " tabIndex="5">登录</button>',
										'<div class="progress hidden">',
											'<div class="progress-bar progress-bar-warning progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">',
												// '<span class="sr-only">45% Complete</span>',
											'</div>',
										'</div>',
									'</div>',
								'</div>',
								'<div class="form-group">',
									'<div class="col-md-offset-1 col-md-10">',
										'<a class="btn btn-link pull-right btn-change-mode" data-mode="common" href="javascript:void(0);">返回登录</a>',
									'</div>',
								'</div>',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_login', tpl_site_login);

	// 首页
	var tpl_site_homepage = [
        '<div id="brandLogo" class="clearfix">',
            '<img src="" alt="" width="64" height="64" />',
            '<a href="javascript:;" class="btn btn-link">编辑logo图片</a>',
            '<a href="{{agentPath}}" class="btn btn-success btn-lg m-t mr-6 foreward pull-right">下载代理程序</a>',
        '</div>',
		'<div class="home-page home-brick">',
			'{{#each bricks}}',
				'<div class="{{brickClz}}">',
					'<div class="{{itemClz}} x-mul-vertical-middle"  data-pagename="{{name}}">',
						'<div class="item  x-v-m-out">',
							'<div class="x-v-m-in">',
								'<div class="format">',
									'<span class="{{icon}}"></span>',
									'<h3>{{title}}</h3>',
									'<p class="hidden-xs">{{label}}</p>',
								'</div>',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'{{/each}}',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_homepage', tpl_site_homepage);

	// 面包屑
	var tpl_site_breadcrumb = [
		'<ol class="breadcrumb x-bread-crumb {{clz}}">',
			'{{#each items}}',
				'{{#if isLastNode}}',
					'<li class="{{clz}} active">',
						'{{{label}}}',
					'</li>',
				'{{else}}',
					'<li class="{{clz}}">',
						'<a href="javascript:void(0);" data-name="{{name}}" data-href="{{path}}">{{label}}</a>',
					'</li>',
				'{{/if}}',
			'{{/each}}',
		'</ol>'
	].join('');
	TemplateList.register('tpl_site_breadcrumb', tpl_site_breadcrumb);

    // 上传图片对话框模板
    var tpl_site_uploadimg = [
        '<div class="modal fade" id="swfUploadImgDialog" tabindex="-1">',
        '<div class="modal-dialog">',
        '<div class="modal-content">',
            '<div class="modal-header">',
                '<button type="button" class="close" data-dismiss="modal">&times;</button>',
                '<h4 class="modal-title">上传图片</h4>',
            '</div>',
            '<div class="modal-body">',
                '<object type="application/x-shockwave-flash" ',
                    'id="hualalaImageUpload" name="hualalaImageUpload" ',
                    'data="{{swfSrc}}" ',
                    'width="500" height="375">',
                    '<param name="quality" value="high">',
                    '<param name="allowscriptaccess" value="always">',
                    '<param name="wmode" value="transparent">',
                    '<param name="flashvars" value="{{args}}">',
                '</object>',
            '</div>',
        '</div>',
        '</div>',
        '</div>'].join('');
    TemplateList.register('tpl_site_uploadimg', tpl_site_uploadimg);

    var tpl_site_modal_btns = [
		'{{#each btns}}',
			'<button type="button" class="btn {{clz}}" name="{{name}}">{{label}}</button>',
		'{{/each}}'
	].join('');
	TemplateList.register('tpl_site_modal_btns', tpl_site_modal_btns);


	// 复杂数据表格模板
	var tpl_cmpx_datagrid = [
		'<div class="table-responsive {{clz}}">',
			'<table class="table {{tblClz}}">',
				'<thead>',
					'{{#each thead}}',
						'<tr class="{{clz}}">',
							'{{#each cols}}',
								'<th class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">{{{label}}}</th>',
							'{{/each}}',
						'</tr>',
					'{{/each}}',
				'</thead>',
				'{{#if isEmpty}}',
					'<tbody>',
						'<tr>',
							'<td colspan="{{colCount}}"><p class="text-center">无结果</p></td>',
						'</tr>',
					'</tbody>',
				'{{else}}',
					'<tbody>',
						'{{#each rows}}',
							'<tr class="{{clz}}">',
								'{{#each cols}}',
									'<td class="{{clz}}">',
										'{{#chkColType type type="button"}}',
											'{{> colBtns}}',
										'{{/chkColType}}',
										'{{#chkColType type type="text"}}',
											'<p data-value="{{value}}" title="{{title}}">{{{text}}}</p>',
										'{{/chkColType}}',
									'</td>',
								'{{/each}}',
							'</tr>',
						'{{/each}}',
					'</tbody>',
					'<tfoot>',
						'{{#each tfoot}}',
							'<tr class="{{clz}}">',
								'{{#each cols}}',
									'<th class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">',
										'<p data-value="{{value}}" >{{{text}}}</p>',
									'</th>',
								'{{/each}}',
							'</tr>',
						'{{/each}}',
					'</tfoot>',
				'{{/if}}',
			'</table>',
		'</div>'
	].join('');
	TemplateList.register('tpl_cmpx_datagrid', tpl_cmpx_datagrid);

	// 基础数据表格模版
	var tpl_base_datagrid = [
		'<div class="table-responsive {{clz}}">',
			'<table class="table {{tblClz}}">',
				'<thead>',
					'<tr>',
						'{{#each thead}}',
							'<th class="{{clz}}">{{{label}}}</th>',
						'{{/each}}',
					'</tr>',
				'</thead>',
				'{{#if isEmpty}}',
					'<tbody>',
						'<tr>',
							'<td colspan="{{colCount}}"><p class="text-center">无结果</p></td>',
						'</tr>',
					'</tbody>',
				'{{else}}',
					'<tbody>',
						'{{#each rows}}',
							'<tr class="{{clz}}">',
								'{{#each cols}}',
									'<td class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">',
										'{{#chkColType type type="button"}}',
											'{{> colBtns}}',
										'{{/chkColType}}',
										'{{#chkColType type type="text"}}',
											'<p data-value="{{value}}">{{{text}}}</p>',
										'{{/chkColType}}',
									'</td>',
								'{{/each}}',
							'</tr>',
							'{{#if subRows}}',
								'{{#each subRows}}',
									'<tr class="{{clz}}">',
										'{{#each cols}}',
											'<td class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">',
												'{{{html}}}',
											'</td>',
										'{{/each}}',
									'</tr>',
								'{{/each}}',
							'{{/if}}',
						'{{/each}}',
					'</tbody>',
					'<tfoot>',
						'<tr>',
							'{{#each tfoot}}',
								'<tr class="{{clz}}">',
									'{{#each cols}}',
										'<th class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">',
											'<p data-value="{{value}}" >{{{text}}}</p>',
										'</th>',
									'{{/each}}',
								'</tr>',
							'{{/each}}',
						'</tr>',
					'</tfoot>',
				'{{/if}}',
			'</table>',
		'</div>'
	].join('');
	TemplateList.register('tpl_base_datagrid', tpl_base_datagrid);
	// 基础数据表格操作列
	var tpl_base_grid_colbtns = [
		'<div class="{{clz}}">',
			'{{#each btns}}',
				'<a href="{{link}}" class="{{clz}}" data-id="{{id}}" data-key="{{key}}" data-type="{{type}}">',
					'{{{label}}}',
				'</a>',
			'{{/each}}',
		'</div>'
	].join('');
	TemplateList.register('tpl_base_grid_colbtns', tpl_base_grid_colbtns);

	// 进度条
	var tpl_site_progress = [
		'<div class="progress">',
			'<div class="progress-bar {{progressClz}}" role="progressbar" aria-valuenow="{{start}}" aria-valuemin="{{min}}" aria-valuemax="{{max}}" style="width:{{percent}}" >',
				'<span class="sr-only">{{percent}}</span>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_progress', tpl_site_progress);

	// 关于我们
	var tpl_site_about = [
		'<div class="ix-body about-us">',
			'<div class="banner">',
				'<div class="jumbotron ">',
					'<div class="container">',
						'<p>随时随地管门店<br/>品牌扩张更方便</p>',
						'<div class="ad-pic animation"></div>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="container desc">',
				'<h3>关于哗啦啦商户中心</h3>',
				'<p>北京多来点信息技术有限公司是GOZAP集团旗下的一家专注于餐饮O2O领域的移动互联网公司。公司产品“哗啦啦”是一款以改善消费者用餐体验及提升餐饮商户经营效率为目标的移动互联网产品，它可以为消费者提供点菜、闪吃、买单等功能。<br/>',
					'公司创始人及管理团队有着餐饮信息化及互联网行业近10年从业经验，致力于将哗啦啦打造成为国内餐饮O2O第一品牌。',
				'</p>',
			'</div>',
		'</div>',
	].join('');
	TemplateList.register('tpl_site_about', tpl_site_about);

	// 联系我们
	var tpl_site_contact = [
		'<div class="ix-body contact-us">',
			'<div class="banner">',
				'<div class="jumbotron">',
					'<div class="container">',
						'<h1>成长·共赢</h1>',
						'<p>加入我们见证成功</p>',
						'<div class="ad-pic animation"></div>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="container desc">',
				'<h3>联系我们</h3>',
				'<address>',
					'北京多来点信息技术有限公司（北京总部）<br/>',
					'服务热线:4006-527-557<br/>',
					'地址：北京市西城区西直门西环广场（凯德Mall）T1-22层<br/>',
					'邮编：100044<br/>',
					'电话：(86)010-58302536，38<br/>',
					'传真：(86)010-58302583<br/>',
					'mail: info@hualala.com<br/>',
				'</address>',
				'<address>',
					'北京多来点信息技术有限公司（上海分公司）<br/>',
					'地址：上海市徐汇区凯旋路3500号华苑大厦1幢27E<br/>',
					'邮编：200030<br/>',
					'电话：(86)021-64148077，78，79<br/>',
					'传真：(86)021-64148079转803<br/>',
					'mail: info@hualala.com<br/>',
				'</address>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_site_contact', tpl_site_contact);

	// 下载客户端
	var tpl_client_download = [
		'<div class="ix-body download">',
			'<div class="banner">',
				'<div class="jumbotron ">',
					'<div class="container">',
						'<h1>连接云端与餐饮软件</h1>',
						'<p>下载哗啦啦代理程序构建通道...</p>',
						'<div class="ad-pic animation"></div>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="container desc">',
				'<h3>下载哗啦啦代理程序</h3>',
				'<p>',
					'哗啦啦代理程序用于建立哗啦啦云端与餐饮软件之间的连接，能够将店铺的菜单及桌台状态实时同步到哗啦啦云端，也可将顾客手机提交的订单下单到餐饮软件。<br/>',
					'<a title="{{title}}" class="btn btn-success btn-lg" href="{{href}}">立即下载</a>',
				'</p>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_client_download', tpl_client_download);
	
    // 下载老板通
	var tpl_boss_download = [
		'<div class="ix-body boss">',
			'<div class="banner">',
				'<div class="jumbotron ">',
					'<div class="container nowrap">',
						'<img src="{{logo}}" class="v-t boss-logo" />',
                        '<div class="d-ib v-t boss-title">',
                            '<h1>饮食老板通</h1>',
                            '<h2 class="mt-10">一切尽在掌握</h2>',
                        '</div>',
                        '<div class="qr-boss d-ib t-c">',
                            '<img src="{{qrcode}}" />',
                            '<span class="d-b">扫码下载饮食老板通手机APP</span>',
                        '</div>',
                        '<img src="{{dragon}}" class="v-t dragon" />',
                        '<img src="{{starfish}}" class="starfish" />',
					'</div>',
				'</div>',
			'</div>',
			'<div class="container desc">',
				'<h3 class="c-6 m-b">“饮食老板通”手机APP',
                    '<span class="d-ib c-6 fs-18">(目前支持平台：IOS、Android)</span>',
                '</h3>',
				'<p class="fs-14">',
					'“随时随地掌握餐厅实时营业状况”<br/>',
                    '做为一个餐饮老板，我希望：“无论我身处何处都能随时掌握店内的实时营业状况，即便有多个品牌、多个城市、众多门店我也能够一目了然的掌握我最关心的核心营业指标数据，例如：当前客流、订单数、流水、实收、人均、单均、会员消费占比、外卖占比、收款占比等，并能进行日、周、月、季不同周期的切换，查看各核心指标的近期走势。”<br/>',
                    '饮食通老板通一切尽在掌握！',
				'</p>',
			'</div>',
		'</div>'
	].join('');
	TemplateList.register('tpl_boss_download', tpl_boss_download);


	var TplLib = function () {
		return {
			register : function (key, tpl) {
				if (!TemplateList.hasKey(key)) {
					TemplateList.register(key, tpl);
				} else {
					throw("This key has registed!!!");
				}
			},
			get : function (key) {
				if (!TemplateList.hasKey(key)) {
					throw("There are no template that is named " + key);
				} else {
					return TemplateList.getByKeys([key])[0];
				}
			}
		};
	};

	Hualala.TplLib = new TplLib();
})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
	
	var tpl_set_shop_client_pwd = [
	'<form class="form-horizontal">',
		'<div class="form-group">',
			'<label class="col-sm-3 control-label">店铺账号:</label>',
			'<div class="col-sm-9">',
				'<p class="form-control-static">{{shopID}}</p>',
			'</div>',
		'</div>',
		'<div class="form-group has-feedback">',
			'<label for="shopClinetPwd" class="col-sm-3 control-label">登录密码:</label>',
			'<div class="col-sm-9">',
				'<input type="password" id="shopClinetPwd" name="shopClinetPwd"  class="form-control" />',
				'<i class="form-control-feedback glyphicon"></i>',
				'<small class="help-block"></small>',
			'</div>',
		'</div>',
		'<div class="checkbox col-sm-offset-3">',
			'<label for="showPwd" class="control-label">',
				'<input type="checkbox" id="showPwd" name="shopClinetPwd" />',
				'显示明文',
			'</label>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_set_shop_client_pwd', tpl_set_shop_client_pwd);

	var tpl_shop_info_head = [
	/*'<div class="bs-callout shop-info-head">',*/
		'<div class="fl">',
			'<span class="shop-name">{{shopName}}</span>',
			'<a href="{{shopUrl}}" target="_blank">查看网上店铺</a>',
			'<a href="{{shopListLink}}">切换店铺</a>',
			'<a id="resetPwd" href="javascript:;">设置代理程序密码</a>',
		'</div>',
		'<div class="shop-state">',
			'<label class="t-label">店铺当前状态：</label>',
			'<input type="checkbox" {{checked}} />',
		'</div>',
	/*'</div>'*/].join('');
	TplLib.register('tpl_shop_info_head', tpl_shop_info_head);

	var tpl_shop_create = [
	'<div id="shopCreateWizard">',
		'<ul class="step-nav">',
			'<li><a href="#tab1" data-toggle="tab"><span class="label">1</span>基本信息</a></li>',
			'<li><a href="#tab2" data-toggle="tab"><span class="label">2</span>标注地图</a></li>',
			'<li><a href="#tab3" data-toggle="tab"><span class="label">3</span>创建成功</a></li>',
		'</ul>',
		'<div class="tab-content">',
			'<!-- 第一步 -->',
			'<form class="row tab-pane feed-back-out" id="tab1">',
				'<div class="col-sm-6 col-md-4 form-horizontal">',
					'<div class="form-group">',
						'<label for="shopName" class="col-sm-3 control-label">* 店铺名称</label>',
						'<div class="col-sm-8">',
							'<input type="text" id="shopName" name="shopName"  class="form-control" />',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="cityID">* 所在城市</label>',
						'<div class="col-sm-8">',
							'<select id="cityID" name="cityID" class="form-control">',
							'</select>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="tel">* 店铺电话</label>',
						'<div class="col-sm-8">',
							'<input type="text" id="tel" name="tel" class="form-control" placeholder="固定电话/手机号" title="多个号码用英文逗号隔开" />',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="address">* 店铺地址</label>',
						'<div class="col-sm-8">',
							'<input type="text" id="address" name="address" class="form-control" />',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="PCCL">* 人均消费</label>',
						'<div class="col-sm-8">',
							'<input type="text" id="PCCL" name="PCCL" class="form-control" />',
						'</div>',
					'</div>',
				'</div>',
				'<div class="col-sm-6 col-md-4 form-horizontal">',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="operationMode">* 运营模式</label>',
						'<div class="col-sm-8">',
							'<select id="operationMode" name="operationMode" class="form-control"></select>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-xs-12 col-sm-3 control-label" for="openingHours">* 营业时间</label>',
						'<div class="col-xs-8">',
							'<input type="text" id="openingHoursStart" name="openingHoursStart" class="form-control d-ib mr25"  placeholder="08:30" data-default-time="08:30" />',
							'<input type="text" id="openingHoursEnd" name="openingHoursEnd" class="form-control d-ib"  placeholder="21:30" data-default-time="21:30" />',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="areaID">* 地标</label>',
						'<div class="col-sm-8">',
							'<select id="areaID" name="areaID" class="form-control">',
							'</select>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="cuisineID1">* 菜系1</label>',
						'<div class="col-sm-8">',
							'<select id="cuisineID1" name="cuisineID1" class="form-control">',
								'<option value="">--请选择--</option>',
							'</select>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-3 control-label" for="cuisineID2">菜系2</label>',
						'<div class="col-sm-8">',
							'<select id="cuisineID2" name="cuisineID2" class="form-control">',
								'<option value="">--不限--</option>',
							'</select>',
						'</div>',
					'</div>',
				'</div>',
				'<div id="uploadImg" class="col-sm-6 col-md-4">',
					'<span class="t-label">请上传店铺头图，不能大于10m<br />(根据餐厅特色上传环境图或菜品图)</span>',
					'<button class="btn btn-default v-t">上传图片</button><br />',
					'<img class="m-t" src="" alt="餐厅门头图" width="200" height="200" />',
				'</div>',
			'</form>',
			'<!-- 第二步 -->',
			'<div class="tab-pane map-wrap" id="tab2">',
				'<div class="map-search row">',
					'<div class="col-sm-4">',
						'<div class="input-group search-box map-search-box">',
							'<input class="form-control map-keyword" type="text" placeholder="搜索地图" />',
							'<span class="input-group-addon glyphicon glyphicon-search map-search-btn" title="搜索"></span>',
						'</div>',
					'</div>',
					'<div class="col-sm-3 map-help">您可拖动标注获取坐标</div>',
				'</div>',
				'<div class="map_canvas" id="mapCanvas"></div>',
				'<div class="map-result"></div>',
			'</div>',
			'<!-- 第三步 -->',
			'<div class="tab-pane t-c" id="tab3">',
				'<div class="d-ib t-l">',
					'<h4>',
						'<span class="glyphicon glyphicon-ok x-ico-suc"></span>',
						'恭喜！<span></span>创建成功！',
					'</h4>',
					'完成以下两个步骤，您的店铺就正式开通啦——',
					'<ul>',
						'<li>',
							'<a class="btn btn-success" href="{{pcClientPath}}" target="_blank">下载哗啦啦代理程序</a>',
							'上传菜品信息',
						'</li>',
						'<li>',
							'<a id="shopSettingLink" class="btn btn-success" href="">设置店铺功能</a>',
						'</li>',
						'<li>网上餐厅正式开通啦！</li>',
					'</ul>',
				'</div>',
			'</div>',
			'</div>',
		'<div class="step-action">',
			'<button type="button" class="btn btn-default prev-step">上一步</button>',
			'<button id="nextStep" type="button" class="btn btn-warning">下一步</button>',
		'</div>',
	'</div>'].join('');
	TplLib.register('tpl_shop_create', tpl_shop_create);
	
	var tpl_shop_info = [
	'<form class="row shop-info feed-back-out read-mode">',
		'<div class="col-sm-6 col-lg-3 form-horizontal">',
			'<div class="form-group">',
				'<label for="shopName" class="col-sm-3 control-label">店铺名称</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{shopName}}</p>',
					'<input type="text" id="shopName" name="shopName"  class="form-control" value="{{shopName}}" />',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="cityID">所在城市</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{cityName}}</p>',
					'<select id="cityID" name="cityID" class="form-control">',
					'</select>',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="tel">店铺电话</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{tel}}</p>',
					'<input type="text" id="tel" name="tel" class="form-control" placeholder="固定电话/手机号" title="多个号码用英文逗号隔开" value="{{tel}}" />',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="address">店铺地址</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{address}}</p>',
					'<input type="text" id="address" name="address" class="form-control" value="{{address}}" />',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="PCCL">人均消费</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{PCCL}}</p>',
					'<input type="text" id="PCCL" name="PCCL" class="form-control" value="{{PCCL}}" />',
				'</div>',
			'</div>',
		'</div>',
		'<div class="col-sm-6 col-lg-3 form-horizontal">',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="operationMode">运营模式</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{operationModeName}}</p>',
					'<select id="operationMode" name="operationMode" class="form-control"></select>',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-xs-12 col-sm-3 control-label" for="openingHours">营业时间</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{openingHours}}</p>',
					'<input type="text" id="openingHoursStart" name="openingHoursStart" class="form-control d-ib mr25"  placeholder="08:30" data-default-time="08:30" value="{{openingHoursStart}}" />',
					'<input type="text" id="openingHoursEnd" name="openingHoursEnd" class="form-control d-ib"  placeholder="21:30" data-default-time="21:30"  value="{{openingHoursEnd}}" />',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="areaID">地标</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{areaName}}</p>',
					'<select id="areaID" name="areaID" class="form-control">',
						'<option value="">--请选择--</option>',
					'</select>',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label" for="cuisineID1">菜系1</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{cuisineName1}}</p>',
					'<select id="cuisineID1" name="cuisineID1" class="form-control">',
						'<option value="">--请选择--</option>',
					'</select>',
				'</div>',
			'</div>',
			'<div class="form-group">',
				'<label class="col-sm-3 control-label no-require" for="cuisineID2">菜系2</label>',
				'<div class="col-sm-9">',
					'<p class="form-control-static">{{cuisineName2}}</p>',
					'<select id="cuisineID2" name="cuisineID2" class="form-control">',
						'<option value="">--不限--</option>',
					'</select>',
				'</div>',
			'</div>',
		'</div>',
		'<div id="uploadImg" class="col-sm-6 col-lg-3 t-r">',
			'<img class="mb-12" src="" alt="餐厅门头图" width="200" height="200" /><br />',
			'<a href="javascript:;">修改门头图</a>',
		'</div>',
		'<div class="col-sm-6 col-lg-3">',
			'<div class="input-group search-box">',
				'<input class="form-control map-keyword" type="text" placeholder="搜索地图" />',
				'<span class="input-group-addon glyphicon glyphicon-search map-search-btn" title="搜索"></span>',
			'</div>',
			'<div class="map_canvas" id="mapCanvas"></div>',
			'<div class="map-result mb-12"></div>',
			'<p class="t-r mb50"><a id="remarkMap" href="javascript:;">重新标记</a></p>',
		'</div>',
		'<div class="step-action">',
			'<button id="editBtn" class="btn btn-warning">修改</button>',
			'<button id="saveBtn" class="btn btn-warning">保存</button>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_shop_info', tpl_shop_info);
	
	var tpl_shop_menu = [
	'<div class="shop-menu">',
		'<div id="foodClassBox" class="panel panel-default food-class"></div>',
		'<form id="foodSearch" class="panel panel-default form-inline food-search">',
			'<div class="form-group">',
				'<select id="takeawayTag" class="form-control">',
					'<option value="">全部菜品</option>',
					'<option value="0">堂食菜品</option>',
					'<option value="1">外卖菜品</option>',
				'</select>',
				'<label><input type="checkbox" id="isSpecialty" value=""/> 招牌</label>',
				'<label><input type="checkbox" id="isRecommend" /> 推荐</label>',
				'<label><input type="checkbox" id="isNew" /> 新品</label>',
				'<label><input type="checkbox" id="isSetFood" /> 套餐</label>',
				'<label><input type="checkbox" id="isDiscount" /> 打折</label>',
				'<label><input type="checkbox" id="foodIsActive" /> 启用菜品</label>',
				'<label><input type="checkbox" id="isHasImage" /> 无图</label>',
				//'<span class="input-group search-box">',
					'<select id="foodName" class="form-control"></select>',
					//'<span id="btnSearchFood" class="input-group-addon glyphicon glyphicon-search" title="搜索"></span>',
				//'</span>',
			'</div>',
		'</form>',
		'<div id="foodSearchInfo">相关结果 (<span></span>)</div>',
		'<table class="tbl-foods">',
			'<thead>',
				'<tr>',
					'<th width="92px">菜品图片</th>',
					'<th width="120px">名称</th>',
					'<th width="120px">分类名称</th>',
					'<th>规格及单价 (<em>会员价</em><b>售价</b><span>原价</span>)</th>',
					'<th width="">打折</th>',
					'<th width="">是否外送</th>',
					'<th width="">打包费(元)</th>',
					'<th width="">是否在售</th>',
					'<th width="">排序</th>',
					'<th width="200px"></th>',
				'</tr>',
			'</thead>',
			'<tbody></tbody>',
		'</table>',
	'</div>'].join('');
	TplLib.register('tpl_shop_menu', tpl_shop_menu);
    
    var tpl_food_name = [
        '<option value=""></option>',
        '{{#each classifiedFoods}}',
            '<optgroup label="{{foodCategoryName}}">',
                '{{#each foods}}',
                    '<option value="{{foodID}}">{{foodName}}</option>',
                '{{/each}}',
            '</optgroup>',
        '{{/each}}',
    ].join(',');
    TplLib.register('tpl_food_name', tpl_food_name);
	
	var tpl_food = [
	'{{#each foods}}',
		'<tr class="{{first.topBorder}} {{last.BottomBorder}}" data-id="{{foodID}}" data-cid="{{foodCategoryID}}" data-sortindex="{{foodSortIndex}}">',
			'<td><img src="{{imgSrc}}" /></td>',
			'<td class="t-l">{{foodName}}{{{adsIco}}}</td>',
			'<td>{{foodCategoryName}}</td>',
			'<td>',
			'{{#each units}}',
				'<p><span>{{unit}}</span><em>{{vipPrice}}</em><b>{{prePrice}}</b><i>{{price}}</i></p>',
			'{{/each}}',
			'</td>',
			'<td><span class="glyphicon {{discountIco}}"></span></td>',
			'<td><span class="glyphicon {{takeawayIco}}"></span></td>',
			'<td><b>{{takeoutPackagingFee}}</b></td>',
			'<td><span class="glyphicon {{activeIco}}"></span></td>',
			'<td>',
                '<a href="javascript:{}" title="移到顶部" class="glyphicon glyphicon-arrow-up sort-top {{first.upDisabled}}"></a>',
                '<a href="javascript:{}" title="上移" class="glyphicon glyphicon-arrow-up ml-6 sort-up {{first.upDisabled}}"></a>',
                '<a href="javascript:{}" title="下移" class="glyphicon glyphicon-arrow-down ml-6 sort-down {{last.downDisabled}}"></a>',
                '<a href="javascript:{}" title="移到底部" class="glyphicon glyphicon-arrow-down ml-6 sort-bottom {{last.downDisabled}}"></a>',
            '</td>',
			'<td><button class="btn btn-default">修改</buttion></td>',
		'</tr>',
	'{{/each}}'].join('');
	TplLib.register('tpl_food', tpl_food);
    
    var tpl_edit_food = [
    '<ul class="nav nav-tabs" role="tablist">',
        '<li class="active"><a href="#foodBasicInfo" data-toggle="tab">基本信息</a></li>',
        '<li><a href="#foodDesc" data-toggle="tab">图文详情</a></li>',
    '</ul>',
    '<div class="tab-content">',
        '<div class="tab-pane active fade in" id="foodBasicInfo">',
            '<form class="form-food">',
                '<div>',
                    '<span>名称</span>',
                    '<span name="foodName">{{foodName}}</span>',
                '</div>',
                '<div>',
                    '<span>图标</span>',
                    '<label>',
                        '<i class="ico-food ico-zhao">招</i>',
                        '<input type="radio" name="foodIco" value="isSpecialty" />',
                        '招牌菜',
                    '</label>',
                    '<label>',
                        '<i class="ico-food ico-jian">荐</i>',
                        '<input type="radio" name="foodIco" value="isRecommend" />',
                        '推荐菜',
                    '</label>',
                    '<label>',
                        '<i class="ico-food ico-xin">新</i>',
                        '<input type="radio" name="foodIco" value="isNew" />',
                        '新菜 &nbsp;',
                    '</label>',
                    '<label class="active">',
                        '<input type="radio" name="foodIco" value="none" checked />',
                        '无',
                    '</label>',
                '</div>',
                '<div>',
                    '<span>辣度</span>',
                    '<label>',
                        '<img src="{{hotTag1}}" />',
                        '<input type="radio" name="hotTag" value="1" />',
                        '微辣',
                    '</label>',
                    '<label>',
                        '<img src="{{hotTag2}}" />',
                        '<input type="radio" name="hotTag" value="2" />',
                        '中辣',
                    '</label>',
                    '<label>',
                        '<img src="{{hotTag3}}" />',
                        '<input type="radio" name="hotTag" value="3" />',
                        '重辣',
                    '</label>',
                    '<label class="active">',
                        '<input type="radio" name="hotTag" value="0" checked />',
                        '无',
                    '</label>',
                '</div>',
                '<div>',
                    '<span>是否外送</span>',
                    '<label>',
                        '<input type="radio" name="takeawayTag" value="0" />',
                        '不外送',
                    '</label>',
                    '<label class="active">',
                        '<input type="radio" name="takeawayTag" value="1" checked />',
                        '可外送',
                    '</label>',
                    '<label>',
                        '<input type="radio" name="takeawayTag" value="2" />',
                        '仅外送',
                    '</label>',
                '</div>',
                '<div>',
                    '<span>是否打折</span>',
                    '<label>',
                        '<input type="radio" name="isDiscount" value="1" />',
                        '打折',
                    '</label>',
                    '<label class="active">',
                        '<input type="radio" name="isDiscount" value="0" checked />',
                        '不打折',
                    '</label>',
                '</div>',
                '<div>',
                    '<span>是否在售</span>',
                    '<label class="active">',
                        '<input type="radio" name="isActive" value="1" checked />',
                        '可售',
                    '</label>',
                    '<label>',
                        '<input type="radio" name="isActive" value="0" />',
                        '停售',
                    '</label>',
                '</div>',
                '<div class="form-group">',
                    '<span>起售份数</span>',
                    '<input type="text" name="minOrderCount" class="form-control" value="{{minOrderCount}}" />',
                '</div>',
                '<div class="form-group taste-list">',
                    '<span>口味</span>',
                    '<div>',
                        '<input type="text" name="tasteList" class="form-control" placeholder="多个口味用英文逗号“,”隔开" value="{{tasteList}}" maxlength="300" />',
                    '</div>',
                '</div>',
                '<div class="form-group taste-list">',
                    '<span>作法</span>',
                    '<div>',
                        '<input type="text" name="makingMethodList" class="form-control" placeholder="多个作法用英文逗号“,”隔开" value="{{makingMethodList}}" maxlength="500" />',
                    '</div>',
                '</div>',
            '</form>',
            '<div class="food-pic">',
                '<div>',
                    '<img src="{{foodPic}}" alt="菜品图片" width="200px" />',
                    '<span>上传中 . . .</span>',
                '</div>',
                '<label class="btn-link m-t">修改图片</label>',
            '</div>',
        '</div>',
        '<div class="tab-pane fade" id="foodDesc">',
            '<script type="text/plain" id="foodDescEditor" style="height: 300px"></script>',
        '</div>',
    '</div>'
    ].join('');
    TplLib.register('tpl_edit_food', tpl_edit_food);

	var tpl_shop_filter = [
		'<div class="{{type}}">',
			'<span class="label">{{name}}</span>',
			'{{#each items}}',
				'<a class="btn btn-link {{focusClz}}" href="javascript:void(0);" data-{{type}}="{{code}}">',
					'{{name}}',
					'{{#if count}}',
						'<i class="num">({{count}})</i>',
					'{{/if}}',
				'</a>',
			'{{/each}}',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_filter', tpl_shop_filter);

	var tpl_shop_query = [
		'<div class="shop-query {{clz}}">',
			'<div class="filter">',
				'{{#with shopCity}}',
				'{{> shopCity}}',
				'{{/with}}',
				// '{{> shopArea}}',
			'</div>',
			'<nav class="navbar navbar-default query" role="query">',
				'<div class="container-fluid">',
					'<div class="navbar-header">',
						'{{#with toggle}}',
						'{{> toggle}}',
						'{{/with}}',
						'<a class="navbar-brand" href="javascript:void(0);">查询店铺</a>',
					'</div>',
					'<div class="collapse navbar-collapse" id="shop_query">',
						'<div class="navbar-form navbar-left" role="search">',
							// '<select class="">',
							// 	'{{#each optGrp}}',
							// 		'<optgroup label="{{name}}">',
							// 			'{{#each items}}',
							// 				'<option value="{{code}}">{{name}}</option>',
							// 			'{{/each}}',
							// 		'</optgroup>',
							// 	'{{/each}}',
							// '</select>',
							// '<div class="input-group">',
							// 	'<input type="text" class="form-control" autocomplete="off" />',
							// 	'<span class="input-group-btn">',
							// 		'<button class="btn btn-default">查询</button>',
							// 	'</span>',
							// '</div>',
							'<select class="chosen-select-no-results"  style="width:200px;">',
								'<option value=""></option>',
								'{{#each optGrp}}',
									'<optgroup label="{{name}}">',
										'{{#each items}}',
											'<option value="{{code}}">{{name}}</option>',
										'{{/each}}',
									'</optgroup>',
								'{{/each}}',
							'</select>',
							'<button class="btn btn-default query-btn">查询</button>',
							
						'</div>',
						'{{#if needShopCreate}}',
							'<button class="btn btn-warning create-shop pull-right" style="margin-top:8px;" data-btn-name="createShop">创建店铺</button>',
						'{{/if}}',
					'</div>',
				'</div>',
			'</nav>',
		'</div>',

		/*<div class="shop-query">',
			'<div class="filter">',
				'<div class="city">',
					'<span class="label">城市：</span>',
					'<a class="btn btn-link disabled">全部</a>',
					'<a class="btn btn-link ">北京<i class="num">(10)</i></a>',
					'<a class="btn btn-link">上海</a>',
					'<a class="btn btn-link">广州</a>',
					'<a class="btn btn-link">重庆</a>',
					'<a class="btn btn-link">深圳</a>',
					'<a class="btn btn-link">柳州</a>',
					'<a class="btn btn-link">天津</a>',
					'<a class="btn btn-link ">北京<i class="num">(10)</i></a>',
					'<a class="btn btn-link">上海</a>',
					'<a class="btn btn-link">广州</a>',
					'<a class="btn btn-link">重庆</a>',
					'<a class="btn btn-link">深圳</a>',
					'<a class="btn btn-link">柳州</a>',
					'<a class="btn btn-link">天津</a>',
					'<a class="btn btn-link ">北京<i class="num">(10)</i></a>',
					'<a class="btn btn-link">上海</a>',
					'<a class="btn btn-link">广州</a>',
					'<a class="btn btn-link">重庆</a>',
					'<a class="btn btn-link">深圳</a>',
					'<a class="btn btn-link">柳州</a>',
					'<a class="btn btn-link">天津</a>',
					'<a class="btn btn-link ">北京<i class="num">(10)</i></a>',
					'<a class="btn btn-link">上海</a>',
					'<a class="btn btn-link">广州</a>',
					'<a class="btn btn-link">重庆</a>',
					'<a class="btn btn-link">深圳</a>',
					'<a class="btn btn-link">柳州</a>',
					'<a class="btn btn-link">天津</a>',
					'<a class="btn btn-link ">北京<i class="num">(10)</i></a>',
					'<a class="btn btn-link">上海</a>',
					'<a class="btn btn-link">广州</a>',
					'<a class="btn btn-link">重庆</a>',
					'<a class="btn btn-link">深圳</a>',
					'<a class="btn btn-link">柳州</a>',
					'<a class="btn btn-link">天津</a>',
				'</div>',
				'<div class="area">',
					'<span class="label">区域：</span>',
					'<a class="btn btn-link disabled">全部</a>',
					'<a class="btn btn-link">海淀</a>',
					'<a class="btn btn-link">朝阳</a>',
					'<a class="btn btn-link">大兴</a>',
					'<a class="btn btn-link">回龙观</a>',
					'<a class="btn btn-link">昌平</a>',
					'<a class="btn btn-link">龙泽</a>',
					'<a class="btn btn-link">顺义</a>',
				'</div>',
			'</div>',
			'<nav class="navbar navbar-default query" role="navigation">',
				'<div class="container-fluid">',
					'<div class="navbar-header">',
						'<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#shop_query">',
							'<span class="sr-only">Toggle navigation</span>',
							'<span class="icon-bar"></span>',
							'<span class="icon-bar"></span>',
							'<span class="icon-bar"></span>',
						'</button>',
						'<a class="navbar-brand" href="javascript:void(0);">查询店铺</a>',
					'</div>',
					'<div class="collapse navbar-collapse" id="shop_query">',
						'<div class="navbar-form navbar-left" role="search">',
							'<div class="input-group">',
								'<input type="text" class="form-control" autocomplete="off" />',
								'<span class="input-group-btn">',
									'<button class="btn btn-default">查询</button>',
								'</span>',
							'</div>',
						'</div>',
						'<button class="btn btn-warning create-shop pull-right" style="margin-top:8px;">创建店铺</button>',
					'</div>',
				'</div>',
			'</nav>',
		'</div>*/
	].join('');
	TplLib.register('tpl_shop_query', tpl_shop_query);

	var tpl_shop_tags = [
		'<div class="tags">',
			'{{#each tags}}',
				'<span class="label {{clz}}" title="{{tag}}">{{tag}}</span>',
			'{{/each}}',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_tags', tpl_shop_tags);

	var tpl_shop_list_item = [
		'<div class="shop-list-item col-xs-12 {{clz}} ">',
			'<div class="row shop-base-info">',
				'<div class="col-xs-6 col-sm-3 col-md-2">',
					'<h4>{{shopName}}</h4>',
				'</div>',
				'<div class="hidden-xs col-sm-4 col-md-7 ">',
					'<div class="account">',
						'<label class="account-label">结算账户：</label>',
						'<span class="account-name">{{settleName}}</span>',
						'{{#if hideAccount}}',
							'{{#with btn}}',
								'<a href="javascript:void(0);" class=" {{clz}}" data-id="{{../settleID}}" data-shop="{{../shopID}}">{{label}}</a>',
							'{{/with}}',
						'{{else}}',
						'{{/if}}',
						
					'</div>',
				'</div>',
				'<div class="col-xs-6 col-sm-5 col-md-3">',
					'<div class="switcher-wrapper pull-right">',
						'<label class="">店铺当前状态：</label>',
						'<input type="checkbox" name="{{switcherName}}" data-shop="{{shopID}}" {{shopOpen}} />',
					'</div>',
				'</div>',
			'</div>',
			'{{#each business}}',
			'<div class="row shop-business">',
				'<div class="col-xs-6 col-sm-3 col-md-2">',
					'<h4>',
						'<span class="{{icon}}"></span>',
						'{{label}}',
					'</h4>',
				'</div>',
				'<div class="col-xs-6 col-sm-2 col-md-2">',
					'<div class="switcher-wrapper">',
						'<input type="checkbox" name="{{switcherName}}" data-shop="{{shopID}}" data-business="{{type}}" data-business-id="{{id}}" {{open}} />',
					'</div>',
				'</div>',
				'<div class="col-xs-12 col-sm-5 col-md-6">',
					'<p class="desc">{{desc}}</p>',
				'</div>',
				'<div class="col-xs-12 col-sm-2 col-md-2">',
					'<button type="button" class="btn btn btn-default  dowloadhref pull-left {{hide}}" name="download_link" data-shop="{{shopID}}"   data-business-id="{{id}}">桌台码下载</button>',
					'<button type="button" class="btn btn-default pull-right {{hideBtn}}" name="business_edit" data-shop="{{shopID}}" data-business="{{type}}"  data-business-id="{{id}}" data-serviceFeatures="{{serviceFeatures}}">修改</button>',
				'</div>',
			'</div>',
			'{{/each}}',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_list_item', tpl_shop_list_item);

	var tpl_shop_card = [
		'<div class="panel panel-default ix-card shop-card {{clz}}" >',
			'<div class="panel-heading ix-card-header">',
				'<h4 class="panel-title">{{name}}</h4>',
			'</div>',
			'<div class="panel-body ix-card-body">',
				'<div class="media">',
					'<a class="media-left" href="javascript:void(0);">',
						'<img class="media-object" alt="{{name}}" src="{{img}}" />',
					'</a>',
					'<div class="media-body">',
						'{{> shopTag}}',
						'<address title="{{address}}">{{slugAddr}}</address>',
						'<div class="phone">{{tel}}</div>',
					'</div>',
					'<div class="btns pull-right">',
						'<a href="javascript:void(0);" class="btn btn-default shop-info" data-href="{{infoHref}}">',
							'修改店铺信息',
						'</a>',
						'<a href="javascript:void(0);" class="btn btn-default shop-menu" data-href="{{menuHref}}">',
							'菜谱管理',
						'</a>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="panel-footer ix-card-footer">',
				'<label>店铺当前状态：</label>',
				'<input type="checkbox" name="switcher" data-shop="{{id}}" class="shop-switch" {{checked}} />',
				'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_card', tpl_shop_card);

	var tpl_shop_list = [
		'{{#with shopCard}}',
			'{{#each list}}',
			'<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">',
				'{{> shopCard}}',
			'</div>',
			'{{/each}}',
		'{{/with}}',
		'{{#with shopItem}}',
			'{{#each list}}',
				'{{> shopItem}}',
			'{{/each}}',
		'{{/with}}',
		'{{#with shopTable}}',
			'{{> shopTable}}',
		'{{/with}}'
	].join('');
	TplLib.register('tpl_shop_list', tpl_shop_list);

	var tpl_shop_table = [
		'<div class="col-xs-12 table-responsive">',
			'<table class="table">',
				'<thead>',
					'<tr>',
						'<th>城市</th>',
						'<th>店铺ID</th>',
						'<th>店铺名称</th>',
					'</tr>',
				'</thead>',
				'{{#if isEmpty}}',
					'<tbody>',
						'<tr>',
							'<td colspan="{{colCount}}"><p class="text-center">无结果</p></td>',
						'</tr>',
					'</tbody>',
				'{{else}}',
					'<tbody>',
						'{{#each rows}}',
							'<tr class="{{clz}}">',
								'<td class="">',
									'{{city}}',
								'</td>',
								'<td class="">',
									'{{id}}',
								'</td>',
								'<td class="">',
									'{{name}}',
								'</td>',
							'</tr>',
						'{{/each}}',
					'</tbody>',
				'{{/if}}',
			'</table>',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_table', tpl_shop_table);

	var tpl_shop_list_layout = [
		'<div class="shop-list">',
			'<div class="row shop-list-body">',
			'</div>',
			'<div class="shop-list-footer clearfix">',
				'<div class="page-selection pull-right"></div>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_list_layout', tpl_shop_list_layout);

	var tpl_shop_service_form_layout = [
		'<form class="form-horizontal {{formClz}}" role="form">',
			'{{#each items}}',
				'{{#checkFormElementType type type="combo"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<select id="{{id}}" name="{{name}}" class="form-control"  data-type="{{type}}">',
								'{{#each options}}',
									'<option value="{{value}}" {{selected}}>{{label}}</option>',
								'{{/each}}',
							'</select>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="text"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
							'{{/isInputGroup}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="switcher"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'<input type="checkbox" id="{{id}}" name="{{name}}" value="{{defaultVal}}" data-type="{{type}}" data-onLabel="{{onLabel}}" data-offLabel="{{offLabel}}" {{checked}} />',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="section"}}',
					'<div class="form-group section">',
						'<label for="{{id}}" class="{{labelClz}}">{{#if choice}}{{{choice}}}{{/if}}{{label}}</label>',
						'{{#with min}}',
							'<div class="min-input {{clz}}">',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'</div>',
						'{{/with}}',
						'{{#with max}}',
							// '<div class="col-sm-1 hidden-xs hidden-sm"><span class="to-label">到</span></div>',
							'<div class="max-input {{clz}}">',
								'<span class="to-label hidden-xs hidden-sm">到</span>',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'</div>',
						'{{/with}}',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="hidden"}}',
					'<input type="hidden" id="{{id}}" name="{{name}}" value="{{value}}" />',
				'{{/checkFormElementType}}',
			'{{/each}}',
		'</form>'
	].join('');
	TplLib.register('tpl_shop_service_form_layout', tpl_shop_service_form_layout);

	var tpl_shop_modal_btns = [
		'{{#each btns}}',
			'<button type="button" class="btn {{clz}}" name="{{name}}" data-loading-text="{{loadingText}}" autocomplete="off">{{label}}</button>',
		'{{/each}}'
	].join('');
	TplLib.register('tpl_shop_modal_btns', tpl_shop_modal_btns);

	// 闪吃业务描述
	var tpl_shop_justeat_desc = [
		'{{{servicePeriods}}}',
		'{{{holidayFlag}}}',
		'{{{minAmount}}}',
		'{{{advanceTime}}}',
		'{{{noticeTime}}}',
		'{{{reserveTableTime}}}',
		'{{{reserveTableDesc}}}'
	].join('');
	TplLib.register('tpl_shop_justeat_desc', tpl_shop_justeat_desc);

	// 店内自助业务描述
	var tpl_shop_spotorder_desc = [

		'{{#if isDinner}}',
			// 正餐
			'{{{supportCommitToSoftware}}}',
			// '{{{payMethodAtShop}}}',
			'{{{checkSpotOrder}}}',
			'{{{payBeforeCommit}}}',
		'{{else}}',
			// 快餐
			'{{{supportCommitToSoftware}}}',
			'{{{fetchFoodMode}}}',
		'{{/if}}'
	].join('');
	TplLib.register('tpl_shop_spotorder_desc', tpl_shop_spotorder_desc);

	// tpl_shop_commonreserve_desc
	var tpl_shop_commonreserve_desc = [
		'{{{advanceTime}}}',
		'{{{noticeTime}}}',
		'{{{minAmount}}}',
		'{{{reserveTableTime}}}',
		'{{{reserveTableDesc}}}',
		'{{{payMethod}}}'
	].join('');
	TplLib.register('tpl_shop_commonreserve_desc', tpl_shop_commonreserve_desc);

	var tpl_shop_takeaway_desc = [
		'{{{servicePeriods}}}', '{{{holidayFlag}}}', '{{{noticeTime}}}', '{{{takeawayDeliveryTime}}}',
		'{{{minAmount}}}','{{{serviceAmount}}}','{{{freeServiceAmount}}}','{{{takeawayScope}}}','{{{payMethod}}}'
	].join('');
	TplLib.register('tpl_shop_takeaway_desc', tpl_shop_takeaway_desc);

	var tpl_shop_takeout_desc = [
		'{{{servicePeriods}}}','{{{holidayFlag}}}','{{{advanceTime}}}','{{{noticeTime}}}','{{{minAmount}}}','{{{payMethod}}}'
	].join('');
	TplLib.register('tpl_shop_takeout_desc', tpl_shop_takeout_desc);

    var tpl_query_form = [
        '<div class="well well-sm query-form">',
            '<form class="form-horizontal">',
                '<div class="row">',
                    '<div class="col-md-4">',
                        '<div class="form-group">',
                            '<label class="col-md-4 control-label">{{queryLabel}}</label>',
                            '<div class="col-md-8">',
                                '<input type="text" name="{{queryName}}" class="form-control">',
                            '</div>',
                        '</div>',
                    '</div>',
                    '<div class="col-md-2">',
                        '<button class="btn btn-warning" name="search">查询</button>',
                    '</div>',
                    '<div class="col-md-2 pull-right">',
                        '<button class="btn btn-warning" name="{{addBtnName}}">{{addBtnLabel}}</button>',
                    '</div>',
                '</div>',
            '</form>',
        '</div>'
    ].join('');
    TplLib.register('tpl_query_form', tpl_query_form);

    var tpl_edit_member = [
        '<div>',
            '<form class="form-horizontal form-member">',
                '<div class="pull-left col-md-6">',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">员工编码*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="empCode" class="form-control" value="{{empCode}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">员工姓名*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="empName" class="form-control" value="{{empName}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">员工卡号*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="empCardNo" class="form-control" value="{{empCardNo}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">身份证号*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="IDCard" class="form-control" value="{{IDCard}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">手机号码*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="empMobile" class="form-control" value="{{empMobile}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">职位名称*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="positionName" class="form-control" value="{{positionName}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">员工密码*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="password" name="localPosLoginPWD" class="form-control" value="{{localPosLoginPWD}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">账号状态*&nbsp;</label>',
                        '<div class="col-md-8">',
                            '{{#with statusSelect}}',
                                '{{> customSelect}}',
                            '{{/with}}',
                        '</div>',
                    '</div>',
                '</div>',
                '<div class="pull-right col-md-6">',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">邮箱地址&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="empEmail" class="form-control" value="{{empEmail}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">最大折扣率&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="maxDiscountRate" class="form-control" value="{{maxDiscountRate}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">点菜器编号&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="padNo" class="form-control" value="{{padNo}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">最大免除金额&nbsp;</label>',
                        '<div class="col-md-8">',
                            '<input type="text" name="maxFreeAmount" class="form-control" value="{{maxFreeAmount}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-4 control-label">员工照片&nbsp;</label>',
                        '<div class="food-pic col-md-6">',
                            '<div>',
                            '{{#if photoImage}}',
                            '<img src="{{photoImage}}" alt="员工照片" width="120px" />',
                            '{{else}}',
                            '<img src="./asset/img/food_bg.png" alt="员工照片" width="120px" />',
                            '{{/if}}',
                            '<span>上传中 . . .</span>',
                            '</div>',
                            '<label class="btn-link m-t">上传照片</label>',
                            '<div class="m-t warning text-warning">图片建议尺寸120*120</div>',
                        '</div>',
                    '</div>',
                '</div>',
                '<div class="form-remark form-group">',
                    '<label class="col-sm-2 control-label">人员备注说明</label>',
                    '<div class="col-sm-8">',
                        '<textarea class="form-control" name="empRemark" maxlength="500">{{empRemark}}</textarea>',
                    '</div>',
                '</div>',
            '</form>',
        '</div>'
    ].join('');
    TplLib.register('tpl_edit_member', tpl_edit_member);

    var tpl_edit_role = [
        '<form class="form-horizontal role-right">',
            '<div class="form-group roles">',
                '<label class="title">角色</label>',
                '<div class="clearfix border">',
                    '{{#each roles}}',
                        '<label class="col-md-4"><input type="checkbox" {{checked}} name="role" data-key="{{roleID}}" />&nbsp;{{roleName}}</label>',
                    '{{/each}}',
                '</div>',
            '</div>',
            '<div class="form-group rights">',
                '<label class="title">权限</label>',
                '<div class="clearfix border">',
                '{{#each rightGroup}}',
                    '<div class="form-group">',
                        '<label class="control-label">{{@key}}</label>',
                        '<div>',
                            '{{#each this}}',
                                '<label class="col-md-4"><input type="checkbox" {{checked}} name="right" data-key="{{rightID}}" />&nbsp;{{rightName}}</label>',
                            '{{/each}}',
                        '</div>',
                    '</div>',
                '{{/each}}',
            '</div>',
            '</div>',
        '</form>',
    ].join('');
    Hualala.TplLib.register('tpl_edit_role', tpl_edit_role);

    var tpl_chosen = [
        '<option value=""></option>',
        '{{#each groups}}',
        '<optgroup label="{{groupName}}">',
        '{{#each options}}',
        '<option value="{{value}}">{{label}}</option>',
        '{{/each}}',
        '</optgroup>',
        '{{/each}}',
    ].join(',');
    TplLib.register('tpl_chosen', tpl_chosen);

    //submit file unicode
    var tpl_table_query = [
        '<div class="panel panel-default food-class clearfix">',
            '<div id="tableAreaBox" class="col-md-11">',
            '</div>',
            '<div class="col-md-1 pull-right">',
                '<a class="btn btn-warning" href="{{areaLink}}">区域管理</a>',
            '</div>',
        '</div>',
        '<div class="well well-sm query-form">',
            '<form class="form-horizontal">',
                '<div class="form-group row">',
                    '<div class="col-sm-2 m-l" id="tableName">',
                        '<select class="form-control"></select>',
                    '</div>',
                    '<div class="col-sm-1 m-l">',
                        '<label><input type="checkbox" name="isRoom" />&nbsp;包间</label>',
                    '</div>',
                    '<div class="col-md-2 pull-right">',
                        '<button class="btn btn-warning" name="addTable">新增桌台</button>',
                    '</div>',
                '</div>',
            '</form>',
        '</div>',
        '<div id="foodSearchResult">相关结果 (<span></span>)</div>',
    ].join('');
    TplLib.register('tpl_table_query', tpl_table_query);

    var tpl_edit_table_modal = [
        '<form class="form-horizontal form-table">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">所属区域*</label>',
                '<div class="col-sm-5" name="tableArea">',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">桌台名称*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="tableName" value="{{tableName}}"/>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">桌台编号 </label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="tableCode" value="{{tableCode}}"/>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">席位数*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="person" value="{{person}}"/>',
                '</div>',
            '</div>',
            '{{#each radios}}',
                '<div class="form-group">',
                    '{{#with this}}',
                        '{{> customRadio}}',
                    '{{/with}}',
                '</div>',
            '{{/each}}',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-2 control-label" for="description">标签备注 </label>',
                '<div class="col-sm-8">',
                    '<input placeholder="多个标签用英文“,”隔开" class="form-control" name="tableTagStr" value="{{tableTagStr}}"/>',
                '</div>',
            '</div>',
        '</form>'].join('');
    Hualala.TplLib.register('tpl_edit_table', tpl_edit_table_modal);

    var tpl_edit_table_area = [
        '<form class="form-horizontal form-area">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">区域名称*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="areaName" value="{{areaName}}"/>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">区域描述</label>',
                '<div class="col-sm-5">',
                    '<textarea type="text" class="form-control" name="areaNote">{{areaNote}}</textarea>',
                '</div>',
            '</div>',
        '</form>'].join('');
    Hualala.TplLib.register('tpl_edit_table_area', tpl_edit_table_area);

    var tpl_checkbox = [
        '<form class="form-horizontal">',
            '<div class="form-group">',
                '<label class="col-md-6"><input type="checkbox" {{allChecked}} name="all" />&nbsp;全选</label>',
            '</div>',
            '<div class="form-group">',
                '{{#each checkboxes}}',
                    '<label class="col-sm-6"><input type="checkbox" {{checked}} name="category" data-key="{{categoryCode}}" />&nbsp;{{text}}</label>',
                '{{/each}}',
            '</div>',
        '</form>'
    ].join('');
    Hualala.TplLib.register('tpl_checkbox', tpl_checkbox);

    var tpl_radio = [
        '<label class="col-sm-offset-1 col-sm-3 control-label">{{label}} </label>',
        '<div class="col-sm-5">',
            '{{#each inputs}}',
                '<label class="control-label col-sm-offset-{{@index}}"><input type="radio" {{checked}} name="{{../name}}" value="{{value}}"/> {{text}}</label>',
            '{{/each}}',
        '</div>',
    ].join('');
    Hualala.TplLib.register('tpl_radio', tpl_radio);

    var tpl_table_info = [
        '<table>',
            '{{#each basicInfo}}',
                '<tr>',
                    '<td>{{label}}:</td>',
                    '<td>{{value}}</td>',
                '</tr>',
            '{{/each}}',
        '</table>',
        '<div class="qr-img">',
            '<img src="{{qrImagePath}}">',
        '</div>'
    ].join('');
    Hualala.TplLib.register('tpl_table_info', tpl_table_info);

    var tpl_promotion_add = [
	'<div class="well well-sm t-r promotion_operate">',
		'{{#if noRef}}',
		'<p class="controls">',
			'<span class="controls">可<a href="javascript:;" class="operate" data-type="refPromotionRules">套用</a>其它店铺促销规则</span>',
			'<button class=" operate btn btn-warning" data-type="addPromotion">添加促销规则</button>',
		'</p>',
		'{{else}}',
		'<p class="controls">',
			'<span class="controls">本店促销规则套用 {{refShopName}} 不可编辑,您可以<a href="javascript:;" class="operate" data-type="refPromotionRules">修改套用</a>或<a href="javascript:;" class="operate" data-type="cancelrefPromotionRules">取消套用</a></span>',
		'</p>',
		'{{/if}}',
		
	'</div>'
    ].join('');
    Hualala.TplLib.register('tpl_promotion_add', tpl_promotion_add);
    var tpl_promotion_refRules = [
    '<div class="alert alert-info refPromotionRules">{{refPromotionRulesDesc}}</div>'
    ].join('');
    Hualala.TplLib.register('tpl_promotion_refRules', tpl_promotion_refRules);

    var tpl_printer_add = [
	'<div class="well well-sm t-r promotion_add">',
		'<p class="controls">',
			'<button class=" operate btn btn-warning" data-type="addPrinter">添加打印机</button>',
		'</p>',
	'</div>'
    ].join('');
    Hualala.TplLib.register('tpl_printer_add', tpl_printer_add);

    var tpl_edit_printer = [
        '<form class="form-horizontal printer-form">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">打印机名称*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="printerName" value="{{printerData.printerName}}"/>',
                '</div>',
            '</div>',
            /*'<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">打印机状态*</label>',
                '<div class="col-sm-5">',
                    '<select name="currPrinterStatus"  class="form-control">',
                    	'<option value="">--请选择--</option>',
                        '{{#each PrinterStatusData}}',
                        '<option value="{{this.value}}" {{selected}}>{{this.label}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',                
            '</div>',*/
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">打印机端口类型*</label>',
                '<div class="col-sm-5">',
                    '<select name="printerPortType"  class="form-control">',
                    	'<option value="">--请选择--</option>',
                        '{{#each printerPortData}}',
                        '<option value="{{this.value}}" {{selected}}>{{this.label}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',                
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">打印机端口*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="printerPort" value="{{printerData.printerPort}}"/>',
                    '<span class="help-block">网口打印机的端口填写为:IP地址:端口</span>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">纸张宽度</label>',
                '<div class="col-sm-5">',
                    '<select name="printerPaperSize"  class="form-control">',
                    	'<option value="">--请选择--</option>',
                        '{{#each PaperSizesData}}',
                        '<option value="{{this.value}}" {{selected}}>{{this.label}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',                
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">备注</label>',
                '<div class="col-sm-5">',
                    '<textarea type="text" class="form-control" name="printerRemark">{{printerData.printerRemark}}</textarea>',
                '</div>',
            '</div>',
        '</form>'].join('');
    Hualala.TplLib.register('tpl_edit_printer', tpl_edit_printer);


    var tpl_printerArea_menu =[
    '<div id="menuPanel" class="col-sm-4">',
        '<nav class="navbar navbar-default">',
            '<span class="navbar-brand">打印区域设置</span>',
        '</nav>',
        '<div id="menuWrap">',
        '</div>',
    '</div>',
    '<div id="actionPanel" class="col-sm-8">',
        '<h4 class="action-panel-title">厨房分单区域打印设置</h4>',
        '<div class="shop-list">',
        '</div>',
    '</div>'].join('');
    Hualala.TplLib.register('tpl_printerArea_menu', tpl_printerArea_menu);

    var tpl_printerArea_setting =[
    '{{#each records}}',
	    '<dl>',
    		'<dt><i class="caret"></i><b>{{this.printAreaName}}</b><span><i class="glyphicon glyphicon-pencil operate" data-id="{{itemID}}" data-type="editMenu" title="编辑"></i></span></dt>',
    		'{{#each printArea}}',
    		'<dd data-id="{{areaID}} data-key="{{areaKey}}"><b>{{areaName}}</b></dd>',
    		'{{/each}}',
	   	'</dl>',
	'{{/each}}'].join('');
    Hualala.TplLib.register('tpl_printerArea_setting', tpl_printerArea_setting);
    var tpl_edit_printerAreaSet = [
        '<form class="form-horizontal printer-form">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">传菜单打印机*</label>',
                '<div class="col-sm-7">',
                    '<select name="dispatchBillPrinterKey"  class="form-control">',
                    	'<option value="">--请选择--</option>',
                        '{{#each printers}}',
                        '<option value="{{this.printerKey}}" {{selected}}>{{this.printerName}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',                
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">传菜单打印份数*</label>',
                '<div class="col-sm-7">',
                    '<input type="text" class="form-control" name="dispatchBillPrintCopies" value="{{printerSingleData.printCopies}}"/>',
                '</div>',
            '</div>',
        '</form>'].join('');
    Hualala.TplLib.register('tpl_edit_printerAreaSet', tpl_edit_printerAreaSet);
    var tpl_edit_printerArea = [
        '<form class="form-horizontal printer-form">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">打印区域名称*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="printAreaName" value="{{printerAreaData.printAreaName}}"/>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">传菜单打印机*</label>',
                '<div class="col-sm-5">',
                    '<select name="dispatchBillPrinterKey"  class="form-control">',
                    	'<option value="">--请选择--</option>',
                        '{{#each printers}}',
                        '<option value="{{this.printerKey}}" {{selected}}>{{this.printerName}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',                
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">传菜单打印份数*</label>',
                '<div class="col-sm-5">',
                    '<input type="text" class="form-control" name="dispatchBillPrintCopies" value="{{printerAreaData.dispatchBillPrintCopies}}"/>',
                '</div>',
            '</div>',
        '</form>'].join('');
    Hualala.TplLib.register('tpl_edit_printerArea', tpl_edit_printerArea);
})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
	var tpl_account_list_layout = [
		'<div class="account-list">',
			'<div class="row account-list-body">',
			'</div>',
			'<div class="account-list-footer">',
				'<div class="page-selection pull-right"></div>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_account_list_layout', tpl_account_list_layout);

	var tpl_account_card = [
		'<div class="panel panel-default ix-card bank-card {{clz}}" data-id="{{settleUnitID}}">',
			'<div class="panel-heading ix-card-header">',
				'<h4 class="panel-title">',
					'{{#if hasDefault}}',
					'<span class="label label-default">默认</span>',
					'{{/if}}',
					'<span class="account-name" title="{{settleUnitName}}">{{settleUnitName}}</span>',
				'</h4>',
				'<a href="javascript:void(0);" class="btn btn-success withdraw {{disableWithdraw}}">提现</a>',
			'</div>',
			'<div class="panel-body ix-card-body">',
				'<div class="cash">',
					'<strong>{{settleBalance}}</strong>',
					'<span>元</span>',
				'</div>',
				'<div class="bank">',
					'<span class="{{bankIcon}}"></span>',
					'<span class="name">{{bankComName}}</span>',
					'<span class="num">{{{bankAccountStr}}}</span>',
				'</div>',
			'</div>',
			'<div class="panel-footer ix-card-footer">',
				'<span class="shops pull-left">',
					'{{shopCount}}家店',
				'</span>',
				'{{# if isDetail }}',
					'<div class="btn-group pull-right visible-xs-inline-block">',
						'{{#each acts}}',
							'{{#if isFirst}}',
								'<button type="button" class="btn btn-info {{disableWithdraw}}" data-act="{{act}}">{{label}}</button>',
								'<button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">',
									'<span class="caret"></span>',
									'<span class="sr-only">Toggle Dropdown</span>',
								'</button>',
								'<ul class="dropdown-menu" role="menu">',
							'{{else}}',
								'<li><a href="javascript:void(0);" data-act="{{act}}" class="btn {{disabled}}">{{label}}</a></li>',
							'{{/if}}',
						'{{/each}}',
						'</ul>',
						
					'</div>',
				'{{else}}',
					'<a class="btn btn-link pull-right" data-href="{{path}}">详情&gt;</a>',
				'{{/if}}',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_account_card', tpl_account_card);

	var tpl_account_list = [
		'{{#with accountCard}}',
			'{{#each list}}',
			'<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">',
				'{{> accountCard}}',
			'</div>',
			'{{/each}}',
			// @NOTE: 新需求STORY #1074，任何权限的用户都不允许添加结算账户，所以屏蔽掉添加结算账户的片段
			// '<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">',
			// 	'{{> addAccountCard}}',
			// '</div>',
		'{{/with}}',
	].join('');
	TplLib.register('tpl_account_list', tpl_account_list);

	var tpl_withdraw_form = [
		'<div class="table-responsive">',
			'<table class="table table-striped table-bordered">',
				'<tbody>',
				'{{#each accountInfo}}',
					'<tr>',
						'<th>{{label}}</th>',
						'<td>{{{value}}}</td>',
					'</tr>',
				'{{/each}}',
				'</tbody>',
			'</table>',
		'</div>',
		'{{{warningText}}}',
		'<form class="form-horizontal {{formClz}}" role="form">',
			'<div class="form-group">',
				'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
				'<div class="{{clz}}">',
					'<div class="input-group">',
						'<span class="input-group-addon">￥</span>',
						'<input type="text" id="{{id}}" name="{{name}}" class="form-control" value="{{value}}" />',
						'<span class="input-group-addon">元</span>',
					'</div>',
				'</div>',
			'</div>',
		'</form>'
	].join('');
	TplLib.register('tpl_withdraw_form', tpl_withdraw_form);

	var tpl_addAccount_Card = [
		'<div class="panel panel-default ix-card bank-card create-account" data-btn-name="createAccount">',
			'<div class="panel-heading ix-card-header hidden">',
				'<h4 class="panel-title"></h4>',
			'</div>',
			'<div class="panel-body ix-card-body">',
				'<div class="x-mul-vertical-middle">',
					'<div class="item  x-v-m-out">',
						'<div class="x-v-m-in">',
							'<div class="ix-cross">',
								'<div class="x-cross-inner"></div>',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="panel-footer ix-card-footer">',
				'<a class="btn btn-link pull-right" href="javascript:void(0);" data-href="{{path}}">添加账户</a>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_addAccount_Card', tpl_addAccount_Card);

	var tpl_accountMgr_layout = [
		'<nav class="account-nav">',
		'</nav>',
		'<section class="account-schema-box">',
		'</section>',
		  '<div class="navbar navbar-default account-tab">',
		  '</div>',
		'<section class="account-detail-box">',
		'</section>'
	].join('');
	TplLib.register('tpl_accountMgr_layout', tpl_accountMgr_layout);

	var tpl_account_schema = [
		'<div class="account-schema clearfix">',
			'{{#with accountCard}}',
				'{{> accountCard}}',
			'{{/with}}',
			'<div class="account-btns hidden-xs">',
				'<ul class="nav nav-pills pull-right" role="tablist">',
					'{{#each acts}}',
						'<li role="presentation"><a href="javascript:void(0);" class="btn {{clz}} {{disableWithdraw}} {{disabled}}" data-act="{{act}}">{{label}}</a></li>',
					'{{/each}}',
				'</ul>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_account_schema', tpl_account_schema);

	var tpl_account_detail = [
		'<div class="account-detail">',
			'<div class="well well-sm query-form">',
				'{{#with query}}',
					'{{> transaQueryForm}}',
				'{{/with}}',
			'</div>',
			'<div class="query-result">',
				'{{#with result}}',
					'{{> transaQueryResult}}',
				'{{/with}}',
			'</div>',
			'<div class="page-selection pull-right"></div>',
		'</div>'
	].join('');
	TplLib.register('tpl_account_detail', tpl_account_detail);


	var tpl_transaQuery_form = [
		'<form class="form-horizontal" role="">',
			'<div class="row">',
				'{{#each cols}}',
					'<div class="{{colClz}}">',
						'{{#each items}}',
							'{{#checkFormElementType type type="combo"}}',
								'<div class="form-group">',
									'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
									'<div class="{{clz}}">',
										'<select id="{{id}}" name="{{name}}" class="form-control"  data-type="{{type}}">',
											'{{#each options}}',
												'<option value="{{value}}" {{selected}}>{{label}}</option>',
											'{{/each}}',
										'</select>',
									'</div>',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="section"}}',
								'<div class="form-group section">',
									'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
									'{{#with min}}',
										'<div class="min-input {{clz}}">',
											'<div class="input-group">',
												'{{#if prefix}}',
													'<span class="input-group-addon">',
														'{{{prefix}}}',
													'</span>',
												'{{/if}}',
												'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
												'{{#if surfix}}',
													'<span class="input-group-addon">',
														'{{{surfix}}}',
													'</span>',
												'{{/if}}',
											'</div>',
										'</div>',
									'{{/with}}',
									'{{#with max}}',
										// '<div class="col-sm-1 hidden-xs hidden-sm"><span class="to-label">到</span></div>',
										'<div class="max-input {{clz}}">',
											'<span class="to-label">到</span>',
											'<div class="input-group">',
												'{{#if prefix}}',
													'<span class="input-group-addon">',
														'{{{prefix}}}',
													'</span>',
												'{{/if}}',
												'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
												'{{#if surfix}}',
													'<span class="input-group-addon">',
														'{{{surfix}}}',
													'</span>',
												'{{/if}}',
											'</div>',
										'</div>',
									'{{/with}}',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="button"}}',
								'<button type="button" class="btn {{clz}}">{{{label}}}</button>',
							'{{/checkFormElementType}}',
						'{{/each}}',
					'</div>',
				'{{/each}}',
			'</div>',
		'</form>'
	].join('');
	TplLib.register('tpl_transaQuery_form', tpl_transaQuery_form);

	var tpl_transaQuery_result = [
		'<div class="table-responsive">',
			'<table class="table {{clz}}">',
				'<thead>',
					'{{#each thead}}',
						'<tr class="{{clz}}">',
							'{{#each cols}}',
								'<th class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">{{{label}}}</th>',
							'{{/each}}',
						'</tr>',
					'{{/each}}',
				'</thead>',
				'{{#if isEmpty}}',
					'<tbody>',
						'<tr>',
							'<td colspan="{{colCount}}"><p class="text-center">无结果</p></td>',
						'</tr>',
					'</tbody>',
				'{{else}}',
					'<tbody>',
						'{{#each rows}}',
							'<tr class="{{clz}}">',
								'{{#each cols}}',
									'<td class="{{clz}}">',
										'{{#chkColType type type="button"}}',
											'<a href="javascript:void(0);" class="{{btnClz}}" data-id="{{SUATransItemID}}" data-type="{{transType}}" data-orderid="{{orderID}}" data-orderkey="{{orderKey}}" >{{label}}</a>',
										'{{/chkColType}}',
										'{{#chkColType type type="text"}}',
											'<p data-value="{{value}}">{{{text}}}</p>',
										'{{/chkColType}}',
									'</td>',
								'{{/each}}',
							'</tr>',
						'{{/each}}',
					'</tbody>',
				'{{/if}}',
				'<tfoot>',
					'{{#each tfoot}}',
						'<tr class="{{clz}}">',
							'{{#each cols}}',
								'<th class="{{clz}}" colspan="{{colspan}}" rowspan="{{rowspan}}">',
									'<p data-value="{{value}}" >{{{text}}}</p>',
								'</th>',
							'{{/each}}',
						'</tr>',
					'{{/each}}',
				'</tfoot>',
			'</table>',
		'</div>'
	].join('');
	TplLib.register('tpl_transaQuery_result', tpl_transaQuery_result);

	var tpl_account_edit = [
		'<form class="form-horizontal {{formClz}}" role="form">',
			'{{#each items}}',
				'{{#checkFormElementType type type="combo"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<select id="{{id}}" name="{{name}}" {{disabled}} class="form-control"  data-type="{{type}}">',
								'{{#each options}}',
									'<option value="{{value}}" {{selected}}>{{label}}</option>',
								'{{/each}}',
							'</select>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="text"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" {{disabled}} name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" {{disabled}} class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
							'{{/isInputGroup}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="switcher"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'<input type="checkbox" id="{{id}}" name="{{name}}" {{disabled}} value="{{defaultVal}}" data-type="{{type}}" data-onLabel="{{onLabel}}" data-offLabel="{{offLabel}}" {{checked}} />',
						'</div>',
						'<p class="help-block {{helpClz}}">{{{help}}}</p>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="radiogrp"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'{{#each options}}',
								'<label class="{{clz}}">',
									'<input type="radio" name="{{name}}" {{disabled}} id="{{id}}" value="{{value}}" {{checked}} />',
									'{{label}}',
								'</label>',
							'{{/each}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
			'{{/each}}',
		'</form>'
	].join('');
	TplLib.register('tpl_account_edit', tpl_account_edit);

	var tpl_account_query_shop = [
		'<div class="query-shop {{clz}}">',
			'<p class="title">',
				'{{label}}:<strong>{{title}}</strong>',
			'</p>',
			'<div class="query-box"></div>',
			'<div class="result-box"></div>',
		'</div>'
	].join('');
	TplLib.register('tpl_account_query_shop', tpl_account_query_shop);

	var tpl_orderpay_detail = [
		'<div class="row order-detail">',
			'<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',
				'{{#each fieldsets}}',
					'{{log label}}',
					'{{#chkFieldType fieldType type="list"}}',
						'<h5>{{label}}{{{orderSubTypeLabel}}}</h5>',
						'<div class="row">',
							'{{#each fields}}',
								'{{log @key}}',
								'<div class="detail-item {{clz}}">',
									'<label>{{label}}:</label>',
									'<span>',
										'{{{value}}}',
									'</span>',
								'</div>',

							'{{/each}}',
						'</div>',
					'{{/chkFieldType}}',
					'{{#chkFieldType fieldType type="table"}}',
						'<h5>{{label}}</h5>',
						'<div class="table-responsive">',
							'<table class="table table-condensed table-hover table-striped">',
								'<thead>',
									'<tr>',
										'<th>名称</th>',
										'<th>类型</th>',
										'<th>价格</th>',
										'<th>份数</th>',
									'</tr>',
								'</thead>',
								'<tbody>',
									'{{#each categories}}',
										'<tr>',
											'<th colspan="4">',
												'{{foodCategoryName}}',
												'{{foodCategorySum}}',
											'</th>',
										'</tr>',
										'{{#each rows}}',
											'<tr>',
												'<td>{{foodName}}</td>',
												'<td>{{foodUnit}}</td>',
												'<td>{{foodPrice}}</td>',
												'<td>{{foodAmount}}</td>',
											'</tr>',
										'{{/each}}',
									'{{/each}}',
								'</tbody>',
							'</table>',
						'</div>',
					'{{/chkFieldType}}',
				'{{/each}}',
			'</div>',
			// Modify: 根据最新指示，订单打印内容屏蔽掉
			// '<div class="col-xs-5 col-sm-5 col-md-4 col-lg-3">',
			// 	'{{#with printDetail}}',
			// 		'<h5>{{label}}{{{orderSubTypeLabel}}}</h5>',
			// 		'<p>',
			// 			'{{{content}}}',
			// 		'</p>',
			// 	'{{/with}}',
			// '</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_orderpay_detail', tpl_orderpay_detail);

	var tpl_fsmcustomer_detail = [
		'{{#with settleUnitDetail}}',
			'<h5>结算账户信息</h5>',
			'<div class="{{clz}} row settle-detail">',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">账户名称：</label>',
						'<span class="col-xs-12 col-sm-7">{{settleUnitName}}</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">结算时间：</label>',
						'<span class="col-xs-12 col-sm-7">{{transSuccessTime}}</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">交易类型：</label>',
						'<span class="col-xs-12 col-sm-7">{{transTypeLabel}}</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">交易金额：</label>',
						'<span class="col-xs-12 col-sm-7">{{transAmount}}元</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">扣除佣金：</label>',
						'<span class="col-xs-12 col-sm-7">{{transSalesCommission}}元</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">结算金额：</label>',
						'<span class="col-xs-12 col-sm-7">{{transAfterBalance}}元</span>',
					'</div>',
				'</div>',
			'</div>',
		'{{/with}}',
		'{{#with customerCard}}',
			'<h5>交易明细</h5>',
			'<div class="{{clz}} row customer-detail">',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">充值金额：</label>',
						'<span class="col-xs-12 col-sm-7">{{saveMoneyTotal}}元</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">会员账户余额：</label>',
						'<span class="col-xs-12 col-sm-7">{{moneyBalance}}元</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">会员卡号：</label>',
						'<span  class="col-xs-12 col-sm-7">{{cardNO}}</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">会员手机号：</label>',
						'<span  class="col-xs-12 col-sm-7">{{customerMobile}}</span>',
					'</div>',
				'</div>',
				'<div class="col-xs-6">',
					'<div class="detail-item row">',
						'<label class="col-xs-12 col-sm-5">会员姓名：</label>',
						'<span  class="col-xs-12 col-sm-7">{{customerName}}</span>',
					'</div>',
				'</div>',
			'</div>',
		'{{/with}}',
	].join('');
	TplLib.register('tpl_fsmcustomer_detail', tpl_fsmcustomer_detail);

})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
	var tpl_order_subnav = [
		'<div class="visible-xs-block navbar navbar-default">',
			'{{#with toggle}}',
				'{{> toggle}}',
			'{{/with}}',
		'</div>',
		'<div class="nav-list">',
			'<div class="navbar-collapse collapse" id="order_navbar">',
				'<ul class="nav nav-justified nav-pills">',
					'{{#each items}}',
					'<li class="{{active}} {{disabled}}">',
						'<a href="{{path}}" data-page-type="{{name}}">{{label}}</a>',
					'</li>',
					'{{/each}}',
				'</ul>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_order_subnav', tpl_order_subnav);

	var tpl_order_queryLayout = [
		'<div class="well well-sm query-form">',
			'{{#with query}}',
				'{{> orderQueryForm}}',
			'{{/with}}',
		'</div>'
	].join('');
	TplLib.register('tpl_order_queryLayout', tpl_order_queryLayout);

	var tpl_order_queryForm = [
		'<form class="form-horizontal orderQueryForm" role="">',
			'<div class="row">',
				'{{#each cols}}',
					'<div class="{{colClz}}">',
						'{{#each items}}',
							'{{#checkFormElementType type type="combo"}}',
								'<div class="form-group">',
									'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
									'<div class="{{clz}}">',
										'<select id="{{id}}" name="{{name}}" class="form-control"  data-type="{{type}}">',
											'{{#each options}}',
												'<option value="{{value}}" {{selected}}>{{label}}</option>',
											'{{/each}}',
										'</select>',
									'</div>',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="section"}}',
								'<div class="form-group section">',
									'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
									'{{#with min}}',
										'<div class="min-input {{clz}}">',
											'<div class="input-group">',
												'{{#if prefix}}',
													'<span class="input-group-addon">',
														'{{{prefix}}}',
													'</span>',
												'{{/if}}',
												'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
												'{{#if surfix}}',
													'<span class="input-group-addon">',
														'{{{surfix}}}',
													'</span>',
												'{{/if}}',
											'</div>',
										'</div>',
									'{{/with}}',
									'{{#with max}}',
										// '<div class="col-sm-1 hidden-xs hidden-sm"><span class="to-label">到</span></div>',
										'<div class="max-input {{clz}}">',
											'<span class="hidden-xs hidden-sm to-label">--</span>',
											'<div class="input-group">',
												'{{#if prefix}}',
													'<span class="input-group-addon">',
														'{{{prefix}}}',
													'</span>',
												'{{/if}}',
												'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
												'{{#if surfix}}',
													'<span class="input-group-addon">',
														'{{{surfix}}}',
													'</span>',
												'{{/if}}',
											'</div>',
										'</div>',
									'{{/with}}',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="text"}}',
								'<div class="form-group">',
									'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
									'<div class="{{clz}}">',
										'{{#isInputGroup prefix surfix}}',
											'<div class="input-group">',
												'{{#if prefix}}',
													'<span class="input-group-addon">',
														'{{{prefix}}}',
													'</span>',
												'{{/if}}',
												'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
												'{{#if surfix}}',
													'<span class="input-group-addon">',
														'{{{surfix}}}',
													'</span>',
												'{{/if}}',
											'</div>',
										'{{else}}',
											'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}"  data-type="{{type}}">',
										'{{/isInputGroup}}',
									'</div>',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="checkboxgrp"}}',
								'<div class="form-group">',
									'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
									'<div class="{{clz}}">',
										'<input type="checkbox" id="{{id}}" name="{{name}}"  value="{{value}}"  data-type="{{type}}">',
									'</div>',
								'</div>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="button"}}',
								'<button type="button" class="btn {{clz}}" name="{{name}}">{{{label}}}</button>',
							'{{/checkFormElementType}}',
							'{{#checkFormElementType type type="hidden"}}',
								'<input type="hidden" id="{{id}}" name="{{name}}" value="{{value}}" data-type="{{type}}" />',
							'{{/checkFormElementType}}',
						'{{/each}}',
					'</div>',
				'{{/each}}',
			'</div>',
		'</form>'
	].join('');
	TplLib.register('tpl_order_queryForm', tpl_order_queryForm);

	var tpl_order_comboOpts = [
		'{{#each opts}}',
			'<option value="{{value}}" {{selected}}>{{label}}</option>',
		'{{/each}}'
	].join('');
	TplLib.register('tpl_order_comboOpts', tpl_order_comboOpts);

})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;

	var tpl_user_query = [
		'<div class="shop-query {{clz}}">',
			'<nav class="navbar navbar-default query" role="query">',
				'<div class="container-fluid">',
					'<div class="navbar-header">',
						'{{#with toggle}}',
						'{{> toggle}}',
						'{{/with}}',
						'<a class="navbar-brand" href="javascript:void(0);">用户查询</a>',
					'</div>',
					'<div class="collapse navbar-collapse" id="shop_query">',
						'<div class="navbar-form navbar-left" role="search">',
							'<select class="chosen-select-no-results"  style="width:200px;">',
								'<option value=""></option>',
								'{{#each optGrp}}',
									'<optgroup label="{{name}}">',
										'{{#each items}}',
											'<option value="{{code}}">{{name}}</option>',
										'{{/each}}',
									'</optgroup>',
								'{{/each}}',
							'</select>',
							'<button class="btn btn-default query-btn" data-act="query">查询</button>',
						'</div>',
						'<button class="btn btn-warning create-user pull-right" style="margin-top:8px;" data-act="create">添加用户</button>',
					'</div>',
				'</div>',
			'</nav>',
		'</div>'
	].join('');
	TplLib.register('tpl_user_query', tpl_user_query);

	var tpl_user_list = [
		'<div class="table-responsive col-sm-12 user-list">',
			'<table class="table table-striped table-hover">',
				'<thead>',
					'<tr>',
						'<th>用户子账号</th>',
						'<th>用户姓名</th>',
						'<th>状态</th>',
						'<th>角色/权限</th>',
						'<th>备注</th>',
					'</tr>',
				'</thead>',
				'<tbody>',
					'{{#with userItem}}',
						'{{#each list}}',
							'{{> userItem}}',
						'{{/each}}',
					'{{/with}}',
				'</tbody>',
			'</table>',
		'</div>'
		
	].join('');
	TplLib.register('tpl_user_list', tpl_user_list);

	var tpl_user_item = [
		'<tr data-id="{{accountID}}" class="user-item">',
			'<td class="user-col">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'<span class="uname">{{loginName}}</span>',
						'</div>',
					'</div>',
				'</div>',
			'</td>',
			'<td class="user-col">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'<span class="name">{{userName}}</span>',
							'<span class="cell {{cellClz}}" data-binded="{{mobileBinded}}">',
								'{{#if mobileIsBinded}}',
									'({{userMobile}})',
								'{{else}}',
									'(未绑定手机)',
								'{{/if}}',
							'</span>',
						'</div>',
					'</div>',
				'</div>',
				
			'</td>',
			'<td class="user-col">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'<span class="label {{accountStatusClz}}" data-status="{{accountStatus}}">',
								'{{accountStatusLabel}}',
							'</span>',
						'</div>',
					'</div>',
				'</div>',
				
			'</td>',
			'<td class="user-col">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'{{#each roles}}',
								'<div class="role-item ',
								'{{#if binded}}',
									'',
								'{{else}}',
									'hidden',
								'{{/if}}',
								'">',
									'<span class="label label-info " data-roleType="{{roleType}}">{{name}}</span>',
								'</div>',
							'{{/each}}',
						'</div>',
					'</div>',
				'</div>',
				
			'</td>',
			'<td class="user-col">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'{{{userRemark}}}',
						'</div>',
					'</div>',
				'</div>',
				
			'</td>',
			
		'</tr>'

	].join('');
	TplLib.register('tpl_user_item', tpl_user_item);

	var tpl_user_ctrl = [
		'<div class="user-ctrl" data-id="{{id}}">',
			'<div class="user-ctrl-box">',
				'<div class="x-mul-vertical-middle">',
					'<div class="x-v-m-out">',
						'<div class="x-v-m-in item">',
							'<div class="pull-right">',
								'{{#each btns}}',
									'<button class="btn {{clz}}" data-act="{{act}}">{{{label}}}</button>',
								'{{/each}}',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
		'</div>',
	].join('');
	TplLib.register('tpl_user_ctrl', tpl_user_ctrl);

	var tpl_base_user_form = [
		'<form class="form-horizontal {{formClz}}" role="form" autocomplete="off">',
			'{{#each items}}',
				'{{#checkFormElementType type type="static"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<p class="form-control-static">{{value}}</p>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="text"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{mode}} autocomplete="off" />',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{mode}}  autocomplete="off"/>',
							'{{/isInputGroup}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="password"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="password" id="user_passwd" name="user_passwd" style="display:none" />',
									'<input type="password" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" autocomplete="off" />',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" />',
							'{{/isInputGroup}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="checkbox"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<label for="{{id}}" class="control-label">',
								'<input type="checkbox" id="{{id}}" name="{{name}}" value="{{defaultVal}}" data-type="{{type}}" data-onLabel="{{onLabel}}" data-offLabel="offLabel" {{checked}} />',
								'{{{label}}}',
							'</label>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="hidden"}}',
					'<input type="hidden" id="{{id}}" name="{{name}}" value="{{value}}" />',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="switcher"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'<input type="checkbox" id="{{id}}" name="{{name}}" value="{{defaultVal}}" data-type="{{type}}" data-onLabel="{{onLabel}}" data-offLabel="{{offLabel}}" {{checked}} />',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="roleBindGrp"}}',
					'<div class="form-group">',
						'<label for="" class="{{labelClz}}">{{{label}}}</label>',
					'</div>',
					'<div class="form-group role-bind-grp">',
						'<div class="{{clz}}">',
							'<dl>',
								'{{#each items}}',
									'<dt class="checkbox">',
										'<label for="role_{{id}}" class="control-label">',
											'<input id="role_{{id}}" name="{{type}}" type="checkbox" value="1" {{checked}} />',
											'{{name}}',
										'</label>',
										'<a class="btn btn-link btn-bind {{hideBtn}} {{disabledBtn}}" data-role="{{type}}">{{{btnLabel}}}</a>',
									'</dt>',
									'<dd>',
										'{{{roleDesc}}}',
									'</dd>',
								'{{/each}}',
							'</dl>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="textwithbtns"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{mode}} />',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{mode}}/>',
							'{{/isInputGroup}}',
						'</div>',
						'{{#each btns}}',
							'<div class="{{clz}}">',
								'<a class="btn {{btnClz}}" data-act="{{act}}" data-loading-text="{{loadingText}}">{{label}}</a>',
							'</div>',
						'{{/each}}',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="staticwithbtns"}}',
					'<div class="form-group {{hidden}}">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<p class="form-control-static">{{value}}</p>',
						'</div>',
						'{{#each btns}}',
							'<div class="{{clz}}">',
								'<a class="btn {{btnClz}}" data-act="{{act}}" data-loading-text="{{loadingText}}">{{label}}</a>',
							'</div>',
						'{{/each}}',
					'</div>',
				'{{/checkFormElementType}}',
			'{{/each}}',
		'</form>'
	].join('');
	TplLib.register('tpl_base_user_form', tpl_base_user_form);

	var tpl_role_bind_shop = [
		'<div class="query-shop {{clz}}">',
			'<p class="title">',
				'{{{title}}}',
			'</p>',
			'<div class="query-box"></div>',
			'<div class="result-box"></div>',
		'</div>'
	].join('');
	TplLib.register('tpl_role_bind_shop', tpl_role_bind_shop);

	var tpl_bind_shop_item = [
		'{{#checkItemType type type="checkbox"}}',
			'<div class="checkbox {{clz}}">',
				'<label for="{{shopID}}" class="control-label" title="{{shopName}}">',
					'<input type="checkbox" id="{{shopID}}" name="bindShop" value="{{shopID}}" data-type="{{type}}" {{checked}} />',
					'{{{shopNameLabel}}}',
				'</label>',
			'</div>',
		'{{/checkItemType}}',
		'{{#checkItemType type type="radio"}}',
			'<div class="radio {{clz}}">',
				'<label for="{{shopID}}" class="control-label" title="{{shopName}}">',
					'<input type="radio" id="{{shopID}}" name="bindShop" value="{{shopID}}" data-type="{{type}}" {{checked}} />',
					'{{{shopNameLabel}}}',
				'</label>',
			'</div>',
		'{{/checkItemType}}',
	].join('');
	TplLib.register('tpl_bind_shop_item', tpl_bind_shop_item);

	var tpl_settle_list = [
		'<div class="row">',
			'{{#with settleList}}',
				'{{#each list}}',
					'<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">',
						'{{> settleItem}}',
					'</div>',
				'{{/each}}',
			'{{/with}}',
		'</div>'
	].join('');
	TplLib.register('tpl_settle_list', tpl_settle_list);

	var tpl_settle_item = [
		'{{#checkItemType type type="checkbox"}}',
			'<div class="checkbox {{clz}}">',
				'<label for="{{settleUnitID}}" class="control-label" title="{{settleUnitName}}">',
					'<input type="checkbox" id="{{settleUnitID}}" name="bindSettle" value="{{settleUnitID}}" data-type="{{type}}" {{checked}} />',
					'{{{settleUnitNameLabel}}}',
				'</label>',
			'</div>',
		'{{/checkItemType}}',
		'{{#checkItemType type type="radio"}}',
			'<div class="radio {{clz}}">',
				'<label for="{{settleUnitID}}" class="control-label" title="{{settleUnitName}}">',
					'<input type="radio" id="{{settleUnitID}}" name="bindSettle" value="{{settleUnitID}}" data-type="{{type}}" {{checked}} />',
					'{{{settleUnitNameLabel}}}',
				'</label>',
			'</div>',
		'{{/checkItemType}}',
	].join('');
	TplLib.register('tpl_settle_item', tpl_settle_item);

	var tpl_shops_tree = [
		'<div class="row">',
			'<ul class="shop-tree col-sm-12" >',
				'{{#each cities}}',
					'<li class="node {{nodeClz}}">',
						'<div class="node-head">',
							'{{> collapseBtn}}',
							'{{> item}}',
						'</div>',
						'<div class="node-body collapse in" id="{{nodeType}}_{{id}}">',
							'<ul class="row">',
								'{{#each areas}}',
									'<li class="node  {{nodeClz}}">',
										'<div class="node-head">',
											'{{> collapseBtn}}',
											'{{> item}}',
										'</div>',
										'<div class="node-body collapse {{expanded}}" id="{{nodeType}}_{{id}}">',
											'<ul class="row">',
												'{{#each shops}}',
													'<li class="node {{nodeClz}}">',
														'<div class="node-head">',
															'{{> collapseBtn}}',
															'{{> item}}',
														'</div>',
													'</li>',
												'{{/each}}',
											'</ul>',
										'</div>',
									'</li>',
								'{{/each}}',
							'</ul>',
						'</div>',
					'</li>',
				'{{/each}}',
			'</ul>',
		'</div>'
	].join('');
	TplLib.register('tpl_shops_tree', tpl_shops_tree);

	var tpl_collapse_btn = [
		'<a data-toggle="collapse"  href="#{{nodeType}}_{{id}}" aria-expanded="true" aria-controls="{{nodeType}}_{{id}}" class="btn btn-link {{hideCollapse}}">',
            '<span class="glyphicon glyphicon-chevron-down"></span>',
        '</a>'
	].join('');
	TplLib.register('tpl_collapse_btn', tpl_collapse_btn);

	var tpl_shop_checkbox = [
		'<div class="checkbox">',
            '<label class="control-label">',
                '<input type="checkbox" value="{{id}}" name="{{nodeType}}" data-parent="{{parentID}}" {{checked}} />',
                '{{{name}}}',
            '</label>',
        '</div>'
	].join('');
	TplLib.register('tpl_shop_checkbox', tpl_shop_checkbox);

	var tpl_role_binding_info = [
		'<div class="row">',
			'<div class="col-sm-2 text-right">',
				'<label class="control-label ">账号名称</label>',
			'</div>',
			'<div class="col-sm-8">',
				'<p>{{{accountName}}}</p>',
			'</div>',

		
			'<div class="col-sm-12 table-responsive tbl-role-binding">',
				'<table class="table table-hover">',
					'<caption class="text-left">',
						'账号绑定信息',
					'</caption>',
					'<thead>',
						'<tr>',
							'<th class="col-sm-3">角色名称</th>',
							'<th class="col-sm-9">绑定店铺/结算账号</th>',
						'</tr>',
					'</thead>',
					'<tbody>',
						'{{#each roles}}',
							'<tr>',
								'<td class="col-sm-3">',
									'<p>{{name}}</p>',
								'</td>',
								'<td class="col-sm-9">',
									'<div class="label-box clearfix">',
										'{{#each items}}',
											'<span class="label label-default" data-id="{{id}}">',
											'{{name}}',
											'</span>',
										'{{/each}}',
									'</div>',
								'</td>',
							'</tr>',
						'{{/each}}',
					'</tbody>',
				'</table>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_role_binding_info', tpl_role_binding_info);

	var tpl_wizard_layout = [
		'<div id="{{id}}" class="wizard {{clz}}">',
			'<ul class="wizard-nav step-nav">',
				'{{#each stepNavs}}',
					'<li>',
						'<a href="#{{id}}" data-toggle="tab"><span class="label">{{idx}}</span>{{label}}</a>',
					'</li>',
				'{{/each}}',
			'</ul>',
			'<div class="wizard-content tab-content">',
				'{{#each steps}}',
					'<div class="tab-pane" id="{{id}}">',
						// '第{{id}}步',
					'</div>',
				'{{/each}}',
			'</div>',
			'<div class="wizard-ctrl">',
				'{{> stepAction}}',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_wizard_layout', tpl_wizard_layout);

	var tpl_user_mgr_layout = [
		'<div class="panel-group" id="{{panelGrpID}}" role="tablist" aria-multiselectable="true">',
			'{{#each panels}}',
				'<div class="panel panel-default {{hidden}}">',
					'<div class="panel-heading">',
                        '<h4 class="panel-title">',
                            '<a data-toggle="collapse" data-parent="#{{../panelGrpID}}" href="#{{id}}" aria-expande="{{expanded}}" aria-controls="{{id}}">',
                                '{{title}}',
                            '</a>',
                        '</h4>',
                    '</div>',
                    '<div class="panel-collapse collapse {{panelClz}}" id="{{id}}" role="tabpanel">',
                    	'<div class="panel-body">',

                    	'</div>',
                    '</div>',
				'</div>',
			'{{/each}}',
		'</div>'
	].join('');
	TplLib.register('tpl_user_mgr_layout', tpl_user_mgr_layout);
})(jQuery, window);






















;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;

	// 会员概览布局
	var tpl_crm_schema_layout = [
		'<div class="crm-schema-table">',
		'</div>',
		'<div class="crm-schema-chart row">',
			'{{#each charts}}',
				'<div class="{{clz}}">',
					'<div class="{{chartClz}}" id="{{id}}" title="{{label}}">',
					'</div>',
				'</div>',
			'{{/each}}',
		'</div>'
	].join('');
	TplLib.register('tpl_crm_schema_layout', tpl_crm_schema_layout);

	// 会员等级描述模板
	var tpl_crm_card_level_info = [
		'{{{cardLevelName}}}等级特权：',
		'{{#if isVipPrice}}',
			'享受会员价，',
		'{{else}}',
			'不享受会员价，',
		'{{/if}}',
		'{{{discountRate}}}，',
		'{{{discountRange}}}',
		'{{{discountDescription}}}',
		'累积消费{{{switchLevelUpPoint}}}元可升至该级。'
	].join('');
	TplLib.register('tpl_crm_card_level_info', tpl_crm_card_level_info);
	
	var tpl_crm_params = [
	'<form class="crm-params form-horizontal feed-back-out read-mode">',
        '<div class="col-md-6">',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">会员卡</label>',
                '<div class="col-sm-8">',
                    '<div class="vip-card-wrap">',
                        '<div style="color: {{cardForegroundColor}}; background-color: {{cardBackgroundColor}}">',
                            '<span>{{groupName}}</span>',
                            '<img src="{{logoImage}}">',
                        '</div>',
                    '</div>',
                    '<div class="vip-card" style="color: {{cardForegroundColor}}; background-color: {{cardBackgroundColor}}">',
                        '<img src="{{logoImage}}">',
                        '<p><span>会员卡</span></p>',
                        '<div>8888 8888 8888 8888</div>',
                    '</div>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-2 control-label no-require">会员卡logo</label>',
                '<div class="col-sm-10">',
                    '<label class="btn btn-default btn-logo" disabled>上传</label>',
                    '<span class="text-warning"> 图片格式必须为：PNG24格式的背景透明图片，不小于400像素*400像素</span>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-2 control-label no-require">会员卡背景图</label>',
                '<div class="col-sm-9">',
                    '<label class="btn btn-default btn-bg" disabled>上传</label>',
                    '<label class="btn btn-default btn-bg-no m-l" disabled>置空</label>',
                    '<span class="text-warning"> 图片格式必须为：jpg、png，600像素*376像素</span>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-2 control-label no-require card-text-label">会员卡文字颜色</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static">{{cardForegroundColor}}</p>',
                    '<div class="input-group card-color">',
                        '<input type="text" name="cardForegroundColor" class="form-control" value="{{cardForegroundColor}}" />',
                        '<span class="input-group-addon"><i></i></span>',
                    '</div>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-2 control-label no-require">会员卡背景色</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static">{{cardBackgroundColor}}</p>',
                    '<div class="input-group card-bg">',
                        '<input type="text" name="cardBackgroundColor" class="form-control" value="{{cardBackgroundColor}}" />',
                        '<span class="input-group-addon"><i></i></span>',
                    '</div>',
                '</div>',
            '</div>',
        '</div>',
        '<div class="col-md-6">',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">服务有效期</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static no-hidden">从 {{serviceStartTime}} 至 {{serviceEndTime}}</p>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">积分可抵扣消费</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static no-hidden"><span class="glyphicon glyphicon-{{isPointCanPay}}"></span></p>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">在线充值财务费率</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static no-hidden">{{onlineSaveMoneyRate}}</p>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">积分抵现系数</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static no-hidden">1积分可抵现{{pointExchangeRate}}(元)</p>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require">积分清零日期</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static no-hidden">{{pointClearDate}}</p>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label">结算账号</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static"></p>',
                    '<select name="onlineSaveMoneySettleUnitID" class="form-control"></select>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label" for="vipServiceTel">会员服务电话</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static">{{vipServiceTel}}</p>',
                    '<input type="text" name="vipServiceTel" class="form-control" value="{{vipServiceTel}}" />',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label no-require" for="vipServiceRemark">会员服务说明</label>',
                '<div class="col-sm-8">',
                    '<p class="form-control-static">{{{vipServiceRemark}}}</p>',
                    '<textarea class="form-control" name="vipServiceRemark" rows="6" maxlength="5000">{{vipServiceRemark}}</textarea>',
                '</div>',
            '</div>',
        '</div>',
		'<div class="step-action col-md-12">',
			'<button id="editBtn" class="btn btn-warning btn-edit">编辑</button>',
			'<button id="saveBtn" class="btn btn-warning btn-save">保存</button>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_crm_params', tpl_crm_params);

	var tpl_crm_recharge_sets = [
	'<div class="well well-sm t-r">',
		'<button class="btn btn-warning">添加</button>',
	'</div>',
	'<table id="crmRechargeSetsTable" class="table table-bordered table-striped table-hover">',
		'<thead>',
			'<tr>',
				'<th>充值套餐名</th>',
				'<th>充值金额</th>',
				'<th>返金额数</th>',
				'<th>返积分数</th>',
				'<th>充值升级等级</th>',
				'<th>销售份数</th>',
				'<th>状态</th>',
				'<th>操作</th>',
			'</tr>',
		'</thead>',
		'<tbody>',
		'{{#each sets}}',
			'<tr>',
				'<td>{{setName}}</td>',
				'<td>{{setSaveMoney}}</td>',
				'<td>{{returnMoney}}</td>',
				'<td>{{returnPoint}}</td>',
				'<td>{{switchCardLevelName}}</td>',
				'<td>{{salesAmount}}</td>',
				'<td><input type="checkbox" data-setid="{{saveMoneySetID}}" {{checked}} /></td>',
				'<td><button class="btn btn-default" data-setid="{{saveMoneySetID}}">修改</button></td>',
			'</tr>',
		'{{/each}}',
		'</tbody>',
	'</table>'].join('');
	TplLib.register('tpl_crm_recharge_sets', tpl_crm_recharge_sets);
	
	var tpl_crm_recharge_set_add_update = [
	'<form class="form-horizontal form-feedback-out">',
		'<div class="form-group">',
			'<label class="col-sm-offset-1 col-sm-3 control-label">* 套餐名</label>',
			'<div class="col-sm-5">',
				'<input type="text" name="setName" class="form-control" value="{{setName}}" />',
			'</div>',
		'</div>',
		'<div class="form-group">',
			'<label class="col-sm-offset-1 col-sm-3 control-label">* 充值金额</label>',
			'<div class="col-sm-5">',
				'<div class="input-group">',
                    '<span class="input-group-addon">￥</span>',
                    '<input type="text" name="setSaveMoney" class="form-control" value="{{setSaveMoney}}" />',
                    '<span class="input-group-addon">元</span>',
				'</div>',
			'</div>',
		'</div>',
		'<div class="form-group">',
			'<label class="col-sm-offset-1 col-sm-3 control-label">返金额数</label>',
			'<div class="col-sm-5">',
				'<div class="input-group">',
                    '<span class="input-group-addon">￥</span>',
                    '<input type="text" name="returnMoney" class="form-control" value="{{returnMoney}}" />',
                    '<span class="input-group-addon">元</span>',
				'</div>',
			'</div>',
		'</div>',
        '<div class="form-group">',
			'<label class="col-sm-offset-1 col-sm-3 control-label">返积分数</label>',
			'<div class="col-sm-5">',
				'<input type="text" name="returnPoint" class="form-control" value="{{returnPoint}}" />',
			'</div>',
		'</div>',
		'<div class="form-group">',
			'<label class="col-sm-offset-1 col-sm-3 control-label">充值升级等级</label>',
			'<div class="col-sm-5">',
				'<select name="switchCardLevelID" class="form-control" value="{{switchCardLevelID}}">',
					'<option value="0">不变</option>',
				'</select>',
			'</div>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_crm_recharge_set_add_update', tpl_crm_recharge_set_add_update);
	
	var tpl_crm_recharge_set_vip_level = [
	'{{#each levels}}',
		'<option value="{{cardLevelID}}">{{cardLevelName}}</option>',
	'{{/each}}'
	].join('');
	TplLib.register('tpl_crm_recharge_set_vip_level', tpl_crm_recharge_set_vip_level);
    
    var tpl_crm_query = [
    '<div class="well well-sm crm-query-panel">',
        '<form>',
            '<div class="t-j">',
                '<span class="date-lbl">',
                    '入会日期',
                    '<input type="text" name="createTimeStart" class="form-control" data-type="datetimepicker" value="" />',
                    '<i>--</i>',
                    '<input type="text" name="createTimeEnd" class="form-control ml-0" data-type="datetimepicker" value="" />',
                '</span> ',
                '<span>',
                    '关键字',
                    '<input type="text" name="keyword" class="form-control" placeholder="姓名、卡号、手机号" />',
                '</span> ',
                '<span>',
                    '会员等级',
                    '<select name="cardLevelID" class="form-control">',
                        '<option value="0">不限</option>',
                    '</select>',
                '</span> ',
                '<span>',
                    '状态',
                    '<select name="cardStatus" class="form-control">',
                        '<option value="">不限</option>',
                    '{{#each cardStatus}}',
                        '<option value="{{@key}}">{{this}}</option>',
                    '{{/each}}',
                    '</select>',
                '</span>',
            '</div>',
            '<div class="more-crm-query t-j dn">',
                '<span>',
                    '储值累计',
                    '<input type="text" name="saveMoneyTotalLowerLimit" class="form-control" />',
                    '<i>--</i>',
                    '<input type="text" name="saveMoneyTotalUpperLimit" class="form-control ml-0" />',
                '</span> ',
                '<span>',
                    '消费累计',
                    '<input type="text" name="consumptionTotalLowerLimit" class="form-control" />',
                    '<i>--</i>',
                    '<input type="text" name="consumptionTotalyUpperLimit" class="form-control ml-0" />',
                '</span> ',
                '<span>',
                    '积分余额',
                    '<input type="text" name="pointBalanceLowerLimit" class="form-control" />',
                    '<i>--</i>',
                    '<input type="text" name="pointBalanceUpperLimit" class="form-control ml-0" />',
                '</span>',
            '</div>',
        '</form>',
        '<div class="t-r">',
            '<a href="javascript:;">更多查询条件</a>',
            '<button class="btn btn-warning">查询</button>',
        '</div>',
    '</div>',
    '<table class="table table-bordered table-striped table-hover crm-query-table">',
        '<thead>',
            '<tr>',
            '{{#each crmQueryTableHeads}}',
                '<th>{{this}}</th>',
            '{{/each}}',
            '</tr>',
        '</thead>',
        '<tbody></tbody>',
    '</table>'].join('');
    TplLib.register('tpl_crm_query', tpl_crm_query);
    
    var tpl_crm_detail = [
    '<div class="basic-info"></div>',
    '<ul class="nav nav-tabs" role="tablist">',
        '<li class="active"><a href="#transDetail" data-toggle="tab">交易明细</a></li>',
        '<li><a href="#activities" data-toggle="tab">参与活动</a></li>',
        '<li><a href="#vouchers" data-toggle="tab">优惠券</a></li>',
        '<li><a href="#cardLog" data-toggle="tab">卡日志</a></li>',
    '</ul>',
    '<div class="tab-content">',
        '<div class="tab-pane active fade in" id="transDetail">',
            '<table class="table table-bordered table-striped table-hover">',
                '<thead><tr></tr></thead><tbody></tbody>',
            '</table>',
        '</div>',
        '<div class="tab-pane fade" id="activities">',
            '<table class="table table-bordered table-striped table-hover">',
                '<thead><tr></tr></thead><tbody></tbody>',
            '</table>',
        '</div>',
        '<div class="tab-pane fade" id="vouchers">',
            '<table class="table table-bordered table-striped table-hover">',
                '<thead><tr></tr></thead><tbody></tbody>',
            '</table>',
        '</div>',
        '<div class="tab-pane fade" id="cardLog">',
            '<table class="table table-bordered table-striped table-hover">',
                '<thead><tr></tr></thead><tbody></tbody>',
            '</table>',
        '</div>',
    '</div>'].join('');
    TplLib.register('tpl_crm_detail', tpl_crm_detail);
    
    var tpl_crm_pref = [
    '<div class="well well-sm query-panel">',
        '<form class="d-i">',
            '<span>',
                '城市 <select name="cityID" class="form-control"></select>',
            '</span>',
            '<span>',
                '店铺 <select name="shopID" class="form-control"></select>',
            '</span>',
        '</form>',
        '<button class="btn btn-warning">查询</button>',
    '</div>',
    '<table class="table table-bordered table-striped table-hover crm-pref-table">',
        '<thead><tr></tr></thead>',
        '<tbody></tbody>',
    '</table>'].join('');
    TplLib.register('tpl_crm_pref', tpl_crm_pref);
    
    var tpl_crm_pref_update = [
	'<form class="form-horizontal form-feedback-out pref-form">',
		'<div class="form-group">',
			'<label class="col-sm-3 control-label">起止日期</label>',
			'<div class="col-sm-8 fwc">',
                '<input type="text" name="startDate" class="form-control" value="{{startDate}}" data-type=datetimepicker />',
                ' <span class="gut">-</span> ',
                '<input type="text" name="endDate" class="form-control" value="{{endDate}}"  data-type=datetimepicker/>',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">折扣促销方式</label>',
			'<div class="col-sm-8">',
				'<label class="radio-inline">',
                    '<input type="radio" name="discountType" value="0" data-tip="会员消费折扣率=会员的等级折扣与店铺促销折扣值小的折扣率" /> 会员保底折扣率',
                '</label>',
                '<label class="radio-inline">',
                    '<input type="radio" name="discountType" value="1" data-tip="会员消费折扣率=会员等级折扣率*店铺促销折扣率" /> 折上折',
                '</label>',
                '<div></div>',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">* 促销折扣率</label>',
			'<div class="col-sm-8">',
				'<input type="text" name="discountRate" class="form-control" value="{{discountRate}}" />',
                '<div>如：0.9为九折、0.88为八八折</div>',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">积分促销方式</label>',
			'<div class="col-sm-8">',
				'<label class="radio-inline">',
                    '<input type="radio" name="pointType" value="0" data-tip="会员消费积分=可积分金额*等级积分系数*店铺积分系数" /> 倍数',
                '</label>',
                '<label class="radio-inline">',
                    '<input type="radio" name="pointType" value="1" data-tip="会员消费积分=可积分消费金额*（等级积分系数+店铺积分系数" /> 叠加',
                '</label>',
                '<div></div>',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">* 促销积分系数</label>',
			'<div class="col-sm-8">',
				'<input type="text" name="pointRate" class="form-control" value="{{pointRate}}" />',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">是否启用</label>',
			'<div class="col-sm-8">',
				'<select type="text" name="isActive" class="form-control" value="{{isActive}}">',
                    '<option value="0">不启用</option>',
                    '<option value="1">启用</option>',
                '</select>',
			'</div>',
		'</div>',
		
	'</form>'].join('');
	TplLib.register('tpl_crm_pref_update', tpl_crm_pref_update);
    
    var tpl_crm_query_panel = [
    '<div class="well well-sm query-panel clearfix">',
        '<form class="d-i">',
            '<span class="date-lbl">',
                '日期',
                '<input type="text" name="queryStartTime" class="form-control" data-type="datetimepicker" value="{{Beforeyesterday}}" />',
                '<i class="gut">--</i>',
                '<input type="text" name="queryEndTime" class="form-control ml-0" data-type="datetimepicker" value="{{today}}" />',
            '</span> ',
            '<span class="city">城市 <select name="cityID" class="form-control"></select></span>',
            '<span class="shop">店铺 <select name="transShopID" class="form-control"></select></span>',
        '</form> ',
        '<button class="btn btn-warning">查询</button>',
    '</div>'].join('');
    TplLib.register('tpl_crm_query_panel', tpl_crm_query_panel);
    
    var tpl_report_table = [
    '<table class="table table-bordered table-striped table-hover crm-report-table">',
        '<thead></thead>',
        '<tbody></tbody>',
        '<tfoot></tfoot>',
    '</table>'].join('');
    TplLib.register('tpl_report_table', tpl_report_table);
	
})(jQuery, window);











;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
    
    var tpl_wx_accounts = [
        '<div class="well well-sm clearfix">',
            '<button class="btn btn-warning fr">添加微信公众账号</button>',
        '</div>',
        '<div class="table-responsive">',
            '<table class="table table-bordered table-striped table-hover crm-report-table dn">',
                '<thead></thead><tbody></tbody>',
            '</table>',
        '</div>',
        '<div id="pager" class="t-r"></div>',
        '<div id="loading" class="alert t-c">加载中 . . .</div>',
        '<div id="noTip" class="alert alert-warning t-c m-t dn">没有查询到相关结果！~</div>',
    ].join('');
    TplLib.register('tpl_wx_accounts', tpl_wx_accounts);
    
    var tpl_wx_accounts_edit = [
	'<form class="form-horizontal form-feedback-out">',
        '{{#each fields}}',
		'<div class="form-group">',
			'<label class="col-sm-3 control-label">{{title}}</label>',
			'<div class="col-sm-7">',
				'<input type="text" name="{{name}}" class="form-control" {{disabled}} value="{{value}}" />',
			'</div>',
		'</div>',
        '{{/each}}',
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">认证状态</label>',
			'<div class="col-sm-7">',
				'<label class="radio-inline">',
                    '<input type="radio" name="oauth" value="0" checked /> 未认证',
                '</label>',
                '<label class="radio-inline">',
                    '<input type="radio" name="oauth" value="1" /> 已认证',
                '</label>',
			'</div>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_wx_accounts_edit', tpl_wx_accounts_edit);
    
	var tpl_wx_reply_query = [
    '<div class="well well-sm query-panel clearfix">',
        '<form class="d-i">',
            '<span>',
                '关键词',
                '<input type="text" name="pushContent" class="form-control" />',
            '</span> ',
            /*'<span>',
                '匹配类型',
                '<select name="pushContentType" class="form-control">',
                    '<option value="0">全匹配</option>',
                    '<option value="1">包含</option>',
                '</select>',
            '</span>',*/
        '</form> ',
        '<button class="btn btn-success">添加</button>',
        '<button class="btn btn-warning">查询</button>',
    '</div>',
    '<table class="table table-bordered table-striped table-hover">',
        '<thead><tr><th>用户发送消息</th><th>回复内容</th><th>操作</th></tr></thead>',
        '<tbody></tbody>',
    '</table>'].join('');
    TplLib.register('tpl_wx_reply_query', tpl_wx_reply_query);
    
    var tpl_wx_reply_query_item = [
    '<tr>',
        '<td>{{{pushMsg}}}</td>',
        '<td>{{replyContent}}</td>',
        '<td>',
            '<a href="javascript:;" class="update-reply" data-itemid={{itemID}}>修改</a>',
            '<a href="javascript:;" class="delete-reply" data-itemid={{itemID}}>删除</a>',
        '</td>',
    '</tr>'].join('');
    TplLib.register('tpl_wx_reply_query_item', tpl_wx_reply_query_item);
    
    var tpl_wx_reply_add_update = [
	'<form class="form-horizontal">',
		'<div class="form-group">',
			'<label class="col-sm-3 control-label">用户发送消息</label>',
			'<div class="col-sm-7">',
				'<input type="text" name="pushContent" class="form-control" value="{{pushContent}}" maxlength="64" title="长度须在64个字以内" />',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">关键词类型</label>',
			'<div class="col-sm-7">',
				'<label class="radio-inline">',
                    '<input type="radio" name="pushContentType" value="0" checked /> 完全匹配',
                '</label>',
                '<label class="radio-inline">',
                    '<input type="radio" name="pushContentType" value="1" /> 包含匹配',
                '</label>',
			'</div>',
		'</div>',
        
		'<div class="form-group">',
			'<label class="col-sm-3 control-label">回复内容标题</label>',
			'<div class="col-sm-7">',
				'<select name="resourceID" class="form-control" />',
			'</div>',
		'</div>',
        
        '<div class="form-group">',
			'<label class="col-sm-3 control-label">回复内容</label>',
			'<div class="col-sm-7 form-control-static"></div>',
		'</div>',
	'</form>'].join('');
	TplLib.register('tpl_wx_reply_add_update', tpl_wx_reply_add_update);

    var tpl_wx_subscribe = [
    '<div class="well well-sm query-panel clearfix">',
        //'请选择回复信息，并点击右侧“保存”按钮以添加或修改订阅消息。',
        '<button id="saveBtn" disabled class="btn btn-warning">保存</button>',
    '</div>',
    '<form class="form-horizontal">',
        '<div class="form-group">',
            '<label class="col-sm-4 control-label">回复信息</label>',
            '<div class="col-sm-4">',
                '<select name="resourceID" class="form-control" />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-4 control-label">内容信息</label>',
            '<div class="col-sm-4 form-control-static"></div>',
        '</div>',
    '</form>'].join('');
	TplLib.register('tpl_wx_subscribe', tpl_wx_subscribe);
    
    var tpl_wx_menu = [
    '<div id="menuPanel" class="col-sm-4">',
        '<nav class="navbar navbar-default">',
            '<span class="navbar-brand">管理菜单</span>',
            '<span class="navbar-right">',
                '<button class="btn btn-default navbar-btn" title="添加一级菜单" data-action="addMenu">添加</button>',
                '<button class="btn btn-default navbar-btn" title="从微信导入菜单数据" data-action="importMenu" data-importing-text="导入中...">导入</button>',
                '<button class="btn btn-default navbar-btn" title="保存菜单" data-action="saveMenu" data-saving-text="保存中...">保存</button>',
                '<button class="btn btn-warning navbar-btn" title="将菜单发布到微信" data-action="publishMenu" data-publishing-text="发布中...">发布</button>',
            '</span>',
        '</nav>',
        '<div id="menuWrap"></div>',
        '<div id="noMenuTip" class="alert alert-info t-c hidden">还没有菜单，点击“添加”按钮添加一级菜单。</div>',
    '</div>',
    '<div id="actionPanel" class="col-sm-8">',
        '<h4 class="action-panel-title">动作设置</h4>',
        '<div id="chooseAction">',
            '<p>请选择订阅者点击菜单后，公众号做出的相应动作</p>',
            '<div class="t-c">',
                '<span class="send-msg"><i data-action="toAction" data-target="sendMsg"></i>发送信息</span>',
                '<span class="to-page"><i data-action="toAction" data-target="toPage"></i>跳转到网页</span><br>',
                '<span class="scan-code"><i data-action="toAction" data-target="scanCode"></i>扫码</span>',
            '</div>',
        '</div>',
        '<div id="sendMsg">',
            '<div class="form form-horizontal">',
                '<div class="form-group">',
                    '<label class="col-sm-3 col-lg-4 control-label">事件回复内容</label>',
                    '<div class="col-sm-8 col-md-7 col-lg-5 res-wrap"></div>',
                '</div>',
                '<div class="form-group">',
                    '<label class="col-sm-3 col-lg-4 control-label">内容信息</label>',
                    '<div class="col-sm-8 col-md-7 col-lg-5 form-control-static res-preview"></div>',
                '</div>',
                '<div class="form-group">',
                    '<div class="col-sm-offset-3 col-lg-offset-4 col-sm-8 col-md-7 col-lg-5 form-control-static t-c">',
                        '<button class="btn btn-warning" data-action="saveMsg">确定</button>',
                        '<button class="btn btn-default" data-action="toAction" data-target="chooseAction">取消</button>',
                    '</div>',
                '</div>',
            '</div>',
        '</div>',
        '<div id="toPage">',
            '<div class="form form-horizontal link-res">',
                '<div class="form-group">',
                    '<label class="col-sm-3 col-lg-4 control-label">链接类型</label>',
                    '<div class="col-sm-8 col-md-7 col-lg-5 link-select-wrap"></div>',
                '</div>',
                '<div class="form-group link-content-wrap">',
                    '<label class="col-sm-3 col-lg-4 control-label link-name"></label>',
                    '<div class="col-sm-8 col-md-7 col-lg-5 link-content"></div>',
                '</div>',
                '<div class="form-group">',
                    '<div class="col-sm-offset-3 col-lg-offset-4 col-sm-8 col-md-7 col-lg-5 form-control-static t-c">',
                        '<button class="btn btn-warning" data-action="saveLink">确定</button>',
                        '<button class="btn btn-default" data-action="toAction" data-target="chooseAction">取消</button>',
                    '</div>',
                '</div>',
            '</div>',
        '</div>',
        '<div id="scanCode" class="t-c">',
            '当前菜单已设置为扫码菜单，如须更改请点击“取消”按钮。<br>',
            '<button class="btn btn-warning" data-action="toAction" data-target="chooseAction">取消</button>',
        '</div>',
        '<div id="showTip" class="alert alert-warning t-c">请选择某个菜单项，然后在此选择或者设置相关动作。</div>',
    '</div>'].join('');
	TplLib.register('tpl_wx_menu', tpl_wx_menu);
    
    var tpl_wx_menu_ops = [
    '<span>',
        '<i class="glyphicon glyphicon-plus" data-action="addSubMenu" title="添加二级菜单"></i>',
        '<i class="glyphicon glyphicon-pencil" data-action="editMenu" title="编辑"></i>',
        '<i class="glyphicon glyphicon-trash" data-action="deleteMenu" title="删除"></i>',
        '<i class="glyphicon glyphicon-arrow-up" data-action="moveMenuUp" title="上移"></i>',
        '<i class="glyphicon glyphicon-arrow-down" data-action="moveMenuDown" title="下移"></i>',
    '</span>'].join('');
	TplLib.register('tpl_wx_menu_ops', tpl_wx_menu_ops);
    
    var tpl_wx_menu_edit = [
    '<form class="form-horizontal menu-edit">',
        '<div class="form-group">',
            '<label class="control-label col-sm-3">菜单名称</label>',
            '<div class="col-sm-6">',
                '<input type="text" maxlength="{{max}}" required class="form-control" value="{{name}}" />',
                '<p>注：{{menuType}}级菜单名称不可超过{{max}}个字符。</p>',
            '</div>',
        '</div>',
    '</form>'].join('');
	TplLib.register('tpl_wx_menu_edit', tpl_wx_menu_edit);
    
    var tpl_wx_advertorial = [
    '<aside id="adList" class="col-sm-4">',
        '<h4 class="panel-head clearfix">',
            '<span class="p-title">软文列表</span>',
            '<button class="btn btn-warning pull-right" title="添加软文" data-action="addAd">',
                '<span class="glyphicon glyphicon-plus"></span>',
            '</button>',
        '</h4>',
        '<ul class="ad-ul"></ul>',
        '<div class="ad-loading t-c dn">加载中 . . .</div>',
        '<div class="ad-pager t-r"></div>',
        '<div class="alert alert-warning dn">',
            '还没有软文，点击“+”按钮可添加软文。',
        '</div>',
    '</aside>',
    '<div id="adCont" class="col-sm-8">',
        '<h4 class="panel-head clearfix">',
            '<span class="p-title">软文预览与操作</span>',
            '<button class="btn btn-warning btn-edit pull-right" data-action="editAd">编辑</button>',
            '<button class="btn btn-default btn-del pull-right" data-action="delAd" data-deleting-text="删除中...">删除</button>',
        '</h4>',
        '<article class="dn">',
            '<h3 class="ad-title"></h3>',
            '<input type="text" class="form-control ad-title-input" placeholder="请输入软文标题" maxlength="64" title="软文标题，64个字以内" />',
            '<h6 class="ad-sub-title"></h6>',
            '<div class="ad-preview"></div>',
            '<script type="text/plain" id="adEditor"></script>',
            '<div class="btn-wrap">',
                '<button class="btn btn-warning btn-save" data-action="saveAd" data-saving-text="保存中...">保存</button>',
                '<button class="btn btn-default btn-concel" data-action="concelEdit">取消</button>',
            '</div>',
        '</article>',
    '</div>'].join('');
	TplLib.register('tpl_wx_advertorial', tpl_wx_advertorial);
    
    var tpl_wx_content = [
    '<div class="ph has-btn clearfix">',
        '<h4 class="pt">图文列表</h4>',
        '<span class="fr">',
            '<button id="addContOne" class="btn btn-warning">添加单图文</button>',
            '<button id="addContMulti" class="btn btn-warning">添加多图文</button>',
        '</span>',
    '</div>',
    '<div class="fall clearfix"></div>',
    '<div class="alert alert-warning t-c no-cont dn">还没有添加任何图文哦！~</div>',
    '<div class="loading-tip dn">加载中 . . .</div>'].join('');
	TplLib.register('tpl_wx_content', tpl_wx_content);
    
    var tpl_wx_res_action = [
    '<div class="res-action clearfix">',
        '<div class="col-xs-6">',
            '<i class="glyphicon glyphicon-pencil edit-res" title="编辑"></i>',
        '</div>',
        '<div class="col-xs-6">',
            '<i class="glyphicon glyphicon-trash del-res" title="删除"></i>',
        '</div>',
    '</div>'].join('');
	TplLib.register('tpl_wx_res_action', tpl_wx_res_action);
    
    var tpl_wx_res_edit = [
    '<div class="col-sm-5 res-wrap"></div>',
    '<div class="form-horizontal col-sm-7 res-form">',
        '<div class="form-group">',
            '<label class="col-sm-3 control-label">标题</label>',
            '<div class="col-sm-9">',
                '<input type="text" maxlength="64" class="form-control res-title" value="{{resTitle}}" />',
            '</div>',
        '</div>',
        '<div class="form-group digest-wrap">',
            '<label class="col-sm-3 control-label">摘要</label>',
            '<div class="col-sm-9">',
                '<textarea class="form-control res-digest">{{digest}}</textarea>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-3 control-label">链接类型</label>',
            '<div class="col-sm-9 link-select-wrap"></div>',
        '</div>',
        '<div class="form-group link-content-wrap">',
            '<label class="col-sm-3 control-label link-name"></label>',
            '<div class="col-sm-9 link-content"></div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-3 control-label">图片</label>',
            '<div class="col-sm-9">',
                '<label class="btn btn-default">上传图片</label>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-3 control-label"></label>',
                '<div class="col-sm-9">',
                    '<span class="text-warning">',
                        '{{#if isSingle}}',
                        '封面图片建议尺寸：400像素*222像素',
                        '{{else}}',
                        '封面图片建议尺寸：360像素*240像素<br/>小图片建议尺寸：200像素 * 200像素',
                        '{{/if}}',
                    '</span>',
                '</div>',
        '</div>',
    '</div>'].join('');
	TplLib.register('tpl_wx_res_edit', tpl_wx_res_edit);
    
    var tpl_wx_res_sub = [
    '<div class="res-sub">',
        '<div class="img">缩略图</div>',
        '<h6></h6>',
        '<div class="res-mask">',
            '<i class="glyphicon glyphicon-pencil" title="编辑"></i>',
        '</div>',
    '</div>'].join('');
	TplLib.register('tpl_wx_res_sub', tpl_wx_res_sub);
    
	var tpl_wx_text = [
    '<div id="viewing">',
        '<div class="ph has-btn clearfix">',
            '<h4 class="pt">文本列表</h4>',
            '<button class="btn btn-warning fr" title="添加文本消息" data-action="addTxt">',
                '<i class="glyphicon glyphicon-plus"></i>',
            '</button>',
        '</div>',
        '<ul id="txts"></ul>',
        '<div id="loading" class="alert t-c dn">加载中 . . .</div>',
        '<div class="txt-pager t-r"></div>',
        '<div class="alert alert-warning t-c m-t dn">还没有文本消息哦！~</div>',
    '</div>',
    '<div id="editing" class="dn">',
        '<div class="ph has-btn m-b clearfix">',
            '<h4 class="pt">编辑文本消息</h4>',
            '<span class="fr">',
                '<button class="btn btn-default" data-action="concelEdit">取消</button>',
                '<button class="btn btn-warning" data-action="saveTxt" data-saving-text="保存中...">保存</button>',
            '</span>',
        '</div>',
        '<div class="form-horizontal">',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label">标题</label>',
                '<div class="col-sm-7">',
                    '<input id="txtTitle" type="text" maxlength="64" title="标题长度须在64个字以内" class="form-control" />',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-3 control-label">内容</label>',
                '<div class="col-sm-7">',
                    '<script type="text/plain" id="txtEditor" style="height: 300px"></script>',
                '</div>',
            '</div>',
        '</div>',
    '</div>'
    ].join('');
	TplLib.register('tpl_wx_text', tpl_wx_text);
    
    var tpl_wx_txts = [
    '{{#each this}}',
    '<li itemid={{itemID}}>',
        '<h4 class="txt-title">',
            '<span class="t-icos">',
                '<i data-action="editTxt" class="glyphicon glyphicon-pencil" title="修改"></i>',
                '<i data-action="delTxt" class="glyphicon glyphicon-trash" title="删除"></i>',
            '</span>',
            '<span class="t-txt">{{resTitle}}</span>',
        '</h4>',
        '<p class="txt-cont">{{{txtCont}}}</p>',
    '</li>',
    '{{/each}}'].join('');
    TplLib.register('tpl_wx_txts', tpl_wx_txts);
    
    var tpl_wx_txt_link = [
    '<div class="form-horizontal">',
        '<div class="form-group">',
            '<label class="col-sm-3 control-label">链接类型</label>',
            '<div class="col-sm-7 link-select-wrap"></div>',
        '</div>',
        '<div class="form-group link-content-wrap">',
            '<label class="col-sm-3 control-label link-name"></label>',
            '<div class="col-sm-7 link-content"></div>',
        '</div>',
    '</div>',
    ].join('');
    TplLib.register('tpl_wx_txt_link', tpl_wx_txt_link);
    
})(jQuery, window);











;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;

	var tpl_gift_card = [
		'<span class="mcm-card-box gift-card {{clz}}">',
			'<span class="card">',
				'<span class="card-left"></span>',
				'<span class="card-right"></span>',
				'<span class="card-label" title="{{{label}}} {{unit}}">',
					'<span class="val">{{{label}}}</span>',
					'<span class="unit">{{unit}}</span>',
				'</span>',
			'</span>',
		'</span>'
	].join('');
	TplLib.register('tpl_gift_card', tpl_gift_card);

	var tpl_event_card = [
		'<span class="mcm-card-box event-card {{clz}}">',
			'<span class="card">',
				'<span class="label">',
					'{{{label}}}',
				'</span>',
			'</span>',
		'</span>'
	].join('');
	TplLib.register('tpl_event_card', tpl_event_card);

	var tpl_gift_detail = [
		'<h4>基本信息</h4>',
		'<div class="media mcm-gift-info">',
			'<div class="media-left">',
				'{{#with card}}',
					'{{> card}}',
				'{{/with}}',
			'</div>',
			'<div class="media-body">',
				'<div class="form-horizontal">',
					'<div class="form-group">',
						'<label class="{{infoLabelClz}} control-label">名称:</label>',
						'<div class="{{infoTextClz}}">',
							'<p class="form-control-static">{{{giftName}}}</p>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="{{infoLabelClz}} control-label">类型:</label>',
						'<div class="{{infoTextClz}}">',
							'<p class="form-control-static">{{{giftTypeLabel}}}</p>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="{{infoLabelClz}} control-label">价值:</label>',
						'<div class="{{infoTextClz}}">',
							'<p class="form-control-static">{{{giftValue}}} {{{giftTypeUnit}}}</p>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="{{infoLabelClz}} control-label">创建时间:</label>',
						'<div class="{{infoTextClz}}">',
							'<p class="form-control-static">{{{createTime}}}</p>',
						'</div>',
					'</div>',
					
				'</div>',
			'</div>',
		'</div>',
		'<div class="media mcm-gift-info">',
			'<div class="media-body">',
				'<div class="form-horizontal">',
					'<div class="form-group">',
						'<label class="col-sm-2 control-label">使用说明:</label>',
						'<div class="col-sm-9">',
							'<p class="form-control-static">{{{giftRemark}}}</p>',
						'</div>',
					'</div>',
					'<div class="form-group">',
						'<label class="col-sm-2 control-label">使用规则:</label>',
						'<div class="col-sm-9">',
							'<p class="form-control-static">{{{giftRules}}}</p>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
		'</div>',
	].join('');
	TplLib.register('tpl_gift_detail', tpl_gift_detail);

	var tpl_event_detail = [
		'<div class="clearfix">',
			'<div class="mcm-event-info {{evtBaseClz}}">',
				'<h4>',
					'基本信息',
				'</h4>',
				'<div class="media ">',
					'<div class="media-left">',
						'{{#with card}}',
							'{{> card}}',
						'{{/with}}',
					'</div>',
					'<div class="media-body">',
						'<div class="form-horizontal">',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">活动名称:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{eventName}}}</p>',
								'</div>',
							'</div>',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">会员等级最低要求:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{cardLevelLabel}}}</p>',
								'</div>',
							'</div>',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">活动说明:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{eventRemark}}}</p>',
								'</div>',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="mcm-event-info {{evtRulesClz}}">',
				'<h4>',
					'活动规则',
				'</h4>',
				'<div class="media  ">',
					'<div class="media-body">',
						'<div class="form-horizontal">',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">参与活动扣减积分:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{deductPoints}}}</p>',
								'</div>',
							'</div>',
						'</div>',
						'<div class="form-horizontal">',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">参与活动赠送积分:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{sendPoints}}}</p>',
								'</div>',
							'</div>',
						'</div>',
						'<div class="form-horizontal">',
							'<div class="form-group">',
								'<label class="{{infoLabelClz}} control-label">活动规则:</label>',
								'<div class="col-sm-9">',
									'<p class="form-control-static">{{{eventRules}}}</p>',
								'</div>',
							'</div>',
						'</div>',
					'</div>',
				'</div>',
			'</div>',
		'</div>',
		'<div class="{{evtGiftsClz}}">',
			// '{{#if hasGifts}}',
			'<h4>',
				'奖品信息',
				'{{#if isApplyEvent}}',
					'<small>',
					'&nbsp;(<span>',
						'活动人气',
						'<strong>',
						'{{viewCount}}',
						'</strong>，',
					'</span>',
					'<span>',
						'报名人数',
						'<strong>',
						'{{userCount}}',
						'</strong>人，',
					'</span>',
					'<span>',
						'入围人数',
						'<strong>',
						'{{winCount}}',
						'</strong>人，',
					'</span>',
					'<span>',
						'还剩',
						'<strong>',
						'{{surplusCount}}',
						'</strong>人入围名额。)',
					'</span>',
					'</small>',
				'{{else}}',
					'<small>',
					'&nbsp;(<span>',
						'活动人气',
						'<strong>',
						'{{viewCount}}',
						'</strong>，',
					'</span>',
					'<span>',
						'参与人数',
						'<strong>',
						"{{userCount}}",
						'</strong>人',
					'</span>)',
					'</small>',
				'{{/if}}',
			'</h4>',
			'<div class="mcm-event-gifts">',
				'<table class="table table-bordered table-striped table-hover">',
					'<thead>',
						'<tr>',
							'<th class="{{hideEGiftLevel}}">{{EGiftLevelTh}}</th>',
							'<th>{{EGiftNameTh}}</th>',
							'<th>总数</th>',
							'<th>发出数</th>',
							'<th>剩余数</th>',
							'<th class="{{hideEGiftOdds}}">中奖概率(%)</th>',
							'<th class="{{hideEGfitValidUntilDayCount}}">有效天数</th>',
						'</tr>',
					'</thead>',
					'{{#if hasGifts}}',
						'<tbody>',
							'{{#each giftItems}}',
								'<tr>',
									'<td class="text {{../hideEGiftLevel}}">',
										'{{{level}}}',
									'</td>',
									'<td class="text">',
										'{{{EGiftName}}}',
									'</td>',
									'<td class="number">',
										'{{{EGiftTotalCount}}}',
									'</td>',
									'<td class="number">',
										'{{{EGiftSendCount}}}',
									'</td>',
									'<td class="number">',
										'{{{surplusCount}}}',
									'</td>',
									'<td class="number {{../hideEGiftOdds}}">',
										'{{{EGiftOdds}}}',
									'</td>',
									'<td class="number {{../hideEGfitValidUntilDayCount}}">',
										'{{{EGfitValidUntilDayCount}}}',
									'</td>',
								'</tr>',
							'{{/each}}',
						'</tbody>',
					'{{else}}',
						'<tbody>',
							'<tr>',
								'<td colspan="{{colCount}}"><p class="text-center">无结果</p></td>',
							'</tr>',
						'</tbody>',
					'{{/if}}',
				'</table>',
			'</div>',
			// '{{else}}',
			
			// '{{/if}}',
		'</div>'
	].join('');
	TplLib.register('tpl_event_detail', tpl_event_detail);

	var tpl_mcm_base_form = [
		'{{#if isDivForm}}',
		'<div class="form-horizontal {{formClz}}" role="form">',
		'{{else}}',
		'<form class="form-horizontal {{formClz}}" role="form">',
		'{{/if}}',
			'{{#each items}}',
				'{{#checkFormElementType type type="static"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<p class="form-control-static">{{value}}</p>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="textarea"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
								'<textarea id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{mode}}>{{{value}}}</textarea>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="text"}}',
					'<div class="form-group  {{hidden}}">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'{{#isInputGroup prefix surfix}}',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{disabled}} {{readonly}} {{mode}} />',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'{{else}}',
								'<input type="text" id="{{id}}" name="{{name}}" class="form-control {{hidden}}" placeholder="{{placeholder}}" value="{{value}}" data-type="{{type}}" {{disabled}} {{readonly}} {{mode}}/>',
							'{{/isInputGroup}}',
							'{{#if help}}',
								'<span class="help-block">{{{help}}}</span>',
							'{{/if}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="combo"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<select id="{{id}}" name="{{name}}" class="form-control" {{disabled}}  data-type="{{type}}">',
								'{{#each options}}',
									'<option value="{{value}}" {{selected}}>{{label}}</option>',
								'{{/each}}',
							'</select>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="radiogrp"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'{{#each options}}',
								'<label class="radio-inline {{clz}}">',
									'<input type="radio" name="{{name}}" {{disabled}} id="{{id}}" value="{{value}}" {{checked}} />',
									'{{label}}',
								'</label>',
							'{{/each}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="checkboxgrp"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'{{#each options}}',
								'<label class="checkbox-inline {{clz}}">',
									'<input type="checkbox" name="{{name}}" {{disabled}} id="{{id}}" value="{{value}}" {{checked}} />',
									'{{label}}',
								'</label>',
							'{{/each}}',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="selectShops"}}',
					'<div class="form-group">',
						'<label for="" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<div class="combo-shop" name="{{name}}"></div>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="hidden"}}',
					'<input type="hidden" id="{{id}}" name="{{name}}" value="{{value}}" />',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="inputCountCycleDays"}}',
					'<div class="form-group">',
						'<label for="" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<div class="cycle-box">',
								'{{#with countCycleDays}}',
									'<span class="cycle-label">',
										'同一用户',
									'</span>',
									'<select id="{{id}}" name="{{name}}" class="form-control">',
										'{{#each options}}',
											'<option value="{{value}}" {{selected}}>{{label}}</option>',
										'{{/each}}',
									'</select>',
								'{{/with}}',
								'{{#with partInTimes}}',
									'<span class="partin-label">',
										'总共可参与',
									'</span>',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" value="{{value}}" />',
									'<span class="partin-label">',
										'次',
									'</span>',
								'{{/with}}',
							'</div>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="section"}}',
					'<div class="form-group section">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'{{#with min}}',
							'<div class="min-input {{clz}}">',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" {{readonly}}  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'</div>',
						'{{/with}}',
						'{{#with max}}',
							// '<div class="col-sm-1 hidden-xs hidden-sm"><span class="to-label">到</span></div>',
							'<div class="max-input {{clz}}">',
								'<span class="to-label">到</span>',
								'<div class="input-group">',
									'{{#if prefix}}',
										'<span class="input-group-addon">',
											'{{{prefix}}}',
										'</span>',
									'{{/if}}',
									'<input type="text" id="{{id}}" name="{{name}}" class="form-control" placeholder="{{placeholder}}" value="{{value}}" {{readonly}}  data-type="{{type}}">',
									'{{#if surfix}}',
										'<span class="input-group-addon">',
											'{{{surfix}}}',
										'</span>',
									'{{/if}}',
								'</div>',
							'</div>',
						'{{/with}}',
					'</div>',
				'{{/checkFormElementType}}',
				
				'{{#checkFormElementType type type="pickgift"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<div class="input-group">',
								'<input type="text" readonly id="{{id}}" name="{{name}}" value="{{value}}" class="form-control" />',
								'<span class="input-group-btn">',
									'<button class="btn btn-default" name="pickgift" type="button">选择</button>',
								'</span>',
							'</div>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				'{{#checkFormElementType type type="switcher"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{label}}</label>',
						'<div class="{{clz}}">',
							'<input type="checkbox" id="{{id}}" name="{{name}}" value="{{defaultVal}}" data-type="{{type}}" data-onLabel="{{onLabel}}" data-offLabel="{{offLabel}}" {{checked}} />',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
				// '{{#checkFormElementType type type="pickaccount"}}',
				// 	'<div class="form-group">',
				// 		'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
				// 		'<div class="{{clz}}">',
				// 			'<div class="input-group">',
				// 				'<input type="text" readonly id="{{id}}" name="{{name}}" value="{{value}}" class="form-control" />',
				// 				'<span class="input-group-btn">',
				// 					'<button class="btn btn-default" name="pickgift" type="button">选择</button>',
				// 				'</span>',
				// 			'</div>',
				// 		'</div>',
				// 	'</div>',
				// '{{/checkFormElementType}}',
				'{{#checkFormElementType type type="pickaccount"}}',
					'<div class="form-group">',
						'<label for="{{id}}" class="{{labelClz}}">{{{label}}}</label>',
						'<div class="{{clz}}">',
							'<select class="form-control chosen-select chosen-select-no-results" id="{{id}}" name="{{name}}"  style="width:200px;">',
								'<option value=""></option>',
								'{{#each optGrp}}',
									'<optgroup label="{{name}}">',
										'{{#each items}}',
											'<option value="{{code}}">{{name}}</option>',
										'{{/each}}',
									'</optgroup>',
								'{{/each}}',
							'</select>',
						'</div>',
					'</div>',
				'{{/checkFormElementType}}',
			'{{/each}}',
		'{{#if isDivForm}}',
		'</div>',
		'{{else}}',
		'</form>',
		'{{/if}}'
	].join('');
	TplLib.register('tpl_mcm_base_form', tpl_mcm_base_form);

	var tpl_mcm_queryshops = [
		'<div class="row mcm-chose-shops">',
			'<div class="col-sm-offset-1 col-sm-4">',
				'<h4>待选择店铺</h4>',
				'<div class="select-left">',
					'{{#with chooseShopOpts}}',
					'<select name="{{comboName}}" multiple class="form-control">',
						'{{> optgroup}}',
					'</select>',
					'{{/with}}',
				'</div>',
			'</div>',
			'<div class="col-sm-3">',
				'<div class="select-center">',
				'{{> ctrlbtns}}',
				'</div>',
				// '<button class="btn btn-block {{clz}}" id="{{id}}" >{{{label}}}</button>',
			'</div>',
			'<div class="col-sm-4">',
				'<h4>已选择店铺</h4>',
				'<div class="select-right">',
					'{{#with chosenShopOpts}}',
					'<select name="{{comboName}}" multiple class="form-control">',
						'{{> optgroup}}',
					'</select>',
					'{{/with}}',
				'</div>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_mcm_queryshops', tpl_mcm_queryshops);

	var tpl_shop_optgroup = [
		'{{#each items}}',
		'<optgroup id="{{cityID}}" label="{{cityName}}" class="open">',
			'{{#each options}}',
				'<option class="{{clz}}" title="{{shopName}}" value="{{shopID}}">{{shopName}}</option>',
			'{{/each}}',
		'</optgroup>',
		'{{/each}}'
	].join('');
	TplLib.register('tpl_shop_optgroup', tpl_shop_optgroup);

	var tpl_account_opt = [
		'{{#each items}}',
			'<option value="{{value}}">{{name}}</option>',
		'{{/each}}',
	].join('');
	TplLib.register('tpl_account_opt', tpl_account_opt);

	var tpl_shop_choose = [
		'<div class="choose-shop-box">',
			'<p class="choose-shop-val">{{{shopNames}}}</p>',
			'<button class="btn btn-default btn-choose">选择店铺</button>',
		'</div>'
	].join('');
	TplLib.register('tpl_shop_choose', tpl_shop_choose);

	var tpl_mcm_event_giftset = [
		'<p class="alert alert-warning {{hideTip}}">{{tip}}</p>',
		'<form class="mcm-gift-set {{hidden}}">',
			'{{#each gifts}}',
			'<div class="panel panel-default {{clz}}" data-index="{{@index}}">',
				'<div class="panel-heading">',
					'<h3 class="panel-title">',
						'{{../giftSetTitle}}',
						// '中奖等级设置',
						'<span class="label label-info">{{giftLevelName}}</span>',
					'<h3>',
				'</div>',
				'<div class="panel-body">',
					// '{{#with form}}',
					'{{> baseform}}',
					// '{{/with}}',
				'</div>',
				'<div class="panel-footer">',
					'{{> ctrlbtns}}',
				'</div>',
			'</div>',
			'{{/each}}',
		'</form>'
	].join('');
	TplLib.register('tpl_mcm_event_giftset', tpl_mcm_event_giftset);

	var tpl_event_openstep = [
		'<div class="mcm-event-detail">',
			'{{> evtdetail}}',
		'</div>',
		'<p class="alert alert-warning">请仔细核对活动信息后，启用此活动</p>'
	].join('');
	TplLib.register('tpl_event_openstep', tpl_event_openstep);



	var tpl_giftdetail_layout = [
		'<div class="detail-layout">',
			'<nav class="nav-bar"></nav>',
			'<section class="row mcm-detail-info">',
				'<div class="col-sm-5">',
					'<div class="panel panel-info">',
						'<div class="panel-heading">',
							'<h3 class="panel-title">礼品信息</h3>',
						'</div>',
						'<div class="panel-body">',
							'{{> baseinfo}}',
						'</div>',
					'</div>',
				'</div>',
				'<div class="col-sm-7">',
					'<div class="panel panel-info">',
						'<div class="panel-heading">',
							'<h3 class="panel-title">礼品统计</h3>',
						'</div>',
						'<div class="panel-body">',
							'{{#with grid}}',
								'{{> grid}}',
							'{{/with}}',
						'</div>',
					'</div>',
				'</div>',
			'</section>',
			'<section class="detail-tabs">',
				'<ul class="nav nav-tabs" role="tablist">',
					'{{#each navs}}',
						'<li role="presentation" class="{{clz}} {{active}}">',
							'<a href="#{{value}}" id="{{id}}" role="tab" data-toggle="tab" aria-controls="profile">',
								'{{label}}',
							'</a>',
						'</li>',
					'{{/each}}',
				'</ul>',
				'<div class="tab-content">',
					'{{#each navs}}',
						'<div role="tabpanel" class="tab-pane fade " id="{{value}}" >',
						'</div>',
					'{{/each}}',
				'</div>',
			'</section>',
		'</div>'
	].join('');
	TplLib.register('tpl_giftdetail_layout', tpl_giftdetail_layout);

	var tpl_eventtrack_layout = [
		'<div class="detail-layout">',
			'<nav class="nav-bar"></nav>',
			'<section class="row mcm-detail-info">',
				
				'{{> baseinfo}}',
				
			'</section>',
			'<section class="event-track">',
			'</section>',
		'</div>'
	].join('');
	TplLib.register('tpl_eventtrack_layout', tpl_eventtrack_layout);

	var tpl_giftdetail_formpanel = [
		'<div class=" col-md-offset-3 col-md-6">',
			'<div class="panel panel-default">',
				'<div class="panel-heading">',
					'<h3 class="panel-title">{{panelTitle}}</h3>',
				'</div>',
				'<div class="panel-body">',
					// '{{> baseform}}',
				'</div>',
				'<div class="panel-footer clearfix"></div>',
			'</div>',
		'</div>'
	].join('');
	TplLib.register('tpl_giftdetail_formpanel', tpl_giftdetail_formpanel);

	var tpl_gift_sms = [
		'{{groupName}}赠送了您{{giftCount}}张{{giftName}}，您可以登录{{site}}，我的账户-代金券查看。'
	].join('');
	TplLib.register('tpl_gift_sms', tpl_gift_sms);
})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
    
    var tpl_agent = [
        '<div class="well well-sm query-panel clearfix">',
            '<form class="d-i">',
                //'<span>城市 <select name="cityID" class="form-control"></select></span>',
                '<span>店铺 <select name="shopID" class="form-control"></select></span>',
            '</form> ',
            '<a href="{{agentPath}}" class="fr m-r mt-8 foreward">下载代理程序</a>',
        '</div>',
        '<div class="table-responsive">',
            '<table class="table table-bordered table-striped table-hover crm-report-table dn">',
                '<thead></thead><tbody></tbody>',
            '</table>',
        '</div>',
        '<div id="pager" class="t-r"></div>',
        '<div id="loading" class="alert t-c">加载中 . . .</div>',
        '<div id="noTip" class="alert alert-warning t-c m-t dn">没有查询到相关结果！~</div>',
    ].join('');
    TplLib.register('tpl_agent', tpl_agent);
    
})(jQuery, window);











;(function($, window) {
    IX.ns('Hualala');
    var TplLib = Hualala.TplLib ;
    var tpl_category = [
        '<table class="table table-bordered table-striped table-hover {{tableClass}}">',
        '<thead>',
        '<tr>',
        '{{#each tableHeads}}',
        '<th class="t-c">{{this}}</th>',
        '{{/each}}',
        '</tr>',
        '</thead>',
        '<tbody>',
        '</tbody>',
        '</table>'].join('');

    TplLib.register('tpl_category', tpl_category);

    var tpl_category_modal = [
        '<form class="form-horizontal form-feedback-out">',
        '{{#if foodCategoryID}}',
        '<div class="form-group">',
        '<label class="col-sm-offset-1 col-sm-3 control-label">* 分类编号</label>',
        '<div class="col-sm-5">',
        '<input type="text" name="foodCategoryID" class="form-control" value="{{foodCategoryID}}" disabled />',
        '</div>',
        '</div>',
        '{{/if}}',
        '<div class="form-group">',
        '<label class="col-sm-offset-1 col-sm-3 control-label">分类名称*</label>',
        '<div class="col-sm-5">',
        '<input type="text" name="foodCategoryName" class="form-control" value="{{foodCategoryName}}"/>',
        '</div>',
        '</div>',
        '<div class="form-group hidden">',
        '<label class="col-sm-offset-1 col-sm-3 control-label">出品部门*</label>',
        '<div class="col-sm-5 department-select">',
        '<select name="departmentKey" class="form-control">',
        '<option value=""></option>',
        '{{#each departments}}',
        '<option value="{{this.key}}" {{this.selected}}>{{this.name}}</option>',
        '{{/each}}',
        '</select>',
        '</div>',
        '</div>',
        '<div class="form-group">',
        '<label class="col-sm-offset-1 col-sm-3 control-label" for="description">分类描述&nbsp;</label>',
        '<div class="col-sm-5">',
        '<textarea class="form-control" name="description" maxlength="250">{{description}}</textarea>',
        '</div>',
        '</div>',
        '</form>'].join('');
    TplLib.register('tpl_category_modal', tpl_category_modal);

    var tpl_category_tr = [
        '{{#each categories}}',
        '<tr data-foodid="{{this.foodCategoryID}}">',
        '<td>{{this.foodCategoryID}}</td>',
        '<td>{{this.foodCategoryName}}</td>',
        //可以添加部门后再显示出品部门
        //'<td>{{this.departmentName}}</td>',
        '<td>',
        '<a href="javascript:{}" title="移到顶部" class="glyphicon glyphicon-arrow-up sort-top"></a>',
        '<a href="javascript:{}" title="上移" class="glyphicon glyphicon-arrow-up ml-6 sort-up"></a>',
        '<a href="javascript:{}" title="下移" class="glyphicon glyphicon-arrow-down ml-6 sort-down"></a>',
        '<a href="javascript:{}" title="移到底部" class="glyphicon glyphicon-arrow-down ml-6 sort-bottom"></a>',
        '</td>',
        '<td><input type="checkbox" class="status" data-status="{{this.isActive}}" data-text="分类" name="isActive"></td>',
        '<td>',
        '<a href="javascript:{}" class="update-category">修改</a>',
        '<a href="javascript:{}" class="ml-8 delete-category">删除</a>',
        '</td>',
        '</tr>',
        '{{/each}}'].join('');
    TplLib.register('tpl_category_tr', tpl_category_tr);

    var tpl_no_records = '<div id="noTip" class="alert alert-warning t-c m-t dn" style="display: block;">暂无{{title}}数据</div>';
    TplLib.register('tpl_no_records', tpl_no_records);

    var tpl_goods_tbody = [
        '{{#each goods}}',
        '<tr data-foodid="{{this.foodID}}">',
        '<td>{{#if imageHWP}}<img src="{{this.imageHWP}}">{{else}}<img src="./asset/img/dino80.png">{{/if}}</td>',
        '<td>',
        '{{#stars starLevel}}',
        '{{/stars}}',
        '</td>',
        '<td>{{this.foodCategoryName}}</td>',
        '<td>{{this.foodCode}}</td>',
        '<td>{{this.foodName}}</td>',
        '<td>{{this.foodEnName}}</td>',
        '<td>{{#if takeawayTag}}<i class="glyphicon glyphicon-ok"></i> {{else}}<i class="glyphicon glyphicon-remove"></i>{{/if}}</td>',
        '<td>{{#if isAutoAdd}}<i class="glyphicon glyphicon-ok"></i> {{else}}<i class="glyphicon glyphicon-remove"></i>{{/if}}</td>',
        '<td><input type="checkbox" name="isActive" class="status" data-status="{{this.isActive}}" data-text="商品"></td>',
        '<td><input type="checkbox" name="isOpen" class="status" data-status="{{this.isOpen}}" data-text="网上开放"></td>',
        '<td><input type="checkbox" name="isDiscount" class="status" data-status="{{this.isDiscount}}" data-text="打折"></td>',
        '<td>',
        '<a href="javascript:{}" class="update-food">修改</a>',
        '<a href="javascript:{}" class="ml-8 delete-food">删除</a>',
        '</td>',
        '</tr>',
        '{{/each}}'].join('');
    TplLib.register('tpl_goods_tbody', tpl_goods_tbody);

    var tpl_create_btn = '<div class="t-r m-b"><button class="btn btn-warning {{operatorClass}}">{{title}}</button></div>';
    TplLib.register('tpl_create_btn', tpl_create_btn);

    var tpl_search_goods = ['<div class="well well-sm query-form">',
        '<form class="form-horizontal">',
        '<div class="row">',
        '<div class="col-md-5">',
        '<div class="form-group">',
        '<label class="col-xs-2 col-sm-2 col-md-4 control-label">{{firstItem.value}}</label>',
        '<div class="col-md-8">',
        '<input type="text" name="{{firstItem.name}}" class="form-control" placeholder="" value="" data-type="text">',
        '</div>',
        '</div>',
        '</div>',
        '<div class="col-md-4">',
        '<div class="form-group">',
        '<label class="col-xs-2 col-sm-2 col-md-4 control-label">{{secondItem.value}}</label>',
        '<div class="col-xs-8 col-sm-8 col-md-8">',
        '{{#with select}}',
        '{{> customSelect}}',
        '{{/with }}',
        '</div>',
        '</div>',
        '</div>',
        '<div class="col-md-1">',
        '<button type="button" class="btn btn btn-warning" name="search">查询</button>',
        '</div>',
        '<div class="col-md-2"><button type="button" class="btn btn btn-warning" name="{{operatorItem.name}}">{{operatorItem.value}}</button></div>',
        '</div>',
        '</form>',
        '</div>'].join('');
    Hualala.TplLib.register('tpl_search_goods', tpl_search_goods);

    var tpl_select = ['<select class="form-control" name="{{name}}">',
        '{{#if defaultOption}}',
        '<option value="" defaultOption.selected>{{defaultOption.name}}</option>',
        '{{/if}}',
        '{{#each options}}',
        '<option value="{{value}}" {{selected}}>{{name}}</option>',
        '{{/each}}',
        '</select>'].join('');
    Hualala.TplLib.register('tpl_select', tpl_select);

    var tpl_edit_good = [
        '<ul class="nav nav-tabs" role="tablist">',
            '<li class="active"><a href="#goodBasicInfo" data-toggle="tab">基本信息</a></li>',
            '<li class="{{detailDisplay}}"><a href="#goodDetailInfo" data-toggle="tab">详细信息</a></li>',
            '<li class="{{detailDisplay}}"><a href="#goodTaste" data-toggle="tab">作法口味</a></li>',
            '<li class="{{setFoodDisplay}} setFood"><a href="#setFoodDetail" data-toggle="tab">套餐明细</a></li>',
            '<li class="{{detailDisplay}}"><a href="#goodDesc" data-toggle="tab">图文信息</a></li>',
        '</ul>',
        '<div class="tab-content">',
            '<div class="tab-pane active fade in" id="goodBasicInfo">',
                '<div class="clearfix">',
                    '<form class="form-horizontal form-food col-md-6">',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">商品分类*</label>',
                            '<div class="col-md-6" name="categoriesSelect">',
                            '</div>',
                        '</div>',
                        //暂时隐藏掉部门
                        '<div class="form-group hidden">',
                            '<label class="col-sm-2 control-label">出品部门&nbsp;</label>',
                            '<div class="col-md-6" name="departmentsSelect">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">商品编号&nbsp;</label>',
                            '<div class="col-md-6">',
                            '<input type="text" name="foodCode" class="form-control" value="{{food.foodCode}}">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">商品名称*</label>',
                            '<div class="col-md-6">',
                            '<input type="text" name="foodName" class="form-control" value="{{food.foodName}}" data-type="text">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">启用状态&nbsp;</label>',
                            '<div class="col-md-6">',
                                '<input type="checkbox" name="isActive" class="status" data-status="{{food.isActive}}">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">网上开放&nbsp;</label>',
                            '<div class="col-md-6">',
                                '<input type="checkbox" name="isOpen" class="status" data-status="{{food.isOpen}}">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '<label class="col-sm-2 control-label">参与打折&nbsp;</label>',
                            '<div class="col-md-6">',
                                '<input type="checkbox" name="isDiscount" class="status" data-status="{{food.isDiscount}}">',
                            '</div>',
                        '</div>',
                        '<div class="form-group">',
                            '{{#if not3W}}',
                                '<label class="col-sm-3 control-label">是否是套餐&nbsp;</label>',
                                '<div class="control-label col-sm-2 set-food">',
                                    '{{#if food.foodID}}',
                                    '<input type="checkbox" {{setFoodChecked}} disabled name="isSetFood" />&nbsp;套餐',
                                    '{{else}}',
                                    '<input type="checkbox" {{setFoodChecked}} name="isSetFood" />&nbsp;套餐',
                                    '{{/if}}',
                                '</div>',
                            '{{/if}}',
                        '</div>',
                    '</form>',
                    '<div class="food-pic col-md-4">',
                        '<div>',
                        '{{#if food.foodPic}}',
                        '<img src="{{food.foodPic}}" alt="商品图片" width="200px" />',
                        '{{else}}',
                        '<img src="./asset/img/food_bg.png" alt="商品图片" width="200px" />',
                        '{{/if}}',
                        '<span>上传中 . . .</span>',
                        '</div>',
                        '<label class="btn-link m-t">上传图片</label>',
                        '<div class="m-t warning text-warning">图片格式必须为：jpg、png，宽不小于600像素</div>',
                    '</div>',
                '</div>',
                '<div class="good-unit">',
                    '{{> goodUnit}}',
                '</div>',
            '</div>',
            '<div class="tab-pane fade" id="goodDetailInfo">',
                '<form class="form-horizontal form-food-detail">',
                    '<div class="form-group">',
                        '<label class="col-sm-2 control-label">外送类型</label>',
                        '<div class="col-md-3">',
                        '{{#with takeawayTypes}}',
                        '{{> customSelect}}',
                        '{{/with }}',
                        '</div>',
                    '</div>',
                    '<div class="form-group package {{packageHidden}}">',
                        '<label class="col-sm-2 control-label">打包费</label>',
                        '<div class="col-md-4">',
                            '<div class="input-group">',
                                '<span class="input-group-addon">￥</span>',
                                    '<input type="text" name="takeoutPackagingFee" class="form-control" value="{{food.takeoutPackagingFee}}">',
                                '<span class="input-group-addon">元</span>',
                            '</div>',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-2 control-label">辣度标记</label>',
                        '<div class="col-md-3">',
                        '{{#with hotTags}}',
                        '{{> customSelect}}',
                        '{{/with }}',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-2 control-label">起售数量</label>',
                        '<div class="col-md-3">',
                        '<input type="text" name="minOrderCount" class="form-control" value="{{food.minOrderCount}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group setting-snewr">',
                        '<label class="col-sm-2 control-label">招新荐</label>',
                        '<div class="col-md-9">',
                            '{{#each foodAttrSNewR}}',
                                '<label class="control-label m-r"><input type="radio" {{checked}} name="foodIco" value="{{name}}"/>&nbsp;{{text}}</label>',
                            '{{/each}}',
                        '</div>',
                    '</div>',
                    '<div class="form-group setting-label">',
                        '<label class="col-sm-2 control-label">其它属性</label>',
                        '<div class="col-md-9">',
                            '{{#each foodSettings}}',
                                '<label class="control-label m-r"><input type="checkbox" {{checked}} name="{{name}}" />&nbsp;{{text}}</label>',
                            '{{/each}}',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-2 control-label" for="clickAlertMess">顾客点菜提醒</label>',
                        '<div class="col-sm-8">',
                            '<textarea class="form-control" name="clickAlertMess" maxlength="500">{{food.clickAlertMess}}</textarea>',
                        '</div>',
                    '</div>',
                '</form>',
            '</div>',
            '<div class="tab-pane fade" id="goodTaste">',
                '<form class="form-horizontal form-taste">',
                    '<div class="form-group">',
                        '<label class="col-sm-1 control-label">口味</label>',
                        '<div class="col-md-9">',
                            '<input type="text" placeholder="多个口味用英文“,”隔开" name="tasteList" class="form-control" value="{{food.tasteList}}">',
                        '</div>',
                    '</div>',
                    '<div class="form-group">',
                        '<label class="col-sm-1 control-label">作法</label>',
                        '<div class="col-md-9">',
                            '<input type="text" placeholder="多种作法用英文“,”隔开" name="makingMethodList" class="form-control" value="{{food.makingMethodList}}">',
                        '</div>',
                    '</div>',
                '</form>',
            '</div>',
            '<div class="clearfix tab-pane fade" id="setFoodDetail">',
                '<div class="col-md-7 set-list">',
                    '<div class="clearfix">',
                        '<label>商品名称：<span name="foodName">{{food.foodName}}</span></label>',
                        '<button class="btn btn-default pull-right" name="addCategory">添加套餐分类</button>',
                    '</div>',
                    '<div class="set-foods m-t table-responsive">',
                        '{{#if food.hasSetFoodList}}',
                            '<table class="table table-bordered table-hover {{category.tableClass}}">',
                                '<thead>',
                                    '<tr>',
                                        '{{#each category.tableHeads}}',
                                            '<th class="t-c">{{this}}</th>',
                                        '{{/each}}',
                                    '</tr>',
                                '</thead>',
                                '<tbody>',
                                    '{{#each food.setFoodDetail.foodLst}}',
                                        '{{#with this}}',
                                            '{{> category}}',
                                        '{{/with}}',
                                        '{{#each items}}',
                                            '{{#with this}}',
                                                '{{> food}}',
                                            '{{/with}}',
                                        '{{/each}}',
                                    '{{/each}}',
                                '</tbody>',
                            '</table>',
                        '{{/if}}',
                    '</div>',
                '</div>',
                '<div class="col-md-1 glyphicon glyphicon-arrow-left hidden"></div>',
                '<div class="col-md-4 good-list">',
                    '<div class="clearfix search-btn">',
                    '</div>',
                    '<div class="search-foods m-t">',
                        '<div class="foods m-t">',
                        '</div>',
                        '<div class="page-selection">',
                        '</div>',
                    '</div>',
                '</div>',
            '</div>',
            '<div class="tab-pane fade" id="goodDesc">',
                '<script type="text/plain" id="goodDescEditor" style="height: 300px"></script>',
            '</div>',
        '</div>'
    ].join('');
    TplLib.register('tpl_edit_good', tpl_edit_good);

    var tpl_input_group = [
        '<div class="input-group">',
            '<div class="input-group-btn">',
                '<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">',
                    '<span class="selected">全部</span>',
                    '&nbsp;<span class="caret"></span>',
                '</button>',
                '<ul class="dropdown-menu" role="menu">',
                    '<li><a href="javascript:{}">全部</a></li>',
                    '{{#each options}}',
                        '<li><a href="javascript:{}" data-id="{{value}}">{{name}}</a></li>',
                    '{{/each}}',
                '</ul>',
            '</div>',
            '<input type="text" class="form-control" name="foodCategoryName" placeholder="分类/名称/拼音/简拼">',
            '<span class="input-group-btn">',
                '<button class="btn btn-default" name="search" type="button">查询</button>',
            '</span>',
        '</div>',
    ].join('');
    TplLib.register('tpl_input_group', tpl_input_group);

    var tpl_taste_list = [
            '{{#each list}}',
                '<label><input type="checkbox" data-itemid="{{itemID}}">{{notesName}}</label>',
            '{{/each}}',
    ].join('');
    TplLib.register('tpl_taste_list', tpl_taste_list);

    var tpl_good_unit = [
        '<table>',
            '<thead>',
                '<tr>',
                '{{#each goodUnits.tableHeads}}',
                    '<th>{{this}}</th>',
                '{{/each}}',
                '</tr>',
            '</thead>',
            '<tbody>',
            '{{#each food.units}}',
                '{{#with this}}',
                    '{{> goodUnitTr}}',
                '{{/with}}',
            '{{/each}}',
            '</tbody>',
        '</table>',
    ].join('');

    TplLib.register('tpl_good_unit', tpl_good_unit);

    var tpl_good_unit_tr = [
        '<tr data-itemid="{{itemID}}">',
        '<td><span>规格{{index}}',
        '</span>',
        '</td>',
        '<td><input type="text" name="unit" value="{{unit}}" {{disabled}}/></td>',
        '<td><input type="text" name="price" value="{{price}}"/></td>',
        '<td><input type="text" name="vipPrice" value="{{vipPrice}}"/></td>',
        '<td><input type="text" name="prePrice" value="{{prePrice}}"/></td>',
        '<td>',
        '{{#if lessThanFourUnits}}',
        '{{> addUnitBtn}}',
        '{{/if}}',
        '{{#if customLast}}',
        '{{> delUnitBtn}}',
        '{{/if}}',
        '</td>',
        '</tr>'
    ].join('');

    TplLib.register('tpl_good_unit_tr', tpl_good_unit_tr);

    var tpl_good_unit_add_btn = ['<a class="glyphicon glyphicon-plus-sign" href="javascript:{}"></a>'].join('');
    TplLib.register('tpl_good_unit_add_btn', tpl_good_unit_add_btn);

    var tpl_good_unit_del_btn = ['<a class="glyphicon glyphicon-minus-sign" href="javascript:{}"></a>'].join('');
    TplLib.register('tpl_good_unit_del_btn', tpl_good_unit_del_btn);

    var tpl_create_food_operation = [
        '{{#if isModalFooter}}',
        '<button class="btn btn-default btn-close" data-dismiss="modal">关闭</button>',
        '<button class="btn btn-default btn-ok">保存</button>',
        '{{else}}',
        '<button class="btn btn-default" name="save-food">保存</button>',
        '<button class="btn btn-default" name="save-create-food">保存并新加商品</button>',
        '<button class="btn btn-default" name="save-close">保存并关闭</button>',
        '{{/if}}'
    ].join('');
    TplLib.register('tpl_modal_footer', tpl_create_food_operation);


    var tpl_set_food_category = [
        '<tr class="category active {{selectedClass}}">',
            '<td colspan="5">',
                '<input type="text" name="categoryName" class="form-control" placeholder="输入分类名称" value="{{foodCategoryName}}">',
                '<span class="categoryNum m-l">{{foodItemsLength}}</span>',
                '<span> 选</span>',
                '<input type="text" disabled' +
                ' name="chooseCount" class="form-control m-l" value="{{chooseCount}}">',
            '</td>',
            '<td>',
                '<a href="javascript:{}" class="del-category">删除</a>',
            '</td>',
        '</tr>'
    ].join('');
    Hualala.TplLib.register('tpl_set_food_category', tpl_set_food_category);
    var tpl_set_food_tr= [
        '<tr class="food" data-unitkey="{{unitKey}}" data-foodkey="{{foodKey}}">',
            '<td class="foodName">{{foodName}}</td>',
            '<td class="unit">{{price}}/{{unit}}</td>',
            '<td><input type="text" name="number" class="form-control" value="{{number}}"></td>',
            '<td><input type="text" name="addPrice" class="form-control" value="{{addPrice}}"></td>',
            '<td><input name="selected" type="checkbox" {{checked}}></td>',
            '<td><a href="javascript:{}" class="del-food">删除</a></td>',
        '</tr>'
    ].join('');
    Hualala.TplLib.register('tpl_set_food_tr', tpl_set_food_tr);

})(jQuery, window);;(function ($, window) {
	IX.ns("Hualala");
	var TplLib = Hualala.TplLib;
    
    var tpl_channnel_sets = [
    '<div class="well well-sm t-r">',
        '<button class="btn btn-warning">增加渠道</button>',
    '</div>',
    '<table id="channnelSetsTable" class="table table-bordered table-striped table-hover">',
        '<thead>',
            '<tr>',
                '<th class="t-c hidden">渠道ID</th>',
                '<th class="t-c">渠道名称</th>',
                '<th class="t-c">内置渠道</th>',
                '<th class="t-c">渠道描述</th>',
                '<th class="t-c">创建人</th>',
                '<th class="t-c">启用状态</th>',
                '<th class="t-c">操作</th>',
            '</tr>',
        '</thead>',
        '<tbody>',
        '{{#each channels}}',
            '<tr>',
                '<th class="t-c hidden">{{this.itemID}}</th>',
                '<td class="t-c">{{this.channelName}}</td>',
                '<td class="t-c col-md-1">{{this.nameisGlobal}}</td>',
                '<td>{{this.shortRemarks}}</td>',
                '<td class="t-c">{{this.ncreateBy}}</td>',
                '<td class="t-c col-md-2"><input type="checkbox" data-setid="{{itemID}}" {{checked}} /></td>',
                '<td class="t-c col-md-1">{{#if this.channelGlobal}}<a href="javascript:{}" class="channel-update" data-setid="{{itemID}}">修改</a><a href="javascript:{}" class="ml-8 channel-delete" data-setid="{{itemID}}">删除</a>{{/if}}</td>',
            '</tr>',
        '{{/each}}',
        '</tbody>',
    '</table>'].join('');
    TplLib.register('tpl_channnel_sets', tpl_channnel_sets);
    var tpl_channel_add_update = [
    '<form class="form-horizontal form-feedback-out">',
        '<div class="form-group hidden">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 渠道ID</label>',
            '<div class="col-sm-5">',
                '<input type="text" name="itemID" class="form-control" value="{{itemID}}" disabled />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 渠道名称</label>',
            '<div class="col-sm-5">',
                '<input type="text" name="channelName" class="form-control channelName" value="{{channelName}}" />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">渠道说明</label>',
            '<div class="col-sm-5">',
                    '<textarea id="{{id}}" name="channelRemark" class="form-control" placeholder="{{placeholder}}" value="{{channelRemark}}">{{channelRemark}}</textarea>',
            '</div>',
        '</div>',
  
    '</form>'].join('');
    TplLib.register('tpl_channel_add_update', tpl_channel_add_update);



    var tpl_department_sets = [
    '<div class="well well-sm t-r">',
        '<button class="btn btn-warning">增加部门</button>',
    '</div>',
    '<table id="departmentSetsTable" class="table table-bordered table-striped table-hover">',
        '<thead>',
            '<tr>',
                '<th class="t-c">部门名称</th>',
                '<th class="t-c">部门类型</th>',
                '<th class="t-c">描述</th>',
                '<th class="t-c">操作</th>',
            '</tr>',
        '</thead>',
        '<tbody>',
        '{{#each departments}}',
            '<tr>',
                '<td class="t-c">{{this.departmentName}}</td>',
                '<td class="t-c">{{this.departmentTypeText}}</td>',
                '<td>{{this.shortRemarks}}</td>',
                '<td class="t-c col-md-2"><a href="javascript:{}" class="department-update" data-setid="{{itemID}}">修改</a><a href="javascript:{}"  class="ml-8 department-delete" data-setid="{{itemID}}">删除</a></td>',
            '</tr>',
        '{{/each}}',
        '</tbody>',
    '</table>'].join('');
    TplLib.register('tpl_department_sets', tpl_department_sets);

    var tpl_department_add_update = [
    '<form class="form-horizontal form-feedback-out">',
        '<div class="form-group hidden">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 部门ID</label>',
            '<div class="col-sm-5">',
                '<input type="text" name="itemID" class="form-control" value="{{department.itemID}}" disabled />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 部门名称</label>',
            '<div class="col-sm-5">',
                '<input type="text" name="departmentName" class="form-control" value="{{department.departmentName}}" />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 部门类型</label>',
            '<div class="col-sm-5">',
                '<select name="departmentType" class="form-control">',
                    '<option value="">--请选择--</option>',
                    '{{#each dTypes}}',
                    '<option value="{{this.value}}" {{this.selected}}>{{this.label}}</option>',
                    '{{/each}}',
                '</select>',
            '</div>',
        '</div>',
        '{{#if dTypes.isDisplay}}',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">打印方式</label>',
            '<div class="col-sm-5">',
                '<select name="printType" class="form-control">',
                    '<option value=""></option>',
                    '{{#each printTypes}}',
                    '<option value="{{this.value}}" {{this.selected}}>{{this.label}}</option>',
                    '{{/each}}',
                '</select>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">打印份数</label>',
            '<div class="col-sm-5">',
                '<select id="printCopies" name="printCopies" class="form-control">',
                    '<option value=""></option>',
                    '<option value="1" {{this.selected}}>1</option>',
                    '<option value="1" {{this.selected}}>2</option>',
                    '<option value="1" {{this.selected}}>3</option>',
                    '<option value="1" {{this.selected}}>4</option>',
                    '<option value="1" {{this.selected}}>5</option>',
                '</select>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">打印机</label>',
            '<div class="col-sm-5">',
                '<select id="printerName" name="printerName" class="form-control">',
                '</select>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">打印总单</label>',
            '<div class="col-sm-5">',
                '<input type="checkbox" name="isPrintTotal"  value="1" checked="" />',
            '</div>',
        '</div>',
        '{{/if}}',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">部门描述</label>',
            '<div class="col-sm-5">',
                    '<textarea id="{{id}}" name="departmentRemark" class="form-control" placeholder="{{placeholder}}" value="{{department.departmentRemark}}">{{department.departmentRemark}}</textarea>',
            '</div>',
        '</div>',
  
    '</form>'].join('');
    TplLib.register('tpl_department_add_update', tpl_department_add_update);

     var tpl_subject_tab =[
        '<section class="detail-tabs subject-content">',
            '<div class="navbar navbar-default">',
                '<ul class="nav navbar-nav subject-tabs">',
                '</ul>',
            '</div>',
            '<div class="tab-content">',
            '</div>',
        '</section>',
    ].join('');
    TplLib.register('tpl_subject_tab', tpl_subject_tab);

    var tpl_subject_query =[
        '<div class="well well-sm query-form">',
            '<form class="form-horizontal">',
                '<div class="row">',
                    '<div class="col-md-5">',
                        '<div class="form-group">',
                            '<label class="col-xs-2 col-sm-2 col-md-4 control-label">{{firstItem.value}}</label>',
                            '<div class="col-md-8">',
                                '<input type="text" name="{{firstItem.name}}" class="form-control" placeholder="项目名称,分类名称" data-type="text">',
                            '</div>',
                        '</div>',
                    '</div>',
                    '<div class="col-md-offset-1 col-md-2 pull-right">',
                        '<button type="button" class="btn btn btn-block btn-warning subject-search" name="search">查询</button>',
                    '</div>',
                '</div>',
            '</form>',
        '</div>',
    ].join('');
    TplLib.register('tpl_subject_query',tpl_subject_query);
    var tpl_subject_tbody = [
    '{{#each items}}',
    '<tr>',
        '<td colspan="6">{{@key}}</td>',
        '<td class="t-c"><a class="subject-add"  data-setGroupName="{{@key}}"href="javascript:;">新增项目</a></td>',
    '</tr>',
    '{{#each this}}',
    '<tr>',
        '<td class="t-c">{{this.subjectName}}</td>',
        '<td class="t-c">{{this.nameisGlobal}}</td>',
        '<td class="t-c">{{this.subjectRate}}</td>',
        '<td class="t-c">{{this.nameisPay}}</td>',
        '<td class="t-c">{{this.ncreateBy}}</td>',
        '<td class="t-c"><input type="checkbox" data-setid="{{itemID}}"  {{checked}} /></td>',
        '<td class="t-c">{{#if operateBtn}}<a data-setid="{{itemID}}" data-setGroupName="{{subjectGroupName}}" class="subject-update" href="javascript:;">修改</a><a data-setid="{{itemID}}" data-setName="{{subjectName}}"class="ml-8 subject-delete"href="javascript:;">删除</a>{{/if}}</td>',
       
    '</tr>',
    '{{/each}}',
    '{{/each}}'
    ].join('');
    TplLib.register('tpl_subject_tbody',tpl_subject_tbody);
    var tpl_subject_modal =[
       '<form class="form-horizontal form-feedback-out">',
        //'{{#if subjectGroupName}}',
        '   <div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">* 分类</label>',
                '<div class="col-sm-5">',
                    '<input type="text" name="subjectGroupName"  class="form-control" value="{{subjectGroupName}}" disabled />',
                '</div>',
            '</div>',
        //'{{/if}}',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">* 项目名称</label>',
            '<div class="col-sm-5">',
                '<input type="text" name="subjectName" class="form-control subjectName" value="{{subjectName}}" />',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">手续费率</label>',
            '<div class="col-sm-5">',
                '<div class="input-group">',
                    '<input type="text" name="subjectRate" class="form-control subjectRate" value="{{subjectRate}}" />',
                    '<span class="input-group-addon">%</span>',
                '</div>',
                '<span class="help-block">提醒：手续费为0-100内的数字且小数点后最多为两位</span>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label"></label>',
            '<div class="col-sm-5">',
                '<label class="checkbox-inline  checkbox-inline"><input type="checkbox" name="isPay" value="1" {{display}}>可用于结账</label>',
                '<label class="checkbox-inline  checkbox-inline"><input type="checkbox" name="isMoneyWipeZero" value="1" {{selected}}>执行抹零规则</label>',
            '</div>',
        '</div>',
        '<div class="form-group">',
            '<label class="col-sm-offset-1 col-sm-3 control-label">项目描述</label>',
            '<div class="col-sm-5">',
                    '<textarea id="{{id}}" name="payRemark" class="form-control" placeholder="{{placeholder}}" value="{{payRemark}}">{{payRemark}}</textarea>',
            '</div>',
        '</div>',
  
    '</form>'].join('');
    TplLib.register('tpl_subject_modal',tpl_subject_modal);

    var tpl_remark_query=[
        '<div class="well well-sm query-form">',
            '<form class="form-horizontal">',
                '<div class="row">',
                    '<div class="form-group col-md-8">',
                        '<label class="col-xs-2 col-sm-2 col-md-2 control-label">字典类型</label>',
                        '<div class="col-md-4">',
                            '<select name="notesType" id="notesTypeTag"  class="form-control">',
                                '<option value="">全部</option>',
                                '{{#each nTypes}}',
                                '<option value="{{this.value}}" {{selected}}>{{this.label}}</option>',
                                '{{/each}}',
                            '</select>',
                        '</div>',                
                    '</div>',
                '</div>',
            '</form>',
        '</div>',
        '<div class="remark-list">',
        '</div>',
        ].join('');
    TplLib.register('tpl_remark_query',tpl_remark_query);
    var tpl_remark_card =[
        '<ul class="remark-card">',
            '{{#each items}}',
            '<li class="note-item-list">',
                '<div class="type-item">',
                    '<div class="item-card">{{this.label}}</div>',
                '</div>',
                '<div class="type-item-list clearfix">',
                    '{{#each records}}',
                    '<div class="item">',
                        '<span>{{this.notesName}}</span>',
                        '<a data-id="{{itemID}}" data-type="deleteRemark"  href="javascript:;"><i data-id="{{itemID}}" data-type="deleteRemark" class="glyphicon glyphicon-remove operate" title="删除"></i></a>',
                        '<a data-id="{{itemID}}" data-type="editRemark" data-typevalue="{{notesType}}"  href="javascript:;"><i data-id="{{itemID}}" data-type="editRemark" data-typevalue="{{notesType}}"class="glyphicon glyphicon-pencil operate" title="编辑"></i></a>',
                    '</div>',
                    '{{/each}}',,
                    '<div class="item item-add">',
                        '<a  data-typevalue="{{this.value}}" data-type="addRemark" href="javascript:;"><i data-type="addRemark" data-typevalue="{{this.value}}" class="glyphicon  glyphicon-plus operate" title="新增"></i></a>',
                    '</div>',
                '</div>',
            '</li>',
            '{{/each}}',
        '</ul>'

    ].join('');
    TplLib.register('tpl_remark_card',tpl_remark_card);
 
    var tpl_remark_modal=[
        '<form class="form-horizontal form-feedback-out">',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">* 字典类型</label>',
                '<div class="col-sm-5">',
                    '<select name="notesType" readonly  disabled class="form-control">',
                        '{{#each nTypes}}',
                        '<option value="{{this.value}}"  {{this.selected}}>{{this.label}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">* 字典名称</label>',
                '<div class="col-sm-5">',
                    '<input type="text" name="notesName" class="form-control" value="{{remarkData.notesName}}" />',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">* 加价方式</label>',
                '<div class="col-sm-5">',
                    '<select name="addPriceType"  class="form-control">',
                        '<option value="">--请选择--</option>',
                        '{{#each addPriceTypes}}',
                        '<option value="{{this.value}}" {{this.selected}}>{{this.label}}</option>',
                        '{{/each}}',
                    '</select>',
                '</div>',
            '</div>',
            '<div class="form-group">',
                '<label class="col-sm-offset-1 col-sm-3 control-label">加价金额</label>',
                '<div class="col-sm-5">',
                    '<input type="text" name="addPriceValue" class="form-control" value="{{remarkData.addPriceValue}}" />',
                '</div>',
            '</div>',
        '</form>'

    ].join('');
    TplLib.register('tpl_remark_modal',tpl_remark_modal);

    
})(jQuery, window);











