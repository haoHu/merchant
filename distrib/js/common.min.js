/*! Hualala-Merchant-Management 2014-09-18 */

!function(){"use strict";var a="0.8.1",b=1;if(!Object.create)var c=function(){};var d=Array.prototype.slice,e={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(a){e.eventHandlers[a.guid][a.type]||(e.eventHandlers[a.guid][a.type]=[]),e.eventHandlers[a.guid][a.type].push({guid:a.guid,handler:a.handler,scope:a.scope,type:a.type})},addEventHandler:function(a,b,c){var d,f={};"string"==typeof a?(d=c||!1,f[a]=b):(d=b||!1,f=a);for(var g in f)for(var h=f[g],i=g.split(" "),j=0,k=i.length;k>j;j++){var l=i[j];e.addEvent.call(this,{guid:this._guid||this._.guid,handler:h,scope:d,type:l})}},addGuid:function(a,c){(!a._guid||c)&&(a._guid=b++,e.attributes[a._guid]={},e.eventHandlers[a._guid]={})},attr:function(a){return e.attributes[a]},clone:function(a){var b=e.typeOf(a);return"object"===b?e.extend({},a):"array"===b?a.slice(0):void 0},create:function(a){return Object.create?Object.create(a):(c.prototype=a,new c)},createSubclass:function(a,b){function c(){if(!(this instanceof c))throw new Error("Please use 'new' when initializing Stapes classes");this.on&&e.addGuid(this,!0),g.apply(this,arguments)}a=a||{},b=b||!1;var d=a.superclass.prototype,g=a.hasOwnProperty("constructor")?a.constructor:function(){};b&&e.extend(d,f),c.prototype=e.create(d),c.prototype.constructor=c,e.extend(c,{extend:function(){return e.extendThis.apply(this,arguments)},parent:d,proto:function(){return e.extendThis.apply(this.prototype,arguments)},subclass:function(a){return a=a||{},a.superclass=this,e.createSubclass(a)}});for(var h in a)"constructor"!==h&&"superclass"!==h&&(c.prototype[h]=a[h]);return c},emitEvents:function(a,b,c,f){c=c||!1,f=f||this._guid;for(var g=d.call(e.eventHandlers[f][a]),h=0,i=g.length;i>h;h++){var j=e.extend({},g[h]),k=j.scope?j.scope:this;c&&(j.type=c),j.scope=k,j.handler.call(j.scope,b,j)}},extend:function(){for(var a=d.call(arguments),b=a.shift(),c=0,e=a.length;e>c;c++){var f=a[c];for(var g in f)b[g]=f[g]}return b},extendThis:function(){var a=d.call(arguments);return a.unshift(this),e.extend.apply(this,a)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},removeAttribute:function(a,b){b=b||!1;for(var c=e.trim(a).split(" "),d={},f=0,g=c.length;g>f;f++){var h=e.trim(c[f]);h&&(d.key=h,d.oldValue=e.attr(this._guid)[h],delete e.attr(this._guid)[h],b||(this.emit("change",h),this.emit("change:"+h),this.emit("mutate",d),this.emit("mutate:"+h,d),this.emit("remove",h),this.emit("remove:"+h)),delete d.oldValue)}},removeEventHandler:function(a,b){var c=e.eventHandlers[this._guid];if(a&&b){if(c=c[a],!c)return;for(var d,f=0,g=c.length;g>f;f++)d=c[f].handler,d&&d===b&&(c.splice(f--,1),g--)}else a?delete c[a]:e.eventHandlers[this._guid]={}},setAttribute:function(a,b,c){c=c||!1;var d=this.has(a),f=e.attr(this._guid)[a];if(b!==f&&(e.attr(this._guid)[a]=b,!c)){this.emit("change",a),this.emit("change:"+a,b);var g={key:a,newValue:b,oldValue:f||null};this.emit("mutate",g),this.emit("mutate:"+a,g);var h=d?"update":"create";this.emit(h,a),this.emit(h+":"+a,b)}},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(a){return null===a||"undefined"==typeof a?String(a):Object.prototype.toString.call(a).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(a,b,c){var d=this.get(a),f=e.typeOf(d);("object"===f||"array"===f)&&(d=e.clone(d));var g=b.call(this,d,a);e.setAttribute.call(this,a,g,c||!1)}},f={emit:function(a,b){b="undefined"==typeof b?null:b;for(var c=a.split(" "),d=0,f=c.length;f>d;d++){var g=c[d];e.eventHandlers[-1].all&&e.emitEvents.call(this,"all",b,g,-1),e.eventHandlers[-1][g]&&e.emitEvents.call(this,g,b,g,-1),"number"==typeof this._guid&&(e.eventHandlers[this._guid].all&&e.emitEvents.call(this,"all",b,g),e.eventHandlers[this._guid][g]&&e.emitEvents.call(this,g,b))}},off:function(){e.removeEventHandler.apply(this,arguments)},on:function(){e.addEventHandler.apply(this,arguments)}};e.Module=function(){},e.Module.prototype={each:function(a,b){var c=e.attr(this._guid);for(var d in c){var f=c[d];a.call(b||this,f,d)}},extend:function(){return e.extendThis.apply(this,arguments)},filter:function(a){var b=[],c=e.attr(this._guid);for(var d in c)a.call(this,c[d],d)&&b.push(c[d]);return b},get:function(a){if("string"==typeof a){if(arguments.length>1){for(var b={},c=0,d=arguments.length;d>c;c++){var f=arguments[c];b[f]=this.get(f)}return b}return this.has(a)?e.attr(this._guid)[a]:null}if("function"==typeof a){var g=this.filter(a);return g.length?g[0]:null}},getAll:function(){return e.clone(e.attr(this._guid))},getAllAsArray:function(){var a=[],b=e.attr(this._guid);for(var c in b){var d=b[c];"object"!==e.typeOf(d)||d.id||(d.id=c),a.push(d)}return a},has:function(a){return"undefined"!=typeof e.attr(this._guid)[a]},map:function(a,b){var c=[];return this.each(function(d,e){c.push(a.call(b||this,d,e))},b||this),c},push:function(a,b){if("array"===e.typeOf(a))for(var c=0,d=a.length;d>c;c++)e.setAttribute.call(this,e.makeUuid(),a[c],b||!1);else e.setAttribute.call(this,e.makeUuid(),a,b||!1);return this},remove:function(a,b){return"undefined"==typeof a?(e.attributes[this._guid]={},this.emit("change remove")):"function"==typeof a?this.each(function(c,d){a(c)&&e.removeAttribute.call(this,d,b)}):e.removeAttribute.call(this,a,b||!1),this},set:function(a,b,c){if("object"==typeof a)for(var d in a)e.setAttribute.call(this,d,a[d],b||!1);else e.setAttribute.call(this,a,b,c||!1);return this},size:function(){var a=0,b=e.attr(this._guid);for(var c in b)a++;return a},update:function(a,b,c){return"string"==typeof a?e.updateAttribute.call(this,a,b,c||!1):"function"==typeof a&&this.each(function(b,c){e.updateAttribute.call(this,c,a)}),this}};var g={_:e,extend:function(){return e.extendThis.apply(e.Module.prototype,arguments)},mixinEvents:function(a){return a=a||{},e.addGuid(a),e.extend(a,f)},on:function(){e.addEventHandler.apply(this,arguments)},subclass:function(a,b){return b=b||!1,a=a||{},a.superclass=b?function(){}:e.Module,e.createSubclass(a,!b)},version:a};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports.Stapes=g):"function"==typeof define&&define.amd?define(function(){return g}):window.Stapes=g}(),window.IX=function(){var a="1.0",b=function(a){return void 0===a||null===a||""===a},c={object:Object,"function":Function,string:String,"boolean":Boolean,number:Number},d=function(a){var d=function(d){return!b(d)&&(typeof d==a||d instanceof c[a])};return d},e={isEmpty:b,isBoolean:d("boolean"),isObject:d("object"),isString:d("string"),isNumber:d("number"),isFn:d("function"),isArray:function(a){return!!a&&a instanceof Array},isElement:function(a){return 1===a.nodeType},getClass:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()}},f=function(a,b,c,d,e,f){if(null==a||0==a.length)return d;var g=a.length;if(c=-1==c?g:c,b>=c)return d;for(var h=d,i=Math.max(0,b),j=Math.min(g,c),k=g-1,l=0;k>=l;l+=1){var m=f?l:k-l;m>=i&&j>m&&m in a&&(h=e(h,a[m],m))}return h},g=function(a,c){if(!b(a))for(var d=a.length,e=0;d>e;e+=1)c(a[e],e)},h={iterate:g,fnIterate:function(a,b){g(a,function(a){b in a&&e.isFn(a[b])&&a[b]()})},loop:function(a,b,c){return f(a,0,-1,b,c,!0)},loopbreak:function(a,b){try{f(a,0,-1,0,b,!0)}catch(c){}},partLoop:function(a,b,c,d,e){return f(a,b,c,d,e,!0)},loopDsc:function(a,b,c){return f(a,0,-1,b,c,!1)},map:function(a,b){return f(a,0,-1,[],function(a,c,d){return a.push(b(c,d)),a},!0)},each:function(a,b,c){var d=b,e="",f=0;for(e in a)d=c(d,a[e],e,f),f+=1;return d}},i={cvtToArray:function(a){if(!a)return[];if(a.toArray)return a.toArray();for(var b=[],c=a.length,d=0;c>d;d++)b.push(a[d]);return b}},j=function(a){var b;if(e.isArray(a)){b=[];for(var c=0;c<a.length;c++)b[c]=j(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp)return a;b=new a.constructor;for(var d in a){var f=a[d];b[d]=j(f)}return b},k=function(a,b){if(null==b||null==a||void 0==b||void 0==a)return b==a;for(p in a){if(!(p in b)||"undefined"==typeof b[p])return!1;if(a[p]){if(typeof b[p]!=typeof a[p])return!1;switch(typeof a[p]){case"object":if(!k(a[p],b[p]))return!1;break;case"function":if("undefined"==typeof b[p]||a[p].toString()!=b[p].toString())return!1;break;default:if(a[p]!=b[p])return!1}}else if(b[p])return!1}for(p in b)if(!(p in a)||"undefined"==typeof a[p])return!1;return!0},l={hasProperty:function(a,b){if(!a)return!1;try{if(b in a)return!0}catch(c){}for(var d=b.split("."),e=a,f=d.length,g=0;f>g;g++)try{if(!(e&&d[g]in e))return!1;e=e[d[g]]}catch(h){return!1}return!0},getProperty:function(a,b,c){var d=void 0!=c?c:null;if(null==a)return d;try{if(b in a)return a[b]}catch(e){}for(var f=b.split("."),g=a,h=f.length,i=0;h>i;i++)try{if(!(g&&f[i]in g))return d;g=g[f[i]]}catch(j){return d}return g},setProperty:function(a,b,c){try{if(b in a)return void(a[b]=c)}catch(d){}for(var e=b.split("."),f=a,g=e.pop(),h=e.length,i=0;h>i;i++){var j=e[i];try{j in f&&f[j]&&"object"==typeof f[j]||(f[j]={})}catch(k){f[j]={}}f=f[j]}f[g]=c},getPropertyAsFunction:function(a,b){var c=IX.getProperty(a,b);return IX.isFn(c)?c:IX.emptyFn},clone:j,deepCompare:k},m=function(a,b){var c=a.split(".");"window"==c[0]&&c.shift();for(var d=window,e=!0,f=0,g=c.length;g>f&&e;){var h=c[f];e=b(h,d),e&&(d=d[h]),f++}return e},n={ns:function(a){m(a,function(a,b){return a in b||(b[a]={}),!0})},nsExisted:function(a){return m(a,function(a,b){return b&&a in b})},setNS:function(a,b){var c=a.split(".");if("window"==c[0]&&c.shift(),0!=c.length&&!IX.isEmpty(c[0])){for(var d=window,e=c.length,f=0;e-1>f;f++){var g=c[f];g in d||(d[g]={}),d=d[g]}d[c[e-1]]=b}},getNS:function(a){return m(a,function(a,b){return a in b?b[a]:!1})}},o=function(a,b){(null==a||void 0==a)&&(a={});for(var c in b)a[c]=b[c];return a},q={extend:o,inherit:function(){return h.loop(i.cvtToArray(arguments),{},function(a,b){return o(a,b)})}},r=function(){return(new Date).getTime()},s=navigator.userAgent.toLowerCase(),t=function(a){return-1!=s.indexOf(a)},u="addEventListener"in window,v=function(a){var b=function(b){var c=b||window.event;return"target"in c||(c.target=c.srcElement),a(c)};return b},w=function(a,b,c,d){a&&(c&&(a._EVENTNAMES||(a._EVENTNAMES={})),IX.iterate(["click","dblclick","focus","blur","keyup","keydown","mouseover","mouseout","resize","scroll","mousedown","mousemove","mouseup","touchstart","touchend","touchmove"],function(e){if(e in b){if(c){if(d&&a._EVENTNAMES[e])return;a._EVENTNAMES[e]=!0}IX[c?"attachEvent":"detachEvent"](a,e,v(b[e]))}}))},x={isMSIE7:document.all&&t("msie 7.0"),isSafari:window.openDatabase&&t("safari"),isMSIE:t("msie")&&!t("opera"),isOpera:t("opera"),isChrome:t("chrome"),isFirefox:t("firefox")&&!t("webkit"),isMSWin:t("windows"),getTimeInMS:r,getComputedStyle:document.defaultView&&"getComputedStyle"in document.defaultView?function(a){return document.defaultView.getComputedStyle(a)}:function(a){return a.currentStyle||a.style},getUrlParam:function(a,b){for(var c=window.location.search.substring(1).split("&"),d=c.length,e=0;d>e;e+=1){var f=c[e];if(0==f.indexOf(a+"="))return f.substring(a.length+1)}return b},listen:function(a,b,c,d){var e=u?{fname:"detach"==a?"removeEventListener":"addEventListener",etype:c}:{fname:a+"Event",etype:"on"+c};b[e.fname](e.etype,d,!1)},attachEvent:u?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},detachEvent:u?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},bind:function(a,b){w(a,b,!0)},bindOnce:function(a,b){w(a,b,!0,!0)},on:function(a,b,c){a["on"+b]=c}},y={toAnchor:function(a){window.location.hash="#"+a}},z=function(){},A=function(a){return a},B=function(a,b,c,d){function e(){a()?b():null!=g&&r()-i>g?h():setTimeout(e,f)}var f=Math.max(20,c||100),g=$XP(d,"maxAge",null),h=$XF(d,"expire"),i=null;isNaN(g)&&(g=null),null!=g&&(i=r()),e()},C={emptyFn:z,selfFn:A,safeExec:function(a){a()},execute:function(a,b){var c=n.getNS(a);e.isFn(c)&&c.apply(null,b)},checkReady:B,tryFn:function(a){return e.isFn(a)?a():z()}},D={decodeTXT:function(a){return(a+"").replaceAll("&nbsp;"," ").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&")},encodeTXT:function(a){return(a+"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},createDiv:function(a,b){var c=document.createElement("div");return IX.isEmpty(b)||(c.className=b),c.id=a,document.body.appendChild(c),c},get:function(a){return IX.isEmpty(a)?null:e.isString(a)||e.isNumber(a)?document.getElementById(a):"ownerDocument"in a?a:null}},E={err:function(a){alert(a)}},F={inRange:function(a,b,c){return 0>=(a-b)*(a-c)}},G=0,H={id:function(){return G++,"ix"+G}},I=function(a,b){return Math.abs(a.maxx+a.minx-b.minx-b.maxx)<=b.maxx-b.minx+a.maxx-a.minx&&Math.abs(a.maxy+a.miny-b.miny-b.maxy)<=b.maxy-b.miny+a.maxy-a.miny};return q.inherit(e,i,l,n,h,q,x,y,C,D,E,F,H,{version:a,ifRectIntersect:I})}(),$X=IX.get,$XA=IX.cvtToArray,$XE=IX.err,$XP=IX.getProperty,$XF=IX.getPropertyAsFunction,IX.Test=function(){var a=function(a,b,c){var d=0;return IX.each(a,"",function(a,e,f){try{if(b(e,f))return d+=1,c(a,f,e)+(d%5==4?"\r\n":"")}catch(g){alert(g)}return a})},b=function(b,c,d){if("fun"!=d&&IX.isString(b))return"String:"+b.toString();var e="fun"==d;return(e?"Funcs:":"Props:")+a(b,function(a){return!e&&!IX.isFn(a)||e&&IX.isFn(a)},function(a,b,c){return[a,b,e?"":[':"',(""+c).trunc(60),'" '].join(""),", "].join("")})};return{listProp:function(a,c){return b(a,c,"")},listFun:function(a,c){return b(a,c,"fun")}}}(),window.log="IXDEBUG"in window?function(a){console&&console.log(a)}:IX.emptyFn,IX.Array=function(){var a=function(a){return IX.isFn(a)?a:function(a,b){return IX.isObject(a)&&"equal"in a&&IX.isFn(a.equal)?a.equal(b):a==b}},b=function(a,b,c){if(null==b||0==b.length)return!1;for(var d=b.length-1;d>=0;d--)if(c(a,b[d]))return!0;return!1},c=function(a,b,d){var e=a||[],f=b||[],g=0,h=0,i=0,j=[],k=e.length,l=f.length;for(g=0;l>g;g++)for(h=0;k>h;h++)if(d(f[g],e[h])){for(i=0;g>i;i++)j.push(f.shift());for(f.shift(),i=0;h>=i;i++)j.push(e.shift());return j.concat(c(e,f,d))}return j.concat(e,f)},d=null;return d={init:function(a,b){for(var c=[],d=0;a>d;d++)c[d]=IX.clone(b);return c},isFound:function(c,d,e){return b(c,d,a(e))},toSet:function(b,c){var e=a(c);return IX.loop(b,[],function(a,b){return d.isFound(b,a,e)||a.push(b),a})},sort:function(a,b){var c=IX.map(a,function(a){return a});return c.sort(b)},isSameSet:function(c,e,f){var g=d.toSet(c),h=d.toSet(e);if(null==g&&null==h)return!0;if(null==g||null==h||g.length!=h.length)return!1;if(0==g.length&&0==h.length)return!0;for(var i=a(f),j=g.length-1;j>=0;j--)if(!b(g[j],h,i))return!1;return!0},compact:function(a,b){var c=IX.isFn(b)?b:function(a){return a};return IX.loop(a,[],function(a,b){return c(b)&&a.push(b),a})},remove:function(b,c,d){var e=a(d);return IX.loop(b,[],function(a,b){return e(c,b)||a.push(b),a})},pushx:function(a,b){return a.push(b),a},flat:function(a){return IX.isArray(a)?IX.loop(a,[],function(a,b){return a.concat(d.flat(b))}):[a]},indexOf:function(a,b){if(!a||0==a.length)return-1;for(var c=a.length,d=0;c>d;d++)if(b(a[d]))return d;return-1},splice:function(a,b,c,d){var e=isNaN(c)?1:c,f=a.length;if(0>b||b>f||0>e||b+e>f)return[];var g=d?d:[];return[].concat(a.slice(0,b),g,a.slice(b+e))},merge:function(b,d,e){return c(b,d,a(e))}}}(),IX.IState=function(){return{toggle:function(a,b){return void 0==b?!a:b}}}(),IX.IManager=function(){var a={};return{isRegistered:function(b){return b in a&&a[b]},register:function(b,c){a[b]=c},unregister:function(b){a[b]=null},get:function(b){return b in a?a[b]:null},clear:function(){a={}},destroy:function(){delete a}}},IX.IList=function(){var a=[],b=IX.Array,c=function(c){return c?b.indexOf(a,function(a){return a==c}):-1},d=function(b){b>=0&&b<a.length&&(a=a.slice(0,b).concat(a.slice(b+1)))},e=function(b){if(a&&0!=a.length){var e=c(b);d(e),a.push(b)}else a=[b]};return{isEmpty:function(){return 0==a.length},isLast:function(b){return a.length>0&&b==a[a.length-1]},getList:function(){return a},getSize:function(){return a.length},indexOf:c,remove:d,tryRemove:function(a){d(c(a))},append:e,tryAdd:function(b){a&&0!=a.length?c(b)<0&&a.push(b):a=[b]},insertBefore:function(b,f){var g=c(f);if(-1==g)return void e(b);var h=c(b);(-1==h||g-h!=1)&&(h>=0&&(d(h),g=c(f)),a=a.slice(0,g).concat([b],a.slice(h)))},clear:function(){a=[]},destroy:function(){delete a}}},IX.I1ToNManager=function(a){var b=IX.isFn(a)?a:function(a,b){return a==b},c=new IX.IManager,d=function(a){var b=c.get(a);return b&&b.length>0},e=function(a,c){return IX.Array.indexOf(a,function(a){return b(a,c)})};return IX.inherit(c,{hasValue:d,put:function(a,b){if(!d(a))return void c.register(a,[b]);var f=c.get(a);-1==e(f,b)&&c.register(a,f.concat(b))},remove:function(a,b){var d=c.get(a),f=e(d,b);f>=0&&c.register(a,IX.Array.splice(d,f))}})},IX.IListManager=function(){var a=new IX.IManager,b=new IX.IList,c=function(c,d){a.register(c,d);var e=b.indexOf(c);d?-1==e&&b.append(c):b.remove(e)},d=function(b){return IX.map(b,function(b){return a.get(b)})};return IX.inherit(a,{register:c,unregister:function(a){c(a)},isEmpty:function(){return b.isEmpty()},getSize:function(){return b.getSize()},hasKey:a.isRegistered,isLastKey:function(a){return b.isLast(a)},getKeys:function(){return b.getList()},getByKeys:function(a){return d(a)},getAll:function(){return d(b.getList())},iterate:function(c){IX.iterate(b.getList(),function(b){c(a.get(b))})},getFirst:function(){var c=b.getList();if(!c||0==c.length)return null;for(var d=c.length,e=0;d>e;e++){var f=a.get(c[e]);if(f)return f}return null},append:b.append,insertBefore:b.insertBefore,remove:function(a){c(a)},clear:function(){a.clear(),b.clear()},destroy:function(){a.destroy(),delete a,b.destroy(),delete b}})},IX.DataStore=function(a){var b=$XP(a,"items",[]);if(b.length>0&&"json"!=$XP(a,"type","json")){var c=$XP(a,"fields",[]);b=IX.map(b,function(a){return IX.loop(c,{},function(b,c,d){return b[c]=IX.isArray(a)?a[d]:a[c],b})})}return IX.map(b,function(a){var b=$XP(a,"id");return IX.isEmpty(b)&&(a.id=IX.id()),a})},IX.Date=function(){var a=!1,b=["FullYear","Month","Date"],c=["Hours","Minutes","Seconds"],d="-",e=":",f=function(a,b){return IX.isEmpty(a)?"":(a=a.split(b,3),IX.map(b==d?[4,2,2]:[2,2,2],function(b,c){var d=a.length>c?a[c]:"";return("0".multi(b)+d).substr(d.length,b)}).join(b))},g=function(b,c,d){var e="get"+(a?"UTC":""),g=IX.map(c,function(a){return 1*b[e+a]()+("Month"==a?1:0)}).join(d);return f(g,d)},h=function(a,f){return"Date"==f?g(a,b,d):"Time"==f?g(a,c,e):g(a,b,d)+" "+g(a,c,e)},i=function(a,b,c){return a||isNaN(b)||b.indexOf(".")>=0||0==c&&4!=b.length||c>0&&b.length>2},j=function(a,b){return a||isNaN(b)||b.indexOf(".")>=0||b.length>2},k=function(a,b){var c="Date"==b,f=a.split(c?d:e,3);if(3!=f.length||IX.loop(f,!1,c?i:j))return!1;if(c){var g=1*f[1],h=1*f[2];return!(0>=g||g>12||0>=h||h>31)}var k=1*f[0],g=1*f[1],l=1*f[2];return!(0>k||k>23||0>g||g>59||0>l||l>59)};return{setDS:function(a){d=a},setTS:function(a){e=a},setUTC:function(b){a=b},getDS:function(){return d},getTS:function(){return e},isUTC:function(){return a},format:h,formatDate:function(a){return h(a,"Date")},formatTime:function(a){return h(a,"Time")},formatStr:function(a){return a=(a+" ").split(" "),f(a[0],d)+" "+f(a[1],e)},formatDateStr:function(a){return f(a,d)},formatTimeStr:function(a){return f(a,e)},getDateText:function(a,b){var c=b-a;return 10>c?"刚才":60>c?Math.round(c)+"秒钟前":(c/=60,60>c?Math.round(c)+"分钟前":(c/=60,24>c?Math.round(c)+"小时前":(c/=24,7>c?Math.round(c)+"天前":(c/=7,4.33>c?Math.round(c)+"周前":(c/=4.33,12>c?Math.round(c)+"个月前":Math.round(c/12)+"年前")))))},isValid:function(a,b){var c=a.split(" ");return"Date"==b||"Time"==b?1==c.length&&k(c[0],b):2==c.length&&k(c[0],"Date")&&k(c[1],"Time")},getDateByFormat:function(a,b){try{if(null==a||""===a)return"";var c="number"==typeof a?new Date(a):"string"==typeof a?new Date((a+"").replace(/-/g,"/")):a,d=b||"yyyy-MM-dd HH:mm:ss";d=d.replace("yyyy",c.getFullYear());var e=c.getMonth()+1,f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds();return d=d.replace("MM",e>9?e:"0"+e),d=d.replace("dd",f>9?f:"0"+f),d=d.replace("HH",g>9?g:"0"+g),d=d.replace("mm",h>9?h:"0"+h),d=d.replace("ss",i>9?i:"0"+i)}catch(j){return a}},getTimeTickInSec:function(a){var b=IX.Date.getDateByFormat(a,"yyyy/MM/dd HH:mm:ss");return parseInt(new Date(b).getTime()/1e3)}}}(),IX.Net=function(){var a=document.getElementsByTagName("head")[0],b=function(){return"XMLHttpRequest"in window?new XMLHttpRequest:"ActiveXObject"in window?new ActiveXObject("Microsoft.XMLHTTP"):null},c=function(a,c){var d=b();return d?(d.onreadystatechange=function(){4==d.readyState&&(200==d.status?IX.isFn(c)&&c(d.responseText):$XE("There was an error: ("+d.status+") "+d.statusText))},d.open("GET",a,!0),void d.send("")):void $XE("unsupport AJAX. Failed")},d=function(b,c){var d=document.createElement("script");d.type="text/javascript",d.src=b,IX.isFn(c)&&(d.readyState?d.onreadystatechange=function(){log("STATE: ["+b+"]:"+this.readyState),("complete"==d.readyState||"loaded"==d.readyState)&&(d.onreadystatechange=null,c())}:d.onload=c),a.appendChild(d)},e=function(a,b){var c=IX.isFn(b)?b:IX.emptyFn;if(!a||0==a.length)return c();var e=a.length,f=0,g=function(){d(a[f],function(){return f+=1,e>f?g():c()})};g()},f=function(b){var c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=b,c.media="screen",a.appendChild(c)};return{loadFile:c,loadCss:f,loadJsFiles:function(a,b){e(a,b)},tryFn:function(a,b,c){var d=function(){IX.execute(a,b),IX.tryFn(c.afterFn)};if(IX.nsExisted(a))d();else{if(!c)return;var g=c;IX.tryFn(g.beforeFn),IX.iterate(g.cssFiles,f);var h=g.delay||100;e(g.jsFiles,function(){setTimeout(d,h)})}}}}(),IX.win=function(){var a={},b={},c=IX.I1ToNManager(),d=0,e=function(){return"f_"+d++},f="addEventListener"in window,g=f?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},h=f?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},i=function(b,d){IX.iterate(c.get(b),function(b){IX.isFn(a[b])&&a[b](d)})},j=function(d,f){var h=e();return f._key||(f._key=h,a[h]=f,c.put(d,h)),d in b?h:(b[d]=function(a){var b=a||window.event;return"target"in b||(b.target=b.srcElement),i(d,b)},g(window,d,b[d]),h)},k=function(d,e){a[e]=null,c.remove(d,e),c.hasValue(d)||(h(window,d,b[d]),b[d]=null)},l=function(a,b){var c=b?j:k,d=IX.loop(["click","resize","scroll","mousedown","mouseover","mouseout"],{},function(b,d){return d in a&&(b[d]=c(d,a[d])),b});return b?d:void 0};return{bind:function(a){return l(a,!0)},unbind:function(a){l(a,!1)},scrollTo:function(a,b){window.scrollTo(a,b),i("scroll",null)}}}(),$Xw=IX.win,function(){function a(a,b){return b}function b(a,b){IX.isFn(b)&&b(a)}function c(a,b,c){var d=$XP(a,b);return IX.isFn(d)?d:c}function d(d){return{channel:$XP(d,"channel",d.name),type:$XP(d,"type","POST"),dataType:$XP(d,"dataType","form"),onsuccess:c(d,"onsuccess",b),preAjax:c(d,"preAjax",a),postAjax:$XF(d,"postAjax"),onfail:c(d,"onfail",b)}}function e(a,b){var c=$XP(a,"url");if(IX.isEmpty(c))return null;var e=b?d(a):{};return e.url=c,e.urlType=$XP(a,"urlType","base")+"Url",e}function f(a,b){return IX.loop(a,{},function(a,c){var d=$XP(c,"name");if(IX.isEmpty(d))return a;var f=e(c,b);return f&&(a[d]=f),a})}function g(a,b){var c=f(a),d=function(a,d){return b.genUrl(c[a],d)};return d}function h(a){var b="ajaxChannel_"+a;return $X(b)?!1:(IX.createDiv(b,"ajax-channel"),!0)}function i(a){var b=$X("ajaxChannel_"+a);b&&b.parentNode.removeChild(b)}function j(a,b,c){var d=f(a,!0),e=function(a,e,f,g){var j=d[a];if(j){var k=e&&e._channel_?e._channel_:j.channel;if($XP(e,"_t")||(e=IX.inherit(e,{_t:""})),!h(k))return void j.onfail({code:0,err:"channel in using:"+k},g,e);var l=IX.isFn(f)?f:IX.emptyFn,m="json"==j.dataType?"application/json; charset=UTF-8":"application/x-www-form-urlencoded; charset=UTF-8",n=j.preAjax(a,e);n="json"==j.dataType?JSON.stringify(n):n,b({url:c.genUrl(j,e),type:j.type,contentType:m,data:n,success:function(a){i(k),j.onsuccess(a,l,e)},fail:function(a){i(k),j.onfail(a,g,e)},error:function(a){i(k),j.onfail(a,g,e)}}),j.postAjax(a,e,l)}};return e}function k(){var a={},b=function(b,c){if(!b)return"";var d=b.url,e=IX.isFn(d)?d(c):d.replaceByParams(c),f=b.urlType in a?a[b.urlType]:a.baseUrl;return f+e};return{init:function(b){a=IX.inherit(a,b)},genUrl:b}}function l(a){var b=null,c=new k,d=function(d){a&&IX.isFn(d.ajaxFn)&&(b=d.ajaxFn),c.init(d)};return IX.inherit({init:d,reset:d,createRouter:function(a){return new g(a,c)}},a?{createCaller:function(a){return new j(a,function(a){IX.isFn(b)&&b(a)},c)}}:{})}IX.urlEngine=new l,IX.ajaxEngine=new l(!0)}(),IX.Xml=function(){return{parser:function(a){a=IX.isString(a)?a:"";var b=null;return"DOMParser"in window?b=(new DOMParser).parseFromString(a,"text/xml"):"ActiveXObject"in window?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):$XE("this browser can't support XML parser."),b},getXmlString:function(a){return null==!a?"":IX.nsExisted("document.implementation.createDocument")?(new XMLSerializer).serializeToString(a):"ActiveXObject"in window?a.xml:($XE("this browser can't support XML parser."),"")},duplicate:function(a){return this.parser(this.getXmlString(a))}}}(),IX.Dom=function(){var a=function(a,b,c,d){if(!a)return d(null);for(var e=("firstChild"in a?a["first"==b?"firstChild":"nextSibling"]:null);null!=e&&!c(e);)e=e.nextSibling;return d(e)},b=function(b,c,d){return IX.isString(c)?a(b,d,function(a){return a.nodeName.toLowerCase()==c},function(a){return a}):null},c=IX.isMSIE?function(a){return a?a.innerText:""}:function(a){return a?a.textContent:""},d=function(b){return b?a(b,"first",function(a){return 4==a.nodeType},function(a){return a?a.nodeValue:""}):""},e=function(a,c){return b(a,c,"first")},f=function(a,b,c){var d=IX.loop(c,[],function(a,b){return a.concat(" ",b[0],'="',b[1],'"')}),e=[].concat("<",a,d,">",b,"</",a,">");return e.join("")},g=function(a,b,c){return f(a,["<![CDATA[",b,"]]>"].join(""),c)},h=function(a,b){if(!a)return"";var c=a.getAttribute(b);return IX.isEmpty(c)?"":c},i=function(a,b,c){a&&(c?a.setAttribute(b,c):a.removeAttribute(b))};return{first:e,next:function(a,c){return b(a,c,"next")},cdata:function(a,b){return d(e(a,b))},text:function(a,b){return c(e(a,b))},attr:h,setAttr:i,dataAttr:function(a,b){return h(a,"data-"+b)},setDataAttr:function(a,b,c){i(a,"data-"+b,c)},remove:function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},isAncestor:function(a,b){for(var c=a;c;){if(c==b)return!0;var d=c.nodeName.toLowerCase();c="body"==d?null:c.parentNode}return!1},ancestor:function(a,b){if(!a)return null;for(var c=a;c;){var d=c.nodeName.toLowerCase();if(d==b)break;c="body"==d?null:c.parentNode}return c},is:function(a,b){return a.nodeName.toLowerCase()==b},inTag:f,inPureTag:g}}(),$XD=IX.Dom,IX.HtmlDocument=function(){var a=function(a,b){return null!=a&&"className"in a&&IX.Array.isFound(b,(a.className+"").split(" "))},b=function(a,b){if(a){var c=IX.Array.remove(a.className.split(" "),b);a.className=c.join(" ")}},c=function(a,b){if(a){var c=IX.Array.toSet(a.className.split(" ").concat(b));a.className=c.join(" ")}},d=function(b,c){if(!b)return null;for(var d=b.nextSibling;d;){if(a(d,c))return d;d=d.nextSibling}return d},e=function(a,b){var c=null,d=IX.get(a);if(b="float"!=b?b:document.defaultView?"float":"styleFloat","opacity"==b)if(d.filters)if(d.filters.length>0)try{c=d.filters["DXImageTransform.Microsoft.Alpha"].opacity/100}catch(e){try{c=d.filters("alpha").opacity}catch(f){}}else c="1";else c=d.style.opacity;else{if(c=d.style[b]||d.style[b.camelize()],!c)if(document.defaultView&&document.defaultView.getComputedStyle){var g=document.defaultView.getComputedStyle(d,null);c=g?g.getPropertyValue(b):null}else d.currentStyle&&(c=d.currentStyle[b.camelize()]);"auto"==c&&IX.Array.indexOf(["width","height"],function(a){return b==a})>-1&&"none"!=d.style.display&&(c=d["offset"+b.capitalize()]+"px")}return"auto"==c?null:c};return{getStyle:e,hasClass:a,removeClass:b,addClass:c,toggleClass:function(d,e){d&&(a(d,e)?b(d,e):c(d,e))},next:d,first:function(b,c){if(!b)return null;var e=b.firstChild;return a(e,c)?e:d(e,c)},isAncestor:function(a,b){if(!a)return!1;for(var c=a;null!=c;){if(c==b)return!0;if(c=c.parentNode,c&&"body"==c.nodeName.toLowerCase())break}return!1},ancestor:function(b,c){if(!b)return null;for(var d=b;null!=d&&!a(d,c);)d=d.parentNode,d&&"body"==d.nodeName.toLowerCase()&&(d=null);return d},getWindowScreen:function(){var a=document.documentElement,b=window,c="scrollX"in b?b.scrollX:a.scrollLeft,d="scrollX"in b?b.scrollY:a.scrollTop;return{scroll:[c,d,a.scrollWidth,a.scrollHeight],size:[a.clientWidth,a.clientHeight]}},getScroll:function(a){if(a&&9!=a.nodeType)return{scrollTop:a.scrollTop,scrollLeft:a.scrollLeft};var b=a?a.defaultView||a.parentWindow:window;return{scrollTop:b.pageYOffset||b.document.documentElement.scrollTop||b.document.body.scrollTop||0,scrollLeft:b.pageXOffset||b.document.documentElement.scrollLeft||b.document.body.scrollLeft||0}},getZIndex:function(a){for(var b=null;a&&"body"!=a.tagName.toLowerCase();){if(b=IX.getComputedStyle(a),"auto"!=b.zIndex)return b.zIndex-0;a=a.offsetParent}return 0},rect:function(a,b){IX.iterate(["left","top","width","height"],function(c,d){null!=b[d]&&(a.style[c]=b[d]+"px")})},getWindowScrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},getPosition:function(a,b){var c=a.getBoundingClientRect(),d=document.documentElement||document.body;return[c.left+(b?0:window.scrollX||d.scrollLeft),c.top+(b?0:window.scrollY||d.scrollTop),a.offsetWidth,a.offsetHeight]}}}(),$XH=IX.HtmlDocument,IX.Cookie=function(){var a=function(a){if(!a)return[];var b=[];if(a.expires&&("number"==typeof a.expires||a.expires.toUTCString)){var c;"number"==typeof a.expires?(c=new Date,c.setTime(c.getTime()+24*a.expires*60*60*1e3)):c=a.expires,b.push("; expires="+c.toUTCString())}return"path"in a&&b.push("; path="+a.path),"domain"in a&&b.push("; domain="+a.domain),"secure"in a&&b.push("; secure="+a.secure),b.push(";HttpOnly"),b},b=function(b,c,d){var e=[b,"=",encodeURIComponent(c)].concat(a(d));document.cookie=e.join("")};return{get:function(a){if(IX.isEmpty(document.cookie))return"";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(d.substring(0,a.length+1)==a+"=")return decodeURIComponent(d.substring(a.length+1))}return""},set:b,remove:function(a){b(a,"",{expires:-1})}}}(),IX.Task=function(a,b,c){function d(){if(g&&(a(h),h++,!(i>0&&h>=i))){var c=j();f=setTimeout(d,e+2*b-c),e=c}}var e=-1,f=null,g=!1,h=0,i=isNaN(c)?-1:c,j=IX.getTimeInMS;return{start:function(){e=j(),g=!0,h=0,f=setTimeout(d,b)},stop:function(){g=!1,clearTimeout(f),f=null,e=-1}}},function(){var a=new RegExp("(?:<tpl.*?>)|(?:</tpl>)","img"),b=/([#\{])([\u4E00-\u9FA5\w\.-]+)[#\}]/g,c=/['"]/,d=function(a,b){for(var c=[],d=a.match(b),e=d?d.length:0,f=0;e>f;f++){var g=d[f],h=a.indexOf(g);-1!=h&&(c.push(a.substring(0,h)),a=a.substring(h+g.length))}return c.push(a),{separate:c,arr:d}},e=function(d){var e={},f=function(a,b){e[a]={name:a,tpl:[b]}},g=function(a,b){e[a].tpl.push(b)},h=function(a){var c=e[a],d=c.tpl.join("");c.tpl=d,c.list=IX.Array.toSet(d.match(b)).sort()},i=function(a,b,c){var d=a[0]+"."+b;return g(a[0],"#"+b+"#"),a.unshift(d),f(d,c),a},j=function(a,b){return h(a[0]),a.shift(),g(a[0],b),a},k=d.regSplit(a),l=k.arr,m=k.separate;f("root",m[0]);var n=IX.loop(l,["root"],function(a,b,d){if("</tpl>"==b)return j(a,m[d+1]);var e=b.split(c);return i(a,e[1],m[d+1])});return h("root"),1==n.length&&"root"==n[0]?e:null},f={render:function(){return""},renderData:function(){return""},destroy:function(){},getTpl:function(){return""}};IX.ITemplate=function(a){var b=$XP(a,"tpl",[]);if(b=[].concat(b).join(""),IX.isEmpty(b))return f;var c=e(b);if(!c)return alert("unformated Tpl: "+b),f;var d=$XP(a,"tplDataFn");IX.isFn(d)||(d=function(){return null
});var g=function(a,b){if(!IX.hasProperty(a,b))return null;var c=$XP(a,b);return IX.isEmpty(c)?"":c},h=function(a,b){var d=c[a];if(!d)return alert("can't find templete by name: "+a),"";var e=d.tpl,f=IX.loop(d.list,[],function(c,d){var e=d.charAt(0),f=d.substring(1,d.length-1);if("{"==e){var i=g(b,f);null!=i&&c.push([d,i])}else if("#"==e){var j=IX.map($XP(b,f,[]),function(b,c){var d=IX.inherit(b,{idx:c});return h(a+"."+f,d)}).join("");c.push([d,j])}return c});return e.loopReplace(f)},i=function(a,b){var c="root";return IX.isEmpty(a)||(c=0==a.indexOf("root")?a:"root."+a),h(c,b?b:d(c)).replace(/\[(\{|\})\]/g,"$1")};return IX.inherit({render:function(a){return i(a)},renderData:function(a,b){return i(a,b)},destroy:function(){c.destroy(),c=null},getTpl:function(a){if(!a)return b;var d=function(b){var e=c["root."+b];if(!e)return"";var f,g=b.split("."),h=e.tpl;if(!e.list||0==e.list.length)return b==a?h:"<tpl id = '"+g[g.length-1]+"'>"+h+"</tpl>";for(var i=0;i<e.list.length;i++)f=e.list[i].replace(/#/g,""),h=h.replace(new RegExp("#"+f+"#","img"),d(b+"."+f));return h};return d(a)}})};var g=function(a,b){var c=[],d=/[^\u0020-\u007A]/g,e=a.length,f=(a.match(/[\u0020-\u007A]/g)||[]).length,g=a.substring(0,b);if((g.match(d)||[]).length)for(var h=0,i=0;b>i;i++){var j=a[i];if(void 0===j||h>=b){b-1>i&&e>i&&c.push("..");break}h+=j.match(d)?2:1,c.push(j)}else c.push(g);return{reString:c.join(""),reLength:e>b?b:e,stringLength:2*(e-f)+f}},h=/\w+:\/\/[\w.]+[^\s\"\'\<\>\{\}]*/g,i=/^[_a-zA-Z0-9.]+[\-_a-zA-Z0-9.]*@(?:[_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,4}$/,j=new RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:</script>)","img"),k=new RegExp("(?:<form.*?>)|(?:</form>)","img"),l=/(^\s*)|\r/g,m=/{[^{}]*}/g;IX.extend(String.prototype,{camelize:function(){return this.replace(/\-(\w)/gi,function(a,b){return b.toUpperCase()})},capitalize:function(){return this.charAt(0).toUpperCase()+_str.substring(1).toLowerCase()},replaceAll:function(a,b){return this.replace(new RegExp(a,"gm"),b)},loopReplace:function(a){return IX.loop(a,this,function(a,b){return a.replaceAll(b[0],b[1])})},trim:function(){for(var a=this.replace(l,""),b=a.length-1,c=/\s/;c.test(a.charAt(b));)b--;return a.substring(0,b+1)},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(j,"")},stripFormTag:function(){return this.replace(k,"")},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},substrByLength:function(a){return g(this.toString(),a)},isSpaces:function(){return 0==this.replace(/(\n)|(\r)|(\t)/g,"").strip().length},isPassword:function(){return this.length>5&&this.length<21},isEmail:function(){var a=this.trim();return IX.isEmpty(a)||i.exec(a)},trunc:function(a){return this.length>a?this.substring(0,a-3)+"...":this},tail:function(a){return this.length>a?this.substring(this.length-a):this},dehtml:function(){return this.loopReplace([["&","&amp;"],["<","&lt;"],['"',"&quot;"]])},enhtml:function(){return this.loopReplace([["&lt;","<"],["&quot;",'"'],["&amp;","&"]])},multi:function(a){return IX.Array.init(a,this).join("")},pickUrls:function(){return this.match(h)},replaceUrls:function(a,b){return this.replace(a||h,b||function(a){return'<a href="'+a+'" target="_blank">'+a+"</a>"})},regSplit:function(a){return d(this,a)},pick4Replace:function(){return this.match(m)},replaceByParams:function(a){var b=IX.Array.compact(this.match(m));return IX.loop(b,this,function(b,c){var d=c.slice(1,-1);return IX.isEmpty(d)?b:b.replaceAll(c,$XP(a,d,""))})},inPureTag:function(a,b){return IX.Dom.inPureTag(a,this,b)},inTag:function(a,b){return IX.Dom.inTag(a,this,b)},toSafe:function(){return this.replace(/\$/g,"&#36;")},padLeft:function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d=b+d,c++;return d},padRight:function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d+=b,c++;return d},movePointLeft:function(a){var b,c,d,e,f,g;return e=".",g="",b=this?this:"",0>=a?b:(f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"","-"==c.slice(0,1)&&(c=c.slice(1),g="-"),c.length<=a&&(e="0.",c=c.padLeft(a)),g+c.slice(0,-a)+e+c.slice(-a)+d)},movePointRight:function(a){var b,c,d,e,f;return e=".",b=this?this:"",0>=a?b:(f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"",d.length<=a&&(e="",d=d.padRight(a)),c+d.slice(0,a)+e+d.slice(a,d.length))},movePoint:function(a){return a>=0?this.movePointRight(a):this.movePointLeft(-a)}}),Function.prototype.bind=function(){var a=this,b=$XA(arguments),c=b.shift();return function(){return a.apply(c,b.concat($XA(arguments)))}}}(),IX.UUID=function(){var a="0123456789ABCDEF";return{generate:function(){var b=new Array,c=0;for(c=0;36>c;c++)b[c]=Math.floor(16*Math.random());for(b[14]=4,b[19]=3&b[19]|8,c=0;36>c;c++)b[c]=a[b[c]];return b[8]=b[13]=b[18]=b[23]="",b.join("")}}}(),IX.ns("IX.Util"),IX.Util.Image=function(){var a=function(a,b,c,d,e){var f=document.createElement("canvas");f.width=b,f.height=c;var g=f.getContext("2d");g.drawImage(a,(b-d)/2,(c-e)/2,d,e);var h=f.toDataURL("image/png");return delete f,h},b=function(a,b,c,d){var e=a/c,f=b/d;return e>=1&&f>=1?[c,d]:(e=Math.min(e,f),[c*e,d*e])},c=function(c,d){if(!c)return null;var e=new Image;e.src=c.src;var f=b($XP(d,"width",e.width),$XP(d,"height",e.height),e.width,e.height);if(f[0]*f[1]==0)return null;var g=a(e,f[0],f[1],f[0],f[1]);return delete e,{url:c.src,w:f[0],h:f[1],data:g}},d=function(c,d,e){if(c){var f=new Image;f.src=d.data;var g=e?c:f,h=b(g.width,g.height,f.width,f.height),i=a(f,g.width,g.height,h[0],h[1]);delete f,c.src=i}};return{getData:c,setData:d}}(),IX.Util.Date=function(a){var b=new Date(1e3*a),c=function(a){var b="get"+(IX.Date.isUTC()?"UTC":"");return IX.map(["FullYear","Month","Date","Hours","Minutes","Day"],function(c){var d=a[b+c]()-("Month"==c?-1:0);if("Hours"!=c&&"Minutes"!=c)return d;var e="00"+d;return e.substring(e.length-2)})},d=function(a,b){var c=""+a,d=b||2;return("0".multi(d)+c).substr(c.length,d)},e=c(b);return{toText:function(){return IX.Date.format(b)},toWeek:function(){return e[5]},toDate:function(a){var b=c(new Date);return a=a||b[0]>e[0],[a?e[0]:"",a?"年":"",e[1],"月",e[2],"日"].join("")},toTime:function(){return[e[3],e[4]].join(":")},toShort:function(){var a=IX.Date.getDS(),b=IX.Date.getTS(),f=c(new Date),g=new Array,h=!1;return e[0]!=f[0]&&(h=!0,g.push(d(e[0],4)),g.push(a)),(h||e[1]!=f[1]||e[2]!=f[2])&&(g.push(d(e[1])),g.push(a),g.push(d(e[2])),g.push(" ")),g.push(d(e[3])),g.push(b),g.push(d(e[4])),g.join("")},toInterval:function(b){var f=b?new Date(1e3*b):new Date,g=f.getTime()/1e3-a;if(10>g)return"刚才";if(60>g)return Math.round(g)+"秒之前";if(3600>g)return Math.round(g/60)+"分钟前";var h="/",i=":",j=c(f),k=new Array,l=!1;return e[0]!=j[0]&&(l=!0,k.push(d(e[0],4)),k.push(h)),l||e[1]!=j[1]||e[2]!=j[2]?(k.push(d(e[1])),k.push(h),k.push(d(e[2])),k.push(" ")):k.push("今天"),k.push(d(e[3])),k.push(i),k.push(d(e[4])),k.join("")},toSimpleInterval:function(){return IX.Date.getDateText(a,IX.getTimeInMS()/1e3)}}},IX.Util.Event={target:function(a){return a.target||a.srcElement},stopPropagation:function(a){a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0},preventDefault:function(a){return a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1,!1},stop:function(a){IX.Util.Event.preventDefault(a),IX.Util.Event.stopPropagation(a)}};var getIXScriptEl=function(){if("scripts"in document)for(var a=document.scripts,b=0;b<a.length;b++)if(a[b].src.indexOf("ixutils.js")>=0)return a[b];for(var c=$XD.first(document.documentElement,"head"),d=$XD.first(c,"script");d&&!(d.src.indexOf("ixutils.js")>=0);)d=$XD.next(d,"script");return d};!function(){var a=getIXScriptEl(),b=a?a.src:"";IX.SELF_PATH=b,IX.SCRIPT_ROOT=b.substring(0,b.indexOf("lib/ixutils.js"))}(),function(){function a(a,b){return IX.loop(a,{},function(a,c,d){var e=b.length>d?b[d]:null;return IX.isEmpty(e)&&(e=f[c]),a[c]=e,a})}function b(b){var c=new IX.IListManager,d=function(d){var e=d[0];IX.isEmpty(e)||c.register(e,a(b,d))};return{map:function(a){IX.iterate(a,d)},getAll:c.getAll,get:c.get}}function c(a,b){return IX.isFn(k)?k(a,b):""}function d(a,b){return h[b?"createCaller":"createRouter"](IX.map(a,function(a){var b=IX.isString(a);return IX.inherit(j.get(b?a:a.name),b?{}:a)}))}function e(a){g.init(a),h.init(a)}var f={name:"",url:"",urlType:"site",type:"GET"},g=IX.urlEngine,h=IX.ajaxEngine,i=new b(["name","url","urlType"]),j=new b(["name","url","urlType","type"]),k=null;IX.ns("Hualala"),Hualala.urlEngine={init:e,reset:e,mappingUrls:function(a){i.map(a),k=g.createRouter(i.getAll())},genUrls:function(a){return IX.map(a,c)},genUrl:function(a,b){return c(a,b)}},Hualala.ajaxEngine={init:e,reset:e,mappingUrls:j.map,createCaller:function(a){return d(a,!0)},createRoute:d}}(),function(){IX.ns("Hualala.Common"),Hualala.Common.getSourceImage=function(a,b){var c=IX.inherit({watermark:!1,scale:"lockMin",width:null,height:null,cut:null,offsetX:null,offsetY:null,rotate:null,quality:null},b),d=$XP(c,"watermark",!1)?Hualala.Global.IMAGE_RESOURCE_WATERMARK_DOMAIN:Hualala.Global.IMAGE_RESOURCE_DOMAIN;if(!a||IX.isObject(a))return"";var e=a.lastIndexOf("/");fileName=a.slice(e+1),suffix="",a=a.slice(0,e),suffix=fileName.replace(/^(.*)\.(jpg|jpeg|png|gif|ico)/i,"$2").toLowerCase(),fileName=fileName.replace(/^(.*)\.(jpg|jpeg|png|gif|ico)/i,"$1");var f=$XP(c,"width",null),g=$XP(c,"height",null),h=$XP(c,"offsetX",null),i=$XP(c,"offsetY",null),j=$XP(c,"scale"),k="",l=$XP(c,"cut",null),m="",n=$XP(c,"rotate",null),o=$XP(c,"quality",null),p=[],q={percent:"-",lockMin:"",lockMax:"_",unlock:"!",lockMinZoomOut:")",lockMinZoomIn:"(",lockMaxZoomOut:")_",lockMaxZoomIn:"(_",unlockZoomOut:")!",unlockZoomIn:"(!"},r={normal:"c",max:"C"};k=IX.isEmpty(f)&&IX.isEmpty(g)?"":IX.isEmpty(f)||IX.isEmpty(g)?"percent"==j?"="+(IX.isEmpty(f)?g:f)+q[j]:"":"="+f+("percent"==j?q[j]:"")+"x"+g+q[j],IX.isEmpty(l)?m="":(k="",m=IX.isEmpty(f)||IX.isEmpty(g)?"":r[l]+f+"x"+g+"+"+(h||0)+"+"+(i||0)),!IX.isEmpty(n)&&n>0&&p.push("rotate="+n),!IX.isEmpty(o)&&o>0&&p.push("quality="+o),p=p.join("&");var s=d+"/"+a+"/"+fileName+k+m+"."+suffix+(p.length>0?"?"+p:"");return s}}(jQuery),function(a){IX.ns("Hualala.Common");Hualala.Common.loadImageErr=function(a){!a||!a.parentNode};var b=null;Hualala.Common.avatarFn=function(a,c,d){return IX.isEmpty(a)&&(b||(b=Hualala.Global.getDefaultImage("photo")),a=b),'<img src="'+a+'" class="'+(d||"avatar-32")+'" onerror="Hualala.Common.loadImageErr(this, \''+(c||"photo")+"');\"/>"},Hualala.Date=IX.Util.Date,Hualala.Common.formatDateTimeValue=function(a){if(IX.isEmpty(a)||!IX.isString(a))return"";var b=14,c=a.length,d="00000000000000";return b>c&&(a+=d.slice(0,b-c)),a.replace(/([\d]{4})([\d]{2})([\d]{2})([\d]{2})([\d]{2})([\d]{2})/g,"$1/$2/$3 $4:$5:$6")},Hualala.Common.setCenter=function(a,b,c){!b&&(b=document.documentElement||document.body),!c&&(c={}),a.style.top=(b.clientHeight-a.clientHeight)/2+(c.top||0)+"px",a.style.left=(b.clientWidth-a.clientWidth)/2+(c.left||0)+"px"},Hualala.Common.strByteLength=function(a){var b,c=0;for(b=0;b<a.length;b++){var d=a.charCodeAt(b);c+=d>=0&255>=d?1:2}return c},Hualala.Common.substrByte=function(a,b){var c=a.slice(0,b),d=c.replace(/[^\x00-\xff]/g,"**").length;if(b>=d)return c;switch(d-=c.length){case 0:return c;case b:return a.slice(0,b>>1);default:var e=b-d,f=a.slice(e,b),g=f.replace(/[\x00-\xff]/g,"").length;return g?a.slice(0,e)+Hualala.Common.substrByte(f,g):a.slice(0,e)}},Hualala.Common.Browser=function(){var a={},b=navigator.userAgent.toLowerCase(),c=null;return(c=b.match(/rv:([\d.]+)\) like gecko/))?a.ie=c[1]:(c=b.match(/msie ([\d.]+)/))?a.ie=c[1]:(c=b.match(/chrome\/([\d.]+)/))?a.chrome=c[1]:(c=b.match(/firefox\/([\d.]+)/))?a.firefox=c[1]:(c=b.match(/opera.([\d.]+)/))?a.opera=c[1]:(c=b.match(/version\/([\d.]+).*safari/))?a.safari=c[1]:0,a}(),Hualala.Common.getMinuteIntervalOptions=function(a){$XP(a,"startLabel","不限"),$XP(a,"start",0),$XP(a,"end",Hualala.Constants.SecondsOfDay/60)},Hualala.Common.parseForm=function(b){var c=a(b);if(!c[0])return null;var d=c.serializeArray();if(!d.length)return null;var e={};return a.each(d,function(a,b){e[b.name]=b.value}),e},Hualala.Common.codeMask=function(a,b,c){a=a?a.toString():"";var d=a.length,e="";return b=IX.isEmpty(b)?0:parseInt(b),c=IX.isEmpty(c)?d:parseInt(c),e=a.slice(0,b)+a.slice(b,c).replace(/[\w]/g,"*")+a.slice(c),{orig:a,val:e}},Hualala.Common.mapBankInfo=function(a){var b=Hualala.TypeDef.BankOptions,c=new IX.IListManager,d=[16,32,48,64];return _.each(b,function(a){var b=$XP(a,"value"),e=$XP(a,"label"),f={};_.each(d,function(a){f["icon_"+a]="icon-"+b+"-"+a}),c.register(b,IX.inherit({code:b,name:e},f))}),c.get(a)},Hualala.Common.getShopUrl=function(a){return Hualala.Global.HualalaWebSite+"/shop_"+a}}(jQuery),function($){var prettyNumeric=function(a,b){if(isNaN(a))return a.toString();var c=a.toString().split("."),d=c[0],e=c[1],f=d.length,g="";if(b=b?b:",",f>3){var h=parseInt(f/3),i=f%3;g=0==i?"":d.slice(0,i)+b;for(var j=0;h>j;j++)g+=d.slice(i+3*j,i+3*(j+1))+b;g=g.slice(0,-1)+"."+e}else g=a;return g},restoreNumeric=function(a,b){b=b?b:",";var c=a.split(b).join("");return isNaN(c)?a:Number(c)},prettyPrice=function(a){a=parseFloat(a).toFixed(2).toString(),a=a.replace(/0+$/,"");var b=a.indexOf(".");return b==a.length-1&&(a=a.substr(0,b)),a},add=function(){var a=0,b=$XA(arguments),c=0;return _.each(b,function(b){var c=0;try{c=b.toString().split(".")[1].length}catch(d){c=0}a=c>a?c:a}),_.each(b,function(b){c+=Number(b.toString().movePoint(a))}),Number(c.toString().movePoint(-a))},sub=function(){var a,b=0,c=$XA(arguments),d=0;return _.each(c,function(a){var c=0;try{c=a.toString().split(".")[1].length}catch(d){c=0}b=c>b?c:b}),a=b,_.each(c,function(a,c){d=0==c?Number(a.toString().movePoint(b)):d-Number(a.toString().movePoint(b))}),Number(numberToFixed(Number(d.toString().movePoint(-b)),a))},multi=function(){var a=0,b=$XA(arguments),c=1;return _.each(b,function(b){try{a+=b.toString().split(".")[1].length}catch(c){}}),_.each(b,function(a){c*=Number(a.toString().replace(".",""))}),Number(c.toString().movePoint(-a))},div=function(){var baseNum=[],args=$XA(arguments),ret=1,scale=0;with(_.each(args,function(a){try{baseNum.push(a.toString().split(".")[1].length)}catch(b){baseNum.push(0)}}),Math)return _.each(args,function(a,b){var c=Number(a.toString().replace(".",""));ret=0==b?c:ret/c}),_.each(baseNum,function(a,b){scale=0==b?a:scale-a}),Number(ret.toString().movePoint(-scale))},numberToFixed=function(b,c){var d,e,f,g;return c=c||0,e=b+"",g=e.indexOf("."),d=e.movePoint(c),g>=0&&(f=Number(e.substr(g+c+1,1)),a=f>=5&&b>=0||5>f&&0>b?Math.ceil(d):Math.floor(d)),Number(a.toString().movePoint(-c))};IX.ns("Hualala.Common"),Hualala.Common.Math={prettyNumeric:prettyNumeric,restoreNumeric:restoreNumeric,prettyPrice:prettyPrice,add:add,sub:sub,multi:multi,div:div,numberToFixed:numberToFixed}}(jQuery),function(){IX.ns("Hualala.TypeDef"),Hualala.TypeDef.SiteNavType=[{name:"order",label:"订单"},{name:"account",label:"结算"},{name:"shop",label:"店铺管理"},{name:"setting",label:"业务设置"},{name:"user",label:"账号管理"}],Hualala.TypeDef.OrderSubNavType=[{name:"order",label:"概览",pkeys:[]},{name:"orderQuery",label:"订单查询",pkeys:["startDate","endDate","cityID","shopID","orderStatus","userMobile","orderID","s_orderTotal","e_orderTotal"]},{name:"orderQueryDay",label:"订单日汇总",pkeys:["startDate","endDate","cityID","shopID","orderStatus"]},{name:"orderQueryDuring",label:"订单期间汇总",pkeys:["startDate","endDate","cityID","shopID","orderStatus"]},{name:"orderDishesHot",label:"菜品销量排行榜",pkeys:["startDate","endDate","cityID","shopID","foodCategoryName"]},{name:"orderQueryCustomer",label:"顾客统计",pkeys:["startDate","endDate","cityID","shopID","userLoginMobile","userName"]}],Hualala.TypeDef.GENDER=[{value:"0",valueStr:"female",label:"女士"},{value:"1",valueStr:"male",label:"先生"},{value:"2",valueStr:"unkonwn",label:"未知"}],Hualala.TypeDef.ShopNoteType={TASTE:10,COOKING:20,FOOD_COMMENT:30,ORDER_COMMENT:40,FREE_REASON:45,RETURN_REASON:50,CHARGE_BACK:60},Hualala.TypeDef.OrderSubType={EATIN:0,RESERVE:10,Flash:11,DIY:12,QUEUE:15,TAKEOUT:20,PICKUP:21},Hualala.TypeDef.TimeID={allday:{value:0,label:"全天"},breakfast:{value:1,label:"早餐"},lunch:{value:2,label:"午餐"},afternoon:{value:3,label:"下午茶"},dinner:{value:4,label:"晚餐"},supper:{value:5,label:"夜宵"}},Hualala.TypeDef.ShopStatus=[{value:0,label:"待开放"},{value:1,label:"正常"},{value:2,label:"装修暂停营业"},{value:3,label:"菜单更新暂停服务"},{value:4,label:"信息更新暂停服务"},{value:5,label:"店内放假暂停服务"},{value:8,label:"信息完善中"},{value:9,label:"已关闭"}],Hualala.TypeDef.OrderStatus=[{value:"",label:"全部"},{value:"20",label:"待消费(已付款)"},{value:"30",label:"已退单"},{value:"40",label:"已消费"}],Hualala.TypeDef.FoodAttr={AUTOADD:1,SPECIALTY:1,RECOMMEND:1,NEW:1,DISCOUNT:1,COMMENTS:1,CANREFUND:1,SETFOOD:1,TakeawayTag:{NOTAKEAWAY:0,TAKEAWAY:1,ONLYTAKEAWAY:2},HASIMAGE:1},Hualala.TypeDef.FSMTransType=[{value:"",label:"全部"},{value:101,label:"网上订餐消费",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"},{value:102,label:"账户充值",tpl:"tpl_fsmcustomer_detail",queryCall:"Hualala.Global.queryAccountFsmCustomerDetail",queryKeys:"SUA_TransItemID,transType"},{value:103,label:"网上订餐用券",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"},{value:104,label:"到店消费验券",tpl:"tpl_chktick_detail",queryCall:null,queryKeys:null},{value:105,label:"会员卡充值",tpl:"tpl_fsmcustomer_detail",queryCall:"Hualala.Global.queryAccountFsmCustomerDetail",queryKeys:"SUA_TransItemID,transType"},{value:199,label:"账户资金调加"},{value:201,label:"订餐消费后退款",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"},{value:202,label:"平台预付款"},{value:203,label:"提现",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"},{value:207,label:"订餐消费后退券",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"},{value:299,label:"账户资金调减"},{value:410,label:"店内自助",tpl:"tpl_orderpay_detail",queryCall:"Hualala.Global.queryAccountOrderPayDetail",queryKeys:"orderKey,orderID"}],Hualala.TypeDef.FSMTransStatus=[{value:"",label:"全部"},{value:0,label:"等待交易完成"},{value:1,label:"交易成功"},{value:2,label:"交易关闭"}],Hualala.TypeDef.FSMTransDetail=[{value:10,label:"预付款.现金"},{value:11,label:"预付款.支票"},{value:12,label:"预付款.银行转账"},{value:13,label:"预付款.刷银行卡"},{value:18,label:"预付款.商户让利"},{value:20,label:"帐户充值.现金"},{value:21,label:"帐户充值.支票"},{value:22,label:"帐户充值.银行转账"},{value:23,label:"帐户充值.刷银行卡"},{value:24,label:"帐户充值.在线支付"},{value:30,label:"帐户提现.现金"},{value:31,label:"帐户提现.支票"},{value:32,label:"帐户提现.银行转账"},{value:33,label:"帐户提现.刷银行卡"}],Hualala.TypeDef.AccountReceiverTypes=[{value:2,label:"单位"},{value:1,label:"个人"}],Hualala.TypeDef.ShopBusiness=[{id:10,label:"常规预订",name:"commonreserve_order",businessIsSupported:!1,callServer:null,formKeys:"advanceTime,noticeTime,minAmount,holidayFlag,servicePeriods,reserveTableTime,reserveTableDesc,payMethod"},{id:11,label:"闪吃",name:"justeat_order",businessIsSupported:!0,callServer:"Hualala.Global.setJustEatParams",formKeys:"advanceTime,noticeTime,minAmount,holidayFlag,servicePeriods,reserveTableTime,reserveTableDesc,payMethod"},{id:20,label:"外送",name:"takeaway_order",businessIsSupported:!1,callServer:null,formKeys:"advanceTime,noticeTime,minAmount,serviceAmount,freeServiceAmount,holidayFlag,servicePeriods,takeawayDeliveryAgent,takeawayDeliveryTime,takeawayScope,takeawayScopeDesc,payMethod"},{id:21,label:"到店自提",name:"takeout_order",businessIsSupported:!1,callServer:null,formKeys:"advanceTime,freeServiceAmount,holidayFlag,minAmount,serviceAmount,servicePeriods,noticeTime,payMethod"},{id:41,label:"店内自助",name:"spot_order",businessIsSupported:!0,callServer:"Hualala.Global.setSpotOrderParams",formKeys:"fetchFoodMode,payMethodAtShop,payBeforeCommit,supportCommitToSoftware",operationMode:{0:"fetchFoodMode,supportCommitToSoftware",1:"payMethodAtShop,payBeforeCommit,supportCommitToSoftware"}}],Hualala.TypeDef.PayMethodOptions=[{value:0,label:"仅支持在线支付"},{value:1,label:"仅支持线下支付"},{value:2,label:"均支持"}],Hualala.TypeDef.PayMethodAtShopOptions=[{value:0,label:"均不支持"},{value:1,label:"直接输入金额付款"},{value:2,label:"扫码付款"},{value:3,label:"均支持"}],Hualala.TypeDef.FetchFoodModeOptions=[{value:0,label:"流水号模式"},{value:1,label:"牌号模式"},{value:2,label:"收银台直接取餐"}],Hualala.TypeDef.HolidayFlagOptions=[{value:0,label:"包含节假日"},{value:1,label:"只能在节假日"},{value:2,label:"不包含节假日"}],Hualala.TypeDef.MinuteIntervalOptions=function(a){for(var b=a||Hualala.Constants.SecondsOfDay/60,c=15,d=1,e=[],f=0,g=Hualala.Constants.SecondsOfHour/60,h=24*g,i=function(a){if(0==a)return"不限";var b=a%h==0?a/h:0;return hour=g>a||a%h==0?0:a==g?1:parseInt(a/g),min=a%g,(0==b?"":b+"天")+(0==hour?"":hour+"小时")+(0==min?"":min+"分钟")};b>=f;)e.push({value:f,label:i(f)}),g>f?f+=c*d:3*g>f?(d=2,f+=c*d):12*g>f?(d=12,f+=c*d):24*g>=f&&(d=48,f+=c*d);return e},Hualala.TypeDef.BankOptions=[{value:"CBC",label:"中国建设银行"},{value:"BC",label:"中国银行"},{value:"ABC",label:"中国农业银行"},{value:"ICBC",label:"中国工商银行"},{value:"PSBC",label:"中国邮政储蓄"},{value:"CEBB",label:"中国光大银行"},{value:"CGB",label:"广发银行"},{value:"CMB",label:"招商银行"},{value:"CMBC",label:"民生银行"},{value:"CDB",label:"国家开发银行"},{value:"CIB",label:"兴业银行"},{value:"BCM",label:"交通银行"},{value:"HXB",label:"华夏银行"},{value:"SPDB",label:"浦发银行"},{value:"HSBC",label:"汇丰银行"},{value:"Other",label:"其他"}]}(jQuery),function(){IX.ns("Hualala.Constants"),IX.extend(Hualala.Constants,{NameOfDay:["周日","周一","周二","周三","周四","周五","周六"],SecondsOfHour:3600,SecondsOfDay:86400,SecondsOfWeek:604800,NumberKeys:[1,2,3,4,5,6,7,8,9,0],Alphabet:"abcdefghijklmnopqrstuvwxyz".split(""),PersonUnit:"人",CashUnit:"元"})}(jQuery),function(a,b){var c={routes:[],mode:null,root:"",config:function(a){this.mode="history"==$XP(a,"mode","history")&&history.pushState?"history":"hash",this.root=a&&a.root?"/"+this.clearSlashes(a.root)+"/":"/"},getFragment:function(){var a="";if("history"==this.mode)a=this.clearSlashes(decodeURI(location.pathname+location.search)),a=a.replace(/\?(.*)$/,""),a+=location.hash,a="/"!=this.root?a.replace(this.root,""):a;else{var c=b.location.href.match(/#(.*)$/);a=c?c[1]:""}return this.clearSlashes(a)},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(a,b){return IX.isFn(a)&&(b=a,a=""),this.routes.push({re:a,handler:b}),this},remove:function(a){var b,c=0;for(this.routes.length;b=this.routes[c];c++)if(b.handler===a||b.re===a)return this.routes.splice(c,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},check:function(a){for(var b=a||this.getFragment(),c=0,d=this.routes.length;d>c;c++){var e=b.match(this.routes[c].re);if(e)return e.shift(),this.routes[c].handler.apply({},e),this}return this},listen:function(){var a=this,b=a.getFragment(),c=function(){b!==a.getFragment()&&(b=a.getFragment(),a.check(b))};return clearInterval(this.interval),this.interval=setInterval(c,50),this},navigate:function(a){return a=a||"","history"==this.mode?history.pushState(null,null,this.root+"#"+this.clearSlashes(a)):(b.location.href.match(/#(.*)$/),b.location.href=b.location.href.replace(/#(.*)$/,"")+"#"+a),this}};IX.ns("Hualala"),Hualala.Router=c}(jQuery,window);var Pymatch=function(){function a(a){this.setNames(a)}function b(a,b){var c=i[a];if(c){var d=i[b];return d&&c==d}return!1}function c(a){var b,c=a.charAt(0);if("z"==c||"c"==c||"s"==c)return b=a.charAt(1),c+("h"==b?a.substr(2):"h"+a.substr(1));var d=i[c];return d?(b=d.charAt(0),(b==c?d.charAt(1):b)+a.substr(1)):!1}function d(a,b,c){var e=a.length,f=[],g=a.charAt(0);if("a">g||g>"z")if(1>=e)f=[[g]];else{var h=a.substr(1),i=c[h];void 0==i&&(i=d(h,b,c)),i&&(i.length<=1&&(i=i[0]),f=[[g].concat(i)])}else for(var j=1;e>=j&&(g=a.substr(0,j),b[g]);++j)if(e>j){var h=a.substr(j),i=c[h];if(void 0==i&&(i=d(h,b,c)),!i)continue;i.length<=1&&(i=i[0]),f.unshift([g].concat(i))}else f.unshift([g]);return f.length<=0&&(f=!1),c[a]=f,f}function e(a,b,d){var e,f=b.length,g=a.length;for(e=0;f>e;++e){var h=b[e];if(h.substr(0,g)==a){var i=h.length-1;return 0>=i?k:k+l*(g-1)/i}}if(d){var j=c(a);if(!j)return!1;for(g=j.length,e=0;f>e;++e){var h=b[e];if(h.substr(0,g)==j){var i=h.length-1,o=m,p=h.charAt(0);if("z"==p||"c"==p||"s"==p){o+=n;var q=h.charAt(1);"h"==q&&(g-=1,i-=1)}return 0>=i?o:o+l*(g-1)/i}}}return!1}function f(a,b,c,d,g){if(!a)return!1;for(var h,i=a.length,k=0;i>k&&"string"==typeof a[k];++k);for(;d>=c+k;){for(var l=c,m=0,n=0;k>m;++m,++l){var o=a[m],p=o.charAt(0);if(p>="a"&&"z">=p){if(h=e(o,b[l],";"!=b[0].charAt(l-1)),h===!1)break;n+=h}else{if(p!=b[0].charAt(l-1))break;n+=j}}if(m>=k){if(m>=i)return[c,k,n];for(;i>m;++m){var o=a[m];if(h=f(o,b,l,d,!0))return[c,k+h[1],n+h[2]]}}if(g)return!1;++c}return!1}function g(a,b,e,g){if(a.length<=0)return!1;void 0==e&&(e=1),void 0==g&&(g=b.length),pinyin={};for(var h=e;g>h;++h){var i,j=b[h],k=j.length,l=";"!=b[0].charAt(h-1);for(i=0;k>i;++i){var m,n=j[i],o=n.length;for(m=1;o>=m;++m)pinyin[n.substr(0,m)]=!0;if(l){var p=c(n);if(!p)continue;for(o=p.length,m=1;o>=m;++m)pinyin[p.substr(0,m)]=!0}}}var q=d(a,pinyin,{});return f(q,b,e,g,!1)}function h(){var a,c,d,e,f,h=this.stkp-1,l=[];if(0>=h){var o=this.instr[h],p=o>="a"&&"z">=o;if(p){var q=i[o];q||(q=o),d=this.pyidx[q]}else d=this.idx[o];if(d)for(c=d.length,a=0;c>a;a+=2){var r=d[a],s=d[a+1],t=this.names[r];if(p){var u,v=t[s+1],w=v.length,x=m;for(u=0;w>u;++u){var y=v[u],z=y.charAt(0);if(o==z){x=";"==t[0].charAt(s)||"z"!=o&&"c"!=o&&"s"!=o||"h"!=y.charAt(1)?k:n;break}if(b(o,z))break}if(u>=w)throw"Pymatch internal data error";e=[r,s+1,1,x]}else e=[r,s+1,1,j];l.push(e)}}else{d=this.stack[h-1],c=d.length;var A=this.instr.substr(0,h+1);for(a=0;c>a;++a){f=d[a];var r=f[0];e=g(A,this.names[r],f[1]),e&&l.push([r].concat(e))}}this.stack[h]=l}var i={l:"ln",n:"ln"},j=1.2,k=.3,l=1-k,m=0,n=.1;return a.prototype={setNames:function(a){this.rnames=a,this.names=[],this.pyidx={},this.idx={},this.stack=[],this.instr="",this.stkp=0;var b,c=a?a.length:0;for(b=0;c>b;++b){var d=a[b],e=d.name,f=d.py;f=f&&""!=f?f.split(";"):[];var g,h,j=e.length,k="",l=0,m=b,n=!0;for(g=0;j>g;++g){var o=e.charAt(g);if(n){if(o>="A"&&"Z">=o||o>="a"&&"z">=o){n=!1,h=g;continue}}else{if(o>="a"&&"z">=o)continue;if(k+=";",f.splice(l,0,e.substr(h,g-h).toLowerCase()),++l,o>="A"&&"Z">=o){h=g;continue}n=!0}if(k.indexOf(o)<0){var p=this.idx[o];p?p.push(m,l):this.idx[o]=[m,l]}k+=o,++l}n||(k+=";",f.splice(l,0,e.substr(h).toLowerCase()),++l);var q={};for(g=0;l>g;++g)if(f[g]){f[g]=f[g].split(",");var r,s=f[g],t=s.length;for(r=0;t>r;++r){var o=s[r].charAt(0),u=i[o];if(u&&(o=u),!q[o]){var p=this.pyidx[o];p?p.push(m,g):this.pyidx[o]=[m,g],q[o]=!0}}}f.unshift(k),this.names.push(f)}},input:function(a){var b,c=a.length;for(b=0;c>b;++b){var d=a.charAt(b);if(";"!=d){var e=this.stkp;this.stkp=e+1,(e>=this.instr.length||d!=this.instr.charAt(e))&&(d>="A"&&"Z">=d&&(d=d.toLowerCase()),this.instr=this.instr.substr(0,e)+d,h.apply(this))}}},back:function(a){var b=this.stkp;b>=a&&(this.stkp=b-a)},clear:function(){this.stkp=0},match:function(a){return this.clear(),this.input(a),this.get_match()},get_input:function(){return this.instr.substr(0,this.stkp)},get_match:function(){var a=this.stkp;if(0>=a)return[];for(var b=this.stack[a-1],c=b.length,d=[],e=0;c>e;++e){var f=b[e],g=f[0],h=this.names[g][0].length;d.push([this.rnames[g],(f[3]+(h-f[1]+1)/h)/h])}return d.sort(function(a,b){return b[1]-a[1]}),d}},a}();!function(){IX.ns("Hualala");var a="zh-cn,zh-tw,en,";Hualala.Matcher=function(b){var c=$.extend(!0,{lang:"zh-cn"},b),d=new Pymatch([]),e=function(a,b){b&&b()},f=function(a,b,c){d.setNames(b),c.call(null,d.match(a))};return e(c.lang),{match:function(b,c,d,g){g&&a.indexOf(g+",")>-1?e(g,function(){f(b,c,d)}):f(b,c,d)},refresh:function(b){b=b&&a.indexOf(b+",")>-1?b:c.lang,e(c.lang)}}}}();
//# sourceMappingURL=common.min.map